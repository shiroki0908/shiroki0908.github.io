<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Solitude主题魔改教程(18)-相册页图片防复制防下载功能实现</title>
      <link href="/2025/01/30/Solitude%E4%B8%BB%E9%A2%98%E9%AD%94%E6%94%B9%E6%95%99%E7%A8%8B(18)-%E7%9B%B8%E5%86%8C%E9%A1%B5%E5%9B%BE%E7%89%87%E9%98%B2%E5%A4%8D%E5%88%B6%E9%98%B2%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0/"/>
      <url>/2025/01/30/Solitude%E4%B8%BB%E9%A2%98%E9%AD%94%E6%94%B9%E6%95%99%E7%A8%8B(18)-%E7%9B%B8%E5%86%8C%E9%A1%B5%E5%9B%BE%E7%89%87%E9%98%B2%E5%A4%8D%E5%88%B6%E9%98%B2%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<h1>Solitude主题魔改教程(18)-相册页图片防复制防下载功能实现</h1><h2 id="前言">前言</h2><p>在上一篇教程中，我们实现了Banner图片和视频的防复制防下载功能。本篇教程将继续扩展防护范围，为相册页面的所有图片提供全面的防护保护，包括相册封面、照片墙、模态框中的大图和缩略图等。</p><h2 id="功能预览">功能预览</h2><h3 id="防护范围">防护范围</h3><ul><li>✅ 相册封面图片防护</li><li>✅ 照片墙图片防护</li><li>✅ 模态框主图防护</li><li>✅ 缩略图智能防护（保持点击功能）</li><li>✅ 动态加载图片防护</li></ul><h3 id="防护特性">防护特性</h3><ul><li>🛡️ 禁用右键菜单</li><li>🛡️ 禁用图片拖拽</li><li>🛡️ 禁用文本选择</li><li>🛡️ 防止长按保存（移动端）</li><li>🛡️ 键盘快捷键防护</li><li>🛡️ 开发者工具检测</li><li>🛡️ 透明遮罩层防护</li></ul><h2 id="实现思路">实现思路</h2><h3 id="防护策略设计">防护策略设计</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">    A[相册页面图片] --&gt; B&#123;图片类型判断&#125;</span><br><span class="line">    B --&gt; C[封面图片]</span><br><span class="line">    B --&gt; D[照片墙图片]</span><br><span class="line">    B --&gt; E[模态框主图]</span><br><span class="line">    B --&gt; F[缩略图]</span><br><span class="line">    </span><br><span class="line">    C --&gt; G[完整防护]</span><br><span class="line">    D --&gt; G</span><br><span class="line">    E --&gt; G</span><br><span class="line">    F --&gt; H[轻度防护]</span><br><span class="line">    </span><br><span class="line">    G --&gt; I[右键+拖拽+选择+遮罩层]</span><br><span class="line">    H --&gt; J[右键+拖拽保持点击]</span><br><span class="line">    </span><br><span class="line">    style F fill:#e1f5fe</span><br><span class="line">    style H fill:#e8f5e8</span><br><span class="line">    style G fill:#fff3e0</span><br></pre></td></tr></table></figure><h3 id="防护等级设计">防护等级设计</h3><table><thead><tr><th>元素类型</th><th>防护等级</th><th>包含功能</th><th>保留功能</th></tr></thead><tbody><tr><td>相册封面</td><td>完整防护</td><td>右键+拖拽+选择+遮罩层</td><td>无</td></tr><tr><td>照片墙图片</td><td>完整防护</td><td>右键+拖拽+选择+遮罩层</td><td>无</td></tr><tr><td>模态框主图</td><td>完整防护</td><td>右键+拖拽+选择</td><td>无遮罩层</td></tr><tr><td>缩略图</td><td>轻度防护</td><td>右键+拖拽</td><td>点击切换</td></tr></tbody></table><h2 id="文件结构">文件结构</h2><p>本次魔改需要创建以下文件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">themes/solitude/source/</span><br><span class="line">├── css/custom/</span><br><span class="line">│   └── album-protection.css       # 相册防护样式</span><br><span class="line">└── js/custom/</span><br><span class="line">    └── album-protection.js        # 相册防护脚本</span><br></pre></td></tr></table></figure><h2 id="实现步骤">实现步骤</h2><h3 id="步骤1：创建相册防护CSS">步骤1：创建相册防护CSS</h3><p>创建文件 <code>themes/solitude/source/css/custom/album-protection.css</code>：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 相册页面图片防护样式 */</span></span><br><span class="line"><span class="comment">/* Album Page Image Protection Styles */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 相册页面图片通用防护 */</span></span><br><span class="line"><span class="selector-id">#album_section</span> <span class="selector-tag">img</span>,</span><br><span class="line"><span class="selector-class">.album_container</span> <span class="selector-tag">img</span>,</span><br><span class="line"><span class="selector-class">.album_card</span> <span class="selector-tag">img</span>,</span><br><span class="line"><span class="selector-id">#photo_wall_section</span> <span class="selector-tag">img</span>,</span><br><span class="line"><span class="selector-class">.photo_container</span> <span class="selector-tag">img</span>,</span><br><span class="line"><span class="selector-class">.photo_wall</span> <span class="selector-tag">img</span>,</span><br><span class="line"><span class="selector-id">#album_modal</span> <span class="selector-tag">img</span>,</span><br><span class="line"><span class="selector-class">.modal_main_image</span>,</span><br><span class="line"><span class="selector-class">.modal_thumbnails</span> <span class="selector-tag">img</span>,</span><br><span class="line"><span class="selector-class">.thumbnail</span> &#123;</span><br><span class="line">    <span class="comment">/* 禁用文本选择 */</span></span><br><span class="line">    -webkit-<span class="attribute">user-select</span>: none;</span><br><span class="line">    -moz-<span class="attribute">user-select</span>: none;</span><br><span class="line">    -ms-<span class="attribute">user-select</span>: none;</span><br><span class="line">    <span class="attribute">user-select</span>: none;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* 禁用拖拽 */</span></span><br><span class="line">    -webkit-user-drag: none;</span><br><span class="line">    -khtml-user-drag: none;</span><br><span class="line">    -moz-user-drag: none;</span><br><span class="line">    -o-user-drag: none;</span><br><span class="line">    user-drag: none;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* 禁用突出显示 */</span></span><br><span class="line">    -webkit-touch-callout: none;</span><br><span class="line">    -webkit-tap-highlight-<span class="attribute">color</span>: transparent;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* 防止长按保存 */</span></span><br><span class="line">    <span class="attribute">pointer-events</span>: auto;</span><br><span class="line">    <span class="attribute">outline</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 相册容器防护 */</span></span><br><span class="line"><span class="selector-id">#album_section</span>,</span><br><span class="line"><span class="selector-class">.album_container</span>,</span><br><span class="line"><span class="selector-id">#photo_wall_section</span>,</span><br><span class="line"><span class="selector-class">.photo_container</span>,</span><br><span class="line"><span class="selector-id">#album_modal</span> &#123;</span><br><span class="line">    <span class="comment">/* 禁用选择 */</span></span><br><span class="line">    -webkit-<span class="attribute">user-select</span>: none;</span><br><span class="line">    -moz-<span class="attribute">user-select</span>: none;</span><br><span class="line">    -ms-<span class="attribute">user-select</span>: none;</span><br><span class="line">    <span class="attribute">user-select</span>: none;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* 防止突出显示 */</span></span><br><span class="line">    -webkit-touch-callout: none;</span><br><span class="line">    -webkit-tap-highlight-<span class="attribute">color</span>: transparent;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 模态框主图片特殊防护 */</span></span><br><span class="line"><span class="selector-class">.modal_main_image</span> &#123;</span><br><span class="line">    <span class="comment">/* 强制防护 */</span></span><br><span class="line">    -webkit-<span class="attribute">user-select</span>: none <span class="meta">!important</span>;</span><br><span class="line">    -moz-<span class="attribute">user-select</span>: none <span class="meta">!important</span>;</span><br><span class="line">    -ms-<span class="attribute">user-select</span>: none <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">user-select</span>: none <span class="meta">!important</span>;</span><br><span class="line">    </span><br><span class="line">    -webkit-user-drag: none <span class="meta">!important</span>;</span><br><span class="line">    -khtml-user-drag: none <span class="meta">!important</span>;</span><br><span class="line">    -moz-user-drag: none <span class="meta">!important</span>;</span><br><span class="line">    -o-user-drag: none <span class="meta">!important</span>;</span><br><span class="line">    user-drag: none <span class="meta">!important</span>;</span><br><span class="line">    </span><br><span class="line">    -webkit-touch-callout: none <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">pointer-events</span>: auto <span class="meta">!important</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* 防止右键菜单 */</span></span><br><span class="line">    -webkit-context-<span class="selector-tag">menu</span>: none;</span><br><span class="line">    -moz-context-<span class="selector-tag">menu</span>: none;</span><br><span class="line">    context-<span class="selector-tag">menu</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 缩略图特殊防护（保持点击功能） */</span></span><br><span class="line"><span class="selector-class">.modal_thumbnails</span> <span class="selector-tag">img</span>,</span><br><span class="line"><span class="selector-class">.thumbnail</span> &#123;</span><br><span class="line">    <span class="comment">/* 强制防护但保持点击 */</span></span><br><span class="line">    -webkit-<span class="attribute">user-select</span>: none <span class="meta">!important</span>;</span><br><span class="line">    -moz-<span class="attribute">user-select</span>: none <span class="meta">!important</span>;</span><br><span class="line">    -ms-<span class="attribute">user-select</span>: none <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">user-select</span>: none <span class="meta">!important</span>;</span><br><span class="line">    </span><br><span class="line">    -webkit-user-drag: none <span class="meta">!important</span>;</span><br><span class="line">    -khtml-user-drag: none <span class="meta">!important</span>;</span><br><span class="line">    -moz-user-drag: none <span class="meta">!important</span>;</span><br><span class="line">    -o-user-drag: none <span class="meta">!important</span>;</span><br><span class="line">    user-drag: none <span class="meta">!important</span>;</span><br><span class="line">    </span><br><span class="line">    -webkit-touch-callout: none <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">pointer-events</span>: auto <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 透明遮罩层防护 */</span></span><br><span class="line"><span class="selector-class">.album-protection-overlay</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">999</span>;</span><br><span class="line">    <span class="attribute">background</span>: transparent;</span><br><span class="line">    <span class="attribute">pointer-events</span>: auto;</span><br><span class="line">    -webkit-<span class="attribute">user-select</span>: none;</span><br><span class="line">    -moz-<span class="attribute">user-select</span>: none;</span><br><span class="line">    -ms-<span class="attribute">user-select</span>: none;</span><br><span class="line">    <span class="attribute">user-select</span>: none;</span><br><span class="line">    -webkit-touch-callout: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 移动端额外防护 */</span></span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">max-width</span>: <span class="number">768px</span>) &#123;</span><br><span class="line">    <span class="selector-id">#album_section</span> <span class="selector-tag">img</span>,</span><br><span class="line">    <span class="selector-class">.album_container</span> <span class="selector-tag">img</span>,</span><br><span class="line">    <span class="selector-id">#album_modal</span> <span class="selector-tag">img</span>,</span><br><span class="line">    <span class="selector-class">.modal_main_image</span>,</span><br><span class="line">    <span class="selector-class">.thumbnail</span> &#123;</span><br><span class="line">        <span class="comment">/* 禁用长按菜单 */</span></span><br><span class="line">        -webkit-touch-callout: none <span class="meta">!important</span>;</span><br><span class="line">        -webkit-<span class="attribute">user-select</span>: none <span class="meta">!important</span>;</span><br><span class="line">        -khtml-<span class="attribute">user-select</span>: none <span class="meta">!important</span>;</span><br><span class="line">        -moz-<span class="attribute">user-select</span>: none <span class="meta">!important</span>;</span><br><span class="line">        -ms-<span class="attribute">user-select</span>: none <span class="meta">!important</span>;</span><br><span class="line">        <span class="attribute">user-select</span>: none <span class="meta">!important</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">/* 禁用双击缩放 */</span></span><br><span class="line">        <span class="attribute">touch-action</span>: manipulation;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">/* 防止长按选择 */</span></span><br><span class="line">        -webkit-user-drag: none <span class="meta">!important</span>;</span><br><span class="line">        user-drag: none <span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 额外的右键菜单禁用 */</span></span><br><span class="line"><span class="selector-class">.album-no-context-menu</span> &#123;</span><br><span class="line">    -webkit-touch-callout: none;</span><br><span class="line">    -webkit-<span class="attribute">user-select</span>: none;</span><br><span class="line">    -khtml-<span class="attribute">user-select</span>: none;</span><br><span class="line">    -moz-<span class="attribute">user-select</span>: none;</span><br><span class="line">    -ms-<span class="attribute">user-select</span>: none;</span><br><span class="line">    <span class="attribute">user-select</span>: none;</span><br><span class="line">    -webkit-context-<span class="selector-tag">menu</span>: none;</span><br><span class="line">    -moz-context-<span class="selector-tag">menu</span>: none;</span><br><span class="line">    context-<span class="selector-tag">menu</span>: none;</span><br><span class="line">    -webkit-user-drag: none;</span><br><span class="line">    user-drag: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="步骤2：创建相册防护JavaScript">步骤2：创建相册防护JavaScript</h3><p>创建文件 <code>themes/solitude/source/js/custom/album-protection.js</code>：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 相册页面图片防护</span></span><br><span class="line"><span class="comment">// Album Page Image Protection</span></span><br><span class="line"></span><br><span class="line">(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="string">&#x27;use strict&#x27;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 防护配置</span></span><br><span class="line">    <span class="keyword">const</span> <span class="variable constant_">PROTECTION_CONFIG</span> = &#123;</span><br><span class="line">        <span class="comment">// 要保护的选择器</span></span><br><span class="line">        <span class="attr">selectors</span>: &#123;</span><br><span class="line">            <span class="attr">albumImages</span>: <span class="string">&#x27;#album_section img, .album_container img, .album_card img, #photo_wall_section img, .photo_container img, .photo_wall img&#x27;</span>,</span><br><span class="line">            <span class="attr">modalImages</span>: <span class="string">&#x27;#album_modal img, .modal_main_image, .modal_thumbnails img, .thumbnail&#x27;</span>,</span><br><span class="line">            <span class="attr">albumContainers</span>: <span class="string">&#x27;#album_section, .album_container, #photo_wall_section, .photo_container, #album_modal&#x27;</span>,</span><br><span class="line">            <span class="attr">allImages</span>: <span class="string">&#x27;img[class*=&quot;album&quot;], img[src*=&quot;album&quot;], img[data-src*=&quot;album&quot;], img[class*=&quot;photo&quot;]&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 防护等级</span></span><br><span class="line">        <span class="attr">protectionLevel</span>: <span class="string">&#x27;high&#x27;</span>, <span class="comment">// low, medium, high</span></span><br><span class="line">        <span class="comment">// 是否显示警告</span></span><br><span class="line">        <span class="attr">showWarnings</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="comment">// 调试模式</span></span><br><span class="line">        <span class="attr">debug</span>: <span class="literal">false</span></span><br><span class="line">    &#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 日志工具</span></span><br><span class="line">    <span class="keyword">const</span> logger = &#123;</span><br><span class="line">        <span class="attr">log</span>: <span class="function">(<span class="params">message</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable constant_">PROTECTION_CONFIG</span>.<span class="property">debug</span>) &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`[Album Protection] <span class="subst">$&#123;message&#125;</span>`</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">warn</span>: <span class="function">(<span class="params">message</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable constant_">PROTECTION_CONFIG</span>.<span class="property">showWarnings</span>) &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">`[Album Protection] <span class="subst">$&#123;message&#125;</span>`</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 防护工具类</span></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">AlbumProtection</span> &#123;</span><br><span class="line">        <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">protectedElements</span> = <span class="keyword">new</span> <span class="title class_">Set</span>();</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">overlays</span> = <span class="keyword">new</span> <span class="title class_">Set</span>();</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">lastWarningTime</span> = <span class="number">0</span>; <span class="comment">// 防止重复显示警告</span></span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">warningCooldown</span> = <span class="number">2000</span>; <span class="comment">// 2秒冷却时间</span></span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">init</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 初始化防护</span></span><br><span class="line">        <span class="title function_">init</span>(<span class="params"></span>) &#123;</span><br><span class="line">            logger.<span class="title function_">log</span>(<span class="string">&#x27;Initializing album protection...&#x27;</span>);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">setupProtection</span>();</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">setupMutationObserver</span>();</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">setupKeyboardProtection</span>();</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">setupAdvancedProtection</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 禁用右键菜单</span></span><br><span class="line">        <span class="title function_">disableContextMenu</span>(<span class="params">element</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!element || <span class="variable language_">this</span>.<span class="property">protectedElements</span>.<span class="title function_">has</span>(element)) <span class="keyword">return</span>;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">const</span> <span class="title function_">handler</span> = (<span class="params">e</span>) =&gt; &#123;</span><br><span class="line">                e.<span class="title function_">preventDefault</span>();</span><br><span class="line">                e.<span class="title function_">stopPropagation</span>();</span><br><span class="line">                e.<span class="title function_">stopImmediatePropagation</span>();</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">if</span> (<span class="variable constant_">PROTECTION_CONFIG</span>.<span class="property">showWarnings</span>) &#123;</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="title function_">showProtectionWarning</span>();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;;</span><br><span class="line">            </span><br><span class="line">            element.<span class="title function_">addEventListener</span>(<span class="string">&#x27;contextmenu&#x27;</span>, handler, &#123; <span class="attr">capture</span>: <span class="literal">true</span>, <span class="attr">passive</span>: <span class="literal">false</span> &#125;);</span><br><span class="line">            element.<span class="title function_">addEventListener</span>(<span class="string">&#x27;auxclick&#x27;</span>, handler, &#123; <span class="attr">capture</span>: <span class="literal">true</span>, <span class="attr">passive</span>: <span class="literal">false</span> &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 禁用拖拽</span></span><br><span class="line">        <span class="title function_">disableDrag</span>(<span class="params">element</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!element || <span class="variable language_">this</span>.<span class="property">protectedElements</span>.<span class="title function_">has</span>(element)) <span class="keyword">return</span>;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">const</span> <span class="title function_">dragHandler</span> = (<span class="params">e</span>) =&gt; &#123;</span><br><span class="line">                e.<span class="title function_">preventDefault</span>();</span><br><span class="line">                e.<span class="title function_">stopPropagation</span>();</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;;</span><br><span class="line">            </span><br><span class="line">            element.<span class="title function_">addEventListener</span>(<span class="string">&#x27;dragstart&#x27;</span>, dragHandler, &#123; <span class="attr">capture</span>: <span class="literal">true</span>, <span class="attr">passive</span>: <span class="literal">false</span> &#125;);</span><br><span class="line">            element.<span class="title function_">addEventListener</span>(<span class="string">&#x27;drag&#x27;</span>, dragHandler, &#123; <span class="attr">capture</span>: <span class="literal">true</span>, <span class="attr">passive</span>: <span class="literal">false</span> &#125;);</span><br><span class="line">            element.<span class="title function_">addEventListener</span>(<span class="string">&#x27;dragend&#x27;</span>, dragHandler, &#123; <span class="attr">capture</span>: <span class="literal">true</span>, <span class="attr">passive</span>: <span class="literal">false</span> &#125;);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 设置draggable属性</span></span><br><span class="line">            <span class="keyword">if</span> (element.<span class="property">tagName</span> === <span class="string">&#x27;IMG&#x27;</span>) &#123;</span><br><span class="line">                element.<span class="property">draggable</span> = <span class="literal">false</span>;</span><br><span class="line">                element.<span class="title function_">setAttribute</span>(<span class="string">&#x27;draggable&#x27;</span>, <span class="string">&#x27;false&#x27;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 禁用选择</span></span><br><span class="line">        <span class="title function_">disableSelection</span>(<span class="params">element</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!element || <span class="variable language_">this</span>.<span class="property">protectedElements</span>.<span class="title function_">has</span>(element)) <span class="keyword">return</span>;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">const</span> <span class="title function_">selectionHandler</span> = (<span class="params">e</span>) =&gt; &#123;</span><br><span class="line">                e.<span class="title function_">preventDefault</span>();</span><br><span class="line">                e.<span class="title function_">stopPropagation</span>();</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;;</span><br><span class="line">            </span><br><span class="line">            element.<span class="title function_">addEventListener</span>(<span class="string">&#x27;selectstart&#x27;</span>, selectionHandler, &#123; <span class="attr">capture</span>: <span class="literal">true</span>, <span class="attr">passive</span>: <span class="literal">false</span> &#125;);</span><br><span class="line">            element.<span class="title function_">addEventListener</span>(<span class="string">&#x27;mousedown&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (e.<span class="property">detail</span> &gt; <span class="number">1</span>) &#123; <span class="comment">// 多次点击</span></span><br><span class="line">                    e.<span class="title function_">preventDefault</span>();</span><br><span class="line">                    <span class="comment">// 不阻止冒泡，允许正常的点击事件继续传播</span></span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, &#123; <span class="attr">capture</span>: <span class="literal">true</span>, <span class="attr">passive</span>: <span class="literal">false</span> &#125;);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 防止双击选择</span></span><br><span class="line">            element.<span class="title function_">addEventListener</span>(<span class="string">&#x27;dblclick&#x27;</span>, selectionHandler, &#123; <span class="attr">capture</span>: <span class="literal">true</span>, <span class="attr">passive</span>: <span class="literal">false</span> &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 添加CSS防护类</span></span><br><span class="line">        <span class="title function_">addProtectionClasses</span>(<span class="params">element</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!element) <span class="keyword">return</span>;</span><br><span class="line">            </span><br><span class="line">            element.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;album-no-context-menu&#x27;</span>);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 设置CSS属性</span></span><br><span class="line">            <span class="keyword">const</span> protectionStyles = &#123;</span><br><span class="line">                <span class="string">&#x27;user-select&#x27;</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;-webkit-user-select&#x27;</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;-moz-user-select&#x27;</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;-ms-user-select&#x27;</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;user-drag&#x27;</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;-webkit-user-drag&#x27;</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;-khtml-user-drag&#x27;</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;-moz-user-drag&#x27;</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;-o-user-drag&#x27;</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;-webkit-touch-callout&#x27;</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;-webkit-tap-highlight-color&#x27;</span>: <span class="string">&#x27;transparent&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;pointer-events&#x27;</span>: <span class="string">&#x27;auto&#x27;</span></span><br><span class="line">            &#125;;</span><br><span class="line">            </span><br><span class="line">            <span class="title class_">Object</span>.<span class="title function_">assign</span>(element.<span class="property">style</span>, protectionStyles);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 创建透明遮罩层</span></span><br><span class="line">        <span class="title function_">createProtectionOverlay</span>(<span class="params">element</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!element || element.<span class="title function_">querySelector</span>(<span class="string">&#x27;.album-protection-overlay&#x27;</span>)) <span class="keyword">return</span>;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">const</span> overlay = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">            overlay.<span class="property">className</span> = <span class="string">&#x27;album-protection-overlay&#x27;</span>;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 确保父元素有定位</span></span><br><span class="line">            <span class="keyword">const</span> parentStyle = <span class="variable language_">window</span>.<span class="title function_">getComputedStyle</span>(element.<span class="property">parentElement</span>);</span><br><span class="line">            <span class="keyword">if</span> (parentStyle.<span class="property">position</span> === <span class="string">&#x27;static&#x27;</span>) &#123;</span><br><span class="line">                element.<span class="property">parentElement</span>.<span class="property">style</span>.<span class="property">position</span> = <span class="string">&#x27;relative&#x27;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            element.<span class="property">parentElement</span>.<span class="title function_">appendChild</span>(overlay);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">overlays</span>.<span class="title function_">add</span>(overlay);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 对遮罩层也应用防护</span></span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">disableContextMenu</span>(overlay);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">disableSelection</span>(overlay);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">disableDrag</span>(overlay);</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">return</span> overlay;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 缩略图轻度防护（保持点击功能）</span></span><br><span class="line">        <span class="title function_">applyThumbnailProtection</span>(<span class="params">element</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!element || <span class="variable language_">this</span>.<span class="property">protectedElements</span>.<span class="title function_">has</span>(element)) <span class="keyword">return</span>;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 只禁用右键菜单，不使用capture模式以避免干扰点击事件</span></span><br><span class="line">            element.<span class="title function_">addEventListener</span>(<span class="string">&#x27;contextmenu&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">                e.<span class="title function_">preventDefault</span>();</span><br><span class="line">                <span class="keyword">if</span> (<span class="variable constant_">PROTECTION_CONFIG</span>.<span class="property">showWarnings</span>) &#123;</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="title function_">showProtectionWarning</span>();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, &#123; <span class="attr">passive</span>: <span class="literal">false</span> &#125;);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 轻度拖拽防护，不使用capture模式</span></span><br><span class="line">            element.<span class="title function_">addEventListener</span>(<span class="string">&#x27;dragstart&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">                e.<span class="title function_">preventDefault</span>();</span><br><span class="line">            &#125;, &#123; <span class="attr">passive</span>: <span class="literal">false</span> &#125;);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 设置基础CSS防护，但不影响事件</span></span><br><span class="line">            element.<span class="property">style</span>.<span class="property">userSelect</span> = <span class="string">&quot;none&quot;</span>;</span><br><span class="line">            element.<span class="property">style</span>.<span class="property">webkitUserSelect</span> = <span class="string">&quot;none&quot;</span>;</span><br><span class="line">            element.<span class="property">style</span>.<span class="property">webkitUserDrag</span> = <span class="string">&quot;none&quot;</span>;</span><br><span class="line">            element.<span class="property">style</span>.<span class="property">userDrag</span> = <span class="string">&quot;none&quot;</span>;</span><br><span class="line">            element.<span class="property">draggable</span> = <span class="literal">false</span>;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 确保可以点击</span></span><br><span class="line">            element.<span class="property">style</span>.<span class="property">pointerEvents</span> = <span class="string">&quot;auto&quot;</span>;</span><br><span class="line">            </span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">protectedElements</span>.<span class="title function_">add</span>(element);</span><br><span class="line">            logger.<span class="title function_">log</span>(<span class="string">`Thumbnail lightly protected: <span class="subst">$&#123;element.tagName&#125;</span>.<span class="subst">$&#123;element.className&#125;</span>`</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 应用完整防护</span></span><br><span class="line">        <span class="title function_">applyFullProtection</span>(<span class="params">element</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!element || <span class="variable language_">this</span>.<span class="property">protectedElements</span>.<span class="title function_">has</span>(element)) <span class="keyword">return</span>;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 对缩略图进行特殊处理，保持点击功能</span></span><br><span class="line">            <span class="keyword">if</span> (element.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;thumbnail&#x27;</span>) || element.<span class="title function_">closest</span>(<span class="string">&#x27;.modal_thumbnails&#x27;</span>)) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="title function_">applyThumbnailProtection</span>(element);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">disableContextMenu</span>(element);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">disableDrag</span>(element);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">disableSelection</span>(element);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">addProtectionClasses</span>(element);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 对图片元素创建遮罩层，但排除缩略图和模态框内的图片</span></span><br><span class="line">            <span class="keyword">if</span> (element.<span class="property">tagName</span> === <span class="string">&#x27;IMG&#x27;</span> &amp;&amp; </span><br><span class="line">                <span class="variable constant_">PROTECTION_CONFIG</span>.<span class="property">protectionLevel</span> === <span class="string">&#x27;high&#x27;</span> &amp;&amp;</span><br><span class="line">                !element.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;thumbnail&#x27;</span>) &amp;&amp;</span><br><span class="line">                !element.<span class="title function_">closest</span>(<span class="string">&#x27;.modal_thumbnails&#x27;</span>) &amp;&amp;</span><br><span class="line">                !element.<span class="title function_">closest</span>(<span class="string">&#x27;#album_modal&#x27;</span>)) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="title function_">createProtectionOverlay</span>(element);</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">protectedElements</span>.<span class="title function_">add</span>(element);</span><br><span class="line">            logger.<span class="title function_">log</span>(<span class="string">`Protected element: <span class="subst">$&#123;element.tagName&#125;</span>.<span class="subst">$&#123;element.className&#125;</span>`</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 清理缩略图上的遮罩层</span></span><br><span class="line">        <span class="title function_">cleanupThumbnailOverlays</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.modal_thumbnails .album-protection-overlay, .thumbnail + .album-protection-overlay&#x27;</span>).<span class="title function_">forEach</span>(<span class="function"><span class="params">overlay</span> =&gt;</span> &#123;</span><br><span class="line">                logger.<span class="title function_">log</span>(<span class="string">&#x27;Removing overlay from thumbnail area&#x27;</span>);</span><br><span class="line">                overlay.<span class="title function_">remove</span>();</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 设置基础防护</span></span><br><span class="line">        <span class="title function_">setupProtection</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="comment">// 先清理可能存在的缩略图遮罩层</span></span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">cleanupThumbnailOverlays</span>();</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 保护所有相册图片</span></span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="variable constant_">PROTECTION_CONFIG</span>.<span class="property">selectors</span>.<span class="property">albumImages</span>).<span class="title function_">forEach</span>(<span class="function"><span class="params">img</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="title function_">applyFullProtection</span>(img);</span><br><span class="line">            &#125;);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 保护模态框图片</span></span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="variable constant_">PROTECTION_CONFIG</span>.<span class="property">selectors</span>.<span class="property">modalImages</span>).<span class="title function_">forEach</span>(<span class="function"><span class="params">img</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="title function_">applyFullProtection</span>(img);</span><br><span class="line">            &#125;);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 保护容器</span></span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="variable constant_">PROTECTION_CONFIG</span>.<span class="property">selectors</span>.<span class="property">albumContainers</span>).<span class="title function_">forEach</span>(<span class="function"><span class="params">container</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="title function_">disableSelection</span>(container);</span><br><span class="line">                <span class="variable language_">this</span>.<span class="title function_">addProtectionClasses</span>(container);</span><br><span class="line">            &#125;);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 保护所有包含album关键词的图片</span></span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="variable constant_">PROTECTION_CONFIG</span>.<span class="property">selectors</span>.<span class="property">allImages</span>).<span class="title function_">forEach</span>(<span class="function"><span class="params">img</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="title function_">applyFullProtection</span>(img);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 设置变化监听器</span></span><br><span class="line">        <span class="title function_">setupMutationObserver</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> observer = <span class="keyword">new</span> <span class="title class_">MutationObserver</span>(<span class="function">(<span class="params">mutations</span>) =&gt;</span> &#123;</span><br><span class="line">                mutations.<span class="title function_">forEach</span>(<span class="function">(<span class="params">mutation</span>) =&gt;</span> &#123;</span><br><span class="line">                    <span class="comment">// 监听新增的节点</span></span><br><span class="line">                    mutation.<span class="property">addedNodes</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">node</span>) =&gt;</span> &#123;</span><br><span class="line">                        <span class="keyword">if</span> (node.<span class="property">nodeType</span> === <span class="title class_">Node</span>.<span class="property">ELEMENT_NODE</span>) &#123;</span><br><span class="line">                            <span class="comment">// 延迟应用防护，确保其他脚本先完成初始化</span></span><br><span class="line">                            <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                                <span class="comment">// 检查是否是图片</span></span><br><span class="line">                                <span class="keyword">if</span> (node.<span class="property">tagName</span> === <span class="string">&#x27;IMG&#x27;</span>) &#123;</span><br><span class="line">                                    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="title function_">shouldProtectImage</span>(node)) &#123;</span><br><span class="line">                                        <span class="variable language_">this</span>.<span class="title function_">applyFullProtection</span>(node);</span><br><span class="line">                                    &#125;</span><br><span class="line">                                &#125;</span><br><span class="line">                                </span><br><span class="line">                                <span class="comment">// 检查子元素中的图片</span></span><br><span class="line">                                <span class="keyword">const</span> images = node.<span class="property">querySelectorAll</span> &amp;&amp; node.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;img&#x27;</span>);</span><br><span class="line">                                <span class="keyword">if</span> (images) &#123;</span><br><span class="line">                                    images.<span class="title function_">forEach</span>(<span class="function"><span class="params">img</span> =&gt;</span> &#123;</span><br><span class="line">                                        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="title function_">shouldProtectImage</span>(img)) &#123;</span><br><span class="line">                                            <span class="variable language_">this</span>.<span class="title function_">applyFullProtection</span>(img);</span><br><span class="line">                                        &#125;</span><br><span class="line">                                    &#125;);</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;, <span class="number">100</span>); <span class="comment">// 延迟100ms应用防护</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;);</span><br><span class="line">            </span><br><span class="line">            observer.<span class="title function_">observe</span>(<span class="variable language_">document</span>.<span class="property">body</span>, &#123;</span><br><span class="line">                <span class="attr">childList</span>: <span class="literal">true</span>,</span><br><span class="line">                <span class="attr">subtree</span>: <span class="literal">true</span></span><br><span class="line">            &#125;);</span><br><span class="line">            </span><br><span class="line">            logger.<span class="title function_">log</span>(<span class="string">&#x27;Mutation observer setup complete&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 判断是否应该保护图片</span></span><br><span class="line">        <span class="title function_">shouldProtectImage</span>(<span class="params">img</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> src = img.<span class="property">src</span> || img.<span class="title function_">getAttribute</span>(<span class="string">&#x27;data-src&#x27;</span>) || <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">            <span class="keyword">const</span> className = img.<span class="property">className</span> || <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">            <span class="keyword">const</span> parentClasses = img.<span class="property">parentElement</span> ? img.<span class="property">parentElement</span>.<span class="property">className</span> : <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 排除模态框中的缩略图，让它们保持点击功能</span></span><br><span class="line">            <span class="keyword">if</span> (img.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;thumbnail&#x27;</span>) || img.<span class="title function_">closest</span>(<span class="string">&#x27;.modal_thumbnails&#x27;</span>)) &#123;</span><br><span class="line">                logger.<span class="title function_">log</span>(<span class="string">&#x27;Skipping thumbnail protection to preserve click functionality&#x27;</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">return</span> (</span><br><span class="line">                src.<span class="title function_">includes</span>(<span class="string">&#x27;album&#x27;</span>) ||</span><br><span class="line">                src.<span class="title function_">includes</span>(<span class="string">&#x27;photo&#x27;</span>) ||</span><br><span class="line">                className.<span class="title function_">includes</span>(<span class="string">&#x27;album&#x27;</span>) ||</span><br><span class="line">                className.<span class="title function_">includes</span>(<span class="string">&#x27;photo&#x27;</span>) ||</span><br><span class="line">                parentClasses.<span class="title function_">includes</span>(<span class="string">&#x27;album&#x27;</span>) ||</span><br><span class="line">                parentClasses.<span class="title function_">includes</span>(<span class="string">&#x27;photo&#x27;</span>) ||</span><br><span class="line">                img.<span class="title function_">closest</span>(<span class="string">&#x27;#album_section&#x27;</span>) ||</span><br><span class="line">                img.<span class="title function_">closest</span>(<span class="string">&#x27;#album_modal&#x27;</span>) ||</span><br><span class="line">                img.<span class="title function_">closest</span>(<span class="string">&#x27;.album_container&#x27;</span>) ||</span><br><span class="line">                img.<span class="title function_">closest</span>(<span class="string">&#x27;.photo_wall&#x27;</span>) ||</span><br><span class="line">                img.<span class="title function_">closest</span>(<span class="string">&#x27;#photo_wall_section&#x27;</span>) ||</span><br><span class="line">                img.<span class="title function_">closest</span>(<span class="string">&#x27;.photo_container&#x27;</span>)</span><br><span class="line">            );</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 键盘快捷键防护</span></span><br><span class="line">        <span class="title function_">setupKeyboardProtection</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;keydown&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="comment">// 在相册页面禁用特定快捷键</span></span><br><span class="line">                <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="title function_">isInAlbumContext</span>()) &#123;</span><br><span class="line">                    <span class="comment">// 禁用 Ctrl+S (保存)</span></span><br><span class="line">                    <span class="keyword">if</span> (e.<span class="property">ctrlKey</span> &amp;&amp; e.<span class="property">key</span> === <span class="string">&#x27;s&#x27;</span>) &#123;</span><br><span class="line">                        e.<span class="title function_">preventDefault</span>();</span><br><span class="line">                        <span class="variable language_">this</span>.<span class="title function_">showProtectionWarning</span>();</span><br><span class="line">                        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    </span><br><span class="line">                    <span class="comment">// 禁用 Ctrl+A (全选)</span></span><br><span class="line">                    <span class="keyword">if</span> (e.<span class="property">ctrlKey</span> &amp;&amp; e.<span class="property">key</span> === <span class="string">&#x27;a&#x27;</span>) &#123;</span><br><span class="line">                        e.<span class="title function_">preventDefault</span>();</span><br><span class="line">                        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    </span><br><span class="line">                    <span class="comment">// 禁用 F12 和开发者工具快捷键</span></span><br><span class="line">                    <span class="keyword">if</span> (e.<span class="property">key</span> === <span class="string">&#x27;F12&#x27;</span> || </span><br><span class="line">                        (e.<span class="property">ctrlKey</span> &amp;&amp; e.<span class="property">shiftKey</span> &amp;&amp; e.<span class="property">key</span> === <span class="string">&#x27;I&#x27;</span>) ||</span><br><span class="line">                        (e.<span class="property">ctrlKey</span> &amp;&amp; e.<span class="property">shiftKey</span> &amp;&amp; e.<span class="property">key</span> === <span class="string">&#x27;C&#x27;</span>) ||</span><br><span class="line">                        (e.<span class="property">ctrlKey</span> &amp;&amp; e.<span class="property">key</span> === <span class="string">&#x27;U&#x27;</span>)) &#123;</span><br><span class="line">                        e.<span class="title function_">preventDefault</span>();</span><br><span class="line">                        <span class="variable language_">this</span>.<span class="title function_">showProtectionWarning</span>();</span><br><span class="line">                        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, &#123; <span class="attr">capture</span>: <span class="literal">true</span> &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 高级防护设置</span></span><br><span class="line">        <span class="title function_">setupAdvancedProtection</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="comment">// 防止通过控制台访问图片</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="variable constant_">PROTECTION_CONFIG</span>.<span class="property">protectionLevel</span> === <span class="string">&#x27;high&#x27;</span>) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="title function_">setupConsoleProtection</span>();</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 防止通过开发者工具复制图片URL</span></span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">setupDevToolsProtection</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 开发者工具防护</span></span><br><span class="line">        <span class="title function_">setupDevToolsProtection</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="comment">// 检测开发者工具</span></span><br><span class="line">            <span class="keyword">let</span> devtools = &#123;<span class="attr">open</span>: <span class="literal">false</span>, <span class="attr">orientation</span>: <span class="literal">null</span>&#125;;</span><br><span class="line">            <span class="keyword">const</span> threshold = <span class="number">160</span>;</span><br><span class="line">            </span><br><span class="line">            <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="title function_">isInAlbumContext</span>()) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">outerHeight</span> - <span class="variable language_">window</span>.<span class="property">innerHeight</span> &gt; threshold || </span><br><span class="line">                        <span class="variable language_">window</span>.<span class="property">outerWidth</span> - <span class="variable language_">window</span>.<span class="property">innerWidth</span> &gt; threshold) &#123;</span><br><span class="line">                        <span class="keyword">if</span> (!devtools.<span class="property">open</span>) &#123;</span><br><span class="line">                            devtools.<span class="property">open</span> = <span class="literal">true</span>;</span><br><span class="line">                            <span class="variable language_">this</span>.<span class="title function_">showProtectionWarning</span>();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        devtools.<span class="property">open</span> = <span class="literal">false</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, <span class="number">500</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 检查是否在相册上下文中</span></span><br><span class="line">        <span class="title function_">isInAlbumContext</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#album_section&#x27;</span>) !== <span class="literal">null</span> ||</span><br><span class="line">                   <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#album_modal:not(.hidden)&#x27;</span>) !== <span class="literal">null</span> ||</span><br><span class="line">                   <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">pathname</span>.<span class="title function_">includes</span>(<span class="string">&#x27;/album&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 显示防护警告</span></span><br><span class="line">        <span class="title function_">showProtectionWarning</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> now = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 检查页面是否还在加载中</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">readyState</span> === <span class="string">&#x27;loading&#x27;</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 检查是否有loading动画在显示</span></span><br><span class="line">            <span class="keyword">const</span> loadingContainer = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;loading-container&#x27;</span>);</span><br><span class="line">            <span class="keyword">if</span> (loadingContainer &amp;&amp; !loadingContainer.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;hide&#x27;</span>)) &#123;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 额外检查其他可能的loading元素</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.loading, #loading, [class*=&quot;loading&quot;]:not(.album-protection-warning)&#x27;</span>)) &#123;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 检查冷却时间，防止重复显示</span></span><br><span class="line">            <span class="keyword">if</span> (now - <span class="variable language_">this</span>.<span class="property">lastWarningTime</span> &lt; <span class="variable language_">this</span>.<span class="property">warningCooldown</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 检查是否已有警告在显示</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.album-protection-warning&#x27;</span>)) &#123;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">lastWarningTime</span> = now;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 创建警告提示</span></span><br><span class="line">            <span class="keyword">const</span> warning = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">            warning.<span class="property">className</span> = <span class="string">&#x27;album-protection-warning&#x27;</span>;</span><br><span class="line">            warning.<span class="property">style</span>.<span class="property">cssText</span> = <span class="string">`</span></span><br><span class="line"><span class="string">                position: fixed;</span></span><br><span class="line"><span class="string">                top: 20px;</span></span><br><span class="line"><span class="string">                right: 20px;</span></span><br><span class="line"><span class="string">                background: #ff4757;</span></span><br><span class="line"><span class="string">                color: white;</span></span><br><span class="line"><span class="string">                padding: 10px 15px;</span></span><br><span class="line"><span class="string">                border-radius: 5px;</span></span><br><span class="line"><span class="string">                z-index: 10000;</span></span><br><span class="line"><span class="string">                font-size: 14px;</span></span><br><span class="line"><span class="string">                font-family: Arial, sans-serif;</span></span><br><span class="line"><span class="string">                box-shadow: 0 2px 10px rgba(0,0,0,0.3);</span></span><br><span class="line"><span class="string">                animation: slideIn 0.3s ease-out;</span></span><br><span class="line"><span class="string">            `</span>;</span><br><span class="line">            warning.<span class="property">textContent</span> = <span class="string">&#x27;图片受保护，禁止复制或下载&#x27;</span>;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 添加动画样式</span></span><br><span class="line">            <span class="keyword">if</span> (!<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#album-protection-style&#x27;</span>)) &#123;</span><br><span class="line">                <span class="keyword">const</span> style = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;style&#x27;</span>);</span><br><span class="line">                style.<span class="property">id</span> = <span class="string">&#x27;album-protection-style&#x27;</span>;</span><br><span class="line">                style.<span class="property">textContent</span> = <span class="string">`</span></span><br><span class="line"><span class="string">                    @keyframes slideIn &#123;</span></span><br><span class="line"><span class="string">                        from &#123; transform: translateX(100%); opacity: 0; &#125;</span></span><br><span class="line"><span class="string">                        to &#123; transform: translateX(0); opacity: 1; &#125;</span></span><br><span class="line"><span class="string">                    &#125;</span></span><br><span class="line"><span class="string">                `</span>;</span><br><span class="line">                <span class="variable language_">document</span>.<span class="property">head</span>.<span class="title function_">appendChild</span>(style);</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(warning);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 3秒后移除警告</span></span><br><span class="line">            <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (warning.<span class="property">parentNode</span>) &#123;</span><br><span class="line">                    warning.<span class="title function_">remove</span>();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, <span class="number">3000</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 刷新防护（用于动态内容）</span></span><br><span class="line">        <span class="title function_">refresh</span>(<span class="params"></span>) &#123;</span><br><span class="line">            logger.<span class="title function_">log</span>(<span class="string">&#x27;Refreshing album protection...&#x27;</span>);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">setupProtection</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 清理防护</span></span><br><span class="line">        <span class="title function_">cleanup</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">protectedElements</span>.<span class="title function_">clear</span>();</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">overlays</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">overlay</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (overlay.<span class="property">parentNode</span>) &#123;</span><br><span class="line">                    overlay.<span class="title function_">remove</span>();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">overlays</span>.<span class="title function_">clear</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 创建全局实例</span></span><br><span class="line">    <span class="keyword">let</span> albumProtection = <span class="literal">null</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 初始化函数</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">initAlbumProtection</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// 等待loading动画完成</span></span><br><span class="line">        <span class="keyword">const</span> <span class="title function_">waitForLoadingComplete</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">            <span class="keyword">const</span> loadingContainer = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;loading-container&#x27;</span>);</span><br><span class="line">            <span class="keyword">if</span> (loadingContainer &amp;&amp; !loadingContainer.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;hide&#x27;</span>)) &#123;</span><br><span class="line">                <span class="comment">// 如果loading还在显示，延迟100ms再检查</span></span><br><span class="line">                <span class="built_in">setTimeout</span>(waitForLoadingComplete, <span class="number">100</span>);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// loading已完成，开始初始化防护</span></span><br><span class="line">            <span class="keyword">if</span> (albumProtection) &#123;</span><br><span class="line">                albumProtection.<span class="title function_">cleanup</span>();</span><br><span class="line">            &#125;</span><br><span class="line">            albumProtection = <span class="keyword">new</span> <span class="title class_">AlbumProtection</span>();</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 将实例添加到全局作用域以便调试</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="variable constant_">PROTECTION_CONFIG</span>.<span class="property">debug</span>) &#123;</span><br><span class="line">                <span class="variable language_">window</span>.<span class="property">albumProtection</span> = albumProtection;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        </span><br><span class="line">        <span class="title function_">waitForLoadingComplete</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 页面加载完成后初始化</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">readyState</span> === <span class="string">&#x27;loading&#x27;</span>) &#123;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">setTimeout</span>(initAlbumProtection, <span class="number">200</span>); <span class="comment">// 稍微延迟确保DOM完全准备好</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(initAlbumProtection, <span class="number">200</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// PJAX支持</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;pjax:success&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(initAlbumProtection, <span class="number">100</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Turbo支持</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;turbo:load&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(initAlbumProtection, <span class="number">100</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 页面可见性变化时刷新防护</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;visibilitychange&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="variable language_">document</span>.<span class="property">hidden</span> &amp;&amp; albumProtection) &#123;</span><br><span class="line">            <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> albumProtection.<span class="title function_">refresh</span>(), <span class="number">100</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">    logger.<span class="title function_">log</span>(<span class="string">&#x27;Album protection script loaded&#x27;</span>);</span><br><span class="line">    </span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><h3 id="步骤3：集成到主题中">步骤3：集成到主题中</h3><h4 id="3-1-添加CSS到头部">3.1 添加CSS到头部</h4><p>编辑 <code>themes/solitude/layout/includes/head.pug</code>，在banner防护CSS后添加：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// banner protection css</span><br><span class="line">link(rel=&quot;stylesheet&quot;, href=url_for(&#x27;/css/custom/banner-protection.css&#x27;))</span><br><span class="line"></span><br><span class="line">// album protection css</span><br><span class="line">if page.type === &#x27;album&#x27;</span><br><span class="line">  link(rel=&quot;stylesheet&quot;, href=url_for(&#x27;/css/custom/album-protection.css&#x27;))</span><br></pre></td></tr></table></figure><h4 id="3-2-添加JavaScript到配置">3.2 添加JavaScript到配置</h4><p>编辑 <code>_config.solitude.yml</code>，在inject的body部分添加：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">body:</span></span><br><span class="line">    <span class="comment"># 相册集</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">src=&quot;/js/custom/album.js&quot;&gt;&lt;/script&gt;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">src=&quot;/js/custom/album-modal.js&quot;&gt;&lt;/script&gt;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">src=&quot;/js/custom/photo-wall.js&quot;</span> <span class="string">defer&gt;&lt;/script&gt;</span></span><br><span class="line">    <span class="comment"># 相册防护</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">src=&quot;/js/custom/album-protection.js&quot;&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure><h4 id="3-3-增强现有相册脚本">3.3 增强现有相册脚本</h4><p>为了确保防护功能与现有功能的兼容性，需要对现有的相册脚本进行小幅调整：</p><p><strong>增强 <code>album-modal.js</code> 中的点击事件：</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 点击缩略图切换主图片 - 使用capture模式确保优先执行</span></span><br><span class="line">thumbnail.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Thumbnail clicked:&#x27;</span>, img.<span class="property">url</span>); <span class="comment">// 调试日志</span></span><br><span class="line">  mainImage.<span class="property">src</span> = img.<span class="property">url</span>;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;.thumbnail&quot;</span>).<span class="title function_">forEach</span>(<span class="function">(<span class="params">thumb</span>) =&gt;</span> thumb.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;active&quot;</span>));</span><br><span class="line">  thumbnail.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;active&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 阻止事件冒泡，避免触发模态框关闭</span></span><br><span class="line">  event.<span class="title function_">stopPropagation</span>();</span><br><span class="line">&#125;, &#123; <span class="attr">capture</span>: <span class="literal">true</span>, <span class="attr">passive</span>: <span class="literal">false</span> &#125;);</span><br></pre></td></tr></table></figure><h3 id="步骤4：复制文件到public目录">步骤4：复制文件到public目录</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 复制CSS文件</span></span><br><span class="line"><span class="built_in">cp</span> themes/solitude/source/css/custom/album-protection.css public/css/custom/album-protection.css</span><br><span class="line"></span><br><span class="line"><span class="comment"># 复制JavaScript文件</span></span><br><span class="line"><span class="built_in">cp</span> themes/solitude/source/js/custom/album-protection.js public/js/custom/album-protection.js</span><br></pre></td></tr></table></figure><h3 id="步骤5：重新生成站点">步骤5：重新生成站点</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean &amp;&amp; hexo generate</span><br></pre></td></tr></table></figure><h2 id="功能特点">功能特点</h2><h3 id="智能防护策略">智能防护策略</h3><h4 id="分级防护设计">分级防护设计</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 防护等级配置</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">PROTECTION_CONFIG</span> = &#123;</span><br><span class="line">    <span class="attr">protectionLevel</span>: <span class="string">&#x27;high&#x27;</span>, <span class="comment">// low, medium, high</span></span><br><span class="line">    <span class="attr">selectors</span>: &#123;</span><br><span class="line">        <span class="attr">albumImages</span>: <span class="string">&#x27;#album_section img, .album_container img, .album_card img, #photo_wall_section img, .photo_container img, .photo_wall img&#x27;</span>,</span><br><span class="line">        <span class="attr">modalImages</span>: <span class="string">&#x27;#album_modal img, .modal_main_image, .modal_thumbnails img, .thumbnail&#x27;</span>,</span><br><span class="line">        <span class="attr">albumContainers</span>: <span class="string">&#x27;#album_section, .album_container, #photo_wall_section, .photo_container, #album_modal&#x27;</span>,</span><br><span class="line">        <span class="attr">allImages</span>: <span class="string">&#x27;img[class*=&quot;album&quot;], img[src*=&quot;album&quot;], img[data-src*=&quot;album&quot;], img[class*=&quot;photo&quot;]&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="缩略图特殊处理">缩略图特殊处理</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 缩略图轻度防护（保持点击功能）</span></span><br><span class="line"><span class="title function_">applyThumbnailProtection</span>(<span class="params">element</span>) &#123;</span><br><span class="line">    <span class="comment">// 只禁用右键菜单，不使用capture模式以避免干扰点击事件</span></span><br><span class="line">    element.<span class="title function_">addEventListener</span>(<span class="string">&#x27;contextmenu&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">        e.<span class="title function_">preventDefault</span>();</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable constant_">PROTECTION_CONFIG</span>.<span class="property">showWarnings</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">showProtectionWarning</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, &#123; <span class="attr">passive</span>: <span class="literal">false</span> &#125;);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 轻度拖拽防护，不使用capture模式</span></span><br><span class="line">    element.<span class="title function_">addEventListener</span>(<span class="string">&#x27;dragstart&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">        e.<span class="title function_">preventDefault</span>();</span><br><span class="line">    &#125;, &#123; <span class="attr">passive</span>: <span class="literal">false</span> &#125;);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 确保可以点击</span></span><br><span class="line">    element.<span class="property">style</span>.<span class="property">pointerEvents</span> = <span class="string">&quot;auto&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="动态内容监听">动态内容监听</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置变化监听器，监听动态加载的图片</span></span><br><span class="line"><span class="title function_">setupMutationObserver</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> observer = <span class="keyword">new</span> <span class="title class_">MutationObserver</span>(<span class="function">(<span class="params">mutations</span>) =&gt;</span> &#123;</span><br><span class="line">        mutations.<span class="title function_">forEach</span>(<span class="function">(<span class="params">mutation</span>) =&gt;</span> &#123;</span><br><span class="line">            mutation.<span class="property">addedNodes</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">node</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (node.<span class="property">nodeType</span> === <span class="title class_">Node</span>.<span class="property">ELEMENT_NODE</span>) &#123;</span><br><span class="line">                    <span class="comment">// 延迟应用防护，确保其他脚本先完成初始化</span></span><br><span class="line">                    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                        <span class="keyword">if</span> (node.<span class="property">tagName</span> === <span class="string">&#x27;IMG&#x27;</span>) &#123;</span><br><span class="line">                            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="title function_">shouldProtectImage</span>(node)) &#123;</span><br><span class="line">                                <span class="variable language_">this</span>.<span class="title function_">applyFullProtection</span>(node);</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                        </span><br><span class="line">                        <span class="comment">// 检查子元素中的图片</span></span><br><span class="line">                        <span class="keyword">const</span> images = node.<span class="property">querySelectorAll</span> &amp;&amp; node.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;img&#x27;</span>);</span><br><span class="line">                        <span class="keyword">if</span> (images) &#123;</span><br><span class="line">                            images.<span class="title function_">forEach</span>(<span class="function"><span class="params">img</span> =&gt;</span> &#123;</span><br><span class="line">                                <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="title function_">shouldProtectImage</span>(img)) &#123;</span><br><span class="line">                                    <span class="variable language_">this</span>.<span class="title function_">applyFullProtection</span>(img);</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;, <span class="number">100</span>); <span class="comment">// 延迟100ms应用防护</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">    observer.<span class="title function_">observe</span>(<span class="variable language_">document</span>.<span class="property">body</span>, &#123;</span><br><span class="line">        <span class="attr">childList</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">subtree</span>: <span class="literal">true</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="性能优化">性能优化</h3><h4 id="防重复防护">防重复防护</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">applyFullProtection</span>(<span class="params">element</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!element || <span class="variable language_">this</span>.<span class="property">protectedElements</span>.<span class="title function_">has</span>(element)) <span class="keyword">return</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 防护逻辑...</span></span><br><span class="line">    </span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">protectedElements</span>.<span class="title function_">add</span>(element);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Loading期间禁用警告">Loading期间禁用警告</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">showProtectionWarning</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 检查页面是否还在加载中</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">readyState</span> === <span class="string">&#x27;loading&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 检查是否有loading动画在显示</span></span><br><span class="line">    <span class="keyword">const</span> loadingContainer = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;loading-container&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span> (loadingContainer &amp;&amp; !loadingContainer.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;hide&#x27;</span>)) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 显示警告逻辑...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="兼容性处理">兼容性处理</h2><h3 id="PJAX支持">PJAX支持</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// PJAX支持</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;pjax:success&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(initAlbumProtection, <span class="number">100</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="移动端优化">移动端优化</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 移动端额外防护 */</span></span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">max-width</span>: <span class="number">768px</span>) &#123;</span><br><span class="line">    <span class="selector-id">#album_section</span> <span class="selector-tag">img</span>,</span><br><span class="line">    <span class="selector-class">.album_container</span> <span class="selector-tag">img</span>,</span><br><span class="line">    <span class="selector-id">#album_modal</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">        <span class="comment">/* 禁用长按菜单 */</span></span><br><span class="line">        -webkit-touch-callout: none <span class="meta">!important</span>;</span><br><span class="line">        -webkit-<span class="attribute">user-select</span>: none <span class="meta">!important</span>;</span><br><span class="line">        <span class="attribute">user-select</span>: none <span class="meta">!important</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">/* 禁用双击缩放 */</span></span><br><span class="line">        <span class="attribute">touch-action</span>: manipulation;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">/* 防止长按选择 */</span></span><br><span class="line">        -webkit-user-drag: none <span class="meta">!important</span>;</span><br><span class="line">        user-drag: none <span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="浏览器兼容性">浏览器兼容性</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置CSS属性兼容多浏览器</span></span><br><span class="line"><span class="keyword">const</span> protectionStyles = &#123;</span><br><span class="line">    <span class="string">&#x27;user-select&#x27;</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;-webkit-user-select&#x27;</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;-moz-user-select&#x27;</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;-ms-user-select&#x27;</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;user-drag&#x27;</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;-webkit-user-drag&#x27;</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;-khtml-user-drag&#x27;</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;-moz-user-drag&#x27;</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;-o-user-drag&#x27;</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;-webkit-touch-callout&#x27;</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;-webkit-tap-highlight-color&#x27;</span>: <span class="string">&#x27;transparent&#x27;</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="调试与测试">调试与测试</h2><h3 id="开启调试模式">开启调试模式</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="variable constant_">PROTECTION_CONFIG</span> = &#123;</span><br><span class="line">    <span class="attr">debug</span>: <span class="literal">true</span>, <span class="comment">// 开启调试模式</span></span><br><span class="line">    <span class="attr">showWarnings</span>: <span class="literal">true</span> <span class="comment">// 显示警告</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="测试清单">测试清单</h3><h4 id="基础功能测试">基础功能测试</h4><ul><li>[ ] 相册封面图片无法右键保存</li><li>[ ] 相册封面图片无法拖拽</li><li>[ ] 照片墙图片无法下载</li><li>[ ] 模态框主图无法复制</li><li>[ ] 缩略图可以正常点击切换</li><li>[ ] 缩略图无法右键保存</li></ul><h4 id="高级功能测试">高级功能测试</h4><ul><li>[ ] Ctrl+S无法保存图片</li><li>[ ] F12时显示警告</li><li>[ ] 开发者工具检测正常</li><li>[ ] 移动端长按无菜单</li><li>[ ] PJAX切换后防护正常</li></ul><h4 id="兼容性测试">兼容性测试</h4><ul><li>[ ] Chrome浏览器正常</li><li>[ ] Firefox浏览器正常</li><li>[ ] Safari浏览器正常</li><li>[ ] 移动端Safari正常</li><li>[ ] 移动端Chrome正常</li></ul><h2 id="注意事项">注意事项</h2><h3 id="重要提醒">重要提醒</h3><ol><li><p><strong>防护限制</strong>：</p><ul><li>防护主要针对普通用户，技术用户仍可能绕过</li><li>建议配合服务器端防盗链使用</li><li>定期更新防护策略</li></ul></li><li><p><strong>性能影响</strong>：</p><ul><li>大量图片时可能影响页面性能</li><li>建议在图片较多时适当调整防护等级</li><li>可根据需要关闭某些高级防护功能</li></ul></li><li><p><strong>功能平衡</strong>：</p><ul><li>缩略图采用轻度防护保持点击功能</li><li>如需更严格防护可修改配置</li><li>建议根据实际需求调整防护策略</li></ul></li></ol><h3 id="自定义配置">自定义配置</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 可根据需要调整的配置</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">PROTECTION_CONFIG</span> = &#123;</span><br><span class="line">    <span class="attr">protectionLevel</span>: <span class="string">&#x27;medium&#x27;</span>, <span class="comment">// 降低防护等级提升兼容性</span></span><br><span class="line">    <span class="attr">showWarnings</span>: <span class="literal">false</span>, <span class="comment">// 关闭警告提示</span></span><br><span class="line">    <span class="attr">debug</span>: <span class="literal">false</span> <span class="comment">// 关闭调试模式</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="总结">总结</h2><p>本教程实现了Solitude主题相册页面的全面图片防护功能，包含了：</p><ol><li><strong>全面防护</strong>：覆盖相册封面、照片墙、模态框等所有图片</li><li><strong>智能策略</strong>：针对不同类型图片采用不同防护等级</li><li><strong>功能平衡</strong>：在防护和用户体验之间找到最佳平衡点</li><li><strong>性能优化</strong>：防重复处理、延迟加载等优化措施</li><li><strong>兼容性好</strong>：支持PJAX、移动端等多种环境</li></ol><p>通过本教程，你的相册页面将获得强大的图片防护能力，有效防止图片被恶意下载和复制，同时保持良好的用户体验。</p>]]></content>
      
      
      <categories>
          
          <category> 魔改教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 魔改教程 </tag>
            
            <tag> Solitude </tag>
            
            <tag> Hexo </tag>
            
            <tag> 相册集 </tag>
            
            <tag> 照片墙 </tag>
            
            <tag> 模态框 </tag>
            
            <tag> 防护功能 </tag>
            
            <tag> JavaScript </tag>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Solitude主题魔改教程(19) - 修复Loading与TOC目录冲突问题</title>
      <link href="/2025/01/30/Solitude%E4%B8%BB%E9%A2%98%E9%AD%94%E6%94%B9%E6%95%99%E7%A8%8B(19)-%E4%BF%AE%E5%A4%8DLoading%E4%B8%8ETOC%E7%9B%AE%E5%BD%95%E5%86%B2%E7%AA%81%E9%97%AE%E9%A2%98/"/>
      <url>/2025/01/30/Solitude%E4%B8%BB%E9%A2%98%E9%AD%94%E6%94%B9%E6%95%99%E7%A8%8B(19)-%E4%BF%AE%E5%A4%8DLoading%E4%B8%8ETOC%E7%9B%AE%E5%BD%95%E5%86%B2%E7%AA%81%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h2 id="第一步：发现问题">第一步：发现问题</h2><h3 id="🔍-问题现象描述">🔍 问题现象描述</h3><p>在添加了Loading动画功能后，从第13篇文章开始出现了以下问题：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 问题症状</span></span><br><span class="line">❌ TOC文章目录无法点击跳转</span><br><span class="line">❌ 滚动时TOC不会高亮当前章节  </span><br><span class="line">❌ aside侧边栏的sticky定位失效</span><br><span class="line">✅ Loading动画本身显示正常</span><br><span class="line">✅ 第12篇文章及之前的功能正常</span><br></pre></td></tr></table></figure><h3 id="📊-影响范围确认">📊 影响范围确认</h3><p>通过逐篇检查发现：</p><ul><li><strong>正常文章</strong>：第1-12篇文章TOC和aside功能正常</li><li><strong>异常文章</strong>：第13-18篇文章TOC和aside功能失效</li><li><strong>关键节点</strong>：第13篇文章首次添加了<code>recommend: true</code>字段</li></ul><h3 id="🕵️-初步分析思路">🕵️ 初步分析思路</h3><h4 id="1-检查配置差异">1. 检查配置差异</h4><p>对比第12篇和第13篇文章的配置：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 第12篇文章 front-matter (正常)</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">Solitude主题魔改教程(12)-想做的事页面</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2024-11-18 00:00:00</span></span><br><span class="line"><span class="attr">categories:</span> [<span class="string">魔改教程</span>]</span><br><span class="line"><span class="attr">tags:</span> [<span class="string">Solitude</span>, <span class="string">魔改教程</span>, <span class="string">想做的事</span>]</span><br><span class="line"><span class="comment"># 没有 recommend 字段</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="comment"># 第13篇文章 front-matter (异常)</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">Solitude主题魔改教程(13)-本站日志页面</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2024-11-25 00:00:00</span></span><br><span class="line"><span class="attr">categories:</span> [<span class="string">魔改教程</span>]</span><br><span class="line"><span class="attr">tags:</span> [<span class="string">Solitude</span>, <span class="string">魔改教程</span>, <span class="string">本站日志</span>]</span><br><span class="line"><span class="attr">recommend:</span> <span class="literal">true</span>  <span class="comment"># ← 新增字段</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><h4 id="2-验证关键发现">2. 验证关键发现</h4><p>通过测试发现：<strong>禁用loading功能后，TOC和aside立即恢复正常</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 验证步骤</span></span><br><span class="line">1. 修改 _config.solitude.yml: loading.fullpage: <span class="literal">false</span></span><br><span class="line">2. 重新生成网站: npm run build  </span><br><span class="line">3. 测试结果: ✅ TOC和aside功能完全恢复</span><br></pre></td></tr></table></figure><p><strong>结论</strong>：问题根源确定为Loading功能与TOC/aside的冲突</p><h2 id="第三步：找到问题点">第三步：找到问题点</h2><h3 id="🎯-深入代码分析">🎯 深入代码分析</h3><h4 id="1-检查Loading配置逻辑">1. 检查Loading配置逻辑</h4><p>在<code>_config.solitude.yml</code>中发现：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Loading相关配置</span></span><br><span class="line"><span class="attr">loading:</span></span><br><span class="line">  <span class="attr">fullpage:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">theme:</span> <span class="string">mona-lisa</span>  <span class="comment"># 当前使用的Loading主题</span></span><br></pre></td></tr></table></figure><h4 id="2-检查Pug模板逻辑">2. 检查Pug模板逻辑</h4><p>在<code>themes/solitude/layout/includes/loading.pug</code>中发现关键逻辑：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//- Loading模板判断逻辑</span><br><span class="line">if theme.loading &amp;&amp; theme.loading.fullpage</span><br><span class="line">  if page.recommend || is_post()</span><br><span class="line">    //- 只有推荐文章或文章页面才显示Loading</span><br><span class="line">    include loading-mona-lisa.pug</span><br></pre></td></tr></table></figure><h4 id="3-定位核心问题">3. 定位核心问题</h4><p>通过浏览器开发者工具分析发现：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 问题现象分析</span></span><br><span class="line"><span class="number">1.</span> <span class="title class_">Loading</span>动画正常播放和退场</span><br><span class="line"><span class="number">2.</span> <span class="title class_">Loading</span>完成后，<span class="variable constant_">TOC</span>的scroll事件监听器丢失</span><br><span class="line"><span class="number">3.</span> <span class="variable constant_">TOC</span>元素存在，但click和scroll事件无响应</span><br><span class="line"><span class="number">4.</span> aside的sticky定位失效，position值被重置</span><br></pre></td></tr></table></figure><h4 id="4-关键代码追踪">4. 关键代码追踪</h4><p>在<code>themes/solitude/source/js/main.js</code>中找到TOC初始化逻辑：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js 中的TOC初始化代码（第XX行）</span></span><br><span class="line"><span class="keyword">if</span> (<span class="variable constant_">PAGE_CONFIG</span>.<span class="property">toc</span>) toc.<span class="title function_">init</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// toc.init() 执行时机与Loading冲突</span></span><br><span class="line"><span class="comment">// Loading动画会延迟1.3秒，此时TOC已初始化</span></span><br><span class="line"><span class="comment">// 但Loading完成后，相关事件监听器被意外清理</span></span><br></pre></td></tr></table></figure><h2 id="第四步：修改问题">第四步：修改问题</h2><h3 id="📝-方案设计">📝 方案设计</h3><p>基于问题分析，制定三步修复方案：</p><ol><li><strong>CSS层面</strong>：添加全局Loading状态控制</li><li><strong>JavaScript层面</strong>：在Loading完成后重新初始化TOC和aside</li><li><strong>多主题适配</strong>：确保Mona Lisa和Black Cat主题都得到修复</li></ol><h3 id="🔧-具体修改内容">🔧 具体修改内容</h3><h4 id="修改1：CSS全局状态控制">修改1：CSS全局状态控制</h4><p><strong>文件</strong>：<code>themes/solitude/source/css/_layout/fullpage.styl</code></p><p><strong>修改前</strong>：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="built_in">hexo-config</span>(<span class="string">&#x27;loading.fullpage&#x27;</span>)</span><br><span class="line">  <span class="comment">// Mona Lisa 主题样式</span></span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">hexo-config</span>(<span class="string">&#x27;loading.theme&#x27;</span>) == <span class="string">&#x27;mona-lisa&#x27;</span></span><br><span class="line">    <span class="selector-id">#loading-container</span></span><br><span class="line">      <span class="attribute">position</span> fixed</span><br><span class="line">      <span class="attribute">top</span> <span class="number">0</span></span><br><span class="line">      <span class="attribute">left</span> <span class="number">0</span></span><br><span class="line">      <span class="attribute">width</span> <span class="number">100%</span></span><br><span class="line">      <span class="attribute">height</span> <span class="number">100%</span></span><br><span class="line">      <span class="attribute">background</span> <span class="number">#fff</span></span><br><span class="line">      <span class="attribute">display</span> flex</span><br><span class="line">      <span class="attribute">flex-direction</span> column</span><br><span class="line">      <span class="attribute">align-items</span> center</span><br><span class="line">      <span class="attribute">justify-content</span> center</span><br><span class="line">      <span class="attribute">z-index</span> <span class="number">9998</span></span><br><span class="line">      <span class="attribute">transition</span> transform <span class="number">1.3s</span> ease</span><br><span class="line">      <span class="attribute">will-change</span> transform</span><br><span class="line">      <span class="attribute">font-family</span> <span class="string">&#x27;Quicksand&#x27;</span>, <span class="string">&#x27;Nunito&#x27;</span>, <span class="string">&#x27;Poppins&#x27;</span>, <span class="string">&#x27;Arial Rounded MT Bold&#x27;</span>, <span class="string">&#x27;PingFang SC&#x27;</span>, <span class="string">&#x27;Microsoft YaHei&#x27;</span>, sans-serif</span><br></pre></td></tr></table></figure><p><strong>修改后</strong>：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="built_in">hexo-config</span>(<span class="string">&#x27;loading.fullpage&#x27;</span>)</span><br><span class="line">  <span class="comment">// 全局隐藏滚动条当loading显示时</span></span><br><span class="line">  <span class="selector-tag">body</span><span class="selector-class">.loading-active</span></span><br><span class="line">    <span class="attribute">overflow</span> hidden <span class="meta">!important</span></span><br><span class="line">    <span class="attribute">height</span> <span class="number">100vh</span> <span class="meta">!important</span></span><br><span class="line">  </span><br><span class="line">  <span class="selector-tag">html</span><span class="selector-class">.loading-active</span></span><br><span class="line">    <span class="attribute">overflow</span> hidden <span class="meta">!important</span></span><br><span class="line">    <span class="attribute">height</span> <span class="number">100vh</span> <span class="meta">!important</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// Mona Lisa 主题样式</span></span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">hexo-config</span>(<span class="string">&#x27;loading.theme&#x27;</span>) == <span class="string">&#x27;mona-lisa&#x27;</span></span><br><span class="line">    <span class="selector-id">#loading-container</span></span><br><span class="line">      <span class="attribute">position</span> fixed</span><br><span class="line">      <span class="attribute">top</span> <span class="number">0</span></span><br><span class="line">      <span class="attribute">left</span> <span class="number">0</span></span><br><span class="line">      <span class="attribute">width</span> <span class="number">100%</span></span><br><span class="line">      <span class="attribute">height</span> <span class="number">100%</span></span><br><span class="line">      <span class="attribute">background</span> <span class="number">#fff</span></span><br><span class="line">      <span class="attribute">display</span> flex</span><br><span class="line">      <span class="attribute">flex-direction</span> column</span><br><span class="line">      <span class="attribute">align-items</span> center</span><br><span class="line">      <span class="attribute">justify-content</span> center</span><br><span class="line">      <span class="attribute">z-index</span> <span class="number">9998</span></span><br><span class="line">      <span class="attribute">transition</span> transform <span class="number">1.3s</span> ease</span><br><span class="line">      <span class="attribute">will-change</span> transform</span><br><span class="line">      <span class="attribute">overflow</span> hidden  # ← 新增</span><br><span class="line">      <span class="attribute">font-family</span> <span class="string">&#x27;Quicksand&#x27;</span>, <span class="string">&#x27;Nunito&#x27;</span>, <span class="string">&#x27;Poppins&#x27;</span>, <span class="string">&#x27;Arial Rounded MT Bold&#x27;</span>, <span class="string">&#x27;PingFang SC&#x27;</span>, <span class="string">&#x27;Microsoft YaHei&#x27;</span>, sans-serif</span><br></pre></td></tr></table></figure><h4 id="修改2：Mona-Lisa主题JavaScript增强">修改2：Mona Lisa主题JavaScript增强</h4><p><strong>文件</strong>：<code>themes/solitude/source/js/custom/loading-theme-mona-lisa.js</code></p><p><strong>修改A：startAnimation函数</strong></p><p>修改前：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 开始动画</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">startAnimation</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Starting Mona Lisa loading animation...&#x27;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 隐藏页面滚动条</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span>.<span class="property">overflow</span> = <span class="string">&#x27;hidden&#x27;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 标记loading正在运行，避免其他脚本冲突</span></span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">loadingInProgress</span> = <span class="literal">true</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 开始描边动画</span></span><br><span class="line">    <span class="title function_">animatePaths</span>(<span class="literal">true</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 开始模拟加载</span></span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">simulateLoading</span>();</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>修改后：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 开始动画</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">startAnimation</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Starting Mona Lisa loading animation...&#x27;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 隐藏页面滚动条 - 多种方式确保隐藏</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span>.<span class="property">overflow</span> = <span class="string">&#x27;hidden&#x27;</span>;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">style</span>.<span class="property">overflow</span> = <span class="string">&#x27;hidden&#x27;</span>;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;loading-active&#x27;</span>);</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;loading-active&#x27;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 标记loading正在运行，避免其他脚本冲突</span></span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">loadingInProgress</span> = <span class="literal">true</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 开始描边动画</span></span><br><span class="line">    <span class="title function_">animatePaths</span>(<span class="literal">true</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 开始模拟加载</span></span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">simulateLoading</span>();</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>修改B：completeLoading函数</strong></p><p>修改前：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 原始的完成函数（简化版）</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">completeLoading</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// 移除loading元素</span></span><br><span class="line">        <span class="keyword">const</span> loadingContainer = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;loading-container&#x27;</span>);</span><br><span class="line">        <span class="keyword">if</span> (loadingContainer) loadingContainer.<span class="title function_">remove</span>();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 恢复滚动</span></span><br><span class="line">        <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span>.<span class="property">overflow</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 清除loading标记</span></span><br><span class="line">        <span class="variable language_">window</span>.<span class="property">loadingInProgress</span> = <span class="literal">false</span>;</span><br><span class="line">    &#125;, <span class="number">1300</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>修改后：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 完成loading动画</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">completeLoading</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[Loading] Mona Lisa loading完成，开始清理&#x27;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// 移除loading元素</span></span><br><span class="line">        <span class="keyword">const</span> loadingAnimation = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;loading-animation&#x27;</span>);</span><br><span class="line">        <span class="keyword">if</span> (loadingAnimation) loadingAnimation.<span class="title function_">remove</span>();</span><br><span class="line">        <span class="keyword">const</span> loadingBg = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;loading-bg&#x27;</span>);</span><br><span class="line">        <span class="keyword">if</span> (loadingBg) loadingBg.<span class="title function_">remove</span>();</span><br><span class="line">        <span class="keyword">const</span> loadingContainer = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;loading-container&#x27;</span>);</span><br><span class="line">        <span class="keyword">if</span> (loadingContainer) loadingContainer.<span class="title function_">remove</span>();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 兼容其它可能的遮罩</span></span><br><span class="line">        <span class="keyword">const</span> masks = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.mask, .overlay, .loading-mask, .loading-overlay&#x27;</span>);</span><br><span class="line">        masks.<span class="title function_">forEach</span>(<span class="function"><span class="params">el</span> =&gt;</span> el.<span class="title function_">remove</span>());</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 恢复页面滚动 - 移除所有滚动限制</span></span><br><span class="line">        <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span>.<span class="property">overflow</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">style</span>.<span class="property">overflow</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;loading-active&#x27;</span>);</span><br><span class="line">        <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;loading-active&#x27;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 清除loading标记</span></span><br><span class="line">        <span class="variable language_">window</span>.<span class="property">loadingInProgress</span> = <span class="literal">false</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 触发pace-done事件</span></span><br><span class="line">        <span class="keyword">const</span> body = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;body&#x27;</span>);</span><br><span class="line">        <span class="keyword">if</span> (body) &#123;</span><br><span class="line">            body.<span class="property">className</span> = <span class="string">&#x27;pace-done&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 🔧 关键修复：重新初始化TOC和aside功能</span></span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[Loading] Mona Lisa loading完成，开始重新初始化&#x27;</span>);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 检查必要的DOM元素</span></span><br><span class="line">            <span class="keyword">const</span> tocContainer = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.toc&#x27;</span>);</span><br><span class="line">            <span class="keyword">const</span> articleContainer = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.article-container&#x27;</span>);</span><br><span class="line">            </span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[Loading] TOC容器存在:&#x27;</span>, !!tocContainer);</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[Loading] 文章容器存在:&#x27;</span>, !!articleContainer);</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[Loading] PAGE_CONFIG.toc:&#x27;</span>, <span class="variable constant_">PAGE_CONFIG</span>?.<span class="property">toc</span>);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 清理旧的scroll监听器，避免重复绑定</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">tocScrollFn</span>) &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[Loading] 清理旧的scroll监听器&#x27;</span>);</span><br><span class="line">                <span class="variable language_">window</span>.<span class="title function_">removeEventListener</span>(<span class="string">&#x27;scroll&#x27;</span>, <span class="variable language_">window</span>.<span class="property">tocScrollFn</span>);</span><br><span class="line">                <span class="variable language_">window</span>.<span class="property">tocScrollFn</span> = <span class="literal">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 重新初始化TOC</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="variable constant_">PAGE_CONFIG</span>?.<span class="property">toc</span> &amp;&amp; <span class="keyword">typeof</span> toc !== <span class="string">&#x27;undefined&#x27;</span>) &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[Loading] 直接重新初始化TOC&#x27;</span>);</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    toc.<span class="title function_">init</span>();</span><br><span class="line">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[Loading] TOC初始化成功&#x27;</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">                    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;[Loading] TOC初始化失败:&#x27;</span>, error);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="variable language_">window</span>.<span class="property">refreshFn</span> === <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[Loading] 使用refreshFn重新初始化&#x27;</span>);</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="variable language_">window</span>.<span class="title function_">refreshFn</span>();</span><br><span class="line">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[Loading] refreshFn执行成功&#x27;</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">                    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;[Loading] refreshFn执行失败:&#x27;</span>, error);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 强制触发浏览器重新计算和事件</span></span><br><span class="line">            <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[Loading] 触发scroll和resize事件&#x27;</span>);</span><br><span class="line">                </span><br><span class="line">                <span class="comment">// 触发TOC滚动函数</span></span><br><span class="line">                <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">tocScrollFn</span>) &#123;</span><br><span class="line">                    <span class="variable language_">window</span>.<span class="title function_">tocScrollFn</span>();</span><br><span class="line">                &#125;</span><br><span class="line">                </span><br><span class="line">                <span class="comment">// 触发浏览器重新计算布局</span></span><br><span class="line">                <span class="variable language_">window</span>.<span class="title function_">dispatchEvent</span>(<span class="keyword">new</span> <span class="title class_">Event</span>(<span class="string">&#x27;resize&#x27;</span>));</span><br><span class="line">                <span class="variable language_">window</span>.<span class="title function_">dispatchEvent</span>(<span class="keyword">new</span> <span class="title class_">Event</span>(<span class="string">&#x27;scroll&#x27;</span>));</span><br><span class="line">            &#125;, <span class="number">200</span>);</span><br><span class="line">            </span><br><span class="line">        &#125;, <span class="number">800</span>); <span class="comment">// 增加延迟确保DOM稳定</span></span><br><span class="line">        </span><br><span class="line">    &#125;, <span class="number">1300</span>); <span class="comment">// loading动画完成延迟</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="修改3：Black-Cat主题同步修复">修改3：Black Cat主题同步修复</h4><p><strong>文件</strong>：<code>themes/solitude/source/js/custom/loading-theme-black-cat.js</code></p><p><strong>修改A：startAnimation函数</strong></p><p>修改前：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 开始动画</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">startAnimation</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Starting Black Cat loading animation...&#x27;</span>);</span><br><span class="line">    isAnimating = <span class="literal">true</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 隐藏页面滚动条</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span>.<span class="property">overflow</span> = <span class="string">&#x27;hidden&#x27;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 标记loading正在运行，避免其他脚本冲突</span></span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">loadingInProgress</span> = <span class="literal">true</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 开始小猫动画</span></span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">initAni</span>();</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>修改后：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 开始动画</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">startAnimation</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Starting Black Cat loading animation...&#x27;</span>);</span><br><span class="line">    isAnimating = <span class="literal">true</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 隐藏页面滚动条 - 多种方式确保隐藏</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span>.<span class="property">overflow</span> = <span class="string">&#x27;hidden&#x27;</span>;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">style</span>.<span class="property">overflow</span> = <span class="string">&#x27;hidden&#x27;</span>;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;loading-active&#x27;</span>);</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;loading-active&#x27;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 标记loading正在运行，避免其他脚本冲突</span></span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">loadingInProgress</span> = <span class="literal">true</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 开始小猫动画</span></span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">initAni</span>();</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>修改B：completeLoading函数</strong></p><p>修改前：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 原始完成函数（简化版）</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 移除 loading 相关遮罩</span></span><br><span class="line">    <span class="keyword">if</span> (loadingContainer) loadingContainer.<span class="title function_">remove</span>();</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span>.<span class="property">overflow</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="comment">// 清除loading标记</span></span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">loadingInProgress</span> = <span class="literal">false</span>;</span><br><span class="line">&#125;, <span class="number">1300</span>);</span><br></pre></td></tr></table></figure><p>修改后：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 移除 loading 相关遮罩</span></span><br><span class="line">    <span class="keyword">if</span> (loadingContainer) loadingContainer.<span class="title function_">remove</span>();</span><br><span class="line">    <span class="comment">// 兼容其它可能的遮罩</span></span><br><span class="line">    <span class="keyword">const</span> masks = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.mask, .overlay, .loading-mask, .loading-overlay&#x27;</span>);</span><br><span class="line">    masks.<span class="title function_">forEach</span>(<span class="function"><span class="params">el</span> =&gt;</span> el.<span class="title function_">remove</span>());</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 恢复页面滚动 - 移除所有滚动限制</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span>.<span class="property">overflow</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">style</span>.<span class="property">overflow</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;loading-active&#x27;</span>);</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;loading-active&#x27;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 清除loading标记</span></span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">loadingInProgress</span> = <span class="literal">false</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 触发pace-done事件</span></span><br><span class="line">    <span class="keyword">const</span> bodyElement = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;body&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span> (bodyElement) &#123;</span><br><span class="line">        bodyElement.<span class="property">className</span> = <span class="string">&#x27;pace-done&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 🔧 关键修复：重新初始化TOC和aside功能（与Mona Lisa相同的逻辑）</span></span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[Loading] Black Cat loading完成，开始重新初始化&#x27;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 检查必要的DOM元素</span></span><br><span class="line">        <span class="keyword">const</span> tocContainer = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.toc&#x27;</span>);</span><br><span class="line">        <span class="keyword">const</span> articleContainer = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.article-container&#x27;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[Loading] TOC容器存在:&#x27;</span>, !!tocContainer);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[Loading] 文章容器存在:&#x27;</span>, !!articleContainer);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[Loading] PAGE_CONFIG.toc:&#x27;</span>, <span class="variable constant_">PAGE_CONFIG</span>?.<span class="property">toc</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 清理旧的scroll监听器，避免重复绑定</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">tocScrollFn</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[Loading] 清理旧的scroll监听器&#x27;</span>);</span><br><span class="line">            <span class="variable language_">window</span>.<span class="title function_">removeEventListener</span>(<span class="string">&#x27;scroll&#x27;</span>, <span class="variable language_">window</span>.<span class="property">tocScrollFn</span>);</span><br><span class="line">            <span class="variable language_">window</span>.<span class="property">tocScrollFn</span> = <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 重新初始化TOC</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable constant_">PAGE_CONFIG</span>?.<span class="property">toc</span> &amp;&amp; <span class="keyword">typeof</span> toc !== <span class="string">&#x27;undefined&#x27;</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[Loading] 直接重新初始化TOC&#x27;</span>);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                toc.<span class="title function_">init</span>();</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[Loading] TOC初始化成功&#x27;</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;[Loading] TOC初始化失败:&#x27;</span>, error);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="variable language_">window</span>.<span class="property">refreshFn</span> === <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[Loading] 使用refreshFn重新初始化&#x27;</span>);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="variable language_">window</span>.<span class="title function_">refreshFn</span>();</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[Loading] refreshFn执行成功&#x27;</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;[Loading] refreshFn执行失败:&#x27;</span>, error);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 强制触发浏览器重新计算和事件</span></span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[Loading] 触发scroll和resize事件&#x27;</span>);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 触发TOC滚动函数</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">tocScrollFn</span>) &#123;</span><br><span class="line">                <span class="variable language_">window</span>.<span class="title function_">tocScrollFn</span>();</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 触发浏览器重新计算布局</span></span><br><span class="line">            <span class="variable language_">window</span>.<span class="title function_">dispatchEvent</span>(<span class="keyword">new</span> <span class="title class_">Event</span>(<span class="string">&#x27;resize&#x27;</span>));</span><br><span class="line">            <span class="variable language_">window</span>.<span class="title function_">dispatchEvent</span>(<span class="keyword">new</span> <span class="title class_">Event</span>(<span class="string">&#x27;scroll&#x27;</span>));</span><br><span class="line">        &#125;, <span class="number">200</span>);</span><br><span class="line">        </span><br><span class="line">    &#125;, <span class="number">800</span>); <span class="comment">// 增加延迟确保DOM稳定</span></span><br><span class="line">    </span><br><span class="line">&#125;, <span class="number">1300</span>); <span class="comment">// loading动画完成延迟</span></span><br></pre></td></tr></table></figure><h3 id="🔧-修改汇总">🔧 修改汇总</h3><p>经过以上修改，我们总共修改了以下文件：</p><ol><li><strong>CSS文件</strong>：<code>themes/solitude/source/css/_layout/fullpage.styl</code></li><li><strong>Mona Lisa主题JS</strong>：<code>themes/solitude/source/js/custom/loading-theme-mona-lisa.js</code></li><li><strong>Black Cat主题JS</strong>：<code>themes/solitude/source/js/custom/loading-theme-black-cat.js</code></li></ol><h2 id="第五步：测试验证">第五步：测试验证</h2><h3 id="⚡-重新生成网站">⚡ 重新生成网站</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在项目根目录执行</span></span><br><span class="line">npm run build</span><br></pre></td></tr></table></figure><h3 id="🧪-测试步骤详解">🧪 测试步骤详解</h3><h4 id="测试1：基本功能验证">测试1：基本功能验证</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 测试环境准备</span></span><br><span class="line">1. 清空浏览器缓存</span><br><span class="line">2. 刷新有Loading的文章页面</span><br><span class="line">3. 观察Loading动画播放</span><br><span class="line">4. 等待Loading完成后测试TOC功能</span><br></pre></td></tr></table></figure><p><strong>预期结果</strong>：</p><ul><li>✅ Loading动画正常播放1.3秒</li><li>✅ Loading完成后页面正常显示</li><li>✅ TOC目录可以点击跳转</li><li>✅ 滚动时TOC正确高亮当前章节</li><li>✅ aside侧边栏保持sticky定位</li></ul><h4 id="测试2：控制台调试验证">测试2：控制台调试验证</h4><p>打开浏览器开发者工具Console面板，查看调试信息：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 应该看到以下调试日志序列</span></span><br><span class="line">[<span class="title class_">Loading</span>] <span class="title class_">Starting</span> <span class="title class_">Mona</span> <span class="title class_">Lisa</span> loading animation...</span><br><span class="line">[<span class="title class_">Loading</span>] <span class="title class_">Mona</span> <span class="title class_">Lisa</span> loading完成，开始清理</span><br><span class="line">[<span class="title class_">Loading</span>] <span class="title class_">Mona</span> <span class="title class_">Lisa</span> loading完成，开始重新初始化</span><br><span class="line">[<span class="title class_">Loading</span>] <span class="variable constant_">TOC</span>容器存在: <span class="literal">true</span></span><br><span class="line">[<span class="title class_">Loading</span>] 文章容器存在: <span class="literal">true</span>  </span><br><span class="line">[<span class="title class_">Loading</span>] <span class="variable constant_">PAGE_CONFIG</span>.<span class="property">toc</span>: <span class="literal">true</span></span><br><span class="line">[<span class="title class_">Loading</span>] 清理旧的scroll监听器</span><br><span class="line">[<span class="title class_">Loading</span>] 直接重新初始化<span class="variable constant_">TOC</span></span><br><span class="line">[<span class="title class_">Loading</span>] <span class="variable constant_">TOC</span>初始化成功</span><br><span class="line">[<span class="title class_">Loading</span>] 触发scroll和resize事件</span><br></pre></td></tr></table></figure><h4 id="测试3：多主题兼容性测试">测试3：多主题兼容性测试</h4><p>测试两种Loading主题：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在 _config.solitude.yml 中切换主题</span></span><br><span class="line"><span class="attr">loading:</span></span><br><span class="line">  <span class="attr">fullpage:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">theme:</span> <span class="string">mona-lisa</span>   <span class="comment"># 测试Mona Lisa主题</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 然后切换为</span></span><br><span class="line"><span class="attr">loading:</span></span><br><span class="line">  <span class="attr">fullpage:</span> <span class="literal">true</span>  </span><br><span class="line">  <span class="attr">theme:</span> <span class="string">black-cat</span>   <span class="comment"># 测试Black Cat主题</span></span><br></pre></td></tr></table></figure><p><strong>两个主题都应该</strong>：</p><ul><li>✅ Loading动画正常</li><li>✅ TOC功能正常恢复</li><li>✅ aside功能正常恢复</li></ul><h4 id="测试4：滚动条隐藏验证">测试4：滚动条隐藏验证</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 验证Loading期间滚动条状态</span></span><br><span class="line">1. 刷新页面，立即观察右侧</span><br><span class="line">2. Loading期间应该完全没有滚动条</span><br><span class="line">3. Loading完成后页面滚动条正常显示</span><br></pre></td></tr></table></figure><h4 id="测试5：不同文章类型测试">测试5：不同文章类型测试</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 测试范围</span></span><br><span class="line">✅ 带有 recommend: <span class="literal">true</span> 的文章</span><br><span class="line">✅ 普通文章页面</span><br><span class="line">✅ 没有TOC的文章页面</span><br><span class="line">✅ 短文章（无需滚动）</span><br><span class="line">✅ 长文章（需要滚动）</span><br></pre></td></tr></table></figure><h3 id="📊-测试结果记录">📊 测试结果记录</h3><h4 id="修复前测试结果：">修复前测试结果：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">❌ TOC点击无响应</span><br><span class="line">❌ 滚动时TOC不高亮</span><br><span class="line">❌ aside不能固定定位</span><br><span class="line">❌ Loading页面有滚动条</span><br><span class="line">✅ Loading动画播放正常</span><br></pre></td></tr></table></figure><h4 id="修复后测试结果：">修复后测试结果：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">✅ TOC点击正常跳转</span><br><span class="line">✅ 滚动时TOC正确高亮  </span><br><span class="line">✅ aside正常固定定位</span><br><span class="line">✅ Loading页面无滚动条</span><br><span class="line">✅ Loading动画播放正常</span><br><span class="line">✅ 多主题都正常工作</span><br><span class="line">✅ 控制台无错误信息</span><br></pre></td></tr></table></figure><h3 id="🐛-问题排查指南">🐛 问题排查指南</h3><p>如果修复后仍有问题，按以下步骤排查：</p><h4 id="1-检查控制台错误">1. 检查控制台错误</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 打开F12，查看Console是否有错误</span></span><br><span class="line"><span class="comment">// 常见错误信息：</span></span><br><span class="line"><span class="comment">// - Cannot read property &#x27;init&#x27; of undefined</span></span><br><span class="line"><span class="comment">// - toc is not defined  </span></span><br><span class="line"><span class="comment">// - PAGE_CONFIG is not defined</span></span><br></pre></td></tr></table></figure><h4 id="2-检查DOM元素">2. 检查DOM元素</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在控制台执行以下检查</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;TOC元素:&#x27;</span>, <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.toc&#x27;</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;文章容器:&#x27;</span>, <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.article-container&#x27;</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;PAGE_CONFIG:&#x27;</span>, <span class="variable constant_">PAGE_CONFIG</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;toc对象:&#x27;</span>, <span class="keyword">typeof</span> toc);</span><br></pre></td></tr></table></figure><h4 id="3-检查事件监听器">3. 检查事件监听器</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 检查滚动事件监听器</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;tocScrollFn:&#x27;</span>, <span class="variable language_">window</span>.<span class="property">tocScrollFn</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;监听器类型:&#x27;</span>, <span class="keyword">typeof</span> <span class="variable language_">window</span>.<span class="property">tocScrollFn</span>);</span><br></pre></td></tr></table></figure><h4 id="4-手动重新初始化测试">4. 手动重新初始化测试</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在控制台手动执行</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> toc !== <span class="string">&#x27;undefined&#x27;</span>) &#123;</span><br><span class="line">    toc.<span class="title function_">init</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;手动重新初始化TOC完成&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="💡-性能优化建议">💡 性能优化建议</h3><p>修复完成后，还可以考虑以下优化：</p><h4 id="1-减少重复DOM查询">1. 减少重复DOM查询</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 缓存DOM元素引用</span></span><br><span class="line"><span class="keyword">const</span> tocContainer = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.toc&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> articleContainer = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.article-container&#x27;</span>);</span><br></pre></td></tr></table></figure><h4 id="2-条件执行重新初始化">2. 条件执行重新初始化</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 只在必要时重新初始化</span></span><br><span class="line"><span class="keyword">if</span> (tocContainer &amp;&amp; <span class="variable constant_">PAGE_CONFIG</span>?.<span class="property">toc</span>) &#123;</span><br><span class="line">    <span class="comment">// 执行重新初始化</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-事件节流优化">3. 事件节流优化</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 对scroll事件进行节流处理</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">throttle</span>(<span class="params">func, delay</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> timeoutId;</span><br><span class="line">    <span class="keyword">let</span> lastExecTime = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">...args</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> currentTime = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line">        <span class="keyword">if</span> (currentTime - lastExecTime &gt; delay) &#123;</span><br><span class="line">            func.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args);</span><br><span class="line">            lastExecTime = currentTime;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">clearTimeout</span>(timeoutId);</span><br><span class="line">            timeoutId = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                func.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args);</span><br><span class="line">                lastExecTime = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line">            &#125;, delay - (currentTime - lastExecTime));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="总结与经验">总结与经验</h2><h3 id="🎯-关键修复要点">🎯 关键修复要点</h3><ol><li><strong>正确的初始化时机</strong>：Loading完成后延迟800ms重新初始化</li><li><strong>事件监听器管理</strong>：清理旧监听器，避免重复绑定</li><li><strong>DOM状态检查</strong>：确保必要元素存在后再初始化</li><li><strong>强制事件触发</strong>：手动触发resize和scroll事件</li><li><strong>多重滚动控制</strong>：CSS class + inline style双重保障</li></ol><h3 id="🔧-调试技巧总结">🔧 调试技巧总结</h3><ol><li><strong>使用详细日志</strong>：添加console.log跟踪执行流程</li><li><strong>分步验证</strong>：逐步检查DOM、配置、函数可用性</li><li><strong>浏览器工具</strong>：善用Network、Console、Elements面板</li><li><strong>手动测试</strong>：控制台手动执行关键代码验证</li></ol><h3 id="🚀-扩展应用">🚀 扩展应用</h3><p>这个修复方案的思路可以应用到其他类似场景：</p><ul><li><strong>其他Loading主题冲突</strong></li><li><strong>Modal弹窗与页面功能冲突</strong></li><li><strong>动画效果与交互功能冲突</strong></li><li><strong>第三方插件与主题功能冲突</strong></li></ul><p>核心思路：<strong>识别冲突 → 调整时机 → 重新绑定 → 验证效果</strong></p><hr><p>通过本次完整的问题解决过程，我们不仅修复了Loading与TOC的冲突，还学会了系统性的前端问题排查和解决方法。这种方法论可以帮助我们应对更多复杂的魔改场景！</p><p><strong>下期预告</strong>：我们将探索更多Solitude主题的高级魔改技巧，敬请期待！</p>]]></content>
      
      
      <categories>
          
          <category> 魔改教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 魔改教程 </tag>
            
            <tag> Solitude </tag>
            
            <tag> Hexo </tag>
            
            <tag> 前端开发 </tag>
            
            <tag> Loading </tag>
            
            <tag> JavaScript </tag>
            
            <tag> TOC </tag>
            
            <tag> 问题修复 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TOC 测试文章</title>
      <link href="/2025/01/20/toc-test/"/>
      <url>/2025/01/20/toc-test/</url>
      
        <content type="html"><![CDATA[<h1>TOC 测试文章</h1><p>这是一个用于测试文章目录功能的测试文档。</p><h2 id="第一章：基础概念">第一章：基础概念</h2><h3 id="1-1-什么是-TOC">1.1 什么是 TOC</h3><p>TOC（Table of Contents）是文章目录的缩写，用于显示文章的标题结构。</p><h3 id="1-2-TOC-的作用">1.2 TOC 的作用</h3><ul><li>帮助读者快速了解文章结构</li><li>提供快速导航功能</li><li>提升阅读体验</li></ul><h2 id="第二章：实现原理">第二章：实现原理</h2><h3 id="2-1-标题解析">2.1 标题解析</h3><p>系统会自动解析文章中的标题标签（h1-h6）来生成目录。</p><h3 id="2-2-层级结构">2.2 层级结构</h3><ul><li>一级标题（#）对应顶级目录</li><li>二级标题（##）对应二级目录</li><li>三级标题（###）对应三级目录</li></ul><h2 id="第三章：使用方法">第三章：使用方法</h2><h3 id="3-1-在文章中启用-TOC">3.1 在文章中启用 TOC</h3><p>在文章的 front-matter 中添加：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">toc:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h3 id="3-2-标题格式">3.2 标题格式</h3><p>确保使用正确的 Markdown 标题格式：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 一级标题</span></span><br><span class="line"><span class="section">## 二级标题</span></span><br><span class="line"><span class="section">### 三级标题</span></span><br></pre></td></tr></table></figure><h2 id="第四章：高级功能">第四章：高级功能</h2><h3 id="4-1-自定义样式">4.1 自定义样式</h3><p>可以通过 CSS 自定义 TOC 的显示样式。</p><h3 id="4-2-交互功能">4.2 交互功能</h3><ul><li>点击目录项可跳转到对应位置</li><li>滚动时自动高亮当前章节</li><li>支持折叠/展开功能</li></ul><h2 id="总结">总结</h2><p>TOC 功能为博客提供了更好的阅读体验，是长文章的重要功能之一。</p>]]></content>
      
      
      <categories>
          
          <category> 技术文档 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> TOC </tag>
            
            <tag> 测试 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Solitude主题魔改教程(17)-Banner图片和视频防复制防下载功能实现</title>
      <link href="/2025/01/15/Solitude%E4%B8%BB%E9%A2%98%E9%AD%94%E6%94%B9%E6%95%99%E7%A8%8B(17)-Banner%E5%9B%BE%E7%89%87%E5%92%8C%E8%A7%86%E9%A2%91%E9%98%B2%E5%A4%8D%E5%88%B6%E9%98%B2%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0/"/>
      <url>/2025/01/15/Solitude%E4%B8%BB%E9%A2%98%E9%AD%94%E6%94%B9%E6%95%99%E7%A8%8B(17)-Banner%E5%9B%BE%E7%89%87%E5%92%8C%E8%A7%86%E9%A2%91%E9%98%B2%E5%A4%8D%E5%88%B6%E9%98%B2%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>在博客运营过程中，我们经常会遇到原创图片和视频被盗用的问题。虽然无法完全阻止技术高手的恶意行为，但可以通过技术手段提高普通用户获取媒体文件的门槛。本教程将详细介绍如何为Solitude主题的Banner区域添加全面的防护功能。</p><hr><h2 id="现象与需求">现象与需求</h2><h3 id="现象">现象</h3><ul><li>🔓 Banner图片和视频可以轻易通过右键保存</li><li>🔓 媒体文件可以通过拖拽方式保存到本地</li><li>🔓 开发者工具可以轻松获取媒体文件链接</li><li>🔓 视频控制栏提供下载选项</li><li>🔓 移动端长按可以保存图片</li></ul><h3 id="期望效果">期望效果</h3><ul><li>🔒 禁用右键菜单，防止直接保存</li><li>🔒 禁用拖拽功能，防止拖拽保存</li><li>🔒 拦截开发者工具相关快捷键</li><li>🔒 完全隐藏视频控制栏</li><li>🔒 移动端防长按保存</li><li>🔒 添加透明遮罩层防护</li><li>🔒 保持正常交互功能不受影响</li></ul><hr><h2 id="问题分析">问题分析</h2><h3 id="根本原因">根本原因</h3><ol><li><p><strong>缺乏防护机制</strong><br>Solitude主题默认未对Banner媒体文件进行任何保护</p></li><li><p><strong>用户体验考虑</strong><br>原生浏览器功能便于用户操作，但也带来了内容保护隐患</p></li><li><p><strong>技术实现复杂度</strong><br>需要平衡防护效果与用户体验，确保正常功能不受影响</p></li><li><p><strong>兼容性要求</strong><br>需要支持不同浏览器和移动设备的防护</p></li></ol><hr><h2 id="修改文件清单">修改文件清单</h2><ul><li><code>themes/solitude/layout/includes/head.pug</code></li><li><code>themes/solitude/source/css/custom/banner-protection.css</code></li><li><code>themes/solitude/source/js/custom/banner-video.js</code></li><li><code>source/js/custom/banner-video.js</code></li></ul><hr><h2 id="详细修改步骤">详细修改步骤</h2><h3 id="1-创建防护CSS样式">1. 创建防护CSS样式</h3><p><strong>文件路径：</strong><br><code>themes/solitude/source/css/custom/banner-protection.css</code></p><p><strong>文件内容：</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Banner图片和视频防护样式 */</span></span><br><span class="line"><span class="comment">/* Banner Image and Video Protection Styles */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 禁用选择和拖拽 */</span></span><br><span class="line"><span class="selector-class">.author-content</span><span class="selector-class">.author-content-item</span><span class="selector-class">.single</span><span class="selector-class">.sharePage</span>,</span><br><span class="line"><span class="selector-class">.todayCard-cover</span>,</span><br><span class="line"><span class="selector-class">.todayCard-video</span>,</span><br><span class="line"><span class="selector-id">#banner-video</span>,</span><br><span class="line"><span class="selector-class">.image-container</span> <span class="selector-tag">img</span>,</span><br><span class="line"><span class="selector-class">.author-content</span> <span class="selector-tag">img</span>,</span><br><span class="line"><span class="selector-class">.banner-video-container</span> &#123;</span><br><span class="line">    <span class="comment">/* 禁用文本选择 */</span></span><br><span class="line">    -webkit-<span class="attribute">user-select</span>: none;</span><br><span class="line">    -moz-<span class="attribute">user-select</span>: none;</span><br><span class="line">    -ms-<span class="attribute">user-select</span>: none;</span><br><span class="line">    <span class="attribute">user-select</span>: none;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* 禁用拖拽 */</span></span><br><span class="line">    -webkit-user-drag: none;</span><br><span class="line">    -khtml-user-drag: none;</span><br><span class="line">    -moz-user-drag: none;</span><br><span class="line">    -o-user-drag: none;</span><br><span class="line">    user-drag: none;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* 禁用突出显示 */</span></span><br><span class="line">    -webkit-touch-callout: none;</span><br><span class="line">    -webkit-tap-highlight-<span class="attribute">color</span>: transparent;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* 防止长按保存 */</span></span><br><span class="line">    <span class="attribute">pointer-events</span>: auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 视频特殊防护 */</span></span><br><span class="line"><span class="selector-id">#banner-video</span>,</span><br><span class="line"><span class="selector-class">.todayCard-video</span>,</span><br><span class="line"><span class="selector-tag">video</span><span class="selector-attr">[id*=<span class="string">&quot;banner&quot;</span>]</span>,</span><br><span class="line"><span class="selector-tag">video</span><span class="selector-attr">[class*=<span class="string">&quot;banner&quot;</span>]</span> &#123;</span><br><span class="line">    <span class="comment">/* 禁用视频控制栏 */</span></span><br><span class="line">    -webkit-controls: none;</span><br><span class="line">    -moz-controls: none;</span><br><span class="line">    controls: none;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* 禁用右键菜单 */</span></span><br><span class="line">    -webkit-context-<span class="selector-tag">menu</span>: none;</span><br><span class="line">    -moz-context-<span class="selector-tag">menu</span>: none;</span><br><span class="line">    context-<span class="selector-tag">menu</span>: none;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* 禁用画中画 */</span></span><br><span class="line">    -webkit-<span class="selector-tag">picture</span>-in-<span class="selector-tag">picture</span>: none;</span><br><span class="line">    <span class="selector-tag">picture</span>-in-<span class="selector-tag">picture</span>: none;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* 防止视频被选中 */</span></span><br><span class="line">    <span class="attribute">outline</span>: none;</span><br><span class="line">    <span class="attribute">border</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 图片特殊防护 */</span></span><br><span class="line"><span class="selector-class">.image-container</span> <span class="selector-tag">img</span>,</span><br><span class="line"><span class="selector-class">.author-content</span> <span class="selector-tag">img</span>,</span><br><span class="line"><span class="selector-tag">img</span><span class="selector-attr">[src*=<span class="string">&quot;banner&quot;</span>]</span>,</span><br><span class="line"><span class="selector-tag">img</span><span class="selector-attr">[class*=<span class="string">&quot;banner&quot;</span>]</span> &#123;</span><br><span class="line">    <span class="comment">/* 禁用图片拖拽 */</span></span><br><span class="line">    -webkit-user-drag: none;</span><br><span class="line">    -khtml-user-drag: none;</span><br><span class="line">    -moz-user-drag: none;</span><br><span class="line">    -o-user-drag: none;</span><br><span class="line">    user-drag: none;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* 防止图片被选中 */</span></span><br><span class="line">    -webkit-<span class="attribute">user-select</span>: none;</span><br><span class="line">    -moz-<span class="attribute">user-select</span>: none;</span><br><span class="line">    -ms-<span class="attribute">user-select</span>: none;</span><br><span class="line">    <span class="attribute">user-select</span>: none;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* 禁用长按保存 */</span></span><br><span class="line">    -webkit-touch-callout: none;</span><br><span class="line">    <span class="attribute">pointer-events</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 创建透明遮罩层防护 */</span></span><br><span class="line"><span class="selector-class">.banner-protection-overlay</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">10</span>;</span><br><span class="line">    <span class="attribute">background</span>: transparent;</span><br><span class="line">    <span class="attribute">pointer-events</span>: auto;</span><br><span class="line">    -webkit-<span class="attribute">user-select</span>: none;</span><br><span class="line">    -moz-<span class="attribute">user-select</span>: none;</span><br><span class="line">    -ms-<span class="attribute">user-select</span>: none;</span><br><span class="line">    <span class="attribute">user-select</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 确保banner内容区域的层级正确 */</span></span><br><span class="line"><span class="selector-class">.author-content</span> <span class="selector-class">.card-content</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">15</span>;</span><br><span class="line">    <span class="attribute">pointer-events</span>: auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 移动端额外防护 */</span></span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">max-width</span>: <span class="number">768px</span>) &#123;</span><br><span class="line">    <span class="selector-class">.author-content</span><span class="selector-class">.author-content-item</span><span class="selector-class">.single</span><span class="selector-class">.sharePage</span>,</span><br><span class="line">    <span class="selector-class">.todayCard-cover</span>,</span><br><span class="line">    <span class="selector-id">#banner-video</span>,</span><br><span class="line">    <span class="selector-class">.image-container</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">        <span class="comment">/* 禁用长按菜单 */</span></span><br><span class="line">        -webkit-touch-callout: none;</span><br><span class="line">        -webkit-<span class="attribute">user-select</span>: none;</span><br><span class="line">        -khtml-<span class="attribute">user-select</span>: none;</span><br><span class="line">        -moz-<span class="attribute">user-select</span>: none;</span><br><span class="line">        -ms-<span class="attribute">user-select</span>: none;</span><br><span class="line">        <span class="attribute">user-select</span>: none;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">/* 禁用双击缩放 */</span></span><br><span class="line">        <span class="attribute">touch-action</span>: manipulation;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 隐藏视频控制栏的所有可能实现 */</span></span><br><span class="line"><span class="selector-tag">video</span>::-webkit-media-controls,</span><br><span class="line">video::-webkit-media-controls-panel,</span><br><span class="line">video::-webkit-media-controls-play-button,</span><br><span class="line">video::-webkit-media-controls-volume-slider,</span><br><span class="line">video::-webkit-media-controls-mute-button,</span><br><span class="line">video::-webkit-media-controls-timeline,</span><br><span class="line">video::-webkit-media-controls-current-time-display,</span><br><span class="line">video::-webkit-media-controls-time-remaining-display,</span><br><span class="line">video::-webkit-media-controls-fullscreen-button &#123;</span><br><span class="line">    <span class="attribute">display</span>: none <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 防止视频暂停显示播放按钮 */</span></span><br><span class="line"><span class="selector-tag">video</span>::-webkit-media-controls-overlay-play-button &#123;</span><br><span class="line">    <span class="attribute">display</span>: none <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 额外的右键菜单禁用 */</span></span><br><span class="line"><span class="selector-class">.no-context-menu</span> &#123;</span><br><span class="line">    -webkit-touch-callout: none;</span><br><span class="line">    -webkit-<span class="attribute">user-select</span>: none;</span><br><span class="line">    -khtml-<span class="attribute">user-select</span>: none;</span><br><span class="line">    -moz-<span class="attribute">user-select</span>: none;</span><br><span class="line">    -ms-<span class="attribute">user-select</span>: none;</span><br><span class="line">    <span class="attribute">user-select</span>: none;</span><br><span class="line">    -webkit-context-<span class="selector-tag">menu</span>: none;</span><br><span class="line">    -moz-context-<span class="selector-tag">menu</span>: none;</span><br><span class="line">    context-<span class="selector-tag">menu</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-修改head-pug引入CSS">2. 修改head.pug引入CSS</h3><p><strong>文件路径：</strong><br><code>themes/solitude/layout/includes/head.pug</code></p><p><strong>修改前：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// index.css</span><br><span class="line">link(rel=&quot;stylesheet&quot;, href=url_for(theme.cdn.main_css))</span><br></pre></td></tr></table></figure><p><strong>修改后：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// index.css</span><br><span class="line">link(rel=&quot;stylesheet&quot;, href=url_for(theme.cdn.main_css))</span><br><span class="line"></span><br><span class="line">// banner protection css</span><br><span class="line">link(rel=&quot;stylesheet&quot;, href=url_for(&#x27;/css/custom/banner-protection.css&#x27;))</span><br></pre></td></tr></table></figure><h3 id="3-增强banner-video-js防护功能">3. 增强banner-video.js防护功能</h3><p><strong>文件路径：</strong><br><code>themes/solitude/source/js/custom/banner-video.js</code></p><p><strong>完整代码：</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Banner视频播放控制和防护</span></span><br><span class="line"><span class="comment">// Banner Video Control and Protection</span></span><br><span class="line"></span><br><span class="line">(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="string">&#x27;use strict&#x27;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 防护功能</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">initBannerProtection</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// 禁用右键菜单</span></span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">disableContextMenu</span>(<span class="params">element</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (element) &#123;</span><br><span class="line">                element.<span class="title function_">addEventListener</span>(<span class="string">&#x27;contextmenu&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">                    e.<span class="title function_">preventDefault</span>();</span><br><span class="line">                    e.<span class="title function_">stopPropagation</span>();</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 禁用拖拽</span></span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">disableDrag</span>(<span class="params">element</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (element) &#123;</span><br><span class="line">                element.<span class="title function_">addEventListener</span>(<span class="string">&#x27;dragstart&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">                    e.<span class="title function_">preventDefault</span>();</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                &#125;);</span><br><span class="line">                </span><br><span class="line">                element.<span class="title function_">addEventListener</span>(<span class="string">&#x27;drag&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">                    e.<span class="title function_">preventDefault</span>();</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 禁用选择</span></span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">disableSelection</span>(<span class="params">element</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (element) &#123;</span><br><span class="line">                element.<span class="title function_">addEventListener</span>(<span class="string">&#x27;selectstart&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">                    e.<span class="title function_">preventDefault</span>();</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                &#125;);</span><br><span class="line">                </span><br><span class="line">                element.<span class="title function_">addEventListener</span>(<span class="string">&#x27;mousedown&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (e.<span class="property">detail</span> &gt; <span class="number">1</span>) &#123; <span class="comment">// 防止多次点击选择</span></span><br><span class="line">                        e.<span class="title function_">preventDefault</span>();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 禁用键盘快捷键</span></span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">disableKeyboardShortcuts</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;keydown&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">                <span class="comment">// 禁用F12, Ctrl+Shift+I, Ctrl+Shift+J, Ctrl+U, Ctrl+S, Ctrl+A, Ctrl+P</span></span><br><span class="line">                <span class="keyword">if</span> (e.<span class="property">keyCode</span> === <span class="number">123</span> || <span class="comment">// F12</span></span><br><span class="line">                    (e.<span class="property">ctrlKey</span> &amp;&amp; e.<span class="property">shiftKey</span> &amp;&amp; (e.<span class="property">keyCode</span> === <span class="number">73</span> || e.<span class="property">keyCode</span> === <span class="number">74</span>)) || <span class="comment">// Ctrl+Shift+I/J</span></span><br><span class="line">                    (e.<span class="property">ctrlKey</span> &amp;&amp; (e.<span class="property">keyCode</span> === <span class="number">85</span> || e.<span class="property">keyCode</span> === <span class="number">83</span> || e.<span class="property">keyCode</span> === <span class="number">65</span> || e.<span class="property">keyCode</span> === <span class="number">80</span>))) &#123; <span class="comment">// Ctrl+U/S/A/P</span></span><br><span class="line">                    </span><br><span class="line">                    <span class="keyword">const</span> target = e.<span class="property">target</span>;</span><br><span class="line">                    <span class="keyword">const</span> isInBanner = target.<span class="title function_">closest</span>(<span class="string">&#x27;.author-content&#x27;</span>) || </span><br><span class="line">                                     target.<span class="title function_">closest</span>(<span class="string">&#x27;.todayCard-cover&#x27;</span>) || </span><br><span class="line">                                     target.<span class="property">id</span> === <span class="string">&#x27;banner-video&#x27;</span> ||</span><br><span class="line">                                     target.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;todayCard-video&#x27;</span>);</span><br><span class="line">                    </span><br><span class="line">                    <span class="keyword">if</span> (isInBanner) &#123;</span><br><span class="line">                        e.<span class="title function_">preventDefault</span>();</span><br><span class="line">                        e.<span class="title function_">stopPropagation</span>();</span><br><span class="line">                        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 应用防护到所有banner元素</span></span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">applyProtectionToElements</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="comment">// 保护banner视频</span></span><br><span class="line">            <span class="keyword">const</span> bannerVideos = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;#banner-video, .todayCard-video, video[id*=&quot;banner&quot;], video[class*=&quot;banner&quot;]&#x27;</span>);</span><br><span class="line">            bannerVideos.<span class="title function_">forEach</span>(<span class="function"><span class="params">video</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="title function_">disableContextMenu</span>(video);</span><br><span class="line">                <span class="title function_">disableDrag</span>(video);</span><br><span class="line">                <span class="title function_">disableSelection</span>(video);</span><br><span class="line">                </span><br><span class="line">                <span class="comment">// 禁用视频控制栏</span></span><br><span class="line">                video.<span class="property">controls</span> = <span class="literal">false</span>;</span><br><span class="line">                video.<span class="property">controlsList</span> = <span class="string">&#x27;nodownload nofullscreen noremoteplayback&#x27;</span>;</span><br><span class="line">                video.<span class="property">disablePictureInPicture</span> = <span class="literal">true</span>;</span><br><span class="line">                </span><br><span class="line">                <span class="comment">// 防止暂停时显示播放按钮</span></span><br><span class="line">                video.<span class="title function_">addEventListener</span>(<span class="string">&#x27;pause&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">                    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                        <span class="keyword">if</span> (video.<span class="property">paused</span>) &#123;</span><br><span class="line">                            video.<span class="title function_">play</span>().<span class="title function_">catch</span>(<span class="function">() =&gt;</span> &#123;&#125;);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;, <span class="number">100</span>);</span><br><span class="line">                &#125;);</span><br><span class="line">                </span><br><span class="line">                <span class="comment">// 添加透明遮罩层</span></span><br><span class="line">                <span class="keyword">if</span> (!video.<span class="property">parentElement</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.banner-protection-overlay&#x27;</span>)) &#123;</span><br><span class="line">                    <span class="keyword">const</span> overlay = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">                    overlay.<span class="property">className</span> = <span class="string">&#x27;banner-protection-overlay&#x27;</span>;</span><br><span class="line">                    video.<span class="property">parentElement</span>.<span class="property">style</span>.<span class="property">position</span> = <span class="string">&#x27;relative&#x27;</span>;</span><br><span class="line">                    video.<span class="property">parentElement</span>.<span class="title function_">appendChild</span>(overlay);</span><br><span class="line">                    </span><br><span class="line">                    <span class="title function_">disableContextMenu</span>(overlay);</span><br><span class="line">                    <span class="title function_">disableSelection</span>(overlay);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 保护banner图片</span></span><br><span class="line">            <span class="keyword">const</span> bannerImages = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.image-container img, .author-content img, img[src*=&quot;banner&quot;], img[class*=&quot;banner&quot;]&#x27;</span>);</span><br><span class="line">            bannerImages.<span class="title function_">forEach</span>(<span class="function"><span class="params">img</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="title function_">disableContextMenu</span>(img);</span><br><span class="line">                <span class="title function_">disableDrag</span>(img);</span><br><span class="line">                <span class="title function_">disableSelection</span>(img);</span><br><span class="line">                </span><br><span class="line">                <span class="comment">// 添加透明遮罩层</span></span><br><span class="line">                <span class="keyword">if</span> (!img.<span class="property">parentElement</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.banner-protection-overlay&#x27;</span>)) &#123;</span><br><span class="line">                    <span class="keyword">const</span> overlay = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">                    overlay.<span class="property">className</span> = <span class="string">&#x27;banner-protection-overlay&#x27;</span>;</span><br><span class="line">                    img.<span class="property">parentElement</span>.<span class="property">style</span>.<span class="property">position</span> = <span class="string">&#x27;relative&#x27;</span>;</span><br><span class="line">                    img.<span class="property">parentElement</span>.<span class="title function_">appendChild</span>(overlay);</span><br><span class="line">                    </span><br><span class="line">                    <span class="title function_">disableContextMenu</span>(overlay);</span><br><span class="line">                    <span class="title function_">disableSelection</span>(overlay);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 保护整个banner容器</span></span><br><span class="line">            <span class="keyword">const</span> bannerContainers = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.author-content, .todayCard-cover&#x27;</span>);</span><br><span class="line">            bannerContainers.<span class="title function_">forEach</span>(<span class="function"><span class="params">container</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="title function_">disableContextMenu</span>(container);</span><br><span class="line">                <span class="title function_">disableSelection</span>(container);</span><br><span class="line">                container.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;no-context-menu&#x27;</span>);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 初始化防护</span></span><br><span class="line">        <span class="title function_">applyProtectionToElements</span>();</span><br><span class="line">        <span class="title function_">disableKeyboardShortcuts</span>();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 监听DOM变化，动态应用防护</span></span><br><span class="line">        <span class="keyword">const</span> observer = <span class="keyword">new</span> <span class="title class_">MutationObserver</span>(<span class="keyword">function</span>(<span class="params">mutations</span>) &#123;</span><br><span class="line">            mutations.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">mutation</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (mutation.<span class="property">type</span> === <span class="string">&#x27;childList&#x27;</span>) &#123;</span><br><span class="line">                    mutation.<span class="property">addedNodes</span>.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">node</span>) &#123;</span><br><span class="line">                        <span class="keyword">if</span> (node.<span class="property">nodeType</span> === <span class="number">1</span>) &#123; <span class="comment">// 元素节点</span></span><br><span class="line">                            <span class="keyword">const</span> videos = node.<span class="property">querySelectorAll</span> ? node.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;video&#x27;</span>) : [];</span><br><span class="line">                            <span class="keyword">const</span> images = node.<span class="property">querySelectorAll</span> ? node.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;img&#x27;</span>) : [];</span><br><span class="line">                            </span><br><span class="line">                            [...videos, ...images].<span class="title function_">forEach</span>(<span class="function"><span class="params">element</span> =&gt;</span> &#123;</span><br><span class="line">                                <span class="title function_">disableContextMenu</span>(element);</span><br><span class="line">                                <span class="title function_">disableDrag</span>(element);</span><br><span class="line">                                <span class="title function_">disableSelection</span>(element);</span><br><span class="line">                            &#125;);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">        </span><br><span class="line">        observer.<span class="title function_">observe</span>(<span class="variable language_">document</span>.<span class="property">body</span>, &#123;</span><br><span class="line">            <span class="attr">childList</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">subtree</span>: <span class="literal">true</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 获取banner视频元素</span></span><br><span class="line">    <span class="keyword">const</span> bannerVideo = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;banner-video&#x27;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 视频播放控制</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">initBannerVideo</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (bannerVideo) &#123;</span><br><span class="line">            <span class="comment">// 确保视频自动播放</span></span><br><span class="line">            bannerVideo.<span class="title function_">play</span>().<span class="title function_">catch</span>(<span class="keyword">function</span>(<span class="params">error</span>) &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Video autoplay failed:&#x27;</span>, error);</span><br><span class="line">            &#125;);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 监听视频加载完成</span></span><br><span class="line">            bannerVideo.<span class="title function_">addEventListener</span>(<span class="string">&#x27;loadeddata&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Banner video loaded successfully&#x27;</span>);</span><br><span class="line">            &#125;);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 监听视频错误</span></span><br><span class="line">            bannerVideo.<span class="title function_">addEventListener</span>(<span class="string">&#x27;error&#x27;</span>, <span class="keyword">function</span>(<span class="params">error</span>) &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Banner video error:&#x27;</span>, error);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 等待DOM加载完成</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">readyState</span> === <span class="string">&#x27;loading&#x27;</span>) &#123;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="title function_">initBannerProtection</span>();</span><br><span class="line">            <span class="title function_">initBannerVideo</span>();</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title function_">initBannerProtection</span>();</span><br><span class="line">        <span class="title function_">initBannerVideo</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 确保在页面完全加载后再次应用防护</span></span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;load&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(initBannerProtection, <span class="number">500</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><h3 id="4-同步文件到source目录">4. 同步文件到source目录</h3><p><strong>文件路径：</strong><br><code>source/js/custom/banner-video.js</code></p><p>将上述JavaScript代码同样复制到source目录中的对应文件。</p><hr><h2 id="防护功能详解">防护功能详解</h2><h3 id="🔒-CSS防护机制">🔒 CSS防护机制</h3><ol><li><p><strong>用户选择禁用</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-webkit-<span class="attribute">user-select</span>: none;</span><br><span class="line">-moz-<span class="attribute">user-select</span>: none;</span><br><span class="line">-ms-<span class="attribute">user-select</span>: none;</span><br><span class="line"><span class="attribute">user-select</span>: none;</span><br></pre></td></tr></table></figure></li><li><p><strong>拖拽功能禁用</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-webkit-user-drag: none;</span><br><span class="line">-khtml-user-drag: none;</span><br><span class="line">-moz-user-drag: none;</span><br><span class="line">-o-user-drag: none;</span><br><span class="line">user-drag: none;</span><br></pre></td></tr></table></figure></li><li><p><strong>视频控制栏隐藏</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">video</span>::-webkit-media-controls &#123;</span><br><span class="line">    <span class="attribute">display</span>: none <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h3 id="🔒-JavaScript防护机制">🔒 JavaScript防护机制</h3><ol><li><p><strong>右键菜单拦截</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">element.<span class="title function_">addEventListener</span>(<span class="string">&#x27;contextmenu&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    e.<span class="title function_">preventDefault</span>();</span><br><span class="line">    e.<span class="title function_">stopPropagation</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li><p><strong>键盘快捷键拦截</strong></p><ul><li>F12（开发者工具）</li><li>Ctrl+Shift+I（检查元素）</li><li>Ctrl+U（查看源码）</li><li>Ctrl+S（保存页面）</li></ul></li><li><p><strong>透明遮罩层</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> overlay = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">overlay.<span class="property">className</span> = <span class="string">&#x27;banner-protection-overlay&#x27;</span>;</span><br></pre></td></tr></table></figure></li><li><p><strong>动态防护应用</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> observer = <span class="keyword">new</span> <span class="title class_">MutationObserver</span>(<span class="keyword">function</span>(<span class="params">mutations</span>) &#123;</span><br><span class="line">    <span class="comment">// 监听DOM变化，自动为新元素应用防护</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li></ol><hr><h2 id="技术特性说明">技术特性说明</h2><h3 id="⚡-性能优化">⚡ 性能优化</h3><ol><li><strong>事件委托</strong> - 减少事件监听器数量</li><li><strong>防抖技术</strong> - 避免重复执行防护逻辑</li><li><strong>选择器优化</strong> - 使用高效的CSS选择器</li></ol><h3 id="🎯-智能识别">🎯 智能识别</h3><ol><li><strong>自动检测</strong> - 自动识别banner相关的媒体元素</li><li><strong>动态应用</strong> - 新添加的元素自动获得防护</li><li><strong>精准定位</strong> - 只对banner区域应用防护</li></ol><h3 id="🔧-兼容性支持">🔧 兼容性支持</h3><ol><li><strong>浏览器兼容</strong> - 支持Webkit、Gecko、IE等内核</li><li><strong>移动端优化</strong> - 针对触摸设备的特殊防护</li><li><strong>降级处理</strong> - 不支持的浏览器优雅降级</li></ol><hr><h2 id="效果对比">效果对比</h2><h3 id="修改前">修改前</h3><ul><li>❌ 可以右键保存banner图片/视频</li><li>❌ 可以拖拽保存媒体文件</li><li>❌ F12可以轻松获取媒体链接</li><li>❌ 视频控制栏提供下载选项</li><li>❌ 移动端长按可以保存图片</li></ul><h3 id="修改后">修改后</h3><ul><li>✅ 右键菜单被完全禁用</li><li>✅ 拖拽功能被阻止</li><li>✅ 开发者工具快捷键被拦截</li><li>✅ 视频控制栏完全隐藏</li><li>✅ 移动端长按无保存选项</li><li>✅ 透明遮罩层额外防护</li><li>✅ 正常交互功能不受影响</li></ul><hr><h2 id="使用方法">使用方法</h2><h3 id="自动启用">自动启用</h3><p>防护功能无需额外配置，会在页面加载时自动启用：</p><ol><li>CSS样式自动应用到所有页面</li><li>JavaScript防护代码自动运行</li><li>动态内容自动获得保护</li></ol><h3 id="自定义配置">自定义配置</h3><p>如需调整防护范围，可修改JavaScript中的选择器：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 修改这些选择器来调整防护范围</span></span><br><span class="line"><span class="keyword">const</span> bannerVideos = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;#banner-video, .todayCard-video, video[id*=&quot;banner&quot;], video[class*=&quot;banner&quot;]&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> bannerImages = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.image-container img, .author-content img, img[src*=&quot;banner&quot;], img[class*=&quot;banner&quot;]&#x27;</span>);</span><br></pre></td></tr></table></figure><hr><h2 id="防护等级说明">防护等级说明</h2><h3 id="🥉-基础防护">🥉 基础防护</h3><ul><li>禁用右键菜单</li><li>禁用拖拽保存</li><li>禁用文本选择</li></ul><h3 id="🥈-中级防护">🥈 中级防护</h3><ul><li>键盘快捷键拦截</li><li>透明遮罩层覆盖</li><li>移动端长按防护</li></ul><h3 id="🥇-高级防护">🥇 高级防护</h3><ul><li>视频控制栏完全隐藏</li><li>画中画功能禁用</li><li>动态内容自动防护</li><li>开发者工具拦截</li></ul><hr><h2 id="注意事项">注意事项</h2><h3 id="⚠️-用户体验">⚠️ 用户体验</h3><ol><li><strong>功能保留</strong> - Banner上的交互按钮（如rightbtn）仍可正常使用</li><li><strong>范围限制</strong> - 防护仅针对banner区域，不影响网站其他功能</li><li><strong>性能影响</strong> - 防护功能对页面性能影响极小</li></ol><h3 id="⚠️-技术限制">⚠️ 技术限制</h3><ol><li><strong>不是万能的</strong> - 无法阻止高级用户通过网络面板等方式获取资源</li><li><strong>主要目的</strong> - 提高普通用户获取资源的门槛</li><li><strong>需要配合</strong> - 建议配合服务器端防盗链等措施</li></ol><h3 id="⚠️-兼容性">⚠️ 兼容性</h3><ol><li><strong>现代浏览器</strong> - 在Chrome、Firefox、Safari等现代浏览器中效果最佳</li><li><strong>移动设备</strong> - 对iOS Safari、Android Chrome等移动浏览器优化</li><li><strong>降级处理</strong> - 旧版浏览器会优雅降级，不影响基本功能</li></ol><hr><h2 id="故障排查">故障排查</h2><h3 id="1-防护不生效？">1. 防护不生效？</h3><ul><li>检查CSS文件是否正确加载</li><li>确认JavaScript文件无语法错误</li><li>清理浏览器缓存重新测试</li></ul><h3 id="2-交互功能受影响？">2. 交互功能受影响？</h3><ul><li>检查z-index层级设置</li><li>确认pointer-events属性配置</li><li>调整遮罩层的事件处理</li></ul><h3 id="3-移动端问题？">3. 移动端问题？</h3><ul><li>检查触摸事件相关CSS</li><li>确认viewport设置正确</li><li>测试不同移动设备</li></ul><hr><h2 id="扩展应用">扩展应用</h2><h3 id="应用到其他区域">应用到其他区域</h3><p>可以将防护机制扩展到博客的其他媒体内容：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 扩展到文章内容区域</span></span><br><span class="line"><span class="keyword">const</span> contentImages = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.post-content img&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> contentVideos = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.post-content video&#x27;</span>);</span><br></pre></td></tr></table></figure><h3 id="增强防护级别">增强防护级别</h3><p>可以添加更多防护措施：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 禁用打印功能</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;beforeprint&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    e.<span class="title function_">preventDefault</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 检测开发者工具</span></span><br><span class="line"><span class="built_in">setInterval</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">outerHeight</span> - <span class="variable language_">window</span>.<span class="property">innerHeight</span> &gt; <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">clear</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br></pre></td></tr></table></figure><hr><h2 id="总结">总结</h2><p>通过本次魔改，我们为Solitude主题的Banner区域添加了全面的防护功能：</p><h3 id="🎯-主要成果">🎯 主要成果</h3><ol><li><strong>多层防护</strong> - CSS + JavaScript双重保护</li><li><strong>智能化</strong> - 自动识别和保护banner元素</li><li><strong>兼容性</strong> - 支持PC端和移动端</li><li><strong>用户友好</strong> - 不影响正常交互功能</li><li><strong>可扩展</strong> - 易于调整和扩展防护范围</li></ol><h3 id="🔮-防护效果">🔮 防护效果</h3><ul><li>有效阻止普通用户的简单保存操作</li><li>提高了媒体文件获取的技术门槛</li><li>保护了博客的原创内容</li><li>维持了良好的用户体验</li></ul><p>虽然无法做到绝对的防护，但这套方案已经能够有效保护你的banner内容，让大部分访客无法轻易获取和使用你的原创图片和视频素材。</p><p>记住，内容保护是一个持续的过程，建议结合服务器端的防盗链、水印等措施，构建更完善的版权保护体系。</p><hr><p><em>更新时间: 2025-01-15</em><br><em>教程版本: v1.0.0</em></p>]]></content>
      
      
      <categories>
          
          <category> 魔改教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 魔改教程 </tag>
            
            <tag> Solitude </tag>
            
            <tag> Hexo </tag>
            
            <tag> Banner </tag>
            
            <tag> 防护功能 </tag>
            
            <tag> JavaScript </tag>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Solitude主题乐谱坊功能迁移指南</title>
      <link href="/2025/01/07/solitude-theme-musicsheets-migration/"/>
      <url>/2025/01/07/solitude-theme-musicsheets-migration/</url>
      
        <content type="html"><![CDATA[<h1>Solitude主题乐谱坊功能迁移指南</h1><h2 id="概述">概述</h2><p>乐谱坊是Solitude主题的一个特色功能，提供了一个优雅的3D Coverflow效果来展示钢琴乐谱。本文将详细记录如何将这个功能从旧版本迁移到最新版本的Solitude主题中。</p><h2 id="功能特点">功能特点</h2><ul><li><strong>3D Coverflow效果</strong>：乐谱以3D旋转的方式展示</li><li><strong>交互式导航</strong>：支持鼠标点击、键盘方向键和箭头按钮导航</li><li><strong>响应式设计</strong>：适配不同屏幕尺寸</li><li><strong>PDF链接</strong>：每个乐谱都可以链接到对应的PDF文件</li><li><strong>平滑动画</strong>：使用CSS3过渡效果实现流畅的动画</li></ul><h2 id="迁移步骤">迁移步骤</h2><h3 id="1-创建页面文件">1. 创建页面文件</h3><p>首先在 <code>source/musicsheets/</code> 目录下创建 <code>index.md</code> 文件：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 乐谱坊</span><br><span class="line">date: 2024-11-17 21:27:43</span><br><span class="line">type: musicsheets</span><br><span class="line">cover: /mp4/musicsheets-banner.mp4</span><br><span class="line">desc: 钢琴乐谱分享</span><br><span class="line"><span class="section">leftend: 跟 Ryan 一起聆听音乐的魅力</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure><h3 id="2-配置数据文件">2. 配置数据文件</h3><p>在 <code>source/_data/</code> 目录下创建 <code>musicsheets.yml</code> 文件：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">musicsheets:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">image:</span> <span class="string">/img/musicsheets/六月船歌.png</span></span><br><span class="line">    <span class="attr">alt:</span> <span class="string">&quot;六月船歌&quot;</span></span><br><span class="line">    <span class="attr">albumLink:</span> <span class="string">/pdf/The</span> <span class="string">Seasons,</span> <span class="string">Op.37a</span> <span class="bullet">-</span> <span class="string">Complete</span> <span class="string">Score</span> <span class="number">1.</span><span class="string">pdf</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">image:</span> <span class="string">/img/musicsheets/水边的阿第莉娜.png</span></span><br><span class="line">    <span class="attr">alt:</span> <span class="string">&quot;水边的阿第莉娜&quot;</span></span><br><span class="line">    <span class="attr">albumLink:</span> <span class="string">/pdf/The</span> <span class="string">Seasons,</span> <span class="string">Op.37a</span> <span class="bullet">-</span> <span class="string">Complete</span> <span class="string">Score</span> <span class="number">1.</span><span class="string">pdf</span></span><br><span class="line">  <span class="comment"># ... 更多乐谱配置</span></span><br></pre></td></tr></table></figure><h3 id="3-创建模板文件">3. 创建模板文件</h3><h4 id="3-1-页面模板">3.1 页面模板</h4><p>在主题的 <code>layout/includes/page/</code> 目录下创建 <code>musicsheets.pug</code>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">include ../widgets/page/musicsheets/content</span><br></pre></td></tr></table></figure><h4 id="3-2-内容模板">3.2 内容模板</h4><p>在 <code>layout/includes/widgets/page/musicsheets/</code> 目录下创建 <code>content.pug</code>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">div.coverflow(data-coverflow-position=&quot;1&quot;)</span><br><span class="line">  .prev-arrow ❮</span><br><span class="line">  // 遍历 YML 数据，生成图片</span><br><span class="line">  if site.data.musicsheets &amp;&amp; site.data.musicsheets.musicsheets</span><br><span class="line">    each item, index in site.data.musicsheets.musicsheets</span><br><span class="line">      img.coverflow__image(</span><br><span class="line">        data-coverflow-index=index + 1</span><br><span class="line">        src=item.image</span><br><span class="line">        alt=item.alt</span><br><span class="line">        data-album=item.albumLink ? item.albumLink : &quot;#&quot;</span><br><span class="line">      )</span><br><span class="line">  else</span><br><span class="line">    p.error No images found. Please check the _data/musicsheets.yml file.</span><br><span class="line">  .next-arrow ❯</span><br><span class="line">button.album-button.hidden 欣赏乐谱</span><br></pre></td></tr></table></figure><h3 id="4-更新页面路由">4. 更新页面路由</h3><p>在 <code>layout/page.pug</code> 中添加乐谱坊的路由：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">when &#x27;musicsheets&#x27;</span><br><span class="line">  include includes/page/musicsheets</span><br></pre></td></tr></table></figure><h3 id="5-创建样式文件">5. 创建样式文件</h3><p>在 <code>source/css/_page/</code> 目录下创建 <code>musicsheets.styl</code>：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.coverflow</span></span><br><span class="line">  <span class="attribute">position</span>: relative</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">460px</span></span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">30px</span></span><br><span class="line">  <span class="attribute">overflow</span>: hidden</span><br><span class="line">  -webkit-<span class="attribute">perspective</span>: <span class="number">1000px</span></span><br><span class="line">  <span class="attribute">perspective</span>: <span class="number">1000px</span></span><br><span class="line">  <span class="attribute">display</span>: flex</span><br><span class="line">  <span class="attribute">justify-content</span>: center</span><br><span class="line">  <span class="attribute">align-items</span>: center</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.coverflow__image</span></span><br><span class="line">  <span class="attribute">user-select</span>: none</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300px</span></span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span></span><br><span class="line">  <span class="attribute">position</span>: absolute</span><br><span class="line">  <span class="attribute">transform-origin</span>: <span class="number">50%</span> <span class="number">50%</span></span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">350ms</span> <span class="built_in">cubic-bezier</span>(<span class="number">0.215</span>, <span class="number">0.61</span>, <span class="number">0.355</span>, <span class="number">1</span>)</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">1px</span> <span class="number">25px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.6</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3D变换样式</span></span><br><span class="line"><span class="selector-class">.coverflow</span><span class="selector-attr">[data-coverflow-position=<span class="string">&quot;1&quot;</span>]</span> <span class="selector-class">.coverflow__image</span><span class="selector-attr">[data-coverflow-index=<span class="string">&quot;1&quot;</span>]</span></span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">10</span></span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-<span class="number">300px</span>) <span class="built_in">scale</span>(<span class="number">0.7</span>) <span class="built_in">rotateY</span>(<span class="number">45deg</span>)</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.5</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ... 更多位置样式</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.prev-arrow</span>,</span><br><span class="line"><span class="selector-class">.next-arrow</span></span><br><span class="line">  <span class="attribute">cursor</span>: pointer</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">40</span></span><br><span class="line">  <span class="attribute">position</span>: absolute</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">50%</span></span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">50%</span>)</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">3rem</span></span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.5</span>)</span><br><span class="line">  <span class="attribute">background</span>: transparent</span><br><span class="line">  <span class="attribute">transition</span>: color <span class="number">200ms</span>, background <span class="number">200ms</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.album-button</span></span><br><span class="line">  <span class="attribute">position</span>: relative</span><br><span class="line">  <span class="attribute">display</span>: block</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">20px</span> auto</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">20px</span></span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(<span class="number">45deg</span>, <span class="number">#667eea</span> <span class="number">0%</span>, <span class="number">#764ba2</span> <span class="number">100%</span>)</span><br><span class="line">  <span class="attribute">color</span>: white</span><br><span class="line">  <span class="attribute">border</span>: none</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">25px</span></span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">1rem</span></span><br><span class="line">  <span class="attribute">cursor</span>: pointer</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">0.3s</span> ease</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">4px</span> <span class="number">15px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.2</span>)</span><br></pre></td></tr></table></figure><h3 id="6-创建JavaScript功能">6. 创建JavaScript功能</h3><p>在 <code>source/js/custom/</code> 目录下创建 <code>musicsheets.js</code>：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">initializeCoverflowWithDelegation</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> coverflowContainer = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.coverflow&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> albumButton = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.album-button&quot;</span>);</span><br><span class="line">  <span class="keyword">if</span> (!coverflowContainer || !albumButton) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> currentPosition;</span><br><span class="line">  <span class="keyword">let</span> images = [];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">calculateInitialPosition</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> totalImages = images.<span class="property">length</span>;</span><br><span class="line">    <span class="keyword">return</span> totalImages % <span class="number">2</span> === <span class="number">0</span> ? <span class="title class_">Math</span>.<span class="title function_">floor</span>(totalImages / <span class="number">2</span>) : <span class="title class_">Math</span>.<span class="title function_">ceil</span>(totalImages / <span class="number">2</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">updateCoverflow</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    coverflowContainer.<span class="property">dataset</span>.<span class="property">coverflowPosition</span> = currentPosition;</span><br><span class="line"></span><br><span class="line">    images.<span class="title function_">forEach</span>(<span class="function">(<span class="params">img, index</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> offset = index + <span class="number">1</span> - currentPosition;</span><br><span class="line">      <span class="keyword">const</span> translateX = offset * <span class="number">150</span>;</span><br><span class="line">      <span class="keyword">const</span> scale = <span class="title class_">Math</span>.<span class="title function_">max</span>(<span class="number">0.8</span>, <span class="number">1</span> - <span class="title class_">Math</span>.<span class="title function_">abs</span>(offset) * <span class="number">0.2</span>);</span><br><span class="line">      <span class="keyword">const</span> rotateY = offset * -<span class="number">25</span>;</span><br><span class="line">      <span class="keyword">const</span> opacity = <span class="title class_">Math</span>.<span class="title function_">max</span>(<span class="number">0.5</span>, <span class="number">1</span> - <span class="title class_">Math</span>.<span class="title function_">abs</span>(offset) * <span class="number">0.3</span>);</span><br><span class="line">      <span class="keyword">const</span> zIndex = <span class="number">50</span> - <span class="title class_">Math</span>.<span class="title function_">abs</span>(offset) * <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">      img.<span class="property">style</span>.<span class="property">transform</span> = <span class="string">`translateX(<span class="subst">$&#123;translateX&#125;</span>px) scale(<span class="subst">$&#123;scale&#125;</span>) rotateY(<span class="subst">$&#123;rotateY&#125;</span>deg)`</span>;</span><br><span class="line">      img.<span class="property">style</span>.<span class="property">opacity</span> = opacity;</span><br><span class="line">      img.<span class="property">style</span>.<span class="property">zIndex</span> = zIndex;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 更新按钮链接</span></span><br><span class="line">    <span class="keyword">const</span> activeImage = images[currentPosition - <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">if</span> (activeImage) &#123;</span><br><span class="line">      <span class="keyword">const</span> albumLink = activeImage.<span class="property">dataset</span>.<span class="property">album</span> || <span class="string">&quot;#&quot;</span>;</span><br><span class="line">      albumButton.<span class="title function_">setAttribute</span>(<span class="string">&quot;data-album&quot;</span>, albumLink);</span><br><span class="line">      albumButton.<span class="property">onclick</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (albumLink &amp;&amp; albumLink !== <span class="string">&quot;#&quot;</span>) &#123;</span><br><span class="line">          <span class="variable language_">window</span>.<span class="title function_">open</span>(albumLink, <span class="string">&quot;_blank&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="title function_">alert</span>(<span class="string">&quot;No album link available for this image.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 更新箭头显示状态</span></span><br><span class="line">    <span class="keyword">const</span> prevArrow = coverflowContainer.<span class="title function_">querySelector</span>(<span class="string">&quot;.prev-arrow&quot;</span>);</span><br><span class="line">    <span class="keyword">const</span> nextArrow = coverflowContainer.<span class="title function_">querySelector</span>(<span class="string">&quot;.next-arrow&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (prevArrow &amp;&amp; nextArrow) &#123;</span><br><span class="line">      prevArrow.<span class="property">style</span>.<span class="property">display</span> = currentPosition === <span class="number">1</span> ? <span class="string">&quot;none&quot;</span> : <span class="string">&quot;block&quot;</span>;</span><br><span class="line">      nextArrow.<span class="property">style</span>.<span class="property">display</span> = currentPosition === images.<span class="property">length</span> ? <span class="string">&quot;none&quot;</span> : <span class="string">&quot;block&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">moveToNext</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (currentPosition &lt; images.<span class="property">length</span>) &#123;</span><br><span class="line">      currentPosition++;</span><br><span class="line">      <span class="title function_">updateCoverflow</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">moveToPrev</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (currentPosition &gt; <span class="number">1</span>) &#123;</span><br><span class="line">      currentPosition--;</span><br><span class="line">      <span class="title function_">updateCoverflow</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">moveToClickedImage</span> = (<span class="params">clickedIndex</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (clickedIndex + <span class="number">1</span> !== currentPosition) &#123;</span><br><span class="line">      currentPosition = clickedIndex + <span class="number">1</span>;</span><br><span class="line">      <span class="title function_">updateCoverflow</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleCoverflowClick</span> = (<span class="params">event</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> target = event.<span class="property">target</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (target.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&quot;prev-arrow&quot;</span>)) &#123;</span><br><span class="line">      <span class="title function_">moveToPrev</span>();</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (target.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&quot;next-arrow&quot;</span>)) &#123;</span><br><span class="line">      <span class="title function_">moveToNext</span>();</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (target.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&quot;coverflow__image&quot;</span>)) &#123;</span><br><span class="line">      <span class="keyword">const</span> clickedIndex = images.<span class="title function_">indexOf</span>(target);</span><br><span class="line">      <span class="keyword">if</span> (clickedIndex !== -<span class="number">1</span>) <span class="title function_">moveToClickedImage</span>(clickedIndex);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">initializeCoverflowImages</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    images = <span class="title class_">Array</span>.<span class="title function_">from</span>(coverflowContainer.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;.coverflow__image&quot;</span>));</span><br><span class="line">    currentPosition = <span class="title function_">calculateInitialPosition</span>();</span><br><span class="line">    <span class="title function_">updateCoverflow</span>();</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 初始化 Coverflow 并绑定事件委托</span></span><br><span class="line">  <span class="title function_">initializeCoverflowImages</span>();</span><br><span class="line">  coverflowContainer.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, handleCoverflowClick);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 监听键盘事件</span></span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;keydown&quot;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (e.<span class="property">key</span> === <span class="string">&quot;ArrowLeft&quot;</span>) <span class="title function_">moveToPrev</span>();</span><br><span class="line">    <span class="keyword">if</span> (e.<span class="property">key</span> === <span class="string">&quot;ArrowRight&quot;</span>) <span class="title function_">moveToNext</span>();</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 监听DOM变化</span></span><br><span class="line">  <span class="keyword">const</span> observer = <span class="keyword">new</span> <span class="title class_">MutationObserver</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">initializeCoverflowImages</span>();</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  observer.<span class="title function_">observe</span>(coverflowContainer, &#123; <span class="attr">childList</span>: <span class="literal">true</span> &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 绑定到页面加载和页面迁移事件</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;DOMContentLoaded&quot;</span>, initializeCoverflowWithDelegation);</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;pjax:success&quot;</span>, initializeCoverflowWithDelegation);</span><br></pre></td></tr></table></figure><h3 id="7-引入脚本文件">7. 引入脚本文件</h3><p>在 <code>layout/includes/inject/body.pug</code> 中添加脚本引入：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if page.type === &#x27;musicsheets&#x27;</span><br><span class="line">  script(src=url_for(&#x27;/js/custom/musicsheets.js&#x27;))</span><br></pre></td></tr></table></figure><h3 id="8-创建资源目录">8. 创建资源目录</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p public/img/musicsheets</span><br><span class="line"><span class="built_in">mkdir</span> -p public/pdf</span><br></pre></td></tr></table></figure><h2 id="技术要点">技术要点</h2><h3 id="1-3D变换原理">1. 3D变换原理</h3><p>乐谱坊使用了CSS3的3D变换来实现Coverflow效果：</p><ul><li><code>perspective</code>: 设置3D视角</li><li><code>transform-origin</code>: 设置变换原点</li><li><code>rotateY()</code>: Y轴旋转</li><li><code>scale()</code>: 缩放</li><li><code>translateX()</code>: X轴平移</li></ul><h3 id="2-事件委托">2. 事件委托</h3><p>使用事件委托来处理动态元素的交互，提高性能：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">handleCoverflowClick</span> = (<span class="params">event</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> target = event.<span class="property">target</span>;</span><br><span class="line">  <span class="comment">// 根据target的class来处理不同的事件</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="3-响应式设计">3. 响应式设计</h3><p>通过CSS媒体查询和flexbox布局确保在不同设备上的良好体验。</p><h3 id="4-性能优化">4. 性能优化</h3><ul><li>使用 <code>transform</code> 而不是改变 <code>left/top</code> 属性</li><li>使用 <code>will-change</code> 提示浏览器优化</li><li>使用 <code>requestAnimationFrame</code> 进行动画优化</li></ul><h2 id="配置说明">配置说明</h2><h3 id="菜单配置">菜单配置</h3><p>在 <code>_config.solitude.yml</code> 中已经配置了乐谱坊菜单：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">乐谱坊:</span> <span class="string">/musicsheets/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-file-audio</span></span><br></pre></td></tr></table></figure><h3 id="数据格式">数据格式</h3><p>每个乐谱的数据格式：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">image:</span> <span class="string">/img/musicsheets/乐谱名称.png</span></span><br><span class="line">  <span class="attr">alt:</span> <span class="string">&quot;乐谱描述&quot;</span></span><br><span class="line">  <span class="attr">albumLink:</span> <span class="string">/pdf/对应的PDF文件.pdf</span></span><br></pre></td></tr></table></figure><h2 id="使用说明">使用说明</h2><ol><li><p><strong>导航方式</strong>：</p><ul><li>点击左右箭头按钮</li><li>使用键盘方向键</li><li>直接点击乐谱图片</li></ul></li><li><p><strong>查看乐谱</strong>：</p><ul><li>点击&quot;欣赏乐谱&quot;按钮打开PDF文件</li><li>PDF会在新标签页中打开</li></ul></li><li><p><strong>自定义乐谱</strong>：</p><ul><li>在 <code>source/_data/musicsheets.yml</code> 中添加新的乐谱</li><li>将乐谱图片放入 <code>public/img/musicsheets/</code> 目录</li><li>将PDF文件放入 <code>public/pdf/</code> 目录</li></ul></li></ol><h2 id="注意事项">注意事项</h2><ol><li><strong>图片尺寸</strong>：建议乐谱图片尺寸为 300x400 像素</li><li><strong>文件格式</strong>：支持 PNG、JPG、WebP 等格式</li><li><strong>PDF文件</strong>：确保PDF文件路径正确且文件存在</li><li><strong>浏览器兼容性</strong>：需要支持CSS3 3D变换的现代浏览器</li></ol><h2 id="总结">总结</h2><p>通过以上步骤，我们成功将乐谱坊功能从旧版本迁移到最新版本的Solitude主题中。这个功能不仅提供了优雅的视觉效果，还具有良好的用户体验和扩展性。</p><p>迁移过程中需要注意保持文件结构的一致性，确保所有依赖文件都正确配置，并在不同环境下进行充分测试。</p><hr><p><em>本文记录了完整的迁移过程，可以作为其他功能迁移的参考模板。</em></p>]]></content>
      
      
      <categories>
          
          <category> 魔改教程 </category>
          
          <category> Technology </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Solitude </tag>
            
            <tag> Hexo </tag>
            
            <tag> 前端开发 </tag>
            
            <tag> 页面移植 </tag>
            
            <tag> 动画效果 </tag>
            
            <tag> JavaScript </tag>
            
            <tag> CSS </tag>
            
            <tag> 收藏展示 </tag>
            
            <tag> 响应式设计 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Solitude主题魔改教程(16)-双Loading界面主题分离实现</title>
      <link href="/2024/12/16/Solitude%E4%B8%BB%E9%A2%98%E9%AD%94%E6%94%B9%E6%95%99%E7%A8%8B(16)-%E5%8F%8CLoading%E7%95%8C%E9%9D%A2%E4%B8%BB%E9%A2%98%E5%88%86%E7%A6%BB%E5%AE%9E%E7%8E%B0/"/>
      <url>/2024/12/16/Solitude%E4%B8%BB%E9%A2%98%E9%AD%94%E6%94%B9%E6%95%99%E7%A8%8B(16)-%E5%8F%8CLoading%E7%95%8C%E9%9D%A2%E4%B8%BB%E9%A2%98%E5%88%86%E7%A6%BB%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>本次更新实现了Solitude主题loading界面的完全独立分离，支持 <strong>Mona Lisa</strong> 和 <strong>Black Cat</strong> 两种主题风格，通过配置文件可以轻松切换。两个主题完全独立，无重复样式，Black Cat主题完全基于原始创意svg加载loading小猫动画实现。</p><hr><h2 id="🎯-双主题概述">🎯 双主题概述</h2><h3 id="主题对比">主题对比</h3><table><thead><tr><th>特性</th><th>Mona Lisa 主题</th><th>Black Cat 主题</th></tr></thead><tbody><tr><td><strong>风格</strong></td><td>艺术感SVG描边</td><td>可爱小猫动画</td></tr><tr><td><strong>动画库</strong></td><td>原生CSS+JS</td><td>GSAP TweenMax</td></tr><tr><td><strong>主色调</strong></td><td>蓝色 (#409EFF)</td><td>灰色 (#E4E5E6)</td></tr><tr><td><strong>核心动画</strong></td><td>SVG描边循环</td><td>小猫跳跃动画</td></tr><tr><td><strong>进度显示</strong></td><td>分步进度条</td><td>小猫动作状态</td></tr><tr><td><strong>收起方式</strong></td><td>双层滑动收起</td><td>直接滑动收起</td></tr><tr><td><strong>适用场景</strong></td><td>专业/艺术类网站</td><td>个人/可爱风网站</td></tr></tbody></table><h3 id="配置方式">配置方式</h3><p>在 <code>_config.solitude.yml</code> 中配置：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">loading:</span></span><br><span class="line">  <span class="attr">fullpage:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">theme:</span> <span class="string">black-cat</span>  <span class="comment"># 可选值: mona-lisa / black-cat</span></span><br><span class="line">  <span class="attr">pace:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><hr><h2 id="📁-文件结构">📁 文件结构</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">themes/solitude/</span><br><span class="line">├── layout/includes/</span><br><span class="line">│   └── loading.pug                    # 主题判断和HTML结构</span><br><span class="line">├── source/css/_layout/</span><br><span class="line">│   └── fullpage.styl                  # 主题CSS样式分离</span><br><span class="line">└── source/js/custom/</span><br><span class="line">    ├── loading-theme-mona-lisa.js     # Mona Lisa主题JS</span><br><span class="line">    ├── loading-theme-black-cat.js     # Black Cat主题JS</span><br><span class="line">    └── README.html                    # 说明文档</span><br></pre></td></tr></table></figure><hr><h2 id="🎨-主题特性详解">🎨 主题特性详解</h2><h3 id="🖼️-Mona-Lisa-主题">🖼️ Mona Lisa 主题</h3><h4 id="核心特性">核心特性</h4><ul><li><strong>SVG描边动画</strong>: 复杂的SVG图形描边效果</li><li><strong>文字故障效果</strong>: 使用伪元素实现的故障动画</li><li><strong>进度条模拟</strong>: 模拟真实加载进度</li><li><strong>双重收起动画</strong>: 分层的收起效果</li><li><strong>颜色方案</strong>: 蓝色主题 (#409EFF)</li><li><strong>独立样式</strong>: 完全独立的CSS和JS实现</li></ul><h4 id="视觉效果">视觉效果</h4><ul><li>蓝色背景层带浮动装饰SVG</li><li>白色前景层承载主要内容</li><li>复杂SVG路径的循环描边动画</li><li>&quot;Loading&quot;文字的故障效果</li><li>5步分阶段的进度条加载</li></ul><h3 id="🐱-Black-Cat-主题">🐱 Black Cat 主题</h3><h4 id="核心特性-2">核心特性</h4><ul><li><strong>小猫动画</strong>: 完全基于原始创意svg加载loading小猫动画</li><li><strong>GSAP动画库</strong>: 使用TweenMax实现复杂动画</li><li><strong>直接跳转</strong>: 小猫跳跃后直接收起loading，跳转到真实主页</li><li><strong>响应式设计</strong>: 支持移动端适配</li><li><strong>颜色方案</strong>: 灰色主题 (#E4E5E6)</li><li><strong>原始特性保留</strong>: 完全保留原始动画的所有细节</li><li><strong>独立样式</strong>: 完全独立的CSS和JS实现</li><li><strong>全屏遮罩</strong>: 修复了loading时主页内容显示的问题</li></ul><h4 id="视觉效果-2">视觉效果</h4><ul><li>灰色全屏背景</li><li>可爱的SVG小猫角色</li><li>小猫眨眼、摆尾、跳跃动画序列</li><li>&quot;LOADING&quot;文字动态显示</li><li>跳跃完成后直接收起</li></ul><hr><h2 id="🛠️-完整实装代码">🛠️ 完整实装代码</h2><h3 id="1-主题判断和HTML结构-loading-pug">1. 主题判断和HTML结构 - loading.pug</h3><p><strong>文件路径：</strong> <code>themes/solitude/layout/includes/loading.pug</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">// Mona Lisa 主题</span><br><span class="line">if theme.loading.theme == &#x27;mona-lisa&#x27;</span><br><span class="line">  div(id=&quot;loading-container&quot;)</span><br><span class="line">    // Loading 背景层</span><br><span class="line">    div#loading-bg</span><br><span class="line">        // 已移除内联SVG，外部SVG背景由CSS或img实现</span><br><span class="line">    // Loading 动画层</span><br><span class="line">    div#loading-animation</span><br><span class="line">        div#loading-box</span><br><span class="line">            svg.loading-svg(viewBox=&quot;0 0 400.98 400.98&quot;)</span><br><span class="line">                g</span><br><span class="line">                    // 外框</span><br><span class="line">                    path.draw-path(d=&quot;M354.526,2H46.454c-2.209,0-4,1.791-4,4v388.98c0,2.209,1.791,4,4,4h308.072c2.209,0,4-1.791,4-4V6C358.526,3.791,356.735,2,354.526,2z&quot;)</span><br><span class="line">                    // 内框合并</span><br><span class="line">                    path.draw-path.blue-path(d=&quot;M50.454,10 H350.526 V390.98 H50.454 V10 Z&quot;)</span><br><span class="line">                    // LOGO主体路径</span><br><span class="line">                    path.draw-path.blue-path(d=&quot;M189.11,128.898c2.209,0,4-1.791,4-4v-11.822l7.326,0.318c2.215,0.105,4.074-1.615,4.17-3.822 c0.096-2.207-1.615-4.074-3.822-4.17l-11.5-0.5c-1.104-0.053-2.152,0.353-2.94,1.106c-0.788,0.755-1.233,1.799-1.233,2.89v16 C185.11,127.107,186.901,128.898,189.11,128.898z&quot;)</span><br><span class="line">                    path.draw-path.blue-path(d=&quot;M186.175,304.806c-1.707-1.4-4.229-1.152-5.629,0.557c-1.401,1.708-1.151,4.229,0.557,5.629l25,20.5 c0.744,0.61,1.642,0.907,2.534,0.907c1.156,0,2.305-0.499,3.095-1.464c1.401-1.708,1.151-4.229-0.557-5.629L186.175,304.806z&quot;)</span><br><span class="line">                    path.draw-path.blue-path(d=&quot;M266.781,219.901c-24.928-0.923-34.529,18.514-36.09,28.849l-5.5,33.5c-0.357,2.181,1.119,4.237,3.299,4.596 c0.22,0.036,0.438,0.054,0.653,0.054c1.924,0,3.62-1.393,3.942-3.353l5.508-33.552c0.142-0.938,3.788-22.949,27.902-22.1 c2.187,0.078,4.061-1.646,4.14-3.854C270.715,221.833,268.989,219.98,266.781,219.901z&quot;)</span><br><span class="line">                    // ... 更多复杂的SVG路径</span><br><span class="line">                    path.draw-path(d=&quot;M79.841,357.983c0,2.209,1.791,4,4,4h233.298c2.209,0,4-1.791,4-4V42.998c0-2.209-1.791-4-4-4H83.841c-2.209,0-4,1.791-4,4V357.983z&quot;)</span><br><span class="line">                    // ... 省略部分复杂路径，实际使用时需要完整路径</span><br><span class="line">            </span><br><span class="line">            div.loading-text(data-glitch=&quot;Loading&quot;) Loading</span><br><span class="line">            div.progress-bar</span><br><span class="line">                div.progress-fill#progress-fill</span><br><span class="line"></span><br><span class="line">  // 引入Mona Lisa主题的JavaScript文件</span><br><span class="line">  script(src=&quot;/js/custom/loading-theme-mona-lisa.js&quot;)</span><br><span class="line"></span><br><span class="line">// Black Cat 主题 - 基于原始创意svg加载loading小猫动画</span><br><span class="line">if theme.loading.theme == &#x27;black-cat&#x27;</span><br><span class="line">  div(id=&quot;loading-container&quot;)</span><br><span class="line">    div.wrapper-no7</span><br><span class="line">      div.logo LOADING</span><br><span class="line">      div.animation-wrapper</span><br><span class="line">        div.cat-wrapper</span><br><span class="line">          svg.cat(xmlns=&quot;http://www.w3.org/2000/svg&quot; viewBox=&quot;0 0 207.68 163.77&quot; preserveAspectRatio=&quot;none&quot;)</span><br><span class="line">            title cat</span><br><span class="line">            g.body</span><br><span class="line">              circle.body-backcircle(cx=&quot;76.86&quot; cy=&quot;83.31&quot; r=&quot;45.5&quot;)</span><br><span class="line">              circle.body-frontcircle(cx=&quot;150.86&quot; cy=&quot;83.31&quot; r=&quot;45.5&quot;)</span><br><span class="line">              rect.body-between(x=&quot;74.65&quot; y=&quot;37.89&quot; width=&quot;83.04&quot; height=&quot;90.61&quot;)</span><br><span class="line">            circle.head(cx=&quot;161.76&quot; cy=&quot;52.75&quot; r=&quot;45.92&quot;)</span><br><span class="line">            g.eyes</span><br><span class="line">              circle.eyes-l(cx=&quot;153.51&quot; cy=&quot;46.5&quot; r=&quot;8.25&quot;)</span><br><span class="line">              circle.eyes-r(cx=&quot;185.76&quot; cy=&quot;46.5&quot; r=&quot;8.25&quot;)</span><br><span class="line">            g.ears</span><br><span class="line">              polygon.ears-l(points=&quot;132.76 19 132.76 0 149.55 8.81 132.76 19&quot;)</span><br><span class="line">              polygon.ears-r(points=&quot;179.44 11.2 197 4.06 195.16 22.9 179.44 11.2&quot;)</span><br><span class="line">            rect.tail(x=&quot;-11&quot; y=&quot;32.87&quot; width=&quot;107&quot; height=&quot;20&quot; rx=&quot;9.58&quot; ry=&quot;9.58&quot; transform=&quot;translate(41.19 -18.41) rotate(45)&quot;)</span><br><span class="line">            g.backlegs</span><br><span class="line">              path.backlegs1(d=&quot;M74,124.85a6,6,0,0,0-4.7-7.07l-4.41-.89a6,6,0,0,0-7.07,4.7l-6.31,31.35a8.25,8.25,0,1,0,15.64,5,5.94,5.94,0,0,0,.44-1.33Z&quot; transform=&quot;translate(-1.58 -0.92)&quot;)</span><br><span class="line">              path.backlegs2(d=&quot;M88.22,125.86a6,6,0,0,0-4.38-7.27l-4.37-1.08a6,6,0,0,0-7.27,4.38l-7.69,31a8.25,8.25,0,1,0,15.41,5.72,5.94,5.94,0,0,0,.5-1.31Z&quot; transform=&quot;translate(-1.58 -0.92)&quot;)</span><br><span class="line">            g.frontlegs</span><br><span class="line">              path.frontlegs1(d=&quot;M162.89,120.91a6,6,0,0,0-7.65-3.68L151,118.72a6,6,0,0,0-3.68,7.65l10.57,30.18a8.25,8.25,0,1,0,16-3.65,5.94,5.94,0,0,0-.3-1.37Z&quot; transform=&quot;translate(-1.58 -0.92)&quot;)</span><br><span class="line">              path.frontlegs2(d=&quot;M175.77,120.08a6,6,0,0,0-7.48-4l-4.31,1.3a6,6,0,0,0-4,7.48l9.22,30.62a8.25,8.25,0,1,0,16.17-2.94,5.94,5.94,0,0,0-.24-1.38Z&quot; transform=&quot;translate(-1.58 -0.92)&quot;)</span><br><span class="line">        div.logoani LOADING</span><br><span class="line">      button.restart restart animation</span><br><span class="line"></span><br><span class="line">  // 引入GSAP动画库</span><br><span class="line">  script(src=&quot;https://cdnjs.cloudflare.com/ajax/libs/gsap/2.0.2/TweenMax.min.js&quot;)</span><br><span class="line">  // 引入Black Cat主题的JavaScript文件</span><br><span class="line">  script(src=&quot;/js/custom/loading-theme-black-cat.js&quot;)</span><br></pre></td></tr></table></figure><h3 id="2-主题CSS样式分离-fullpage-styl">2. 主题CSS样式分离 - fullpage.styl</h3><p><strong>文件路径：</strong> <code>themes/solitude/source/css/_layout/fullpage.styl</code></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="built_in">hexo-config</span>(<span class="string">&#x27;loading.fullpage&#x27;</span>)</span><br><span class="line">  <span class="comment">// Mona Lisa 主题样式 - 完全独立</span></span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">hexo-config</span>(<span class="string">&#x27;loading.theme&#x27;</span>) == <span class="string">&#x27;mona-lisa&#x27;</span></span><br><span class="line">    <span class="selector-id">#loading-container</span></span><br><span class="line">      <span class="attribute">position</span> fixed</span><br><span class="line">      <span class="attribute">top</span> <span class="number">0</span></span><br><span class="line">      <span class="attribute">left</span> <span class="number">0</span></span><br><span class="line">      <span class="attribute">width</span> <span class="number">100%</span></span><br><span class="line">      <span class="attribute">height</span> <span class="number">100%</span></span><br><span class="line">      <span class="attribute">background</span> <span class="number">#fff</span></span><br><span class="line">      <span class="attribute">display</span> flex</span><br><span class="line">      <span class="attribute">flex-direction</span> column</span><br><span class="line">      <span class="attribute">align-items</span> center</span><br><span class="line">      <span class="attribute">justify-content</span> center</span><br><span class="line">      <span class="attribute">z-index</span> <span class="number">9999</span></span><br><span class="line">      <span class="attribute">transition</span> transform <span class="number">1.3s</span> ease</span><br><span class="line">      <span class="attribute">will-change</span> transform</span><br><span class="line">      <span class="attribute">font-family</span> <span class="string">&#x27;Quicksand&#x27;</span>, <span class="string">&#x27;Nunito&#x27;</span>, <span class="string">&#x27;Poppins&#x27;</span>, <span class="string">&#x27;Arial Rounded MT Bold&#x27;</span>, <span class="string">&#x27;PingFang SC&#x27;</span>, <span class="string">&#x27;Microsoft YaHei&#x27;</span>, sans-serif</span><br><span class="line"></span><br><span class="line">    <span class="selector-id">#loading-container</span><span class="selector-class">.hide</span></span><br><span class="line">      <span class="attribute">transform</span> <span class="built_in">translateX</span>(<span class="number">100%</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Loading 背景层 - 第二个收起的层</span></span><br><span class="line">    <span class="selector-id">#loading-bg</span></span><br><span class="line">      <span class="attribute">position</span> absolute</span><br><span class="line">      <span class="attribute">width</span> <span class="number">100%</span></span><br><span class="line">      <span class="attribute">height</span> <span class="number">100%</span></span><br><span class="line">      <span class="attribute">background</span> <span class="number">#409EFF</span></span><br><span class="line">      <span class="attribute">transition</span> transform <span class="number">1.3s</span> <span class="built_in">cubic-bezier</span>(<span class="number">0.25</span>, <span class="number">0.46</span>, <span class="number">0.45</span>, <span class="number">0.94</span>)</span><br><span class="line">      <span class="attribute">transition-delay</span> <span class="number">0.3s</span></span><br><span class="line">      <span class="attribute">will-change</span> transform</span><br><span class="line">      <span class="attribute">z-index</span> <span class="number">1</span></span><br><span class="line">      <span class="attribute">overflow</span> hidden</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 背景装饰SVG效果</span></span><br><span class="line">    <span class="selector-class">.loading-bg-svg</span></span><br><span class="line">      <span class="attribute">position</span> absolute</span><br><span class="line">      <span class="attribute">width</span> <span class="number">30%</span></span><br><span class="line">      <span class="attribute">height</span> <span class="number">30%</span></span><br><span class="line">      <span class="attribute">opacity</span> <span class="number">0.6</span></span><br><span class="line">      <span class="attribute">animation</span> bgFloat <span class="number">20s</span> ease-in-out infinite</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 创建重复的背景效果 - 使用外部SVG文件</span></span><br><span class="line">    <span class="selector-id">#loading-bg</span><span class="selector-pseudo">::before</span></span><br><span class="line">      <span class="attribute">content</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">      <span class="attribute">position</span> absolute</span><br><span class="line">      <span class="attribute">top</span> <span class="number">0</span></span><br><span class="line">      <span class="attribute">left</span> <span class="number">0</span></span><br><span class="line">      <span class="attribute">width</span> <span class="number">100%</span></span><br><span class="line">      <span class="attribute">height</span> <span class="number">100%</span></span><br><span class="line">      <span class="attribute">background-image</span> <span class="built_in">url</span>(<span class="string">&#x27;/img/loading_bg.svg&#x27;</span>)</span><br><span class="line">      <span class="attribute">background-size</span> <span class="number">30%</span></span><br><span class="line">      <span class="attribute">background-repeat</span> repeat</span><br><span class="line">      <span class="attribute">opacity</span> <span class="number">0.6</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 背景浮动动画</span></span><br><span class="line">    <span class="keyword">@keyframes</span> bgFloat</span><br><span class="line">      <span class="number">0%</span>, <span class="number">100%</span></span><br><span class="line">        <span class="attribute">transform</span> <span class="built_in">translate</span>(<span class="number">0</span>, <span class="number">0</span>) <span class="built_in">rotate</span>(<span class="number">0deg</span>)</span><br><span class="line">      <span class="number">25%</span></span><br><span class="line">        <span class="attribute">transform</span> <span class="built_in">translate</span>(<span class="number">10px</span>, -<span class="number">10px</span>) <span class="built_in">rotate</span>(<span class="number">1deg</span>)</span><br><span class="line">      <span class="number">50%</span></span><br><span class="line">        <span class="attribute">transform</span> <span class="built_in">translate</span>(-<span class="number">5px</span>, <span class="number">5px</span>) <span class="built_in">rotate</span>(-<span class="number">1deg</span>)</span><br><span class="line">      <span class="number">75%</span></span><br><span class="line">        <span class="attribute">transform</span> <span class="built_in">translate</span>(<span class="number">5px</span>, -<span class="number">5px</span>) <span class="built_in">rotate</span>(<span class="number">0.5deg</span>)</span><br><span class="line"></span><br><span class="line">    <span class="selector-id">#loading-container</span><span class="selector-class">.hide</span> <span class="selector-id">#loading-bg</span></span><br><span class="line">      <span class="attribute">transform</span> <span class="built_in">translateX</span>(<span class="number">100%</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Loading 动画层 - 第一个收起的层（前景）</span></span><br><span class="line">    <span class="selector-id">#loading-animation</span></span><br><span class="line">      <span class="attribute">position</span> absolute</span><br><span class="line">      <span class="attribute">width</span> <span class="number">100%</span></span><br><span class="line">      <span class="attribute">height</span> <span class="number">100%</span></span><br><span class="line">      <span class="attribute">display</span> flex</span><br><span class="line">      <span class="attribute">flex-direction</span> column</span><br><span class="line">      <span class="attribute">align-items</span> center</span><br><span class="line">      <span class="attribute">justify-content</span> center</span><br><span class="line">      <span class="attribute">background</span> <span class="number">#fff</span></span><br><span class="line">      <span class="attribute">transition</span> transform <span class="number">1.3s</span> <span class="built_in">cubic-bezier</span>(<span class="number">0.25</span>, <span class="number">0.46</span>, <span class="number">0.45</span>, <span class="number">0.94</span>)</span><br><span class="line">      <span class="attribute">will-change</span> transform</span><br><span class="line">      <span class="attribute">z-index</span> <span class="number">2</span></span><br><span class="line"></span><br><span class="line">    <span class="selector-id">#loading-container</span><span class="selector-class">.hide</span> <span class="selector-id">#loading-animation</span></span><br><span class="line">      <span class="attribute">transform</span> <span class="built_in">translateX</span>(<span class="number">100%</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// SVG容器样式</span></span><br><span class="line">    <span class="selector-class">.loading-svg</span></span><br><span class="line">      <span class="attribute">width</span> <span class="number">400px</span></span><br><span class="line">      <span class="attribute">height</span> <span class="number">400px</span></span><br><span class="line">      <span class="attribute">display</span> block</span><br><span class="line">      <span class="attribute">margin</span> <span class="number">60px</span> auto <span class="number">20px</span> auto</span><br><span class="line"></span><br><span class="line">    <span class="comment">// SVG描边路径样式</span></span><br><span class="line">    <span class="selector-class">.draw-path</span></span><br><span class="line">      <span class="attribute">stroke</span> <span class="number">#222</span></span><br><span class="line">      <span class="attribute">stroke-width</span> <span class="number">4</span></span><br><span class="line">      <span class="attribute">fill</span> none</span><br><span class="line">      <span class="attribute">stroke-linecap</span> round</span><br><span class="line">      <span class="attribute">stroke-linejoin</span> round</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.draw-path</span>, <span class="selector-class">.draw-path</span><span class="selector-attr">[stroke-width]</span></span><br><span class="line">      <span class="attribute">stroke-width</span> <span class="number">4</span> <span class="meta">!important</span></span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.blue-path</span></span><br><span class="line">      <span class="attribute">stroke</span> <span class="number">#409EFF</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">@keyframes</span> draw</span><br><span class="line">      to</span><br><span class="line">        <span class="attribute">stroke-dashoffset</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Loading 文字容器</span></span><br><span class="line">    <span class="selector-id">#loading-box</span></span><br><span class="line">      <span class="attribute">width</span> <span class="number">100%</span></span><br><span class="line">      <span class="attribute">display</span> flex</span><br><span class="line">      <span class="attribute">flex-direction</span> column</span><br><span class="line">      <span class="attribute">align-items</span> center</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Loading 文字样式和故障效果</span></span><br><span class="line">    <span class="selector-id">#loading-box</span> <span class="selector-class">.loading-text</span></span><br><span class="line">      <span class="attribute">text-align</span> center</span><br><span class="line">      <span class="attribute">font-size</span> <span class="number">28px</span></span><br><span class="line">      <span class="attribute">color</span> <span class="number">#363636</span></span><br><span class="line">      <span class="attribute">margin-top</span> <span class="number">1rem</span></span><br><span class="line">      <span class="attribute">letter-spacing</span> .<span class="number">3rem</span></span><br><span class="line">      <span class="attribute">font-weight</span> <span class="number">900</span></span><br><span class="line">      <span class="attribute">position</span> relative</span><br><span class="line">      <span class="attribute">line-height</span> <span class="number">1.2</span></span><br><span class="line">      <span class="attribute">z-index</span> <span class="number">1</span></span><br><span class="line">      -webkit-<span class="attribute">animation</span> shift <span class="number">1s</span> ease-in-out infinite alternate</span><br><span class="line">      <span class="attribute">animation</span> shift <span class="number">1s</span> ease-in-out infinite alternate</span><br><span class="line"></span><br><span class="line">    <span class="selector-id">#loading-box</span> <span class="selector-class">.loading-text</span><span class="selector-pseudo">:before</span></span><br><span class="line">      -webkit-<span class="attribute">animation</span> glitch .<span class="number">4s</span> <span class="built_in">cubic-bezier</span>(.<span class="number">25</span>,.<span class="number">46</span>,.<span class="number">45</span>,.<span class="number">94</span>) both infinite</span><br><span class="line">      <span class="attribute">animation</span> glitch .<span class="number">4s</span> <span class="built_in">cubic-bezier</span>(.<span class="number">25</span>,.<span class="number">46</span>,.<span class="number">45</span>,.<span class="number">94</span>) both infinite</span><br><span class="line">      <span class="attribute">color</span> <span class="number">#c28b00</span></span><br><span class="line">      <span class="attribute">z-index</span> -<span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="selector-id">#loading-box</span> <span class="selector-class">.loading-text</span><span class="selector-pseudo">:after</span></span><br><span class="line">      -webkit-<span class="attribute">animation</span> glitch .<span class="number">4s</span> <span class="built_in">cubic-bezier</span>(.<span class="number">25</span>,.<span class="number">46</span>,.<span class="number">45</span>,.<span class="number">94</span>) reverse both infinite</span><br><span class="line">      <span class="attribute">animation</span> glitch .<span class="number">4s</span> <span class="built_in">cubic-bezier</span>(.<span class="number">25</span>,.<span class="number">46</span>,.<span class="number">45</span>,.<span class="number">94</span>) reverse both infinite</span><br><span class="line">      <span class="attribute">color</span> <span class="number">#57bd6a</span></span><br><span class="line">      <span class="attribute">z-index</span> -<span class="number">2</span></span><br><span class="line"></span><br><span class="line">    <span class="selector-id">#loading-box</span> <span class="selector-class">.loading-text</span><span class="selector-pseudo">:after</span>,</span><br><span class="line">    <span class="selector-id">#loading-box</span> <span class="selector-class">.loading-text</span><span class="selector-pseudo">:before</span></span><br><span class="line">      <span class="attribute">display</span> block</span><br><span class="line">      <span class="attribute">content</span> <span class="built_in">attr</span>(data-glitch)</span><br><span class="line">      <span class="attribute">position</span> absolute</span><br><span class="line">      <span class="attribute">top</span> <span class="number">0</span></span><br><span class="line">      <span class="attribute">left</span> <span class="number">0</span></span><br><span class="line">      <span class="attribute">opacity</span> .<span class="number">8</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 故障效果动画</span></span><br><span class="line">    <span class="keyword">@keyframes</span> glitch</span><br><span class="line">      <span class="number">0%</span></span><br><span class="line">        <span class="attribute">text-shadow</span> <span class="number">3px</span> <span class="number">0</span> <span class="number">#ff0033</span>, -<span class="number">3px</span> <span class="number">0</span> <span class="number">#fff</span></span><br><span class="line">      <span class="number">20%</span></span><br><span class="line">        <span class="attribute">text-shadow</span> -<span class="number">3px</span> -<span class="number">3px</span> <span class="number">#ff0033</span>, <span class="number">3px</span> <span class="number">3px</span> <span class="number">#fff</span></span><br><span class="line">      <span class="number">40%</span></span><br><span class="line">        <span class="attribute">text-shadow</span> <span class="number">3px</span> <span class="number">3px</span> <span class="number">#ff0033</span>, -<span class="number">3px</span> -<span class="number">3px</span> <span class="number">#fff</span></span><br><span class="line">      <span class="number">60%</span></span><br><span class="line">        <span class="attribute">text-shadow</span> -<span class="number">3px</span> <span class="number">3px</span> <span class="number">#ff0033</span>, <span class="number">3px</span> -<span class="number">3px</span> <span class="number">#fff</span></span><br><span class="line">      <span class="number">80%</span></span><br><span class="line">        <span class="attribute">text-shadow</span> <span class="number">3px</span> -<span class="number">3px</span> <span class="number">#ff0033</span>, -<span class="number">3px</span> <span class="number">3px</span> <span class="number">#fff</span></span><br><span class="line">      <span class="number">100%</span></span><br><span class="line">        <span class="attribute">text-shadow</span> -<span class="number">3px</span> <span class="number">0</span> <span class="number">#ff0033</span>, <span class="number">3px</span> <span class="number">0</span> <span class="number">#fff</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 文字偏移动画</span></span><br><span class="line">    <span class="keyword">@keyframes</span> shift</span><br><span class="line">      <span class="number">0%</span>,<span class="number">100%</span>,<span class="number">40%</span>,<span class="number">44%</span>,<span class="number">58%</span>,<span class="number">61%</span>,<span class="number">65%</span>,<span class="number">69%</span>,<span class="number">73%</span></span><br><span class="line">        <span class="attribute">transform</span> <span class="built_in">skewX</span>(<span class="number">0</span>)</span><br><span class="line">      <span class="number">41%</span></span><br><span class="line">        <span class="attribute">transform</span> <span class="built_in">skewX</span>(<span class="number">10deg</span>)</span><br><span class="line">      <span class="number">42%</span></span><br><span class="line">        <span class="attribute">transform</span> <span class="built_in">skewX</span>(-<span class="number">10deg</span>)</span><br><span class="line">      <span class="number">59%</span></span><br><span class="line">        <span class="attribute">transform</span> <span class="built_in">skewX</span>(<span class="number">40deg</span>) <span class="built_in">skewY</span>(<span class="number">10deg</span>)</span><br><span class="line">      <span class="number">60%</span></span><br><span class="line">        <span class="attribute">transform</span> <span class="built_in">skewX</span>(-<span class="number">40deg</span>) <span class="built_in">skewY</span>(-<span class="number">10deg</span>)</span><br><span class="line">      <span class="number">63%</span></span><br><span class="line">        <span class="attribute">transform</span> <span class="built_in">skewX</span>(<span class="number">10deg</span>) <span class="built_in">skewY</span>(-<span class="number">5deg</span>)</span><br><span class="line">      <span class="number">70%</span></span><br><span class="line">        <span class="attribute">transform</span> <span class="built_in">skewX</span>(-<span class="number">50deg</span>) <span class="built_in">skewY</span>(-<span class="number">20deg</span>)</span><br><span class="line">      <span class="number">71%</span></span><br><span class="line">        <span class="attribute">transform</span> <span class="built_in">skewX</span>(<span class="number">10deg</span>) <span class="built_in">skewY</span>(-<span class="number">10deg</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 进度条样式</span></span><br><span class="line">    <span class="selector-class">.progress-bar</span></span><br><span class="line">      <span class="attribute">width</span> <span class="number">300px</span></span><br><span class="line">      <span class="attribute">height</span> <span class="number">4px</span></span><br><span class="line">      <span class="attribute">background</span> <span class="number">#f0f0f0</span></span><br><span class="line">      <span class="attribute">border-radius</span> <span class="number">2px</span></span><br><span class="line">      <span class="attribute">margin-top</span> <span class="number">20px</span></span><br><span class="line">      <span class="attribute">overflow</span> hidden</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.progress-fill</span></span><br><span class="line">      <span class="attribute">height</span> <span class="number">100%</span></span><br><span class="line">      <span class="attribute">background</span> <span class="built_in">linear-gradient</span>(<span class="number">90deg</span>, <span class="number">#409EFF</span>, <span class="number">#57bd6a</span>)</span><br><span class="line">      <span class="attribute">border-radius</span> <span class="number">2px</span></span><br><span class="line">      <span class="attribute">width</span> <span class="number">0%</span></span><br><span class="line">      <span class="attribute">transition</span> width <span class="number">0.3s</span> ease</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Black Cat 主题样式 - 基于原始创意svg加载loading小猫动画</span></span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">hexo-config</span>(<span class="string">&#x27;loading.theme&#x27;</span>) == <span class="string">&#x27;black-cat&#x27;</span></span><br><span class="line">    <span class="comment">// Black Cat 全屏遮罩容器</span></span><br><span class="line">    <span class="selector-id">#loading-container</span></span><br><span class="line">      <span class="attribute">position</span> fixed</span><br><span class="line">      <span class="attribute">top</span> <span class="number">0</span></span><br><span class="line">      <span class="attribute">left</span> <span class="number">0</span></span><br><span class="line">      <span class="attribute">width</span> <span class="number">100%</span></span><br><span class="line">      <span class="attribute">height</span> <span class="number">100%</span></span><br><span class="line">      <span class="attribute">height</span> <span class="number">100vh</span></span><br><span class="line">      <span class="attribute">background</span> <span class="number">#E4E5E6</span></span><br><span class="line">      <span class="attribute">z-index</span> <span class="number">9999</span></span><br><span class="line">      <span class="attribute">transition</span> transform <span class="number">1.3s</span> ease</span><br><span class="line">      <span class="attribute">will-change</span> transform</span><br><span class="line">      <span class="attribute">display</span> flex</span><br><span class="line">      <span class="attribute">align-items</span> center</span><br><span class="line">      <span class="attribute">justify-content</span> center</span><br><span class="line">      <span class="attribute">overflow</span> hidden</span><br><span class="line">      <span class="attribute">font-family</span> <span class="string">&#x27;Delius Swash Caps&#x27;</span>, cursive</span><br><span class="line">      <span class="attribute">text-align</span> center</span><br><span class="line">      <span class="attribute">color</span> <span class="number">#004466</span></span><br><span class="line"></span><br><span class="line">    <span class="selector-id">#loading-container</span><span class="selector-class">.hide</span></span><br><span class="line">      <span class="attribute">transform</span> <span class="built_in">translateX</span>(<span class="number">100%</span>)</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.wrapper-no7</span></span><br><span class="line">      <span class="attribute">display</span> flex</span><br><span class="line">      <span class="attribute">justify-content</span> center</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.wrapper-no7</span> <span class="selector-class">.animation-wrapper</span></span><br><span class="line">      <span class="attribute">display</span> flex</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.wrapper-no7</span> <span class="selector-class">.animation-wrapper</span><span class="selector-class">.notvisible</span></span><br><span class="line">      <span class="attribute">display</span> none</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.wrapper-no7</span> <span class="selector-class">.cat</span></span><br><span class="line">      <span class="attribute">width</span> <span class="number">80%</span></span><br><span class="line">      <span class="attribute">overflow</span> visible</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.wrapper-no7</span> <span class="selector-class">.cat-wrapper</span></span><br><span class="line">      <span class="attribute">width</span> <span class="number">300px</span></span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.wrapper-no7</span> <span class="selector-class">.eyes</span> <span class="selector-tag">circle</span></span><br><span class="line">      <span class="attribute">fill</span> <span class="number">#fff</span></span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.wrapper-no7</span> <span class="selector-class">.frontlegs</span>,</span><br><span class="line">    <span class="selector-class">.wrapper-no7</span> <span class="selector-class">.backlegs</span></span><br><span class="line">      <span class="attribute">opacity</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.wrapper-no7</span> <span class="selector-class">.logoani</span></span><br><span class="line">      <span class="attribute">align-self</span> flex-end</span><br><span class="line">      <span class="attribute">margin-left</span> -<span class="number">25px</span></span><br><span class="line">      <span class="attribute">font-size</span> <span class="number">45px</span></span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.wrapper-no7</span> <span class="selector-class">.logo</span></span><br><span class="line">      <span class="attribute">font-size</span> <span class="number">55px</span></span><br><span class="line">      <span class="attribute">opacity</span> <span class="number">0</span></span><br><span class="line">      <span class="attribute">position</span> absolute</span><br><span class="line">      <span class="attribute">top</span> -<span class="number">40px</span></span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.wrapper-no7</span> <span class="selector-class">.logo</span><span class="selector-class">.visible</span></span><br><span class="line">      <span class="attribute">opacity</span> <span class="number">1</span></span><br><span class="line">      <span class="attribute">top</span> <span class="number">40px</span></span><br><span class="line">      <span class="attribute">transition</span> all <span class="number">1s</span></span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.wrapper-no7</span> <span class="selector-class">.restart</span></span><br><span class="line">      <span class="attribute">display</span> none</span><br><span class="line">      <span class="attribute">font-size</span> <span class="number">20px</span></span><br><span class="line">      <span class="attribute">position</span> absolute</span><br><span class="line">      <span class="attribute">top</span> <span class="number">50%</span></span><br><span class="line">      <span class="attribute">background-color</span> white</span><br><span class="line">      <span class="attribute">border</span> <span class="number">#bbbbbb</span> <span class="number">1px</span> solid</span><br><span class="line">      <span class="attribute">box-shadow</span> none</span><br><span class="line">      <span class="attribute">padding</span> <span class="number">20px</span></span><br><span class="line">      <span class="attribute">border-radius</span> <span class="number">10px</span></span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.wrapper-no7</span> <span class="selector-class">.restart</span><span class="selector-pseudo">:hover</span></span><br><span class="line">      <span class="attribute">background-color</span> <span class="number">#ddd</span></span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.wrapper-no7</span> <span class="selector-class">.restart</span><span class="selector-class">.visible</span></span><br><span class="line">      <span class="attribute">display</span> block</span><br></pre></td></tr></table></figure><h3 id="3-Mona-Lisa主题JavaScript-loading-theme-mona-lisa-js">3. Mona Lisa主题JavaScript - loading-theme-mona-lisa.js</h3><p><strong>文件路径：</strong> <code>themes/solitude/source/js/custom/loading-theme-mona-lisa.js</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Loading Theme Mona Lisa - Solitude Theme Loading Animation</span></span><br><span class="line"><span class="comment"> * Mona Lisa主题的loading动画实现</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * 功能：</span></span><br><span class="line"><span class="comment"> * - SVG描边动画</span></span><br><span class="line"><span class="comment"> * - 进度条模拟</span></span><br><span class="line"><span class="comment"> * - 双重收起动画</span></span><br><span class="line"><span class="comment"> * - Pjax兼容</span></span><br><span class="line"><span class="comment"> * - 超时保护</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line">(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="string">&#x27;use strict&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 等待DOM加载完成</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> <span class="variable constant_">DURATION</span> = <span class="number">1.5</span>; <span class="comment">// 动画时长（秒）</span></span><br><span class="line">        <span class="keyword">let</span> timer = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">let</span> progress = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">let</span> isAnimating = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 进度条更新</span></span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">updateProgress</span>(<span class="params">percent</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> progressFill = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;progress-fill&#x27;</span>);</span><br><span class="line">            <span class="keyword">if</span> (progressFill) &#123;</span><br><span class="line">                progressFill.<span class="property">style</span>.<span class="property">width</span> = percent + <span class="string">&#x27;%&#x27;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// SVG描边动画</span></span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">animatePaths</span>(<span class="params">appear</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> paths = <span class="title class_">Array</span>.<span class="title function_">from</span>(<span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.draw-path&#x27;</span>));</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> (paths.<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;No draw-path elements found&#x27;</span>);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 1. 先全部 transition 设为 none，设置起始状态</span></span><br><span class="line">            paths.<span class="title function_">forEach</span>(<span class="function"><span class="params">path</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">const</span> len = path.<span class="title function_">getTotalLength</span>();</span><br><span class="line">                path.<span class="property">style</span>.<span class="property">strokeDasharray</span> = len;</span><br><span class="line">                path.<span class="property">style</span>.<span class="property">transition</span> = <span class="string">&#x27;none&#x27;</span>;</span><br><span class="line">                path.<span class="property">style</span>.<span class="property">strokeDashoffset</span> = appear ? len : <span class="number">0</span>;</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 2. 强制重绘</span></span><br><span class="line">            <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">offsetHeight</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 3. 统一设置 transition 和目标状态</span></span><br><span class="line">            paths.<span class="title function_">forEach</span>(<span class="function"><span class="params">path</span> =&gt;</span> &#123;</span><br><span class="line">                path.<span class="property">style</span>.<span class="property">transition</span> = <span class="string">`stroke-dashoffset <span class="subst">$&#123;DURATION&#125;</span>s linear`</span>;</span><br><span class="line">                path.<span class="property">style</span>.<span class="property">strokeDashoffset</span> = appear ? <span class="number">0</span> : path.<span class="property">style</span>.<span class="property">strokeDasharray</span>;</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 4. 动画结束后切换状态</span></span><br><span class="line">            <span class="built_in">clearTimeout</span>(timer);</span><br><span class="line">            timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (!isAnimating) &#123;</span><br><span class="line">                    <span class="title function_">animatePaths</span>(!appear);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, <span class="variable constant_">DURATION</span> * <span class="number">1000</span> + <span class="number">50</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 模拟加载过程</span></span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">simulateLoading</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> loadingSteps = [</span><br><span class="line">                &#123; <span class="attr">progress</span>: <span class="number">20</span>, <span class="attr">delay</span>: <span class="number">500</span> &#125;,</span><br><span class="line">                &#123; <span class="attr">progress</span>: <span class="number">40</span>, <span class="attr">delay</span>: <span class="number">800</span> &#125;,</span><br><span class="line">                &#123; <span class="attr">progress</span>: <span class="number">60</span>, <span class="attr">delay</span>: <span class="number">600</span> &#125;,</span><br><span class="line">                &#123; <span class="attr">progress</span>: <span class="number">80</span>, <span class="attr">delay</span>: <span class="number">700</span> &#125;,</span><br><span class="line">                &#123; <span class="attr">progress</span>: <span class="number">100</span>, <span class="attr">delay</span>: <span class="number">1000</span> &#125;</span><br><span class="line">            ];</span><br><span class="line"></span><br><span class="line">            <span class="keyword">let</span> currentStep = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">function</span> <span class="title function_">nextStep</span>(<span class="params"></span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (currentStep &lt; loadingSteps.<span class="property">length</span>) &#123;</span><br><span class="line">                    <span class="keyword">const</span> step = loadingSteps[currentStep];</span><br><span class="line">                    <span class="title function_">updateProgress</span>(step.<span class="property">progress</span>);</span><br><span class="line">                    currentStep++;</span><br><span class="line">                    </span><br><span class="line">                    <span class="keyword">if</span> (currentStep &lt; loadingSteps.<span class="property">length</span>) &#123;</span><br><span class="line">                        <span class="built_in">setTimeout</span>(nextStep, step.<span class="property">delay</span>);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="comment">// 加载完成，开始收起动画</span></span><br><span class="line">                        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                            <span class="title function_">completeLoading</span>();</span><br><span class="line">                        &#125;, <span class="number">500</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="title function_">nextStep</span>();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 完成加载 - 双层收起动画</span></span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">completeLoading</span>(<span class="params"></span>) &#123;</span><br><span class="line">            isAnimating = <span class="literal">true</span>;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 停止描边动画</span></span><br><span class="line">            <span class="built_in">clearTimeout</span>(timer);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 第一次收起：loading-animation 层先收起</span></span><br><span class="line">            <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">const</span> loadingAnimation = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;loading-animation&#x27;</span>);</span><br><span class="line">                <span class="keyword">if</span> (loadingAnimation) &#123;</span><br><span class="line">                    loadingAnimation.<span class="property">style</span>.<span class="property">transform</span> = <span class="string">&#x27;translateX(100%)&#x27;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                </span><br><span class="line">                <span class="comment">// 第二次收起：loading-bg 层延迟收起</span></span><br><span class="line">                <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">const</span> loadingBg = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;loading-bg&#x27;</span>);</span><br><span class="line">                    <span class="keyword">if</span> (loadingBg) &#123;</span><br><span class="line">                        loadingBg.<span class="property">style</span>.<span class="property">transform</span> = <span class="string">&#x27;translateX(100%)&#x27;</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    </span><br><span class="line">                    <span class="comment">// 最后收起整个容器</span></span><br><span class="line">                    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                        <span class="keyword">const</span> loadingContainer = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;loading-container&#x27;</span>);</span><br><span class="line">                        <span class="keyword">if</span> (loadingContainer) &#123;</span><br><span class="line">                            loadingContainer.<span class="property">style</span>.<span class="property">transform</span> = <span class="string">&#x27;translateX(100%)&#x27;</span>;</span><br><span class="line">                            </span><br><span class="line">                            <span class="comment">// 收起完成后移除 loading 容器</span></span><br><span class="line">                            <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                                <span class="comment">// 移除 loading 相关遮罩</span></span><br><span class="line">                                <span class="keyword">const</span> loadingBg = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;loading-bg&#x27;</span>);</span><br><span class="line">                                <span class="keyword">if</span> (loadingBg) loadingBg.<span class="title function_">remove</span>();</span><br><span class="line">                                <span class="keyword">const</span> loadingContainer = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;loading-container&#x27;</span>);</span><br><span class="line">                                <span class="keyword">if</span> (loadingContainer) loadingContainer.<span class="title function_">remove</span>();</span><br><span class="line">                                <span class="comment">// 兼容其它可能的遮罩</span></span><br><span class="line">                                <span class="keyword">const</span> masks = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.mask, .overlay, .loading-mask, .loading-overlay&#x27;</span>);</span><br><span class="line">                                masks.<span class="title function_">forEach</span>(<span class="function"><span class="params">el</span> =&gt;</span> el.<span class="title function_">remove</span>());</span><br><span class="line">                                <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span>.<span class="property">overflow</span> = <span class="string">&#x27;auto&#x27;</span>;</span><br><span class="line">                                <span class="comment">// 触发pace-done事件</span></span><br><span class="line">                                <span class="keyword">const</span> body = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;body&#x27;</span>);</span><br><span class="line">                                <span class="keyword">if</span> (body) &#123;</span><br><span class="line">                                    body.<span class="property">className</span> = <span class="string">&#x27;pace-done&#x27;</span>;</span><br><span class="line">                                &#125;</span><br><span class="line">                                <span class="comment">// 确保页面回到顶部</span></span><br><span class="line">                                <span class="variable language_">window</span>.<span class="title function_">scrollTo</span>(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">                                <span class="comment">// 延迟触发一次 percent 函数，确保初始值正确</span></span><br><span class="line">                                <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                                    <span class="keyword">if</span> (<span class="keyword">typeof</span> percent === <span class="string">&#x27;function&#x27;</span>) <span class="title function_">percent</span>();</span><br><span class="line">                                &#125;, <span class="number">100</span>);</span><br><span class="line">                            &#125;, <span class="number">300</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;, <span class="number">300</span>);</span><br><span class="line">                &#125;, <span class="number">300</span>);</span><br><span class="line">            &#125;, <span class="number">500</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 开始动画</span></span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">startAnimation</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Starting Mona Lisa loading animation...&#x27;</span>);</span><br><span class="line">            <span class="comment">// 开始描边动画</span></span><br><span class="line">            <span class="title function_">animatePaths</span>(<span class="literal">true</span>);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 开始模拟加载</span></span><br><span class="line">            <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="title function_">simulateLoading</span>();</span><br><span class="line">            &#125;, <span class="number">1000</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 页面加载完成后开始动画</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">readyState</span> === <span class="string">&#x27;loading&#x27;</span>) &#123;</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;load&#x27;</span>, startAnimation);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="title function_">startAnimation</span>();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Pjax兼容</span></span><br><span class="line">        <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;pjax:send&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Pjax send event triggered for Mona Lisa theme&#x27;</span>);</span><br><span class="line">            <span class="comment">// 重新创建loading容器</span></span><br><span class="line">            <span class="keyword">const</span> existingContainer = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;loading-container&#x27;</span>);</span><br><span class="line">            <span class="keyword">if</span> (existingContainer) &#123;</span><br><span class="line">                existingContainer.<span class="title function_">remove</span>();</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 重新初始化loading</span></span><br><span class="line">            isAnimating = <span class="literal">false</span>;</span><br><span class="line">            progress = <span class="number">0</span>;</span><br><span class="line">            <span class="built_in">clearTimeout</span>(timer);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 重新开始动画</span></span><br><span class="line">            <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="title function_">animatePaths</span>(<span class="literal">true</span>);</span><br><span class="line">                <span class="title function_">simulateLoading</span>();</span><br><span class="line">            &#125;, <span class="number">100</span>);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 超时保护</span></span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (!isAnimating) &#123;</span><br><span class="line">                <span class="title function_">completeLoading</span>();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, <span class="number">8000</span>);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><h3 id="4-Black-Cat主题JavaScript-loading-theme-black-cat-js">4. Black Cat主题JavaScript - loading-theme-black-cat.js</h3><p><strong>文件路径：</strong> <code>themes/solitude/source/js/custom/loading-theme-black-cat.js</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Loading Theme Black Cat - Solitude Theme Loading Animation</span></span><br><span class="line"><span class="comment"> * Black Cat主题的loading动画实现</span></span><br><span class="line"><span class="comment"> * 完全基于原始创意svg加载loading小猫动画</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * 功能：</span></span><br><span class="line"><span class="comment"> * - 小猫动画</span></span><br><span class="line"><span class="comment"> * - GSAP动画库</span></span><br><span class="line"><span class="comment"> * - 页面布局动画</span></span><br><span class="line"><span class="comment"> * - Pjax兼容</span></span><br><span class="line"><span class="comment"> * - 超时保护</span></span><br><span class="line"><span class="comment"> * - 收起动画</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;DOMContentLoaded&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">const</span> cat = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.cat&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> catBody = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.body&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> head = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.head&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> eyes = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.eyes circle&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> eyel = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.eyes-l&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> eyer = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.eyes-r&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> ears = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.ears&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> earsl = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.ears-l&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> earsr = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.ears-r&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> tail = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.tail&#x27;</span>); </span><br><span class="line"><span class="keyword">const</span> backlegs = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.backlegs&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> frontlegs = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.frontlegs&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> frontlegs1 = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.frontlegs1&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> backcircle = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.body-backcircle&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> frontcircle = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.body-frontcircle&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> bodybetween = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.body-between&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> logo = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.logoani&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> logofix = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.logo&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> resetbutton = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.restart&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> ani = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.animation-wrapper&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> loadingContainer = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;loading-container&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> isAnimating = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">let</span> animationComplete = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//start-animation</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">initAni</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">const</span> tl = <span class="keyword">new</span> <span class="title class_">TimelineMax</span>(&#123;<span class="attr">delay</span>:<span class="number">0.5</span>, <span class="attr">onComplete</span>:completeLoading&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//logo</span></span><br><span class="line">tl.<span class="title function_">fromTo</span>(logo, <span class="number">0.3</span>, &#123;<span class="attr">autoAlpha</span>:<span class="number">0</span>, <span class="attr">y</span>:-<span class="number">30</span>&#125;,&#123;<span class="attr">autoAlpha</span>:<span class="number">1</span>, <span class="attr">y</span>:<span class="number">0</span>, <span class="attr">ease</span>:<span class="title class_">Power2</span>.<span class="property">easeOut</span>&#125;)</span><br><span class="line">  .<span class="title function_">fromTo</span>(cat, <span class="number">0.3</span>, &#123;<span class="attr">autoAlpha</span>:<span class="number">0</span>, <span class="attr">y</span>:-<span class="number">30</span>&#125;,&#123;<span class="attr">autoAlpha</span>:<span class="number">1</span>, <span class="attr">y</span>:<span class="number">0</span>, <span class="attr">ease</span>:<span class="title class_">Power2</span>.<span class="property">easeOut</span>&#125;, <span class="string">&quot;-=0.2&quot;</span>)</span><br><span class="line">  .<span class="title function_">fromTo</span>(cat, <span class="number">2</span>, &#123;<span class="attr">scale</span>:<span class="number">0.8</span>&#125;,&#123;<span class="attr">scale</span>:<span class="number">1</span>, <span class="attr">transformOrigin</span>:<span class="string">&quot;center center&quot;</span>, <span class="attr">ease</span>:<span class="title class_">Elastic</span>.<span class="property">easeOut</span>.<span class="title function_">config</span>(<span class="number">1</span>, <span class="number">0.3</span>)&#125;, <span class="string">&quot;-=0.1&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//eyes</span></span><br><span class="line"><span class="keyword">const</span> tleyes = <span class="keyword">new</span> <span class="title class_">TimelineMax</span>(&#123;<span class="attr">delay</span>:<span class="number">2</span>, <span class="attr">repeat</span>:-<span class="number">1</span>, <span class="attr">yoyo</span>:<span class="literal">true</span>, <span class="attr">repeatDelay</span>:<span class="number">3</span>&#125;);</span><br><span class="line">tleyes.<span class="title function_">to</span>(eyes, <span class="number">0.01</span>, &#123;<span class="attr">scaleY</span>:<span class="number">0.1</span>, <span class="attr">transformOrigin</span>:<span class="string">&quot;center center&quot;</span>, <span class="attr">ease</span>:<span class="title class_">Power2</span>.<span class="property">easeOut</span>&#125;)</span><br><span class="line">      .<span class="title function_">to</span>(eyes, <span class="number">0.01</span>, &#123;<span class="attr">scaleY</span>:<span class="number">1</span>, <span class="attr">transformOrigin</span>:<span class="string">&quot;center center&quot;</span>, <span class="attr">ease</span>:<span class="title class_">Power2</span>.<span class="property">easeOut</span>&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//ears</span></span><br><span class="line"><span class="keyword">const</span> tlears = <span class="keyword">new</span> <span class="title class_">TimelineMax</span>(&#123;<span class="attr">delay</span>:<span class="number">1</span>, <span class="attr">repeat</span>:-<span class="number">1</span>, <span class="attr">yoyo</span>:<span class="literal">true</span>, <span class="attr">repeatDelay</span>:<span class="number">1</span>&#125;);</span><br><span class="line">tlears.<span class="title function_">to</span>(earsl, <span class="number">1</span>, &#123;<span class="attr">rotation</span>:<span class="number">10</span>, <span class="attr">transformOrigin</span>:<span class="string">&quot;center bottom&quot;</span>, <span class="attr">ease</span>:<span class="title class_">Power2</span>.<span class="property">easeOut</span>&#125;)</span><br><span class="line">      .<span class="title function_">to</span>(earsr, <span class="number">1</span>, &#123;<span class="attr">rotation</span>:-<span class="number">10</span>, <span class="attr">transformOrigin</span>:<span class="string">&quot;center bottom&quot;</span>, <span class="attr">ease</span>:<span class="title class_">Power2</span>.<span class="property">easeOut</span>&#125;, <span class="string">&quot;-=1&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//tail</span></span><br><span class="line"><span class="keyword">const</span> tltail = <span class="keyword">new</span> <span class="title class_">TimelineMax</span>(&#123;<span class="attr">delay</span>:<span class="number">0.5</span>, <span class="attr">repeat</span>:-<span class="number">1</span>, <span class="attr">yoyo</span>:<span class="literal">true</span>&#125;);</span><br><span class="line">tltail.<span class="title function_">to</span>(tail, <span class="number">1</span>, &#123;<span class="attr">rotation</span>: <span class="string">&quot;+=10&quot;</span>, <span class="attr">transformOrigin</span>:<span class="string">&quot;left center&quot;</span>, <span class="attr">ease</span>:<span class="title class_">Power2</span>.<span class="property">easeOut</span>&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//moving</span></span><br><span class="line"><span class="keyword">const</span> tlmove = <span class="keyword">new</span> <span class="title class_">TimelineMax</span>(&#123;<span class="attr">delay</span>:<span class="number">3</span>&#125;);</span><br><span class="line">tlmove.<span class="title function_">to</span>(cat, <span class="number">2</span>, &#123;<span class="attr">y</span>:-<span class="number">100</span>, <span class="attr">ease</span>:<span class="title class_">Power2</span>.<span class="property">easeOut</span>&#125;)</span><br><span class="line">      .<span class="title function_">to</span>(cat, <span class="number">0.7</span>, &#123;<span class="attr">y</span>:<span class="number">0</span>, <span class="attr">ease</span>:<span class="title class_">Bounce</span>.<span class="property">easeOut</span>&#125;)</span><br><span class="line">      .<span class="title function_">to</span>(cat, <span class="number">2</span>, &#123;<span class="attr">y</span>:-<span class="number">100</span>, <span class="attr">ease</span>:<span class="title class_">Power2</span>.<span class="property">easeOut</span>&#125;)</span><br><span class="line">      .<span class="title function_">to</span>(cat, <span class="number">0.7</span>, &#123;<span class="attr">y</span>:<span class="number">0</span>, <span class="attr">ease</span>:<span class="title class_">Bounce</span>.<span class="property">easeOut</span>&#125;)</span><br><span class="line">      .<span class="title function_">to</span>(cat, <span class="number">2</span>, &#123;<span class="attr">y</span>:-<span class="number">300</span>, <span class="attr">ease</span>:<span class="title class_">Power2</span>.<span class="property">easeOut</span>&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 完成loading动画</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">completeLoading</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (animationComplete) <span class="keyword">return</span>;</span><br><span class="line">animationComplete = <span class="literal">true</span>;</span><br><span class="line">isAnimating = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Black Cat animation completed, hiding loading...&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 直接收起loading容器</span></span><br><span class="line"><span class="keyword">if</span> (loadingContainer) &#123;</span><br><span class="line">loadingContainer.<span class="property">style</span>.<span class="property">transform</span> = <span class="string">&#x27;translateX(100%)&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 动画完成后移除容器</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (loadingContainer) &#123;</span><br><span class="line">loadingContainer.<span class="title function_">remove</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 恢复页面状态</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span>.<span class="property">overflow</span> = <span class="string">&#x27;auto&#x27;</span>;</span><br><span class="line"><span class="comment">// 触发pace-done事件</span></span><br><span class="line"><span class="keyword">const</span> body = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;body&#x27;</span>);</span><br><span class="line"><span class="keyword">if</span> (body) &#123;</span><br><span class="line">body.<span class="property">className</span> = <span class="string">&#x27;pace-done&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 确保页面回到顶部</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">scrollTo</span>(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line"><span class="comment">// 延迟触发一次 percent 函数，确保初始值正确</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> percent === <span class="string">&#x27;function&#x27;</span>) <span class="title function_">percent</span>();</span><br><span class="line">&#125;, <span class="number">100</span>);</span><br><span class="line">&#125;, <span class="number">1300</span>); <span class="comment">// 等待CSS动画完成</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// restart-button</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">restart</span>(<span class="params"></span>)&#123;</span><br><span class="line">isAnimating = <span class="literal">false</span>;</span><br><span class="line">animationComplete = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">const</span> tl = <span class="keyword">new</span> <span class="title class_">TimelineMax</span>();</span><br><span class="line">tl.<span class="title function_">set</span>([cat, logo], &#123;<span class="attr">clearProps</span>:<span class="string">&quot;all&quot;</span>&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Black Cat animation restarted&#x27;</span>);</span><br><span class="line"><span class="title function_">initAni</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 检查是否需要重启</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">checkRestart</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">if</span>(resetbutton)&#123;</span><br><span class="line">resetbutton.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, restart);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 开始动画</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">startBlackCatAnimation</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Starting Black Cat loading animation...&#x27;</span>);</span><br><span class="line"><span class="keyword">if</span> (!isAnimating &amp;&amp; !animationComplete) &#123;</span><br><span class="line">isAnimating = <span class="literal">true</span>;</span><br><span class="line"><span class="title function_">initAni</span>();</span><br><span class="line"><span class="title function_">checkRestart</span>();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 页面加载完成后开始动画</span></span><br><span class="line"><span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">readyState</span> === <span class="string">&#x27;loading&#x27;</span>) &#123;</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;load&#x27;</span>, startBlackCatAnimation);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="title function_">startBlackCatAnimation</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Pjax兼容性</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;pjax:send&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Pjax send event triggered for Black Cat theme&#x27;</span>);</span><br><span class="line"><span class="comment">// 重新创建loading容器</span></span><br><span class="line"><span class="keyword">const</span> existingContainer = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;loading-container&#x27;</span>);</span><br><span class="line"><span class="keyword">if</span> (existingContainer) &#123;</span><br><span class="line">existingContainer.<span class="title function_">remove</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 重新初始化状态</span></span><br><span class="line">isAnimating = <span class="literal">false</span>;</span><br><span class="line">animationComplete = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 重新开始动画</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line"><span class="title function_">startBlackCatAnimation</span>();</span><br><span class="line">&#125;, <span class="number">100</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 超时保护</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (!animationComplete) &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Black Cat animation timeout, forcing completion...&#x27;</span>);</span><br><span class="line"><span class="title function_">completeLoading</span>();</span><br><span class="line">&#125;</span><br><span class="line">&#125;, <span class="number">10000</span>); <span class="comment">// 10秒超时</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><hr><h2 id="🔧-关键技术实现细节">🔧 关键技术实现细节</h2><h3 id="1-完全独立的配置判断">1. 完全独立的配置判断</h3><h4 id="CSS层面">CSS层面</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Mona Lisa 主题样式 - 完全独立</span></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">hexo-config</span>(<span class="string">&#x27;loading.theme&#x27;</span>) == <span class="string">&#x27;mona-lisa&#x27;</span></span><br><span class="line">  <span class="comment">// Mona Lisa 特定样式，无重复</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Black Cat 主题样式 - 完全独立  </span></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">hexo-config</span>(<span class="string">&#x27;loading.theme&#x27;</span>) == <span class="string">&#x27;black-cat&#x27;</span></span><br><span class="line">  <span class="comment">// Black Cat 特定样式，完全基于原始实现</span></span><br></pre></td></tr></table></figure><h4 id="HTML层面">HTML层面</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// Mona Lisa 主题 - 完全独立</span><br><span class="line">if theme.loading.theme == &#x27;mona-lisa&#x27;</span><br><span class="line">  // Mona Lisa HTML结构，使用loading-container</span><br><span class="line"></span><br><span class="line">// Black Cat 主题 - 完全独立</span><br><span class="line">if theme.loading.theme == &#x27;black-cat&#x27;</span><br><span class="line">  // Black Cat HTML结构，添加全屏遮罩容器</span><br></pre></td></tr></table></figure><h3 id="2-JavaScript完全独立">2. JavaScript完全独立</h3><ul><li><strong>Mona Lisa</strong>: 专注于SVG描边动画和进度条，使用IIFE封装</li><li><strong>Black Cat</strong>: 完全基于原始实现，直接使用原始动画逻辑，添加收起动画</li></ul><h3 id="3-CSS样式完全独立">3. CSS样式完全独立</h3><ul><li><strong>Mona Lisa</strong>: 双层结构，蓝白配色，故障文字效果</li><li><strong>Black Cat</strong>: 单层结构，灰色背景，小猫动画样式</li></ul><hr><h2 id="🎬-动画执行流程对比">🎬 动画执行流程对比</h2><h3 id="Mona-Lisa-动画流程">Mona Lisa 动画流程</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">开始 → SVG描边循环 → 进度条分步 → 双层收起</span><br><span class="line">  ↓        ↓           ↓         ↓</span><br><span class="line">DOM就绪  描边动画      5步进度   前景→背景→容器</span><br><span class="line">  ↓        ↓           ↓         ↓</span><br><span class="line">1000ms   循环1.5s     3600ms    分层收起</span><br></pre></td></tr></table></figure><h3 id="Black-Cat-动画流程">Black Cat 动画流程</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">开始 → 小猫出现 → 眨眼摆尾 → 跳跃动画 → 直接收起</span><br><span class="line">  ↓       ↓        ↓        ↓        ↓</span><br><span class="line">DOM就绪  缩放弹性  循环动作  三次跳跃  滑动收起</span><br><span class="line">  ↓       ↓        ↓        ↓        ↓</span><br><span class="line">500ms   2000ms   3000ms   7000ms   直接移除</span><br></pre></td></tr></table></figure><hr><h2 id="📦-修复内容详解">📦 修复内容详解</h2><h3 id="Black-Cat主题全屏遮罩修复">Black Cat主题全屏遮罩修复</h3><h4 id="问题">问题</h4><p>Black Cat主题在loading时主页内容会显示出来，没有全屏遮罩效果。</p><h4 id="解决方案">解决方案</h4><ol><li><strong>HTML结构修复</strong>：</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// Black Cat 主题 - 基于原始创意svg加载loading小猫动画</span><br><span class="line">if theme.loading.theme == &#x27;black-cat&#x27;</span><br><span class="line">  div(id=&quot;loading-container&quot;)  // 添加全屏遮罩容器</span><br><span class="line">    div.wrapper-no7</span><br><span class="line">      // ... 原始HTML结构</span><br></pre></td></tr></table></figure><ol start="2"><li><strong>CSS样式修复</strong>：</li></ol><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Black Cat 全屏遮罩容器</span></span><br><span class="line"><span class="selector-id">#loading-container</span></span><br><span class="line">  <span class="attribute">position</span> fixed</span><br><span class="line">  <span class="attribute">top</span> <span class="number">0</span></span><br><span class="line">  <span class="attribute">left</span> <span class="number">0</span></span><br><span class="line">  <span class="attribute">width</span> <span class="number">100%</span></span><br><span class="line">  <span class="attribute">height</span> <span class="number">100%</span></span><br><span class="line">  <span class="attribute">background</span> <span class="number">#E4E5E6</span></span><br><span class="line">  <span class="attribute">z-index</span> <span class="number">9999</span></span><br><span class="line">  <span class="attribute">transition</span> transform <span class="number">1.3s</span> ease</span><br><span class="line">  <span class="attribute">will-change</span> transform</span><br><span class="line">  <span class="attribute">display</span> flex</span><br><span class="line">  <span class="attribute">align-items</span> center</span><br><span class="line">  <span class="attribute">justify-content</span> center</span><br><span class="line">  <span class="attribute">overflow</span> hidden</span><br></pre></td></tr></table></figure><ol start="3"><li><strong>JavaScript修复</strong>：</li></ol><ul><li>添加了 <code>completeLoading()</code> 函数</li><li>在动画完成后自动收起loading容器</li><li>添加了Pjax兼容和超时保护</li></ul><h3 id="Black-Cat主题直接跳转修复">Black Cat主题直接跳转修复</h3><h4 id="问题-2">问题</h4><p>小猫跳跃后显示假的layout页面，而不是直接跳转到真实主页。</p><h4 id="解决方案-2">解决方案</h4><ol><li><strong>移除假页面元素</strong>：</li></ol><ul><li>移除了所有layout相关的HTML元素</li><li>简化了HTML结构</li></ul><ol start="2"><li><strong>移除假页面样式</strong>：</li></ol><ul><li>移除了所有layout相关的CSS样式</li><li>减少了CSS体积</li></ul><ol start="3"><li><strong>修改动画逻辑</strong>：</li></ol><ul><li>将动画完成回调从 <code>logoVisible</code> 改为 <code>completeLoading</code></li><li>移除了对layout元素的引用</li><li>小猫跳跃后直接收起loading容器</li></ul><hr><h2 id="🔍-使用配置详解">🔍 使用配置详解</h2><h3 id="基础配置">基础配置</h3><p>在 <code>_config.solitude.yml</code> 中配置：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">loading:</span></span><br><span class="line">  <span class="attr">fullpage:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">theme:</span> <span class="string">mona-lisa</span>  <span class="comment"># 或 black-cat</span></span><br><span class="line">  <span class="attr">pace:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h3 id="主题切换">主题切换</h3><h4 id="切换到Mona-Lisa主题">切换到Mona Lisa主题</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">loading:</span></span><br><span class="line">  <span class="attr">theme:</span> <span class="string">mona-lisa</span></span><br></pre></td></tr></table></figure><p><strong>特点</strong>: SVG艺术风、双层动画、进度条、蓝色主题</p><h4 id="切换到Black-Cat主题">切换到Black Cat主题</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">loading:</span></span><br><span class="line"><span class="attr">theme:</span> <span class="string">black-cat</span></span><br></pre></td></tr></table></figure><p><strong>特点</strong>: 小猫动画、GSAP动画、跳跃效果、灰色主题</p><h3 id="高级配置">高级配置</h3><h4 id="禁用Loading">禁用Loading</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">loading:</span></span><br><span class="line">  <span class="attr">fullpage:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><h4 id="仅启用顶部进度条">仅启用顶部进度条</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">loading:</span></span><br><span class="line">  <span class="attr">fullpage:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">pace:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><hr><h2 id="🎨-自定义和扩展">🎨 自定义和扩展</h2><h3 id="1-修改Mona-Lisa主题颜色">1. 修改Mona Lisa主题颜色</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 修改主色调</span></span><br><span class="line"><span class="selector-id">#loading-bg</span></span><br><span class="line">  <span class="attribute">background</span> #your-color  // 替换 <span class="number">#409EFF</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.blue-path</span></span><br><span class="line">  <span class="attribute">stroke</span> #your-color      // 替换 <span class="number">#409EFF</span></span><br></pre></td></tr></table></figure><h3 id="2-调整Black-Cat动画时间">2. 调整Black Cat动画时间</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 修改动画延迟和时长</span></span><br><span class="line"><span class="keyword">const</span> tl = <span class="keyword">new</span> <span class="title class_">TimelineMax</span>(&#123;<span class="attr">delay</span>:<span class="number">0.5</span>, <span class="attr">onComplete</span>:completeLoading&#125;);</span><br><span class="line">tl.<span class="title function_">fromTo</span>(logo, <span class="number">0.3</span>, &#123;<span class="attr">autoAlpha</span>:<span class="number">0</span>, <span class="attr">y</span>:-<span class="number">30</span>&#125;,&#123;<span class="attr">autoAlpha</span>:<span class="number">1</span>, <span class="attr">y</span>:<span class="number">0</span>, <span class="attr">ease</span>:<span class="title class_">Power2</span>.<span class="property">easeOut</span>&#125;)</span><br></pre></td></tr></table></figure><h3 id="3-添加新的Loading主题">3. 添加新的Loading主题</h3><ol><li>在 <code>loading.pug</code> 中添加新的判断条件</li><li>在 <code>fullpage.styl</code> 中添加新主题样式</li><li>创建新的JavaScript文件处理动画逻辑</li></ol><h3 id="4-自定义SVG路径">4. 自定义SVG路径</h3><p>修改 <code>loading.pug</code> 中的SVG path元素，可以创建自己的描边图案。</p><hr><h2 id="🔧-常见问题解决">🔧 常见问题解决</h2><h3 id="1-主题切换不生效">1. 主题切换不生效</h3><ul><li>检查配置文件中 <code>loading.theme</code> 是否正确</li><li>清除浏览器缓存</li><li>重新生成站点</li></ul><h3 id="2-Black-Cat动画不显示">2. Black Cat动画不显示</h3><ul><li>确保GSAP库正确加载</li><li>检查控制台是否有JavaScript错误</li><li>验证SVG元素是否存在</li></ul><h3 id="3-Mona-Lisa描边动画不工作">3. Mona Lisa描边动画不工作</h3><ul><li>检查SVG路径是否完整</li><li>验证CSS样式是否正确应用</li><li>确认stroke-dasharray设置</li></ul><h3 id="4-动画卡住不收起">4. 动画卡住不收起</h3><ul><li>检查超时保护机制</li><li>验证completeLoading函数是否正确调用</li><li>查看控制台错误信息</li></ul><h3 id="5-Pjax兼容性问题">5. Pjax兼容性问题</h3><ul><li>确保事件监听器正确绑定</li><li>检查页面切换时的状态重置</li><li>验证loading容器的重新创建</li></ul><hr><h2 id="📋-总结">📋 总结</h2><p>通过本教程的实装，您的Solitude主题将拥有两套完全独立的Loading界面：</p><h3 id="🖼️-Mona-Lisa主题优势">🖼️ Mona Lisa主题优势</h3><ul><li><strong>艺术感强</strong>: SVG描边动画营造艺术氛围</li><li><strong>技术展示</strong>: 复杂的前端动画技术</li><li><strong>专业感</strong>: 适合技术类、设计类网站</li><li><strong>用户体验</strong>: 分步进度条提供明确反馈</li></ul><h3 id="🐱-Black-Cat主题优势">🐱 Black Cat主题优势</h3><ul><li><strong>可爱风格</strong>: 小猫动画增加亲和力</li><li><strong>动画流畅</strong>: GSAP库确保动画质量</li><li><strong>个性化</strong>: 独特的小猫IP形象</li><li><strong>简洁高效</strong>: 直接的动画流程</li></ul><h3 id="🔧-技术亮点">🔧 技术亮点</h3><ul><li><strong>完全分离</strong>: 两套主题互不干扰</li><li><strong>配置简单</strong>: 一行配置即可切换</li><li><strong>性能优化</strong>: 按需加载，硬件加速</li><li><strong>兼容性强</strong>: 支持Pjax、移动端适配</li><li><strong>易于扩展</strong>: 模块化设计，便于添加新主题</li></ul><p>这套双Loading界面系统不仅为用户提供了丰富的选择，也展示了前端动画技术的多样性和创造力！🎉✨</p><hr><h2 id="🚀-扩展建议">🚀 扩展建议</h2><ol><li><strong>添加更多主题</strong>: 基于现有架构添加新的Loading主题</li><li><strong>音效支持</strong>: 为动画添加音效增强体验</li><li><strong>自定义配置</strong>: 提供更多可配置的动画参数</li><li><strong>响应式优化</strong>: 针对不同设备尺寸优化动画</li><li><strong>性能监控</strong>: 添加加载性能统计</li><li><strong>用户偏好</strong>: 记住用户的主题选择</li><li><strong>动画预设</strong>: 提供多种动画速度预设</li><li><strong>主题编辑器</strong>: 可视化的主题自定义工具</li></ol><hr><blockquote><p><strong>本教程完</strong><br>希望这个详细的双Loading界面实装指南能帮助您打造出个性化的加载体验！🎨🐱✨</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 魔改教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 魔改教程 </tag>
            
            <tag> Solitude </tag>
            
            <tag> Hexo </tag>
            
            <tag> Loading </tag>
            
            <tag> 主题分离 </tag>
            
            <tag> mona-lisa </tag>
            
            <tag> black-cat </tag>
            
            <tag> SVG动画 </tag>
            
            <tag> GSAP动画 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Solitude主题魔改教程(15)-加载页面功能移植</title>
      <link href="/2024/12/09/Solitude%E4%B8%BB%E9%A2%98%E9%AD%94%E6%94%B9%E6%95%99%E7%A8%8B(15)-%E5%8A%A0%E8%BD%BD%E9%A1%B5%E9%9D%A2%E5%8A%9F%E8%83%BD%E7%A7%BB%E6%A4%8D/"/>
      <url>/2024/12/09/Solitude%E4%B8%BB%E9%A2%98%E9%AD%94%E6%94%B9%E6%95%99%E7%A8%8B(15)-%E5%8A%A0%E8%BD%BD%E9%A1%B5%E9%9D%A2%E5%8A%9F%E8%83%BD%E7%A7%BB%E6%A4%8D/</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>Solitude主题默认的loading功能相对简单，缺乏美观的动画效果和完整的交互体验。本文将详细介绍如何从 blog-solitude-player 项目完整移植loading功能到 solitude-latest，包括全屏加载动画、顶部进度条、SVG描边动画和双层收起效果的完整实现方案。</p><hr><h2 id="现象与需求">现象与需求</h2><h3 id="现象">现象</h3><ul><li>Solitude主题默认loading功能过于简单</li><li>缺乏美观的动画效果和交互体验</li><li>没有进度条和SVG描边动画</li><li>缺少双层收起动画效果</li></ul><h3 id="期望效果">期望效果</h3><ul><li>美观的全屏加载动画</li><li>SVG描边动画效果</li><li>进度条模拟加载过程</li><li>双层收起动画（先收起动画层，再收起背景层）</li><li>顶部进度条（Pace loading）</li><li>Pjax兼容性支持</li></ul><h2 id="修改文件清单">修改文件清单</h2><ul><li><code>solitude-latest/node_modules/hexo-theme-solitude/layout/includes/loading.pug</code></li><li><code>solitude-latest/node_modules/hexo-theme-solitude/source/css/_layout/fullpage.styl</code></li><li><code>solitude-latest/node_modules/hexo-theme-solitude/source/css/_layout/pace.styl</code></li><li><code>solitude-latest/node_modules/hexo-theme-solitude/source/img/loading_bg.svg</code></li><li><code>solitude-latest/node_modules/hexo-theme-solitude/_config.yml</code></li><li><code>solitude-latest/_config.solitude.yml</code></li></ul><hr><h2 id="详细修改步骤">详细修改步骤</h2><h3 id="1-更新loading-pug文件">1. 更新loading.pug文件</h3><p><strong>文件路径：</strong><br><code>solitude-latest/node_modules/hexo-theme-solitude/layout/includes/loading.pug</code></p><p><strong>修改内容：</strong><br>将简单的loading实现替换为完整的动画版本：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br></pre></td><td class="code"><pre><span class="line">div(id=&quot;loading-container&quot;)</span><br><span class="line">    // Loading 背景层</span><br><span class="line">    div#loading-bg</span><br><span class="line">        // 已移除内联SVG，外部SVG背景由CSS或img实现</span><br><span class="line">    // Loading 动画层</span><br><span class="line">    div#loading-animation</span><br><span class="line">        div#loading-box</span><br><span class="line">            svg.loading-svg(viewBox=&quot;0 0 400.98 400.98&quot;)</span><br><span class="line">                g</span><br><span class="line">                    // 外框</span><br><span class="line">                    path.draw-path(d=&quot;M354.526,2H46.454c-2.209,0-4,1.791-4,4v388.98c0,2.209,1.791,4,4,4h308.072c2.209,0,4-1.791,4-4V6C358.526,3.791,356.735,2,354.526,2z&quot;)</span><br><span class="line">                    // 内框合并</span><br><span class="line">                    path.draw-path.blue-path(d=&quot;M50.454,10 H350.526 V390.98 H50.454 V10 Z&quot;)</span><br><span class="line">                    // ... 更多SVG路径</span><br><span class="line">            div.loading-text(data-glitch=&quot;Loading&quot;) Loading</span><br><span class="line">            div.progress-bar</span><br><span class="line">                div.progress-fill#progress-fill</span><br><span class="line"></span><br><span class="line">script.</span><br><span class="line">    // 等待DOM加载完成</span><br><span class="line">    document.addEventListener(&#x27;DOMContentLoaded&#x27;, function() &#123;</span><br><span class="line">        const DURATION = 1.5; // 动画时长（秒）</span><br><span class="line">        let timer = null;</span><br><span class="line">        let progress = 0;</span><br><span class="line">        let isAnimating = false;</span><br><span class="line"></span><br><span class="line">        // 进度条更新</span><br><span class="line">        function updateProgress(percent) &#123;</span><br><span class="line">            const progressFill = document.getElementById(&#x27;progress-fill&#x27;);</span><br><span class="line">            if (progressFill) &#123;</span><br><span class="line">                progressFill.style.width = percent + &#x27;%&#x27;;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // 描边动画</span><br><span class="line">        function animatePaths(appear) &#123;</span><br><span class="line">            const paths = Array.from(document.querySelectorAll(&#x27;.draw-path&#x27;));</span><br><span class="line">            </span><br><span class="line">            if (paths.length === 0) &#123;</span><br><span class="line">                console.log(&#x27;No draw-path elements found&#x27;);</span><br><span class="line">                return;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            // 1. 先全部 transition 设为 none，设置起始状态</span><br><span class="line">            paths.forEach(path =&gt; &#123;</span><br><span class="line">                const len = path.getTotalLength();</span><br><span class="line">                path.style.strokeDasharray = len;</span><br><span class="line">                path.style.transition = &#x27;none&#x27;;</span><br><span class="line">                path.style.strokeDashoffset = appear ? len : 0;</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">            // 2. 强制重绘</span><br><span class="line">            document.body.offsetHeight;</span><br><span class="line"></span><br><span class="line">            // 3. 统一设置 transition 和目标状态</span><br><span class="line">            paths.forEach(path =&gt; &#123;</span><br><span class="line">                path.style.transition = `stroke-dashoffset $&#123;DURATION&#125;s linear`;</span><br><span class="line">                path.style.strokeDashoffset = appear ? 0 : path.style.strokeDasharray;</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">            // 4. 动画结束后切换状态</span><br><span class="line">            clearTimeout(timer);</span><br><span class="line">            timer = setTimeout(() =&gt; &#123;</span><br><span class="line">                if (!isAnimating) &#123;</span><br><span class="line">                    animatePaths(!appear);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, DURATION * 1000 + 50);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // 模拟加载过程</span><br><span class="line">        function simulateLoading() &#123;</span><br><span class="line">            const loadingSteps = [</span><br><span class="line">                &#123; progress: 20, delay: 500 &#125;,</span><br><span class="line">                &#123; progress: 40, delay: 800 &#125;,</span><br><span class="line">                &#123; progress: 60, delay: 600 &#125;,</span><br><span class="line">                &#123; progress: 80, delay: 700 &#125;,</span><br><span class="line">                &#123; progress: 100, delay: 1000 &#125;</span><br><span class="line">            ];</span><br><span class="line"></span><br><span class="line">            let currentStep = 0;</span><br><span class="line"></span><br><span class="line">            function nextStep() &#123;</span><br><span class="line">                if (currentStep &lt; loadingSteps.length) &#123;</span><br><span class="line">                    const step = loadingSteps[currentStep];</span><br><span class="line">                    updateProgress(step.progress);</span><br><span class="line">                    currentStep++;</span><br><span class="line">                    </span><br><span class="line">                    if (currentStep &lt; loadingSteps.length) &#123;</span><br><span class="line">                        setTimeout(nextStep, step.delay);</span><br><span class="line">                    &#125; else &#123;</span><br><span class="line">                        // 加载完成，开始收起动画</span><br><span class="line">                        setTimeout(() =&gt; &#123;</span><br><span class="line">                            completeLoading();</span><br><span class="line">                        &#125;, 500);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            nextStep();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // 完成加载 - 实现两次收起动画</span><br><span class="line">        function completeLoading() &#123;</span><br><span class="line">            isAnimating = true;</span><br><span class="line">            </span><br><span class="line">            // 停止描边动画</span><br><span class="line">            clearTimeout(timer);</span><br><span class="line">            </span><br><span class="line">            // 第一次收起：loading-animation 层先收起</span><br><span class="line">            setTimeout(() =&gt; &#123;</span><br><span class="line">                const loadingAnimation = document.getElementById(&#x27;loading-animation&#x27;);</span><br><span class="line">                if (loadingAnimation) &#123;</span><br><span class="line">                    loadingAnimation.style.transform = &#x27;translateX(100%)&#x27;;</span><br><span class="line">                &#125;</span><br><span class="line">                </span><br><span class="line">                // 第二次收起：loading-bg 层延迟收起</span><br><span class="line">                setTimeout(() =&gt; &#123;</span><br><span class="line">                    const loadingBg = document.getElementById(&#x27;loading-bg&#x27;);</span><br><span class="line">                    if (loadingBg) &#123;</span><br><span class="line">                        loadingBg.style.transform = &#x27;translateX(100%)&#x27;;</span><br><span class="line">                    &#125;</span><br><span class="line">                    </span><br><span class="line">                    // 最后收起整个容器</span><br><span class="line">                    setTimeout(() =&gt; &#123;</span><br><span class="line">                        const loadingContainer = document.getElementById(&#x27;loading-container&#x27;);</span><br><span class="line">                        if (loadingContainer) &#123;</span><br><span class="line">                            loadingContainer.style.transform = &#x27;translateX(100%)&#x27;;</span><br><span class="line">                            </span><br><span class="line">                            // 收起完成后移除 loading 容器</span><br><span class="line">                            setTimeout(() =&gt; &#123;</span><br><span class="line">                                // 移除 loading 相关遮罩</span><br><span class="line">                                const loadingBg = document.getElementById(&#x27;loading-bg&#x27;);</span><br><span class="line">                                if (loadingBg) loadingBg.remove();</span><br><span class="line">                                const loadingContainer = document.getElementById(&#x27;loading-container&#x27;);</span><br><span class="line">                                if (loadingContainer) loadingContainer.remove();</span><br><span class="line">                                // 兼容其它可能的遮罩</span><br><span class="line">                                const masks = document.querySelectorAll(&#x27;.mask, .overlay, .loading-mask, .loading-overlay&#x27;);</span><br><span class="line">                                masks.forEach(el =&gt; el.remove());</span><br><span class="line">                                document.body.style.overflow = &#x27;auto&#x27;;</span><br><span class="line">                                // 触发pace-done事件</span><br><span class="line">                                const body = document.getElementById(&#x27;body&#x27;);</span><br><span class="line">                                if (body) &#123;</span><br><span class="line">                                    body.className = &#x27;pace-done&#x27;;</span><br><span class="line">                                &#125;</span><br><span class="line">                                // 确保页面回到顶部</span><br><span class="line">                                window.scrollTo(0, 0);</span><br><span class="line">                                // 延迟触发一次 percent 函数，确保初始值正确</span><br><span class="line">                                setTimeout(() =&gt; &#123;</span><br><span class="line">                                    if (typeof percent === &#x27;function&#x27;) percent();</span><br><span class="line">                                &#125;, 100);</span><br><span class="line">                            &#125;, 300);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;, 300);</span><br><span class="line">                &#125;, 300);</span><br><span class="line">            &#125;, 500);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // 开始动画</span><br><span class="line">        function startAnimation() &#123;</span><br><span class="line">            console.log(&#x27;Starting loading animation...&#x27;);</span><br><span class="line">            // 开始描边动画</span><br><span class="line">            animatePaths(true);</span><br><span class="line">            </span><br><span class="line">            // 开始模拟加载</span><br><span class="line">            setTimeout(() =&gt; &#123;</span><br><span class="line">                simulateLoading();</span><br><span class="line">            &#125;, 1000);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // 页面加载完成后开始动画</span><br><span class="line">        if (document.readyState === &#x27;loading&#x27;) &#123;</span><br><span class="line">            document.addEventListener(&#x27;load&#x27;, startAnimation);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            startAnimation();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // Pjax兼容</span><br><span class="line">        window.addEventListener(&#x27;pjax:send&#x27;, () =&gt; &#123;</span><br><span class="line">            console.log(&#x27;Pjax send event triggered&#x27;);</span><br><span class="line">            // 重新创建loading容器</span><br><span class="line">            const existingContainer = document.getElementById(&#x27;loading-container&#x27;);</span><br><span class="line">            if (existingContainer) &#123;</span><br><span class="line">                existingContainer.remove();</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            // 重新初始化loading</span><br><span class="line">            isAnimating = false;</span><br><span class="line">            progress = 0;</span><br><span class="line">            clearTimeout(timer);</span><br><span class="line">            </span><br><span class="line">            // 重新开始动画</span><br><span class="line">            setTimeout(() =&gt; &#123;</span><br><span class="line">                animatePaths(true);</span><br><span class="line">                simulateLoading();</span><br><span class="line">            &#125;, 100);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        // 超时保护</span><br><span class="line">        setTimeout(() =&gt; &#123;</span><br><span class="line">            if (!isAnimating) &#123;</span><br><span class="line">                completeLoading();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, 8000);</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure><hr><h3 id="2-更新fullpage-styl文件">2. 更新fullpage.styl文件</h3><p><strong>文件路径：</strong><br><code>solitude-latest/node_modules/hexo-theme-solitude/source/css/_layout/fullpage.styl</code></p><p><strong>修改内容：</strong><br>将简单的loading样式替换为完整的动画样式：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="built_in">hexo-config</span>(<span class="string">&#x27;loading.fullpage&#x27;</span>)</span><br><span class="line">  <span class="selector-id">#loading-container</span></span><br><span class="line">    <span class="attribute">position</span> fixed</span><br><span class="line">    <span class="attribute">top</span> <span class="number">0</span></span><br><span class="line">    <span class="attribute">left</span> <span class="number">0</span></span><br><span class="line">    <span class="attribute">width</span> <span class="number">100%</span></span><br><span class="line">    <span class="attribute">height</span> <span class="number">100%</span></span><br><span class="line">    <span class="attribute">background</span> <span class="number">#fff</span></span><br><span class="line">    <span class="attribute">display</span> flex</span><br><span class="line">    <span class="attribute">flex-direction</span> column</span><br><span class="line">    <span class="attribute">align-items</span> center</span><br><span class="line">    <span class="attribute">justify-content</span> center</span><br><span class="line">    <span class="attribute">z-index</span> <span class="number">9999</span></span><br><span class="line">    <span class="attribute">transition</span> transform <span class="number">1.3s</span> ease</span><br><span class="line">    <span class="attribute">will-change</span> transform</span><br><span class="line">    <span class="attribute">font-family</span> <span class="string">&#x27;Quicksand&#x27;</span>, <span class="string">&#x27;Nunito&#x27;</span>, <span class="string">&#x27;Poppins&#x27;</span>, <span class="string">&#x27;Arial Rounded MT Bold&#x27;</span>, <span class="string">&#x27;PingFang SC&#x27;</span>, <span class="string">&#x27;Microsoft YaHei&#x27;</span>, sans-serif</span><br><span class="line"></span><br><span class="line">  <span class="selector-id">#loading-container</span><span class="selector-class">.hide</span></span><br><span class="line">    <span class="attribute">transform</span> <span class="built_in">translateX</span>(<span class="number">100%</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Loading 背景层</span></span><br><span class="line">  <span class="selector-id">#loading-bg</span></span><br><span class="line">    <span class="attribute">position</span> absolute</span><br><span class="line">    <span class="attribute">width</span> <span class="number">100%</span></span><br><span class="line">    <span class="attribute">height</span> <span class="number">100%</span></span><br><span class="line">    <span class="attribute">background</span> <span class="number">#409EFF</span></span><br><span class="line">    <span class="attribute">transition</span> transform <span class="number">1.3s</span> <span class="built_in">cubic-bezier</span>(<span class="number">0.25</span>, <span class="number">0.46</span>, <span class="number">0.45</span>, <span class="number">0.94</span>)</span><br><span class="line">    <span class="attribute">transition-delay</span> <span class="number">0.3s</span></span><br><span class="line">    <span class="attribute">will-change</span> transform</span><br><span class="line">    <span class="attribute">z-index</span> <span class="number">1</span></span><br><span class="line">    <span class="attribute">overflow</span> hidden</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.loading-bg-svg</span></span><br><span class="line">    <span class="attribute">position</span> absolute</span><br><span class="line">    <span class="attribute">width</span> <span class="number">30%</span></span><br><span class="line">    <span class="attribute">height</span> <span class="number">30%</span></span><br><span class="line">    <span class="attribute">opacity</span> <span class="number">0.6</span></span><br><span class="line">    <span class="attribute">animation</span> bgFloat <span class="number">20s</span> ease-in-out infinite</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 创建重复的背景效果 - 使用外部SVG文件</span></span><br><span class="line">  <span class="selector-id">#loading-bg</span><span class="selector-pseudo">::before</span></span><br><span class="line">    <span class="attribute">content</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="attribute">position</span> absolute</span><br><span class="line">    <span class="attribute">top</span> <span class="number">0</span></span><br><span class="line">    <span class="attribute">left</span> <span class="number">0</span></span><br><span class="line">    <span class="attribute">width</span> <span class="number">100%</span></span><br><span class="line">    <span class="attribute">height</span> <span class="number">100%</span></span><br><span class="line">    <span class="attribute">background-image</span> <span class="built_in">url</span>(<span class="string">&#x27;/img/loading_bg.svg&#x27;</span>)</span><br><span class="line">    <span class="attribute">background-size</span> <span class="number">30%</span></span><br><span class="line">    <span class="attribute">background-repeat</span> repeat</span><br><span class="line">    <span class="attribute">opacity</span> <span class="number">0.6</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">@keyframes</span> bgFloat</span><br><span class="line">    <span class="number">0%</span>, <span class="number">100%</span></span><br><span class="line">      <span class="attribute">transform</span> <span class="built_in">translate</span>(<span class="number">0</span>, <span class="number">0</span>) <span class="built_in">rotate</span>(<span class="number">0deg</span>)</span><br><span class="line">    <span class="number">25%</span></span><br><span class="line">      <span class="attribute">transform</span> <span class="built_in">translate</span>(<span class="number">10px</span>, -<span class="number">10px</span>) <span class="built_in">rotate</span>(<span class="number">1deg</span>)</span><br><span class="line">    <span class="number">50%</span></span><br><span class="line">      <span class="attribute">transform</span> <span class="built_in">translate</span>(-<span class="number">5px</span>, <span class="number">5px</span>) <span class="built_in">rotate</span>(-<span class="number">1deg</span>)</span><br><span class="line">    <span class="number">75%</span></span><br><span class="line">      <span class="attribute">transform</span> <span class="built_in">translate</span>(<span class="number">5px</span>, -<span class="number">5px</span>) <span class="built_in">rotate</span>(<span class="number">0.5deg</span>)</span><br><span class="line"></span><br><span class="line">  <span class="selector-id">#loading-container</span><span class="selector-class">.hide</span> <span class="selector-id">#loading-bg</span></span><br><span class="line">    <span class="attribute">transform</span> <span class="built_in">translateX</span>(<span class="number">100%</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Loading 动画层</span></span><br><span class="line">  <span class="selector-id">#loading-animation</span></span><br><span class="line">    <span class="attribute">position</span> absolute</span><br><span class="line">    <span class="attribute">width</span> <span class="number">100%</span></span><br><span class="line">    <span class="attribute">height</span> <span class="number">100%</span></span><br><span class="line">    <span class="attribute">display</span> flex</span><br><span class="line">    <span class="attribute">flex-direction</span> column</span><br><span class="line">    <span class="attribute">align-items</span> center</span><br><span class="line">    <span class="attribute">justify-content</span> center</span><br><span class="line">    <span class="attribute">background</span> <span class="number">#fff</span></span><br><span class="line">    <span class="attribute">transition</span> transform <span class="number">1.3s</span> <span class="built_in">cubic-bezier</span>(<span class="number">0.25</span>, <span class="number">0.46</span>, <span class="number">0.45</span>, <span class="number">0.94</span>)</span><br><span class="line">    <span class="attribute">will-change</span> transform</span><br><span class="line">    <span class="attribute">z-index</span> <span class="number">2</span></span><br><span class="line"></span><br><span class="line">  <span class="selector-id">#loading-container</span><span class="selector-class">.hide</span> <span class="selector-id">#loading-animation</span></span><br><span class="line">    <span class="attribute">transform</span> <span class="built_in">translateX</span>(<span class="number">100%</span>)</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.loading-svg</span></span><br><span class="line">    <span class="attribute">width</span> <span class="number">400px</span></span><br><span class="line">    <span class="attribute">height</span> <span class="number">400px</span></span><br><span class="line">    <span class="attribute">display</span> block</span><br><span class="line">    <span class="attribute">margin</span> <span class="number">60px</span> auto <span class="number">20px</span> auto</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.draw-path</span></span><br><span class="line">    <span class="attribute">stroke</span> <span class="number">#222</span></span><br><span class="line">    <span class="attribute">stroke-width</span> <span class="number">4</span></span><br><span class="line">    <span class="attribute">fill</span> none</span><br><span class="line">    <span class="attribute">stroke-linecap</span> round</span><br><span class="line">    <span class="attribute">stroke-linejoin</span> round</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.draw-path</span>, <span class="selector-class">.draw-path</span><span class="selector-attr">[stroke-width]</span></span><br><span class="line">    <span class="attribute">stroke-width</span> <span class="number">4</span> <span class="meta">!important</span></span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.blue-path</span></span><br><span class="line">    <span class="attribute">stroke</span> <span class="number">#409EFF</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">@keyframes</span> draw</span><br><span class="line">    to</span><br><span class="line">      <span class="attribute">stroke-dashoffset</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// Loading 文字样式</span></span><br><span class="line">  <span class="selector-id">#loading-box</span></span><br><span class="line">    <span class="attribute">width</span> <span class="number">100%</span></span><br><span class="line">    <span class="attribute">display</span> flex</span><br><span class="line">    <span class="attribute">flex-direction</span> column</span><br><span class="line">    <span class="attribute">align-items</span> center</span><br><span class="line"></span><br><span class="line">  <span class="selector-id">#loading-box</span> <span class="selector-class">.loading-text</span></span><br><span class="line">    <span class="attribute">text-align</span> center</span><br><span class="line">    <span class="attribute">font-size</span> <span class="number">28px</span></span><br><span class="line">    <span class="attribute">color</span> <span class="number">#363636</span></span><br><span class="line">    <span class="attribute">margin-top</span> <span class="number">1rem</span></span><br><span class="line">    <span class="attribute">letter-spacing</span> .<span class="number">3rem</span></span><br><span class="line">    <span class="attribute">font-weight</span> <span class="number">900</span></span><br><span class="line">    <span class="attribute">position</span> relative</span><br><span class="line">    <span class="attribute">line-height</span> <span class="number">1.2</span></span><br><span class="line">    <span class="attribute">z-index</span> <span class="number">1</span></span><br><span class="line">    -webkit-<span class="attribute">animation</span> shift <span class="number">1s</span> ease-in-out infinite alternate</span><br><span class="line">    <span class="attribute">animation</span> shift <span class="number">1s</span> ease-in-out infinite alternate</span><br><span class="line"></span><br><span class="line">  <span class="selector-id">#loading-box</span> <span class="selector-class">.loading-text</span><span class="selector-pseudo">:before</span></span><br><span class="line">    -webkit-<span class="attribute">animation</span> glitch .<span class="number">4s</span> <span class="built_in">cubic-bezier</span>(.<span class="number">25</span>,.<span class="number">46</span>,.<span class="number">45</span>,.<span class="number">94</span>) both infinite</span><br><span class="line">    <span class="attribute">animation</span> glitch .<span class="number">4s</span> <span class="built_in">cubic-bezier</span>(.<span class="number">25</span>,.<span class="number">46</span>,.<span class="number">45</span>,.<span class="number">94</span>) both infinite</span><br><span class="line">    <span class="attribute">color</span> <span class="number">#c28b00</span></span><br><span class="line">    <span class="attribute">z-index</span> -<span class="number">1</span></span><br><span class="line"></span><br><span class="line">  <span class="selector-id">#loading-box</span> <span class="selector-class">.loading-text</span><span class="selector-pseudo">:after</span></span><br><span class="line">    -webkit-<span class="attribute">animation</span> glitch .<span class="number">4s</span> <span class="built_in">cubic-bezier</span>(.<span class="number">25</span>,.<span class="number">46</span>,.<span class="number">45</span>,.<span class="number">94</span>) reverse both infinite</span><br><span class="line">    <span class="attribute">animation</span> glitch .<span class="number">4s</span> <span class="built_in">cubic-bezier</span>(.<span class="number">25</span>,.<span class="number">46</span>,.<span class="number">45</span>,.<span class="number">94</span>) reverse both infinite</span><br><span class="line">    <span class="attribute">color</span> <span class="number">#57bd6a</span></span><br><span class="line">    <span class="attribute">z-index</span> -<span class="number">2</span></span><br><span class="line"></span><br><span class="line">  <span class="selector-id">#loading-box</span> <span class="selector-class">.loading-text</span><span class="selector-pseudo">:after</span>,</span><br><span class="line">  <span class="selector-id">#loading-box</span> <span class="selector-class">.loading-text</span><span class="selector-pseudo">:before</span></span><br><span class="line">    <span class="attribute">display</span> block</span><br><span class="line">    <span class="attribute">content</span> <span class="built_in">attr</span>(data-glitch)</span><br><span class="line">    <span class="attribute">position</span> absolute</span><br><span class="line">    <span class="attribute">top</span> <span class="number">0</span></span><br><span class="line">    <span class="attribute">left</span> <span class="number">0</span></span><br><span class="line">    <span class="attribute">opacity</span> .<span class="number">8</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">@keyframes</span> glitch</span><br><span class="line">    <span class="number">0%</span></span><br><span class="line">      <span class="attribute">text-shadow</span> <span class="number">3px</span> <span class="number">0</span> <span class="number">#ff0033</span>, -<span class="number">3px</span> <span class="number">0</span> <span class="number">#fff</span></span><br><span class="line">    <span class="number">20%</span></span><br><span class="line">      <span class="attribute">text-shadow</span> -<span class="number">3px</span> -<span class="number">3px</span> <span class="number">#ff0033</span>, <span class="number">3px</span> <span class="number">3px</span> <span class="number">#fff</span></span><br><span class="line">    <span class="number">40%</span></span><br><span class="line">      <span class="attribute">text-shadow</span> <span class="number">3px</span> <span class="number">3px</span> <span class="number">#ff0033</span>, -<span class="number">3px</span> -<span class="number">3px</span> <span class="number">#fff</span></span><br><span class="line">    <span class="number">60%</span></span><br><span class="line">      <span class="attribute">text-shadow</span> -<span class="number">3px</span> <span class="number">3px</span> <span class="number">#ff0033</span>, <span class="number">3px</span> -<span class="number">3px</span> <span class="number">#fff</span></span><br><span class="line">    <span class="number">80%</span></span><br><span class="line">      <span class="attribute">text-shadow</span> <span class="number">3px</span> -<span class="number">3px</span> <span class="number">#ff0033</span>, -<span class="number">3px</span> <span class="number">3px</span> <span class="number">#fff</span></span><br><span class="line">    <span class="number">100%</span></span><br><span class="line">      <span class="attribute">text-shadow</span> -<span class="number">3px</span> <span class="number">0</span> <span class="number">#ff0033</span>, <span class="number">3px</span> <span class="number">0</span> <span class="number">#fff</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">@keyframes</span> shift</span><br><span class="line">    <span class="number">0%</span>,<span class="number">100%</span>,<span class="number">40%</span>,<span class="number">44%</span>,<span class="number">58%</span>,<span class="number">61%</span>,<span class="number">65%</span>,<span class="number">69%</span>,<span class="number">73%</span></span><br><span class="line">      <span class="attribute">transform</span> <span class="built_in">skewX</span>(<span class="number">0</span>)</span><br><span class="line">    <span class="number">41%</span></span><br><span class="line">      <span class="attribute">transform</span> <span class="built_in">skewX</span>(<span class="number">10deg</span>)</span><br><span class="line">    <span class="number">42%</span></span><br><span class="line">      <span class="attribute">transform</span> <span class="built_in">skewX</span>(-<span class="number">10deg</span>)</span><br><span class="line">    <span class="number">59%</span></span><br><span class="line">      <span class="attribute">transform</span> <span class="built_in">skewX</span>(<span class="number">40deg</span>) <span class="built_in">skewY</span>(<span class="number">10deg</span>)</span><br><span class="line">    <span class="number">60%</span></span><br><span class="line">      <span class="attribute">transform</span> <span class="built_in">skewX</span>(-<span class="number">40deg</span>) <span class="built_in">skewY</span>(-<span class="number">10deg</span>)</span><br><span class="line">    <span class="number">63%</span></span><br><span class="line">      <span class="attribute">transform</span> <span class="built_in">skewX</span>(<span class="number">10deg</span>) <span class="built_in">skewY</span>(-<span class="number">5deg</span>)</span><br><span class="line">    <span class="number">70%</span></span><br><span class="line">      <span class="attribute">transform</span> <span class="built_in">skewX</span>(-<span class="number">50deg</span>) <span class="built_in">skewY</span>(-<span class="number">20deg</span>)</span><br><span class="line">    <span class="number">71%</span></span><br><span class="line">      <span class="attribute">transform</span> <span class="built_in">skewX</span>(<span class="number">10deg</span>) <span class="built_in">skewY</span>(-<span class="number">10deg</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 进度条</span></span><br><span class="line">  <span class="selector-class">.progress-bar</span></span><br><span class="line">    <span class="attribute">width</span> <span class="number">300px</span></span><br><span class="line">    <span class="attribute">height</span> <span class="number">4px</span></span><br><span class="line">    <span class="attribute">background</span> <span class="number">#f0f0f0</span></span><br><span class="line">    <span class="attribute">border-radius</span> <span class="number">2px</span></span><br><span class="line">    <span class="attribute">margin-top</span> <span class="number">20px</span></span><br><span class="line">    <span class="attribute">overflow</span> hidden</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.progress-fill</span></span><br><span class="line">    <span class="attribute">height</span> <span class="number">100%</span></span><br><span class="line">    <span class="attribute">background</span> <span class="built_in">linear-gradient</span>(<span class="number">90deg</span>, <span class="number">#409EFF</span>, <span class="number">#57bd6a</span>)</span><br><span class="line">    <span class="attribute">border-radius</span> <span class="number">2px</span></span><br><span class="line">    <span class="attribute">width</span> <span class="number">0%</span></span><br><span class="line">    <span class="attribute">transition</span> width <span class="number">0.3s</span> ease</span><br></pre></td></tr></table></figure><hr><h3 id="3-创建pace-styl文件">3. 创建pace.styl文件</h3><p><strong>文件路径：</strong><br><code>solitude-latest/node_modules/hexo-theme-solitude/source/css/_layout/pace.styl</code></p><p><strong>文件内容：</strong></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="built_in">hexo-config</span>(<span class="string">&#x27;loading.pace&#x27;</span>)</span><br><span class="line">  <span class="selector-class">.pace</span></span><br><span class="line">    <span class="attribute">pointer-events</span>: none</span><br><span class="line">    <span class="attribute">user-select</span>: none</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">2000</span></span><br><span class="line">    <span class="attribute">position</span>: fixed</span><br><span class="line">    <span class="attribute">margin</span>: auto</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">4px</span></span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span></span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span></span><br><span class="line">    <span class="attribute">height</span>: <span class="number">8px</span></span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span></span><br><span class="line">    <span class="attribute">width</span>: <span class="number">4rem</span></span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--efu-secondbg)</span><br><span class="line">    <span class="attribute">border</span>: <span class="built_in">var</span>(--style-border)</span><br><span class="line">    <span class="attribute">overflow</span>: hidden</span><br><span class="line"></span><br><span class="line">    &amp;<span class="selector-class">.pace-inactive</span></span><br><span class="line">      <span class="attribute">opacity</span>: <span class="number">0</span></span><br><span class="line">      <span class="attribute">transition</span>: .<span class="number">3s</span></span><br><span class="line">      <span class="attribute">top</span>: -<span class="number">8px</span></span><br><span class="line"></span><br><span class="line">      <span class="selector-class">.pace-progress</span></span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">0</span></span><br><span class="line">        <span class="attribute">transition</span>: .<span class="number">3s</span> ease-in</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.pace-progress</span></span><br><span class="line">      <span class="attribute">box-sizing</span>: border-box</span><br><span class="line">      <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line">      <span class="attribute">max-width</span>: <span class="number">200px</span></span><br><span class="line">      <span class="attribute">z-index</span>: <span class="number">2000</span></span><br><span class="line">      <span class="attribute">display</span>: block</span><br><span class="line">      <span class="attribute">position</span>: absolute</span><br><span class="line">      <span class="attribute">top</span>: <span class="number">0</span></span><br><span class="line">      <span class="attribute">right</span>: <span class="number">100%</span></span><br><span class="line">      <span class="attribute">height</span>: <span class="number">100%</span></span><br><span class="line">      <span class="attribute">width</span>: <span class="number">100%</span></span><br><span class="line">      <span class="attribute">background</span>: <span class="built_in">var</span>(--efu-logo-color)</span><br><span class="line">      <span class="attribute">animation</span>: gradient <span class="number">2s</span> ease infinite</span><br><span class="line">      <span class="attribute">background-size</span>: <span class="number">200%</span></span><br></pre></td></tr></table></figure><hr><h3 id="4-创建loading背景SVG文件">4. 创建loading背景SVG文件</h3><p><strong>文件路径：</strong><br><code>solitude-latest/node_modules/hexo-theme-solitude/source/img/loading_bg.svg</code></p><p><strong>文件内容：</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Generator: Adobe Illustrator 22.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">version</span>=<span class="string">&quot;1.1&quot;</span> <span class="attr">id</span>=<span class="string">&quot;图层_1&quot;</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span> <span class="attr">xmlns:xlink</span>=<span class="string">&quot;http://www.w3.org/1999/xlink&quot;</span> <span class="attr">x</span>=<span class="string">&quot;0px&quot;</span> <span class="attr">y</span>=<span class="string">&quot;0px&quot;</span></span></span><br><span class="line"><span class="tag"> <span class="attr">viewBox</span>=<span class="string">&quot;0 0 437.5 271&quot;</span> <span class="attr">style</span>=<span class="string">&quot;enable-background:new 0 0 437.5 271;&quot;</span> <span class="attr">xml:space</span>=<span class="string">&quot;preserve&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.st0</span>&#123;<span class="attribute">display</span>:none;<span class="attribute">opacity</span>:<span class="number">0.6</span>;&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.st1</span>&#123;<span class="attribute">display</span>:inline;&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.st2</span>&#123;<span class="attribute">fill</span>:none;<span class="attribute">stroke</span>:<span class="number">#000000</span>;<span class="attribute">stroke-miterlimit</span>:<span class="number">10</span>;&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">g</span> <span class="attr">id</span>=<span class="string">&quot;h_274&quot;</span> <span class="attr">class</span>=<span class="string">&quot;st0&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">g</span> <span class="attr">class</span>=<span class="string">&quot;st1&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">polygon</span> <span class="attr">points</span>=<span class="string">&quot;43.6,74.3 43.6,92.3 12.7,110.2 12.7,-1.5 28.2,-1.5 28.2,83.3 &quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">g</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ... 更多SVG路径 --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">g</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">g</span> <span class="attr">id</span>=<span class="string">&quot;h_271&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">g</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">polygon</span> <span class="attr">class</span>=<span class="string">&quot;st2&quot;</span> <span class="attr">points</span>=<span class="string">&quot;43.6,74.3 43.6,92.3 12.7,110.2 12.7,-1.5 28.2,-1.5 28.2,83.3 &quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">g</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ... 更多SVG路径 --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">g</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><h3 id="5-更新主题配置">5. 更新主题配置</h3><p><strong>文件路径：</strong><br><code>solitude-latest/node_modules/hexo-theme-solitude/_config.yml</code></p><p><strong>修改内容：</strong><br>在loading配置中启用fullpage：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># Loading</span></span><br><span class="line"><span class="comment"># 加载</span></span><br><span class="line"><span class="attr">loading:</span></span><br><span class="line">  <span class="comment"># Full screen loading</span></span><br><span class="line">  <span class="comment"># 全屏加载</span></span><br><span class="line">  <span class="attr">fullpage:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Loading icon, default is siteicon</span></span><br><span class="line">  <span class="comment"># 加载图标，不写默认siteicon</span></span><br><span class="line">  <span class="attr">favicon:</span> <span class="string">/img/favicon.png</span></span><br><span class="line">  <span class="comment"># Pace loading</span></span><br><span class="line">  <span class="comment"># Pace 加载</span></span><br><span class="line">  <span class="attr">pace:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br></pre></td></tr></table></figure><hr><h3 id="6-更新用户配置">6. 更新用户配置</h3><p><strong>文件路径：</strong><br><code>solitude-latest/_config.solitude.yml</code></p><p><strong>修改内容：</strong><br>启用loading功能：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># Loading</span></span><br><span class="line"><span class="comment"># 加载</span></span><br><span class="line"><span class="attr">loading:</span></span><br><span class="line">  <span class="comment"># Full screen loading</span></span><br><span class="line">  <span class="comment"># 全屏加载</span></span><br><span class="line">  <span class="attr">fullpage:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Loading icon, default is siteicon</span></span><br><span class="line">  <span class="comment"># 加载图标，不写默认siteicon</span></span><br><span class="line">  <span class="attr">favicon:</span> <span class="string">/img/favicon.png</span></span><br><span class="line">  <span class="comment"># Pace loading</span></span><br><span class="line">  <span class="comment"># Pace 加载</span></span><br><span class="line">  <span class="attr">pace:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br></pre></td></tr></table></figure><hr><h2 id="功能特性">功能特性</h2><h3 id="1-全屏加载动画">1. 全屏加载动画</h3><ul><li>美观的SVG描边动画</li><li>进度条模拟加载过程</li><li>双层收起动画效果</li><li>文字故障动画效果</li></ul><h3 id="2-SVG描边动画">2. SVG描边动画</h3><ul><li>使用stroke-dasharray实现描边效果</li><li>支持循环动画</li><li>平滑的过渡效果</li><li>可自定义动画时长</li></ul><h3 id="3-进度条功能">3. 进度条功能</h3><ul><li>分步骤模拟加载进度</li><li>渐变色彩效果</li><li>平滑的宽度过渡</li><li>可自定义进度步骤</li></ul><h3 id="4-双层收起动画">4. 双层收起动画</h3><ul><li>第一次收起：loading-animation层</li><li>第二次收起：loading-bg层</li><li>延迟动画效果</li><li>平滑的transform过渡</li></ul><h3 id="5-顶部进度条">5. 顶部进度条</h3><ul><li>Pace loading功能</li><li>渐变动画效果</li><li>自动隐藏功能</li><li>Pjax兼容性</li></ul><h3 id="6-Pjax兼容性">6. Pjax兼容性</h3><ul><li>页面切换时重新创建loading</li><li>保持动画连续性</li><li>超时保护机制</li><li>错误处理</li></ul><h3 id="7-响应式设计">7. 响应式设计</h3><ul><li>适配不同屏幕尺寸</li><li>移动端优化</li><li>性能优化</li><li>浏览器兼容性</li></ul><hr><h2 id="使用说明">使用说明</h2><h3 id="1-启用-禁用功能">1. 启用/禁用功能</h3><p>在 <code>_config.solitude.yml</code> 中修改：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">loading:</span></span><br><span class="line">  <span class="attr">fullpage:</span> <span class="literal">true</span>  <span class="comment"># 全屏加载</span></span><br><span class="line">  <span class="attr">pace:</span> <span class="literal">true</span>      <span class="comment"># 顶部进度条</span></span><br></pre></td></tr></table></figure><h3 id="2-自定义动画时长">2. 自定义动画时长</h3><p>修改 <code>loading.pug</code> 中的 <code>DURATION</code> 变量：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="variable constant_">DURATION</span> = <span class="number">1.5</span>; <span class="comment">// 动画时长（秒）</span></span><br></pre></td></tr></table></figure><h3 id="3-调整进度条步骤">3. 调整进度条步骤</h3><p>修改 <code>simulateLoading</code> 函数中的 <code>loadingSteps</code> 数组：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> loadingSteps = [</span><br><span class="line">    &#123; <span class="attr">progress</span>: <span class="number">20</span>, <span class="attr">delay</span>: <span class="number">500</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">progress</span>: <span class="number">40</span>, <span class="attr">delay</span>: <span class="number">800</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">progress</span>: <span class="number">60</span>, <span class="attr">delay</span>: <span class="number">600</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">progress</span>: <span class="number">80</span>, <span class="attr">delay</span>: <span class="number">700</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">progress</span>: <span class="number">100</span>, <span class="attr">delay</span>: <span class="number">1000</span> &#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure><h3 id="4-自定义收起动画">4. 自定义收起动画</h3><p>修改 <code>completeLoading</code> 函数中的延迟时间：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 第一次收起</span></span><br><span class="line">&#125;, <span class="number">500</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 第二次收起</span></span><br><span class="line">&#125;, <span class="number">300</span>);</span><br></pre></td></tr></table></figure><h3 id="5-调整超时保护">5. 调整超时保护</h3><p>修改超时时间：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!isAnimating) &#123;</span><br><span class="line">        <span class="title function_">completeLoading</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;, <span class="number">8000</span>); <span class="comment">// 8秒超时</span></span><br></pre></td></tr></table></figure><hr><h2 id="常见问题解决">常见问题解决</h2><h3 id="1-动画不显示">1. 动画不显示</h3><ul><li>检查 <code>loading.fullpage</code> 是否为 true</li><li>检查CSS文件是否正确生成</li><li>清除浏览器缓存</li><li>检查控制台错误</li></ul><h3 id="2-SVG动画不生效">2. SVG动画不生效</h3><ul><li>检查SVG路径是否正确</li><li>检查stroke-dasharray设置</li><li>验证SVG文件完整性</li><li>检查CSS样式是否正确</li></ul><h3 id="3-进度条不更新">3. 进度条不更新</h3><ul><li>检查 <code>progress-fill</code> 元素是否存在</li><li>检查JavaScript错误</li><li>验证进度步骤配置</li><li>检查CSS样式</li></ul><h3 id="4-收起动画异常">4. 收起动画异常</h3><ul><li>检查transform属性设置</li><li>验证延迟时间配置</li><li>检查z-index层级</li><li>清除浏览器缓存</li></ul><h3 id="5-Pjax兼容性问题">5. Pjax兼容性问题</h3><ul><li>检查pjax事件监听</li><li>验证loading容器重新创建</li><li>检查动画状态重置</li><li>测试页面切换效果</li></ul><h3 id="6-性能问题">6. 性能问题</h3><ul><li>检查will-change属性</li><li>优化CSS动画</li><li>减少不必要的DOM操作</li><li>使用硬件加速</li></ul><hr><h2 id="高级定制">高级定制</h2><h3 id="1-自定义SVG动画">1. 自定义SVG动画</h3><p>修改 <code>animatePaths</code> 函数：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">animatePaths</span>(<span class="params">appear</span>) &#123;</span><br><span class="line">    <span class="comment">// 自定义动画逻辑</span></span><br><span class="line">    <span class="keyword">const</span> paths = <span class="title class_">Array</span>.<span class="title function_">from</span>(<span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.draw-path&#x27;</span>));</span><br><span class="line">    paths.<span class="title function_">forEach</span>(<span class="function"><span class="params">path</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// 自定义动画效果</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-添加更多动画效果">2. 添加更多动画效果</h3><p>在CSS中添加新的动画：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@keyframes</span> customAnimation &#123;</span><br><span class="line">    <span class="number">0%</span> &#123; <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1</span>); &#125;</span><br><span class="line">    <span class="number">50%</span> &#123; <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.1</span>); &#125;</span><br><span class="line">    <span class="number">100%</span> &#123; <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1</span>); &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-自定义进度条样式">3. 自定义进度条样式</h3><p>修改 <code>.progress-fill</code> 样式：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.progress-fill</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(<span class="number">90deg</span>, #your-color1, #your-color2);</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">2px</span> <span class="number">4px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-添加音效">4. 添加音效</h3><p>在动画中添加音效：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">playSound</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> audio = <span class="keyword">new</span> <span class="title class_">Audio</span>(<span class="string">&#x27;/sounds/loading.mp3&#x27;</span>);</span><br><span class="line">    audio.<span class="title function_">play</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="总结">总结</h2><p>通过以上步骤，我们为Solitude主题添加了完整的loading功能。该功能不仅具有美观的动画效果，还支持多种交互方式和完整的兼容性，为用户提供了良好的加载体验。</p><p>Loading功能的特点：</p><ul><li><strong>美观的动画效果</strong>：SVG描边动画、文字故障效果、进度条动画</li><li><strong>双层收起动画</strong>：先收起动画层，再收起背景层，平滑过渡</li><li><strong>进度条功能</strong>：分步骤模拟加载进度，渐变色彩效果</li><li><strong>Pjax兼容性</strong>：页面切换时重新创建loading，保持动画连续性</li><li><strong>超时保护</strong>：8秒超时自动完成加载，防止卡死</li><li><strong>响应式设计</strong>：适配不同屏幕尺寸，移动端优化</li><li><strong>易于维护</strong>：通过配置文件轻松修改动画参数</li><li><strong>完整实现</strong>：包含所有必要的文件、样式和资源</li></ul><hr><h2 id="相关文件清单">相关文件清单</h2><h3 id="修改文件">修改文件</h3><ul><li><code>node_modules/hexo-theme-solitude/layout/includes/loading.pug</code> - 完整的loading实现</li><li><code>node_modules/hexo-theme-solitude/source/css/_layout/fullpage.styl</code> - 全屏加载样式</li><li><code>node_modules/hexo-theme-solitude/source/css/_layout/pace.styl</code> - 顶部进度条样式</li><li><code>node_modules/hexo-theme-solitude/source/img/loading_bg.svg</code> - 背景SVG文件</li><li><code>node_modules/hexo-theme-solitude/_config.yml</code> - 主题配置</li><li><code>_config.solitude.yml</code> - 用户配置</li></ul><h3 id="生成文件">生成文件</h3><ul><li><code>public/css/_layout/fullpage.css</code> - 编译后的全屏加载样式</li><li><code>public/css/_layout/pace.css</code> - 编译后的进度条样式</li><li><code>public/img/loading_bg.svg</code> - 生成的背景SVG文件</li></ul><hr><h2 id="扩展建议">扩展建议</h2><ol><li><strong>添加音效</strong>：为loading动画添加音效</li><li><strong>自定义主题</strong>：支持多种loading主题</li><li><strong>加载统计</strong>：显示加载时间和速度</li><li><strong>网络检测</strong>：根据网络状况调整动画</li><li><strong>设备适配</strong>：针对不同设备优化动画</li><li><strong>性能监控</strong>：监控loading性能指标</li><li><strong>A/B测试</strong>：测试不同loading效果</li><li><strong>用户反馈</strong>：收集用户对loading的反馈</li></ol><hr>]]></content>
      
      
      <categories>
          
          <category> 魔改教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 魔改教程 </tag>
            
            <tag> Solitude </tag>
            
            <tag> Hexo </tag>
            
            <tag> 页面移植 </tag>
            
            <tag> Loading </tag>
            
            <tag> 动画效果 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Solitude主题魔改教程(14)-留言板页面</title>
      <link href="/2024/12/02/Solitude%E4%B8%BB%E9%A2%98%E9%AD%94%E6%94%B9%E6%95%99%E7%A8%8B(14)-%E7%95%99%E8%A8%80%E6%9D%BF%E9%A1%B5%E9%9D%A2/"/>
      <url>/2024/12/02/Solitude%E4%B8%BB%E9%A2%98%E9%AD%94%E6%94%B9%E6%95%99%E7%A8%8B(14)-%E7%95%99%E8%A8%80%E6%9D%BF%E9%A1%B5%E9%9D%A2/</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>Solitude主题默认没有&quot;留言板&quot;页面功能，但很多站长希望提供一个美观的留言展示页面。本文将详细介绍如何从 blog-solitude 项目完整移植留言板页面功能到 solitude-latest，包括信封动画效果、页面模板、配置文件和样式设计的完整实现方案。</p><hr><h2 id="现象与需求">现象与需求</h2><h3 id="现象">现象</h3><ul><li>Solitude主题默认没有&quot;留言板&quot;页面</li><li>无法以美观的方式展示留言内容</li><li>缺少信封动画效果和交互体验</li></ul><h3 id="期望效果">期望效果</h3><ul><li>独立的&quot;留言板&quot;页面（<code>/comments/</code>）</li><li>支持信封动画效果（hover展开）</li><li>支持自定义留言内容和图片</li><li>支持主题色适配和响应式设计</li></ul><h2 id="修改文件清单">修改文件清单</h2><ul><li><code>solitude-latest/source/comments/index.md</code></li><li><code>solitude-latest/node_modules/hexo-theme-solitude/layout/page.pug</code></li><li><code>solitude-latest/node_modules/hexo-theme-solitude/layout/includes/page/comments.pug</code></li><li><code>solitude-latest/node_modules/hexo-theme-solitude/layout/includes/widgets/page/comments/content.pug</code></li><li><code>solitude-latest/_config.solitude.yml</code>（envelope_comment配置）</li><li><code>solitude-latest/node_modules/hexo-theme-solitude/source/css/custom/comments.css</code></li><li><code>solitude-latest/public/img/comments/</code>（图片资源目录）</li><li><code>solitude-latest/public/mp4/message-banner.mp4</code>（视频Banner）</li></ul><hr><h2 id="详细修改步骤">详细修改步骤</h2><h3 id="1-创建留言板页面配置">1. 创建留言板页面配置</h3><p><strong>文件路径：</strong><br><code>solitude-latest/source/comments/index.md</code></p><p><strong>文件内容：</strong></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 留言板</span><br><span class="line">date: 2024-11-19 23:59:27</span><br><span class="line">type: comments</span><br><span class="line">cover: /mp4/message-banner.mp4</span><br><span class="line">desc: 留下你想说的话</span><br><span class="line">leftend: 向 Ryan 传达你的想法</span><br><span class="line"><span class="section">container: true</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure><hr><h3 id="2-创建页面模板">2. 创建页面模板</h3><p><strong>文件路径：</strong><br><code>solitude-latest/node_modules/hexo-theme-solitude/layout/includes/page/comments.pug</code></p><p><strong>文件内容：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- const &#123; enable, custom_pic, message, bottom &#125; = theme.envelope_comment || &#123;&#125;</span><br><span class="line"></span><br><span class="line">//- include ../widgets/page/banner</span><br><span class="line">include ../widgets/page/comments/content</span><br></pre></td></tr></table></figure><hr><h3 id="3-创建信封内容模板">3. 创建信封内容模板</h3><p><strong>文件路径：</strong><br><code>solitude-latest/node_modules/hexo-theme-solitude/layout/includes/widgets/page/comments/content.pug</code></p><p><strong>文件内容：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">if theme.envelope_comment &amp;&amp; theme.envelope_comment.enable</span><br><span class="line">  #envelope-container</span><br><span class="line">    #maincontent</span><br><span class="line">      #form-wrap</span><br><span class="line">        img#beforeimg.no-lightbox(src=custom_pic.beforeimg)</span><br><span class="line">        #envelope</span><br><span class="line">          form</span><br><span class="line">            .formmain(style=&quot;pointer-events: none;&quot;)</span><br><span class="line">              img.headerimg.no-lightbox(src=custom_pic.cover style=&quot;width: 100%;overflow: hidden;pointer-events: none;&quot;)</span><br><span class="line">              .comments-main</span><br><span class="line">                h3.title3(style=&quot;text-decoration: none;color: $theme-color;text-align: center;&quot;) 来自Ryan的留言:</span><br><span class="line">                if Array.isArray(message) &amp;&amp; message.length &gt; 0</span><br><span class="line">                  .comments(style=&quot;text-align: center;border-bottom: #ddd 1px solid;border-left: #ddd 1px solid;padding-bottom: 20px;background-color: #eee;margin: 15px 0px;padding-left: 20px;padding-right: 20px;border-top: #ddd 1px solid;border-right: #ddd 1px solid;padding-top: 20px;&quot;)</span><br><span class="line">                    each i in message</span><br><span class="line">                      div=`$&#123;i&#125;`</span><br><span class="line">                else</span><br><span class="line">                  .comments(style=&quot;text-align: center; color: #999; padding: 20px;&quot;) 暂无留言内容</span><br><span class="line">                .bottomcontent(style=&quot;text-align: center;margin-top: 40px;&quot;)</span><br><span class="line">                  img.bottomimg.no-lightbox(src=custom_pic.line style=&quot;width: 100%;margin: 5px auto 5px auto;display: block;pointer-events: none;&quot;)</span><br><span class="line">                p.bottomhr(style=&quot;font-size: 12px;text-align: center;color: #999;&quot;)=`$&#123;bottom&#125;`</span><br><span class="line">        img#afterimg.no-lightbox(src=custom_pic.afterimg)</span><br></pre></td></tr></table></figure><hr><h3 id="4-注册页面类型">4. 注册页面类型</h3><p><strong>文件路径：</strong><br><code>solitude-latest/node_modules/hexo-theme-solitude/layout/page.pug</code></p><p><strong>修改内容：</strong><br>在 <code>case page.type</code> 处添加 comments：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">when &#x27;comments&#x27;</span><br><span class="line">    include includes/page/comments</span><br></pre></td></tr></table></figure><p><strong>实际位置：</strong> 第32-33行</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">when &#x27;bloglog&#x27;</span><br><span class="line">    include includes/page/bloglog</span><br><span class="line">when &#x27;comments&#x27;</span><br><span class="line">    include includes/page/comments</span><br><span class="line">when &#x27;recentcomment&#x27;</span><br></pre></td></tr></table></figure><hr><h3 id="5-添加配置文件">5. 添加配置文件</h3><p><strong>文件路径：</strong><br><code>solitude-latest/_config.solitude.yml</code></p><p><strong>修改内容：</strong><br>在文件末尾添加 envelope_comment 配置：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># Message Page</span></span><br><span class="line"><span class="comment"># 留言板信封页面</span></span><br><span class="line"><span class="attr">envelope_comment:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment">#控制开关</span></span><br><span class="line">  <span class="attr">custom_pic:</span>      </span><br><span class="line">    <span class="attr">cover:</span> <span class="string">/img/comments/violet.jpg</span> <span class="comment">#信笺头部图片</span></span><br><span class="line">    <span class="attr">line:</span> <span class="string">/img/comments/line.png</span> <span class="comment">#信笺底部图片</span></span><br><span class="line">    <span class="attr">beforeimg:</span> <span class="string">/img/comments/before.png</span> <span class="comment"># 信封前半部分</span></span><br><span class="line">    <span class="attr">afterimg:</span> <span class="string">/img/comments/after.png</span> <span class="comment"># 信封后半部分</span></span><br><span class="line">  <span class="attr">message:</span> <span class="comment">#信笺正文，多行文本，写法如下</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">有什么想问的？</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">有什么想说的？</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">有什么想吐槽的？</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">哪怕是有什么想吃的，都可以告诉我哦~</span></span><br><span class="line">  <span class="attr">bottom:</span> <span class="string">自动书记人偶竭诚为您服务！</span> <span class="comment">#仅支持单行文本</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br></pre></td></tr></table></figure><p><strong>实际位置：</strong> 第1120-1138行</p><hr><h3 id="6-创建样式文件">6. 创建样式文件</h3><p><strong>文件路径：</strong><br><code>solitude-latest/node_modules/hexo-theme-solitude/source/css/custom/comments.css</code></p><p><strong>文件内容：</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">600px</span>) &#123;</span><br><span class="line"><span class="selector-id">#beforeimg</span>,</span><br><span class="line"><span class="selector-id">#afterimg</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>: none <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>: <span class="number">600px</span>) &#123;</span><br><span class="line"><span class="selector-id">#article-container</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto <span class="number">0rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#form-wrap</span> &#123;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">447px</span>;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0px</span>;</span><br><span class="line">    <span class="attribute">transition</span>: all <span class="number">1s</span> ease-in-out .<span class="number">3s</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#form-wrap</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">1050px</span>;</span><br><span class="line">    <span class="attribute">top</span>: -<span class="number">200px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#beforeimg</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">126px</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0px</span>;</span><br><span class="line">    <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">530px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">317px</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: -<span class="number">100</span>;</span><br><span class="line">    <span class="attribute">pointer-events</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#afterimg</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">bottom</span>: -<span class="number">2px</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">530px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">259px</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">100</span>;</span><br><span class="line">    <span class="attribute">pointer-events</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#envelope</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">overflow</span>: visible;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">500px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0px</span> auto;</span><br><span class="line">    <span class="attribute">transition</span>: all <span class="number">1s</span> ease-in-out .<span class="number">3s</span>;</span><br><span class="line">    <span class="attribute">padding-top</span>: <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#maincontent</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">530px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">20px</span> auto <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.formmain</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: white;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">95%</span>;</span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">800px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: auto auto;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    -webkit-<span class="attribute">box-shadow</span>: <span class="number">0px</span> <span class="number">0px</span> <span class="number">20px</span> <span class="number">0px</span> <span class="number">#000000</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0px</span> <span class="number">0px</span> <span class="number">20px</span> <span class="number">0px</span> <span class="number">#000000</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 夜间模式 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&#x27;dark&#x27;</span>]</span></span><br><span class="line"><span class="selector-class">.formmain</span> &#123;</span><br><span class="line"><span class="attribute">background</span>: <span class="number">#323232</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&#x27;dark&#x27;</span>]</span></span><br><span class="line"><span class="selector-class">.comments</span> &#123;</span><br><span class="line"><span class="attribute">background</span>: <span class="number">#5a5a5a</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="7-引入样式文件">7. 引入样式文件</h3><p><strong>文件路径：</strong><br><code>solitude-latest/node_modules/hexo-theme-solitude/source/css/index.styl</code></p><p><strong>修改内容：</strong><br>在第18行添加：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;custom/comments.css&#x27;</span></span><br></pre></td></tr></table></figure><p><strong>实际位置：</strong> 第18行</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;custom/todolist.css&#x27;</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;custom/bloglog.css&#x27;</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;custom/comments.css&#x27;</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;album-modal.css&#x27;</span></span><br></pre></td></tr></table></figure><hr><h3 id="8-创建图片资源目录">8. 创建图片资源目录</h3><p><strong>文件路径：</strong><br><code>solitude-latest/public/img/comments/</code></p><p><strong>操作步骤：</strong></p><ol><li>创建目录：<code>mkdir -p public/img/comments</code></li><li>复制图片文件：<ul><li><code>violet.jpg</code> - 信笺头部图片 (117KB)</li><li><code>line.png</code> - 信笺底部图片 (13KB)</li><li><code>before.png</code> - 信封前半部分 (64KB)</li><li><code>after.png</code> - 信封后半部分 (159KB)</li></ul></li></ol><p><strong>实际状态：</strong> ✅ 已完成，所有图片文件已存在</p><hr><h3 id="9-静态资源">9. 静态资源</h3><p>确保 <code>/mp4/message-banner.mp4</code> 已存在于 solitude-latest 的静态资源目录。</p><p><strong>实际状态：</strong> ✅ 已完成，文件已存在</p><hr><h3 id="10-重新生成">10. 重新生成</h3><p>在 solitude-latest 目录下执行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo generate</span><br></pre></td></tr></table></figure><p>访问 <code>/comments/</code> 页面即可。</p><p><strong>实际状态：</strong> ✅ 已完成，页面已生成</p><hr><h2 id="功能特性">功能特性</h2><h3 id="1-信封动画效果">1. 信封动画效果</h3><ul><li>鼠标悬停时信封自动展开</li><li>平滑的过渡动画效果（1s ease-in-out .3s）</li><li>信封前后部分分离显示</li><li>展开高度从447px到1050px</li></ul><h3 id="2-自定义留言内容">2. 自定义留言内容</h3><ul><li>支持多行留言文本（数组格式）</li><li>可自定义底部签名</li><li>支持主题色适配</li><li>支持条件渲染（有内容时显示，无内容时显示&quot;暂无留言内容&quot;）</li></ul><h3 id="3-响应式设计">3. 响应式设计</h3><ul><li>移动端（≤600px）隐藏信封装饰图片</li><li>桌面端（&gt;600px）完整展示信封效果</li><li>适配不同屏幕尺寸</li></ul><h3 id="4-深色模式支持">4. 深色模式支持</h3><ul><li>自动适配深色主题</li><li>信封和留言区域颜色调整</li><li>深色模式下信封背景为#323232</li><li>深色模式下留言区域背景为#5a5a5a</li></ul><h3 id="5-图片资源管理">5. 图片资源管理</h3><ul><li>支持自定义信笺头部图片</li><li>支持自定义信笺底部图片</li><li>支持自定义信封前后部分图片</li><li>所有图片路径可配置</li></ul><hr><h2 id="使用说明">使用说明</h2><h3 id="1-修改留言内容">1. 修改留言内容</h3><p>编辑 <code>_config.solitude.yml</code> 中的 <code>envelope_comment.message</code> 数组：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">message:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">有什么想问的？</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">有什么想说的？</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">有什么想吐槽的？</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">哪怕是有什么想吃的，都可以告诉我哦~</span></span><br></pre></td></tr></table></figure><h3 id="2-修改底部签名">2. 修改底部签名</h3><p>编辑 <code>_config.solitude.yml</code> 中的 <code>envelope_comment.bottom</code>：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">bottom:</span> <span class="string">自动书记人偶竭诚为您服务！</span></span><br></pre></td></tr></table></figure><h3 id="3-更换图片资源">3. 更换图片资源</h3><p>替换 <code>public/img/comments/</code> 目录下的图片文件：</p><ul><li><code>violet.jpg</code> - 信笺头部图片</li><li><code>line.png</code> - 信笺底部图片</li><li><code>before.png</code> - 信封前半部分</li><li><code>after.png</code> - 信封后半部分</li></ul><h3 id="4-调整动画效果">4. 调整动画效果</h3><p>修改 <code>comments.css</code> 中的相关样式：</p><ul><li><code>#form-wrap:hover</code> - 控制展开高度（当前：1050px）</li><li><code>transition</code> - 控制动画时长和缓动函数（当前：1s ease-in-out .3s）</li></ul><h3 id="5-启用-禁用功能">5. 启用/禁用功能</h3><p>在 <code>_config.solitude.yml</code> 中修改：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">envelope_comment:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span>  <span class="comment"># 改为 false 可禁用留言板功能</span></span><br></pre></td></tr></table></figure><hr><h2 id="常见问题解决">常见问题解决</h2><h3 id="1-页面无法访问">1. 页面无法访问</h3><ul><li>检查 <code>page.pug</code> 是否已注册 comments 页面类型</li><li>检查 <code>_config.solitude.yml</code> 中 envelope_comment.enable 是否为 true</li><li>重新生成：<code>hexo clean &amp;&amp; hexo generate</code></li></ul><h3 id="2-信封动画不生效">2. 信封动画不生效</h3><ul><li>检查 <code>comments.css</code> 是否正确引入</li><li>检查图片路径是否正确</li><li>清除浏览器缓存</li><li>检查CSS文件是否生成：<code>ls public/css/custom/comments.css</code></li></ul><h3 id="3-图片显示异常">3. 图片显示异常</h3><ul><li>检查 <code>public/img/comments/</code> 目录是否存在</li><li>检查图片文件是否完整复制</li><li>检查图片路径配置是否正确</li><li>验证图片文件：<code>ls -la public/img/comments/</code></li></ul><h3 id="4-样式不生效">4. 样式不生效</h3><ul><li>检查 <code>index.styl</code> 是否已引入 <code>custom/comments.css</code></li><li>重新构建项目：<code>hexo clean &amp;&amp; hexo generate</code></li><li>清除浏览器缓存</li><li>检查编译后的CSS：<code>ls public/css/custom/comments.css</code></li></ul><h3 id="5-移动端显示问题">5. 移动端显示问题</h3><ul><li>检查 <code>@media screen and (max-width: 600px)</code> 样式</li><li>确保移动端隐藏装饰图片</li><li>测试不同屏幕尺寸的显示效果</li></ul><h3 id="6-深色模式问题">6. 深色模式问题</h3><ul><li>检查深色模式下的颜色适配</li><li>确保 <code>[data-theme='dark']</code> 样式正确</li><li>测试主题切换功能</li></ul><hr><h2 id="高级定制">高级定制</h2><h3 id="1-自定义信封颜色">1. 自定义信封颜色</h3><p>修改 <code>comments.css</code> 中的信封样式：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.formmain</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: #your-color;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid #your-border-color;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-调整动画时长">2. 调整动画时长</h3><p>修改 <code>transition</code> 属性：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#form-wrap</span> &#123;</span><br><span class="line">    <span class="attribute">transition</span>: all <span class="number">1.5s</span> ease-in-out .<span class="number">5s</span>; <span class="comment">/* 调整时长和延迟 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-添加更多交互效果">3. 添加更多交互效果</h3><p>可以在 <code>comments.css</code> 中添加更多 hover 效果：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#envelope</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.02</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-自定义留言样式">4. 自定义留言样式</h3><p>修改留言区域的样式：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.comments</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: #your-color;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid #your-border-color;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="总结">总结</h2><p>通过以上步骤，我们为Solitude主题添加了完整的&quot;留言板&quot;功能。该功能不仅具有美观的信封动画效果，还支持自定义留言内容和响应式设计，为用户提供了良好的交互体验。</p><p>留言板功能的特点：</p><ul><li><strong>美观的信封动画</strong>：鼠标悬停时信封自动展开，平滑过渡</li><li><strong>自定义内容</strong>：支持多行留言和自定义签名，完全可配置</li><li><strong>响应式设计</strong>：适配移动端和桌面端，移动端隐藏装饰图片</li><li><strong>主题适配</strong>：支持浅色/深色主题切换，自动颜色调整</li><li><strong>易于维护</strong>：通过配置文件轻松修改内容和样式</li><li><strong>完整实现</strong>：包含所有必要的文件、样式和资源</li></ul><hr><h2 id="相关文件清单">相关文件清单</h2><h3 id="新增文件">新增文件</h3><ul><li><code>source/comments/index.md</code> - 留言板页面配置</li><li><code>node_modules/hexo-theme-solitude/layout/includes/page/comments.pug</code> - 页面模板</li><li><code>node_modules/hexo-theme-solitude/layout/includes/widgets/page/comments/content.pug</code> - 内容模板</li><li><code>node_modules/hexo-theme-solitude/source/css/custom/comments.css</code> - 样式文件</li><li><code>public/img/comments/</code> - 图片资源目录（4个文件）</li></ul><h3 id="修改文件">修改文件</h3><ul><li><code>node_modules/hexo-theme-solitude/layout/page.pug</code> - 注册页面类型（第32-33行）</li><li><code>node_modules/hexo-theme-solitude/source/css/index.styl</code> - 引入样式（第18行）</li><li><code>_config.solitude.yml</code> - 添加配置项（第1120-1138行）</li></ul><h3 id="生成文件">生成文件</h3><ul><li><code>public/comments/index.html</code> - 留言板页面（55KB）</li><li><code>public/css/custom/comments.css</code> - 编译后的样式文件（1.4KB）</li></ul><hr><h2 id="扩展建议">扩展建议</h2><ol><li><strong>添加留言表单</strong>：可以扩展为真正的留言功能</li><li><strong>添加留言管理</strong>：后台管理留言内容</li><li><strong>添加留言通知</strong>：新留言时发送通知</li><li><strong>添加留言审核</strong>：防止垃圾留言</li><li><strong>添加留言回复</strong>：支持留言回复功能</li><li><strong>添加留言统计</strong>：显示留言数量和时间</li><li><strong>添加留言搜索</strong>：支持留言内容搜索</li><li><strong>添加留言分类</strong>：按类型分类留言</li></ol><hr>]]></content>
      
      
      <categories>
          
          <category> 魔改教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 魔改教程 </tag>
            
            <tag> Solitude </tag>
            
            <tag> Hexo </tag>
            
            <tag> 页面移植 </tag>
            
            <tag> 留言板 </tag>
            
            <tag> 信封动画 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Solitude主题魔改教程(13)-本站日志页面</title>
      <link href="/2024/11/25/Solitude%E4%B8%BB%E9%A2%98%E9%AD%94%E6%94%B9%E6%95%99%E7%A8%8B(13)-%E6%9C%AC%E7%AB%99%E6%97%A5%E5%BF%97%E9%A1%B5%E9%9D%A2/"/>
      <url>/2024/11/25/Solitude%E4%B8%BB%E9%A2%98%E9%AD%94%E6%94%B9%E6%95%99%E7%A8%8B(13)-%E6%9C%AC%E7%AB%99%E6%97%A5%E5%BF%97%E9%A1%B5%E9%9D%A2/</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>Solitude主题默认没有“本站日志”页面功能，但很多站长希望记录和展示网站的成长历程。本文将详细介绍如何从 blog-solitude 项目完整移植本站日志页面功能到 solitude-latest，包括时间轴展示、页面模板、导航配置和样式适配的完整实现方案。</p><hr><h2 id="现象与需求">现象与需求</h2><h3 id="现象">现象</h3><ul><li>Solitude主题默认没有“本站日志”页面</li><li>无法以时间轴形式展示网站更新历史</li><li>缺少专属的日志页面模板和样式</li></ul><h3 id="期望效果">期望效果</h3><ul><li>独立的“本站日志”页面（<code>/bloglog/</code>）</li><li>支持时间轴（timeline）展示网站大事记</li><li>支持视频Banner</li><li>支持主题色适配和响应式设计</li></ul><hr><h2 id="问题分析">问题分析</h2><h3 id="根本原因">根本原因</h3><ol><li><p><strong>页面类型缺失</strong><br>solitude-latest主题缺少 bloglog 页面类型的支持</p></li><li><p><strong>模板文件缺失</strong><br>缺少 bloglog 页面模板</p></li><li><p><strong>导航配置缺失</strong><br>没有在主题导航中添加“本站日志”入口</p></li><li><p><strong>样式适配缺失</strong><br>时间轴样式未适配或未引入</p></li></ol><hr><h2 id="修改文件清单">修改文件清单</h2><ul><li><code>solitude-latest/source/bloglog/index.md</code></li><li><code>solitude-latest/node_modules/hexo-theme-solitude/layout/page.pug</code></li><li><code>solitude-latest/node_modules/hexo-theme-solitude/layout/includes/page/bloglog.pug</code></li><li><code>solitude-latest/_config.solitude.yml</code>（导航配置）</li><li><code>solitude-latest/node_modules/hexo-theme-solitude/source/css/custom/bloglog.css</code>（如需自定义样式）</li><li><code>solitude-latest/public/mp4/bloglog-banner.mp4</code>（视频Banner）</li></ul><hr><h2 id="详细修改步骤">详细修改步骤</h2><h3 id="1-创建本站日志页面配置">1. 创建本站日志页面配置</h3><p><strong>文件路径：</strong><br><code>solitude-latest/source/bloglog/index.md</code></p><p><strong>文件内容：</strong></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 网站日志</span><br><span class="line">date: 2024-11-17 12:12:02</span><br><span class="line">type: bloglog</span><br><span class="line">cover: /mp4/bloglog-banner.mp4</span><br><span class="line">desc: 网站日志实时更新</span><br><span class="line"><span class="section">container: true</span></span><br><span class="line"><span class="section">---</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;notice&quot;</span>&gt;</span></span></span><br><span class="line">&#123;% note &#x27;info&#x27; &#x27;fas fa-bullhorn&#x27; %&#125;</span><br><span class="line">估摸着时间有些对不上的，总之记录下来就好啦</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;timeline&quot;</span>&gt;</span></span></span><br><span class="line">&#123;% timeline 2024 %&#125;</span><br><span class="line">&#123;% timenode 11-11 %&#125;</span><br><span class="line">&#123;% radio pink 追番集功能暂时关闭 %&#125;</span><br><span class="line">&#123;% radio purple 修改藏宝阁功能, 不用通过card来实现画面显示 %&#125;</span><br><span class="line">&#123;% radio yellow 新增想做的事, 本站日志功能 %&#125;</span><br><span class="line">&#123;% endtimenode %&#125;</span><br><span class="line">&#123;% timenode 11-08 %&#125;三个站点的ssh在同一台电脑的配置完成，实现不同站点的deploy&#123;% endtimenode %&#125;</span><br><span class="line">&#123;% timenode 11-07 %&#125;站点的引导页制作完成，可以通过站点实现主站1，主站2，分站之间的跳转&#123;% endtimenode %&#125;</span><br><span class="line">&#123;% timenode 11-05 %&#125;侧边栏添加最近播放的歌曲，那年今日追加&#123;% endtimenode %&#125;</span><br><span class="line">&#123;% timenode 11-04 %&#125;侧边栏添加新年倒计时&#123;% endtimenode %&#125;</span><br><span class="line">&#123;% timenode 11-03 %&#125;侧边栏添加日历&#123;% endtimenode %&#125;</span><br><span class="line">&#123;% timenode 11-02 %&#125;侧边栏添加个性时钟&#123;% endtimenode %&#125;</span><br><span class="line">&#123;% timenode 11-01 %&#125;页面banner支持MP4视频显示&#123;% endtimenode %&#125;</span><br><span class="line">&#123;% timenode 10-29 %&#125;趣游居，追番集移植完成&#123;% endtimenode %&#125;</span><br><span class="line">&#123;% timenode 10-28 %&#125;碎碎念，我的装备，在线工具，关于本人，留言板搭建完成&#123;% endtimenode %&#125;</span><br><span class="line">&#123;% timenode 10-27 %&#125;音乐馆搭建完成&#123;% endtimenode %&#125;</span><br><span class="line">&#123;% timenode 10-25 %&#125;归档，分类，标签页添加统计图表完成&#123;% endtimenode %&#125;</span><br><span class="line">&#123;% timenode 10-24 %&#125;solitude博客搭建，主题应用完成&#123;% endtimenode %&#125;</span><br><span class="line">&#123;% endtimeline %&#125;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure><hr><h3 id="2-创建页面模板">2. 创建页面模板</h3><p><strong>文件路径：</strong><br><code>solitude-latest/node_modules/hexo-theme-solitude/layout/includes/page/bloglog.pug</code></p><p><strong>文件内容：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">include ../widgets/page/banner</span><br><span class="line">#article-container</span><br><span class="line">    != page.content</span><br></pre></td></tr></table></figure><hr><h3 id="3-注册页面类型">3. 注册页面类型</h3><p><strong>文件路径：</strong><br><code>solitude-latest/node_modules/hexo-theme-solitude/layout/page.pug</code></p><p><strong>修改内容：</strong><br>在 <code>case page.type</code> 处添加 bloglog：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">when &#x27;bloglog&#x27;</span><br><span class="line">    include includes/page/bloglog</span><br></pre></td></tr></table></figure><hr><h3 id="4-导航配置">4. 导航配置</h3><p><strong>文件路径：</strong><br><code>solitude-latest/_config.solitude.yml</code></p><p><strong>修改内容：</strong><br>确保导航栏有“本站日志”入口：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">关于:</span></span><br><span class="line">  <span class="string">本站日志:</span> <span class="string">/bloglog/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-book</span></span><br></pre></td></tr></table></figure><hr><h3 id="5-静态资源">5. 静态资源</h3><p>确保 <code>/mp4/bloglog-banner.mp4</code> 已存在于 solitude-latest 的静态资源目录（如 themes/solitude/source/mp4/ 或 public/mp4/）。</p><hr><h3 id="6-样式适配（可选）">6. 样式适配（可选）</h3><p>如果时间轴样式不理想，可自定义样式：</p><p><strong>文件路径：</strong><br><code>solitude-latest/node_modules/hexo-theme-solitude/source/css/custom/bloglog.css</code></p><p><strong>示例内容：</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.timeline</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">2rem</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">1rem</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">12px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--efu-card-bg, <span class="number">#fff</span>);</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">2px</span> <span class="number">8px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.05</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.timeline</span> <span class="selector-class">.timenode</span> &#123;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">1.5rem</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">1.5rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.timeline</span> <span class="selector-class">.timenode</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0.5rem</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0.2rem</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">0.7rem</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">0.7rem</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--efu-main, <span class="number">#007bff</span>);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.timeline</span> <span class="selector-class">.radio</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">0.5rem</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0.2rem</span> <span class="number">0.6rem</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">1rem</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">0.95em</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.timeline</span> <span class="selector-class">.radio</span><span class="selector-class">.pink</span> &#123; <span class="attribute">background</span>: <span class="number">#ffb6c1</span>; <span class="attribute">color</span>: <span class="number">#fff</span>; &#125;</span><br><span class="line"><span class="selector-class">.timeline</span> <span class="selector-class">.radio</span><span class="selector-class">.purple</span> &#123; <span class="attribute">background</span>: <span class="number">#b39ddb</span>; <span class="attribute">color</span>: <span class="number">#fff</span>; &#125;</span><br><span class="line"><span class="selector-class">.timeline</span> <span class="selector-class">.radio</span><span class="selector-class">.yellow</span> &#123; <span class="attribute">background</span>: <span class="number">#ffe082</span>; <span class="attribute">color</span>: <span class="number">#333</span>; &#125;</span><br></pre></td></tr></table></figure><p>并在主题CSS入口文件引入（如 <code>index.styl</code>）：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;custom/bloglog.css&#x27;</span></span><br></pre></td></tr></table></figure><hr><h3 id="7-重新生成">7. 重新生成</h3><p>在 solitude-latest 目录下执行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run build</span><br></pre></td></tr></table></figure><p>访问 <code>/bloglog/</code> 页面即可。</p><hr><h2 id="功能特性">功能特性</h2><h3 id="1-时间轴展示">1. 时间轴展示</h3><ul><li>以时间轴形式展示网站大事记</li><li>支持多种颜色标签（radio）</li></ul><h3 id="2-视频Banner">2. 视频Banner</h3><ul><li>支持MP4视频作为页面顶部Banner</li></ul><h3 id="3-主题适配">3. 主题适配</h3><ul><li>支持浅色/深色主题自动切换</li></ul><h3 id="4-响应式设计">4. 响应式设计</h3><ul><li>适配移动端和桌面端</li></ul><hr><h2 id="使用说明">使用说明</h2><ul><li>编辑 <code>source/bloglog/index.md</code>，添加或修改日志内容</li><li>可自定义时间轴样式</li><li>可随时扩展更多节点和内容</li></ul><hr><h2 id="常见问题解决">常见问题解决</h2><h3 id="1-页面无法访问">1. 页面无法访问</h3><ul><li>检查 <code>page.pug</code> 是否已注册 bloglog 页面类型</li><li>检查导航配置是否正确</li></ul><h3 id="2-样式不生效">2. 样式不生效</h3><ul><li>检查自定义CSS是否已正确引入</li><li>清除浏览器缓存</li></ul><h3 id="3-时间轴内容不显示">3. 时间轴内容不显示</h3><ul><li>检查日志页面内容格式是否正确</li><li>检查主题是否支持 <code>&#123;% timeline %&#125;</code> 语法（如需插件请安装）</li></ul><hr><h2 id="总结">总结</h2><p>通过以上步骤，我们为Solitude主题添加了完整的“本站日志”功能。该功能不仅美观实用，还能帮助站长记录和展示网站成长历程，提升博客的专业性和可读性。</p><hr>]]></content>
      
      
      <categories>
          
          <category> 魔改教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 魔改教程 </tag>
            
            <tag> Solitude </tag>
            
            <tag> Hexo </tag>
            
            <tag> 页面移植 </tag>
            
            <tag> 本站日志 </tag>
            
            <tag> 时间轴 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Solitude主题魔改教程(12)-想做的事页面</title>
      <link href="/2024/11/18/Solitude%E4%B8%BB%E9%A2%98%E9%AD%94%E6%94%B9%E6%95%99%E7%A8%8B(12)-%E6%83%B3%E5%81%9A%E7%9A%84%E4%BA%8B%E9%A1%B5%E9%9D%A2/"/>
      <url>/2024/11/18/Solitude%E4%B8%BB%E9%A2%98%E9%AD%94%E6%94%B9%E6%95%99%E7%A8%8B(12)-%E6%83%B3%E5%81%9A%E7%9A%84%E4%BA%8B%E9%A1%B5%E9%9D%A2/</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>Solitude主题默认没有想做的事页面功能，但有时我们希望展示个人的目标和计划。本文将详细介绍如何从blog-solitude项目完整移植想做的事页面功能到solitude-latest，包括数据管理、模板创建、样式设计和响应式布局的完整实现方案。</p><h2 id="功能概述">功能概述</h2><h3 id="目标功能">目标功能</h3><ul><li>展示个人想做的事清单</li><li>支持多个分类管理</li><li>左右两栏布局展示</li><li>完成状态标记功能</li><li>响应式设计适配</li><li>Banner视频播放功能</li><li>移动端优化显示</li></ul><h3 id="技术特点">技术特点</h3><ul><li>数据驱动的YAML配置</li><li>模板化的页面结构</li><li>主题适配的样式设计</li><li>移动端友好的布局</li><li>Banner响应式设计</li></ul><h2 id="移植步骤">移植步骤</h2><h3 id="第一步：创建页面文件">第一步：创建页面文件</h3><h4 id="1-1-创建页面配置文件">1.1 创建页面配置文件</h4><p>在 <code>solitude-latest/source/todolist/index.md</code> 创建页面配置：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">想做的事</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2024-11-17 04:51:15</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">todolist</span></span><br><span class="line"><span class="attr">cover:</span> <span class="string">/mp4/todolist-banner.mp4</span></span><br><span class="line"><span class="attr">desc:</span> <span class="string">天地很大，想做的事很多；人生很长，可以来慢慢实现</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><h4 id="1-2-创建数据配置文件">1.2 创建数据配置文件</h4><p>在 <code>solitude-latest/source/_data/todolist.yml</code> 创建数据配置：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># seat控制清单在左栏还是右栏显示，completed控制是否已完成</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">class_name:</span> <span class="string">想做的项目</span></span><br><span class="line">  <span class="attr">seat:</span> <span class="string">left</span></span><br><span class="line">  <span class="attr">todo_list:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">content:</span> <span class="string">主页</span></span><br><span class="line">      <span class="attr">completed:</span> <span class="literal">false</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">content:</span> <span class="string">小程序</span></span><br><span class="line">      <span class="attr">completed:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="attr">class_name:</span> <span class="string">想看的书</span></span><br><span class="line">  <span class="attr">seat:</span> <span class="string">left</span></span><br><span class="line">  <span class="attr">todo_list:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">content:</span> <span class="string">《骆驼祥子》</span></span><br><span class="line">      <span class="attr">completed:</span> <span class="literal">false</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">content:</span> <span class="string">《活着》</span></span><br><span class="line">      <span class="attr">completed:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="attr">class_name:</span> <span class="string">想买的东西</span></span><br><span class="line">  <span class="attr">seat:</span> <span class="string">left</span></span><br><span class="line">  <span class="attr">todo_list:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">content:</span> <span class="string">东西</span></span><br><span class="line">      <span class="attr">completed:</span> <span class="literal">true</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">content:</span> <span class="string">机械硬盘盒</span></span><br><span class="line">      <span class="attr">completed:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="attr">class_name:</span> <span class="string">想学的技术</span></span><br><span class="line">  <span class="attr">seat:</span> <span class="string">right</span></span><br><span class="line">  <span class="attr">todo_list:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">content:</span> <span class="string">骑自行车</span></span><br><span class="line">      <span class="attr">completed:</span> <span class="literal">false</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">content:</span> <span class="string">修自行车</span></span><br><span class="line">      <span class="attr">completed:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="attr">class_name:</span> <span class="string">想去的地方</span></span><br><span class="line">  <span class="attr">seat:</span> <span class="string">right</span></span><br><span class="line">  <span class="attr">todo_list:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">content:</span> <span class="string">桂林</span></span><br><span class="line">      <span class="attr">completed:</span> <span class="literal">true</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">content:</span> <span class="string">心里</span></span><br><span class="line">      <span class="attr">completed:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><h3 id="第二步：创建模板文件">第二步：创建模板文件</h3><h4 id="2-1-创建页面模板">2.1 创建页面模板</h4><p>在 <code>solitude-latest/node_modules/hexo-theme-solitude/layout/includes/page/todolist.pug</code> 创建页面模板：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">include ../widgets/page/banner</span><br><span class="line">include ../widgets/page/todolist/content</span><br></pre></td></tr></table></figure><h4 id="2-2-创建内容模板">2.2 创建内容模板</h4><p>在 <code>solitude-latest/node_modules/hexo-theme-solitude/layout/includes/widgets/page/todolist/content.pug</code> 创建内容模板：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">#todolist-main</span><br><span class="line">        #todolist-left</span><br><span class="line">            each i in site.data.todolist</span><br><span class="line">                if i.seat == &#x27;left&#x27;</span><br><span class="line">                    .todolist-item</span><br><span class="line">                        h3.todolist-title=i.class_name</span><br><span class="line">                        ul.todolist-ul</span><br><span class="line">                            each item in i.todo_list</span><br><span class="line">                                 - var listItemClass = item.completed ? &#x27;todolist-li-done&#x27; : &#x27;todolist-li&#x27;</span><br><span class="line">                                 li(class=listItemClass)</span><br><span class="line">                                    if item.completed</span><br><span class="line">                                        i.fa-regular.fa-circle-check</span><br><span class="line">                                    else </span><br><span class="line">                                        i.fa-regular.fa-circle</span><br><span class="line">                                    span=item.content</span><br><span class="line">        #todolist-right</span><br><span class="line">            each i in site.data.todolist</span><br><span class="line">                if i.seat == &#x27;right&#x27;</span><br><span class="line">                    .todolist-item</span><br><span class="line">                        h3.todolist-title=i.class_name</span><br><span class="line">                        ul.todolist-ul</span><br><span class="line">                            each item in i.todo_list</span><br><span class="line">                                 - var listItemClass = item.completed ? &#x27;todolist-li-done&#x27; : &#x27;todolist-li&#x27;</span><br><span class="line">                                 li(class=listItemClass)</span><br><span class="line">                                    if item.completed</span><br><span class="line">                                        i.fa-regular.fa-circle-check</span><br><span class="line">                                    else </span><br><span class="line">                                        i.fa-regular.fa-circle</span><br><span class="line">                                    span=item.content</span><br></pre></td></tr></table></figure><h3 id="第三步：创建样式文件">第三步：创建样式文件</h3><h4 id="3-1-创建CSS样式文件">3.1 创建CSS样式文件</h4><p>在 <code>solitude-latest/node_modules/hexo-theme-solitude/source/css/custom/todolist.css</code> 创建样式文件：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span><span class="selector-attr">[data-type=<span class="string">&quot;todolist&quot;</span>]</span> <span class="selector-id">#web_bg</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--anzhiyu-background);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">body</span><span class="selector-attr">[data-type=<span class="string">&quot;todolist&quot;</span>]</span> <span class="selector-id">#page</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">0</span>;</span><br><span class="line">    -webkit-<span class="attribute">box-shadow</span>: none <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: none <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">0</span> <span class="number">0</span> <span class="meta">!important</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">body</span><span class="selector-attr">[data-type=<span class="string">&quot;todolist&quot;</span>]</span> <span class="selector-id">#page</span> <span class="selector-class">.page-title</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Banner响应式高度设置 */</span></span><br><span class="line"><span class="selector-tag">body</span><span class="selector-attr">[data-type=<span class="string">&quot;todolist&quot;</span>]</span> <span class="selector-class">.author-content</span><span class="selector-class">.author-content-item</span><span class="selector-class">.sharePage</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">19rem</span>; <span class="comment">/* 与相册集保持一致 */</span></span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>; <span class="comment">/* 移除边距，与相册集保持一致 */</span></span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">12px</span>; <span class="comment">/* 恢复圆角，与相册集保持一致 */</span></span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 移动端banner设置 */</span></span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">max-width</span>: <span class="number">768px</span>) &#123;</span><br><span class="line">    <span class="selector-tag">body</span><span class="selector-attr">[data-type=<span class="string">&quot;todolist&quot;</span>]</span> <span class="selector-class">.author-content</span><span class="selector-class">.author-content-item</span><span class="selector-class">.sharePage</span> &#123;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">150px</span> <span class="meta">!important</span>; <span class="comment">/* 手机端高度 */</span></span><br><span class="line">        <span class="attribute">width</span>: <span class="number">95%</span> <span class="meta">!important</span>; <span class="comment">/* 手机端宽度 */</span></span><br><span class="line">        <span class="attribute">margin</span>: <span class="number">0</span> auto <span class="meta">!important</span>; <span class="comment">/* 居中显示 */</span></span><br><span class="line">        <span class="attribute">border-radius</span>: <span class="number">12px</span>; <span class="comment">/* 保持圆角 */</span></span><br><span class="line">        <span class="attribute">overflow</span>: hidden;</span><br><span class="line">        <span class="attribute">max-width</span>: <span class="number">95%</span>; <span class="comment">/* 确保最大宽度不超过95% */</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* 确保父容器不会影响宽度 */</span></span><br><span class="line">    <span class="selector-tag">body</span><span class="selector-attr">[data-type=<span class="string">&quot;todolist&quot;</span>]</span> <span class="selector-id">#page</span> &#123;</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">10px</span> <span class="meta">!important</span>; <span class="comment">/* 添加左右内边距 */</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="selector-tag">body</span><span class="selector-attr">[data-type=<span class="string">&quot;todolist&quot;</span>]</span> <span class="selector-class">.author-content-item</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">95%</span> <span class="meta">!important</span>; <span class="comment">/* 确保内容区域也是95%宽度 */</span></span><br><span class="line">        <span class="attribute">margin</span>: <span class="number">0</span> auto <span class="meta">!important</span>; <span class="comment">/* 居中显示 */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Todolist */</span></span><br><span class="line">  <span class="selector-id">#todolist-box</span>&#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-id">#todolist-main</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-direction</span>: row;</span><br><span class="line">    <span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">30px</span> <span class="number">0</span> <span class="number">10px</span>; <span class="comment">/* 增加顶部间距，从16px改为30px */</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-id">#todolist-main</span> <span class="selector-tag">li</span>&#123;</span><br><span class="line">    <span class="attribute">list-style</span>:none;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">17px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-id">#todolist-main</span> <span class="selector-tag">ul</span>&#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-id">#todolist-left</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">8px</span> <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-id">#todolist-right</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">8px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.todolist-item</span>&#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#fae4df</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">1rem</span> <span class="number">1.2rem</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">2px</span> dashed <span class="number">#f7a796</span>;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">1rem</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-attr">[data-theme=dark]</span></span><br><span class="line">  <span class="selector-class">.todolist-item</span>&#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#242424</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">2px</span> dashed <span class="number">#51908b</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">li</span><span class="selector-class">.todolist-li</span> <span class="selector-tag">i</span>&#123;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">h3</span><span class="selector-class">.todolist-title</span>&#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span><span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="built_in">var</span>(--todo-border);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">li</span><span class="selector-class">.todolist-li</span>&#123;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="built_in">var</span>(--todo-border);</span><br><span class="line">    <span class="attribute">font-weight</span>: normal;</span><br><span class="line">    <span class="attribute">margin-left</span>: -<span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">li</span><span class="selector-class">.todolist-li-done</span>&#123;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="built_in">var</span>(--todo-border);</span><br><span class="line">    <span class="attribute">font-weight</span>: normal;</span><br><span class="line">    <span class="attribute">text-decoration</span>: line-through;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.todolist-li</span> <span class="selector-tag">span</span>&#123;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">5px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.todolist-li-done</span> <span class="selector-tag">span</span>&#123;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">5px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>:<span class="number">700px</span>)&#123;</span><br><span class="line">    <span class="selector-id">#todolist-left</span>,<span class="selector-id">#todolist-right</span>&#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* 手机端内容区域宽度设置，与banner保持一致 */</span></span><br><span class="line">    <span class="selector-id">#todolist-main</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">95%</span> <span class="meta">!important</span>;</span><br><span class="line">        <span class="attribute">margin</span>: <span class="number">20px</span> auto <span class="number">10px</span> <span class="meta">!important</span>; <span class="comment">/* 增加顶部间距为20px */</span></span><br><span class="line">        <span class="attribute">max-width</span>: <span class="number">95%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* 确保父容器不会影响宽度 */</span></span><br><span class="line">    <span class="selector-tag">body</span><span class="selector-attr">[data-type=<span class="string">&quot;todolist&quot;</span>]</span> <span class="selector-id">#page</span> &#123;</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">10px</span> <span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h3 id="第四步：修改主题文件">第四步：修改主题文件</h3><h4 id="4-1-添加页面类型支持">4.1 添加页面类型支持</h4><p>修改 <code>solitude-latest/node_modules/hexo-theme-solitude/layout/page.pug</code> 文件，在case语句中添加todolist支持：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">extends includes/layout.pug</span><br><span class="line"></span><br><span class="line">block content</span><br><span class="line">    main.layout#content-inner(class=page.aside ? &#x27;&#x27; : &#x27;hide-aside&#x27;)</span><br><span class="line">        #page</span><br><span class="line">            case page.type</span><br><span class="line">                when &#x27;categories&#x27;</span><br><span class="line">                    include includes/page/categories</span><br><span class="line">                when &#x27;tags&#x27;</span><br><span class="line">                    include includes/page/tags</span><br><span class="line">                when &#x27;links&#x27;</span><br><span class="line">                    include includes/page/links</span><br><span class="line">                when &#x27;about&#x27;</span><br><span class="line">                    include includes/page/about</span><br><span class="line">                when &#x27;brevity&#x27;</span><br><span class="line">                    include includes/page/brevity</span><br><span class="line">                when &#x27;kit&#x27;</span><br><span class="line">                    include includes/page/kit</span><br><span class="line">                when &#x27;music&#x27;</span><br><span class="line">                    include includes/page/music</span><br><span class="line">                when &#x27;game&#x27;</span><br><span class="line">                    include includes/page/game</span><br><span class="line">                when &#x27;collects&#x27;</span><br><span class="line">                    include includes/page/collects</span><br><span class="line">                when &#x27;musicsheets&#x27;</span><br><span class="line">                    include includes/page/musicsheets</span><br><span class="line">                when &#x27;album&#x27;</span><br><span class="line">                    include includes/page/album</span><br><span class="line">                when &#x27;nekko&#x27;</span><br><span class="line">                    include includes/page/nekko</span><br><span class="line">                when &#x27;todolist&#x27;</span><br><span class="line">                    include includes/page/todolist</span><br><span class="line">                when &#x27;message&#x27;</span><br><span class="line">                    !=partial(&#x27;includes/page/message&#x27;, &#123;&#125;, &#123;cache: true&#125;)</span><br><span class="line">                when &#x27;recentcomment&#x27;</span><br><span class="line">                    !=partial(&#x27;includes/page/recentcomment&#x27;, &#123;&#125;, &#123;cache: true&#125;)</span><br><span class="line">                when &#x27;banner&#x27;</span><br><span class="line">                    include includes/widgets/page/banner</span><br><span class="line">                    if page.container</span><br><span class="line">                        include includes/page/default</span><br><span class="line">                    else</span><br><span class="line">                        != page.content</span><br><span class="line">                default</span><br><span class="line">                    include includes/page/default</span><br><span class="line">            if page.comment</span><br><span class="line">                - var comment_js = true</span><br><span class="line">                include includes/widgets/third-party/comments/comment</span><br><span class="line">        if page.aside</span><br><span class="line">            include includes/widgets/aside/aside</span><br></pre></td></tr></table></figure><h4 id="4-2-引入CSS文件">4.2 引入CSS文件</h4><p>修改 <code>solitude-latest/node_modules/hexo-theme-solitude/source/css/index.styl</code> 文件，在适当位置添加：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@charset</span> <span class="string">&quot;UTF-8&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">hexo-config</span>(<span class="string">&#x27;css_prefix&#x27;</span>)</span><br><span class="line">  <span class="keyword">@import</span> <span class="string">&#x27;nib&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&quot;third_party/snackbar.min.css&quot;</span></span><br><span class="line"><span class="comment">// project</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&quot;var.styl&quot;</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_global/*&#x27;</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_layout/*&#x27;</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_page/index.styl&#x27;</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_post/index.styl&#x27;</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_page/game.styl&#x27;</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_page/collects.styl&#x27;</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_page/musicsheets.styl&#x27;</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_page/album.styl&#x27;</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;custom/todolist.css&#x27;</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_mode/*&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// highlight</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_highlight/index&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// search</span></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">hexo-config</span>(<span class="string">&#x27;search.enable&#x27;</span>)</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">hexo-config</span>(<span class="string">&#x27;search.type&#x27;</span>) == <span class="string">&#x27;algolia&#x27;</span></span><br><span class="line">    <span class="keyword">@import</span> <span class="string">&#x27;_search/algolia-search&#x27;</span></span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> <span class="built_in">hexo-config</span>(<span class="string">&#x27;search.type&#x27;</span>) == <span class="string">&#x27;local&#x27;</span></span><br><span class="line">    <span class="keyword">@import</span> <span class="string">&#x27;_search/local-search&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// tags plugin</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&quot;_tags/*&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// comment</span></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">hexo-config</span>(<span class="string">&#x27;comment.use&#x27;</span>)</span><br><span class="line">  <span class="keyword">@import</span> <span class="string">&#x27;_comments/comment.styl&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// components</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_components/index&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// album modal</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;album-modal.css&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="第五步：配置导航">第五步：配置导航</h3><h4 id="5-1-检查导航配置">5.1 检查导航配置</h4><p>确保 <code>solitude-latest/_config.solitude.yml</code> 中已包含想做的事的导航配置：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="comment"># 主菜单格式 → name: url</span></span><br><span class="line">  <span class="string">站点:</span> <span class="string">/navigate/</span></span><br><span class="line">  <span class="string">文章:</span></span><br><span class="line">    <span class="string">归档:</span> <span class="string">/archives/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-box-archive</span></span><br><span class="line">    <span class="string">分类:</span> <span class="string">/categories/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-clone</span></span><br><span class="line">    <span class="string">标签:</span> <span class="string">/tags/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-tags</span></span><br><span class="line">  <span class="comment"># 有子菜单不用绑定url</span></span><br><span class="line">  <span class="string">分享:</span> </span><br><span class="line">    <span class="comment"># 子菜单格式 →item name: link || icon (|| icon 为非必要选项)</span></span><br><span class="line">    <span class="string">音乐馆:</span> <span class="string">/music/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-music</span></span><br><span class="line">    <span class="string">电玩屋:</span> <span class="string">/game/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-gamepad</span></span><br><span class="line">    <span class="string">藏宝阁:</span> <span class="string">/collects/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-gift</span></span><br><span class="line">    <span class="string">乐谱坊:</span> <span class="string">/musicsheets/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-file-audio</span></span><br><span class="line">  <span class="string">我的:</span></span><br><span class="line">    <span class="string">相册集:</span> <span class="string">/album/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-image</span></span><br><span class="line">    <span class="string">碎碎念:</span> <span class="string">/tsukkomi/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-head-side-cough</span></span><br><span class="line">    <span class="string">猫の日:</span> <span class="string">/nekko/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-cake-candles</span></span><br><span class="line">  <span class="string">工具:</span></span><br><span class="line">    <span class="string">装备库:</span> <span class="string">/equipment/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-laptop</span></span><br><span class="line">    <span class="string">工具箱:</span> <span class="string">/tlink/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-toolbox</span></span><br><span class="line">  <span class="string">关于:</span></span><br><span class="line">    <span class="string">关于本人:</span> <span class="string">/about/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-address-card</span></span><br><span class="line">    <span class="string">想做的事:</span> <span class="string">/todolist/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-clipboard-list</span></span><br><span class="line">    <span class="string">本站日志:</span> <span class="string">/bloglog/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-book</span></span><br><span class="line">    <span class="string">留言板:</span> <span class="string">/comments/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-envelope</span></span><br><span class="line">    <span class="string">弹幕栏:</span> <span class="string">/message/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-envelope</span></span><br></pre></td></tr></table></figure><h3 id="第六步：测试和构建">第六步：测试和构建</h3><h4 id="6-1-构建项目">6.1 构建项目</h4><p>运行以下命令构建项目：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> solitude-latest</span><br><span class="line">npm run build</span><br></pre></td></tr></table></figure><h4 id="6-2-启动本地服务器">6.2 启动本地服务器</h4><p>运行以下命令启动本地服务器：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run server</span><br></pre></td></tr></table></figure><h4 id="6-3-访问页面">6.3 访问页面</h4><p>在浏览器中访问 <code>http://localhost:4000/todolist/</code> 查看页面效果。</p><h2 id="功能特点详解">功能特点详解</h2><h3 id="1-数据驱动设计">1. 数据驱动设计</h3><ul><li><strong>YAML配置</strong>：通过 <code>todolist.yml</code> 文件管理所有待办事项</li><li><strong>动态更新</strong>：无需修改代码，直接编辑配置文件即可更新内容</li><li><strong>分类管理</strong>：支持多个分类，每个分类独立管理</li></ul><h3 id="2-布局设计">2. 布局设计</h3><ul><li><strong>左右两栏</strong>：桌面端采用左右两栏布局，合理利用空间</li><li><strong>响应式</strong>：移动端自动切换为单栏布局</li><li><strong>卡片设计</strong>：每个分类采用卡片式设计，视觉效果更好</li></ul><h3 id="3-状态管理">3. 状态管理</h3><ul><li><strong>完成状态</strong>：支持标记已完成/未完成状态</li><li><strong>视觉反馈</strong>：已完成项目显示删除线效果</li><li><strong>图标区分</strong>：使用不同图标区分完成状态</li></ul><h3 id="4-主题适配">4. 主题适配</h3><ul><li><strong>浅色主题</strong>：粉色背景，温馨舒适</li><li><strong>深色主题</strong>：深灰背景，护眼舒适</li><li><strong>自动切换</strong>：跟随主题设置自动切换样式</li></ul><h3 id="5-Banner响应式设计">5. Banner响应式设计</h3><ul><li><strong>桌面端</strong>：19rem高度，与相册集页面保持一致</li><li><strong>移动端</strong>：150px高度，95%宽度，居中显示</li><li><strong>视频播放</strong>：支持Banner视频背景播放</li><li><strong>圆角设计</strong>：12px圆角，视觉效果更佳</li></ul><h3 id="6-移动端优化">6. 移动端优化</h3><ul><li><strong>宽度统一</strong>：banner和内容区域都是95%宽度</li><li><strong>间距优化</strong>：桌面端30px间距，移动端20px间距</li><li><strong>居中显示</strong>：移动端自动居中，视觉效果更好</li><li><strong>响应式布局</strong>：自动适配不同屏幕尺寸</li></ul><h3 id="7-交互体验">7. 交互体验</h3><ul><li><strong>悬停效果</strong>：鼠标悬停时的视觉反馈</li><li><strong>平滑过渡</strong>：CSS过渡动画，体验更流畅</li><li><strong>移动友好</strong>：触摸设备上的良好体验</li></ul><h2 id="自定义配置">自定义配置</h2><h3 id="1-修改数据内容">1. 修改数据内容</h3><p>编辑 <code>source/_data/todolist.yml</code> 文件：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">class_name:</span> <span class="string">你的分类名称</span></span><br><span class="line">  <span class="attr">seat:</span> <span class="string">left</span>  <span class="comment"># left或right</span></span><br><span class="line">  <span class="attr">todo_list:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">content:</span> <span class="string">你的待办事项</span></span><br><span class="line">      <span class="attr">completed:</span> <span class="literal">false</span>  <span class="comment"># true或false</span></span><br></pre></td></tr></table></figure><h3 id="2-修改页面信息">2. 修改页面信息</h3><p>编辑 <code>source/todolist/index.md</code> 文件：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">你的页面标题</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2024-11-17 04:51:15</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">todolist</span></span><br><span class="line"><span class="attr">cover:</span> <span class="string">/mp4/todolist-banner.mp4</span>  <span class="comment"># 你的视频文件</span></span><br><span class="line"><span class="attr">desc:</span> <span class="string">你的页面描述</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><h3 id="3-自定义样式">3. 自定义样式</h3><p>编辑 <code>node_modules/hexo-theme-solitude/source/css/custom/todolist.css</code> 文件：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 修改背景颜色 */</span></span><br><span class="line"><span class="selector-class">.todolist-item</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: #你的颜色;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 修改边框样式 */</span></span><br><span class="line"><span class="selector-class">.todolist-item</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">2px</span> dashed #你的颜色;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 修改字体大小 */</span></span><br><span class="line"><span class="selector-id">#todolist-main</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: 你的大小px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 修改间距 */</span></span><br><span class="line"><span class="selector-id">#todolist-main</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: 你的间距px <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="常见问题">常见问题</h2><h3 id="Q1-页面无法访问">Q1: 页面无法访问</h3><p><strong>A</strong>: 检查以下几点：</p><ol><li>确保 <code>page.pug</code> 中已添加todolist支持</li><li>确保页面文件路径正确</li><li>重新构建项目</li></ol><h3 id="Q2-样式不生效">Q2: 样式不生效</h3><p><strong>A</strong>: 检查以下几点：</p><ol><li>确保CSS文件路径正确</li><li>确保 <code>index.styl</code> 中已引入todolist.css</li><li>清除浏览器缓存</li></ol><h3 id="Q3-数据不显示">Q3: 数据不显示</h3><p><strong>A</strong>: 检查以下几点：</p><ol><li>确保YAML文件格式正确</li><li>确保文件路径为 <code>source/_data/todolist.yml</code></li><li>检查模板文件语法</li></ol><h3 id="Q4-移动端显示异常">Q4: 移动端显示异常</h3><p><strong>A</strong>: 检查以下几点：</p><ol><li>确保CSS中包含响应式媒体查询</li><li>测试不同屏幕尺寸</li><li>检查移动端样式是否正确</li></ol><h3 id="Q5-Banner视频不显示">Q5: Banner视频不显示</h3><p><strong>A</strong>: 检查以下几点：</p><ol><li>确保视频文件路径正确</li><li>确保视频文件格式为MP4</li><li>检查浏览器是否支持HTML5 video</li></ol><h2 id="扩展功能">扩展功能</h2><h3 id="1-添加动画效果">1. 添加动画效果</h3><p>可以在CSS中添加动画效果：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.todolist-item</span> &#123;</span><br><span class="line">    <span class="attribute">transition</span>: all <span class="number">0.3s</span> ease;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.todolist-item</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">2px</span>);</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">4px</span> <span class="number">8px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-添加交互功能">2. 添加交互功能</h3><p>可以通过JavaScript添加点击切换完成状态的功能：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.todolist-li&#x27;</span>).<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">    item.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">classList</span>.<span class="title function_">toggle</span>(<span class="string">&#x27;todolist-li-done&#x27;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="3-添加统计功能">3. 添加统计功能</h3><p>可以添加完成进度统计：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> totalItems = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.todolist-li, .todolist-li-done&#x27;</span>).<span class="property">length</span>;</span><br><span class="line"><span class="keyword">const</span> completedItems = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.todolist-li-done&#x27;</span>).<span class="property">length</span>;</span><br><span class="line"><span class="keyword">const</span> progress = (completedItems / totalItems * <span class="number">100</span>).<span class="title function_">toFixed</span>(<span class="number">1</span>);</span><br></pre></td></tr></table></figure><h2 id="总结">总结</h2><p>通过以上步骤，我们成功为Solitude主题添加了完整的想做的事功能。这个功能不仅提供了美观的待办事项展示界面，还具有良好的扩展性和维护性。用户可以根据自己的需求轻松添加和管理待办事项，展示个人的目标和计划。</p><h3 id="主要优势">主要优势</h3><ol><li><strong>数据驱动</strong>：通过YAML文件管理，易于维护</li><li><strong>响应式设计</strong>：适配各种设备</li><li><strong>主题适配</strong>：支持浅色/深色主题</li><li><strong>Banner视频</strong>：支持视频背景播放</li><li><strong>移动端优化</strong>：完美的移动端体验</li><li><strong>扩展性强</strong>：易于添加新功能</li><li><strong>用户体验好</strong>：界面美观，交互流畅</li></ol><h3 id="重要更新">重要更新</h3><ul><li><strong>Banner响应式设计</strong>：与相册集页面保持一致，移动端优化</li><li><strong>移动端宽度统一</strong>：banner和内容区域都是95%宽度</li><li><strong>间距优化</strong>：桌面端30px间距，移动端20px间距</li><li><strong>视觉一致性</strong>：与猫の日页面完全一致的banner样式</li></ul><p>这个功能为Solitude主题增添了独特的个人管理模块，丰富了博客的内容展示形式，提升了用户体验。用户可以通过这个页面展示自己的目标和计划，让博客更加个性化和实用。</p>]]></content>
      
      
      <categories>
          
          <category> 魔改教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 魔改教程 </tag>
            
            <tag> Solitude </tag>
            
            <tag> 页面移植 </tag>
            
            <tag> 想做的事 </tag>
            
            <tag> Todolist </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Solitude主题魔改教程(11)-猫の日页面</title>
      <link href="/2024/11/11/Solitude%E4%B8%BB%E9%A2%98%E9%AD%94%E6%94%B9%E6%95%99%E7%A8%8B(11)-%E7%8C%AB%E3%81%AE%E6%97%A5%E9%A1%B5%E9%9D%A2/"/>
      <url>/2024/11/11/Solitude%E4%B8%BB%E9%A2%98%E9%AD%94%E6%94%B9%E6%95%99%E7%A8%8B(11)-%E7%8C%AB%E3%81%AE%E6%97%A5%E9%A1%B5%E9%9D%A2/</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>在之前的魔改教程中，我们已经成功移植了相册集、电玩屋、藏宝阁、乐谱坊等多个页面功能。今天，我们将继续移植一个非常有趣的功能——<strong>猫の日</strong>页面。</p><p>这个页面主要用于记录宠物的纪念日，支持农历计算、多种显示模式（天数/周数/月数），并且包含精美的banner视频和可爱的宠物图标。让我们一起来看看如何完整移植这个功能。</p><h2 id="功能分析">功能分析</h2><h3 id="主要特性">主要特性</h3><ul><li>🎥 <strong>Banner视频播放</strong> - 可爱的猫咪视频背景</li><li>🐱 <strong>宠物纪念日卡片</strong> - 显示宠物信息和时间计算</li><li>📅 <strong>农历支持</strong> - 支持农历日期计算</li><li>🔄 <strong>多模式显示</strong> - 点击切换天数/周数/月数显示</li><li>📱 <strong>响应式设计</strong> - 适配不同设备屏幕</li><li>🎨 <strong>精美样式</strong> - 卡片悬停效果和动画</li></ul><h3 id="文件结构">文件结构</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">blog-solitude/</span><br><span class="line">├── source/</span><br><span class="line">│   ├── nekko/</span><br><span class="line">│   │   └── index.md                    # 页面文件</span><br><span class="line">│   └── _data/</span><br><span class="line">│       └── nekko.yml                   # 宠物数据</span><br><span class="line">├── themes/solitude/</span><br><span class="line">│   ├── layout/includes/page/</span><br><span class="line">│   │   └── nekko.pug                   # 页面模板</span><br><span class="line">│   ├── layout/includes/widgets/page/nekko/</span><br><span class="line">│   │   └── content.pug                 # 内容模板</span><br><span class="line">│   ├── source/css/custom/</span><br><span class="line">│   │   └── nekko.css                   # 样式文件</span><br><span class="line">│   └── source/js/custom/</span><br><span class="line">│       └── nekko.js                    # 脚本文件</span><br><span class="line">└── public/</span><br><span class="line">    ├── img/cats/</span><br><span class="line">    │   ├── miya-icon.png               # 宠物图标</span><br><span class="line">    │   └── mona-icon.png</span><br><span class="line">    └── mp4/</span><br><span class="line">        └── cats-banner.mp4             # Banner视频</span><br></pre></td></tr></table></figure><h2 id="移植步骤">移植步骤</h2><h3 id="1-创建页面文件">1. 创建页面文件</h3><p>首先创建nekko页面的markdown文件：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 猫の日</span><br><span class="line">date: 2024-11-18 13:04:37</span><br><span class="line">type: nekko</span><br><span class="line">cover: /mp4/cats-banner.mp4</span><br><span class="line"><span class="section">desc: 网上撸猫指日可待</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure><p><strong>文件路径：</strong> <code>solitude-latest/source/nekko/index.md</code></p><p><strong>注意：</strong> 移除了<code>container: true</code>设置，与相册集页面保持一致。</p><h3 id="2-创建数据文件">2. 创建数据文件</h3><p>创建宠物纪念日数据文件：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">class_name:</span> <span class="string">我的小鼻噶们</span></span><br><span class="line">  <span class="attr">class_desc:</span> <span class="string">&quot;宠物纪念日&quot;</span></span><br><span class="line">  <span class="attr">anniversaries:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">MIYA</span></span><br><span class="line">      <span class="attr">date:</span> <span class="string">&#x27;2023-01-11&#x27;</span></span><br><span class="line">      <span class="attr">icon:</span> <span class="string">&#x27;/img/cats/miya-icon.png&#x27;</span></span><br><span class="line">      <span class="attr">lunar:</span> <span class="literal">false</span></span><br><span class="line">      <span class="attr">color:</span> <span class="string">&#x27;#ffb3c6&#x27;</span></span><br><span class="line">      <span class="attr">display_mode:</span> <span class="string">&quot;elapsed&quot;</span></span><br><span class="line">      <span class="attr">show_copyright:</span> <span class="literal">false</span></span><br><span class="line">      <span class="attr">copyright_name:</span> <span class="string">&quot;喵喵纪念日&quot;</span></span><br><span class="line">      <span class="attr">copyright_link:</span> <span class="string">&quot;https://blog.bornforthis.cn/anniversary/&quot;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">MONA</span></span><br><span class="line">      <span class="attr">date:</span> <span class="string">&#x27;2023-02-12&#x27;</span></span><br><span class="line">      <span class="attr">icon:</span> <span class="string">&#x27;/img/cats/mona-icon.png&#x27;</span></span><br><span class="line">      <span class="attr">lunar:</span> <span class="literal">false</span></span><br><span class="line">      <span class="attr">color:</span> <span class="string">&#x27;#f1faee&#x27;</span></span><br><span class="line">      <span class="attr">display_mode:</span> <span class="string">&quot;elapsed&quot;</span></span><br><span class="line">      <span class="attr">show_copyright:</span> <span class="literal">false</span></span><br><span class="line">      <span class="attr">copyright_name:</span> <span class="string">&quot;喵喵纪念日&quot;</span></span><br><span class="line">      <span class="attr">copyright_link:</span> <span class="string">&quot;https://blog.bornforthis.cn/anniversary/&quot;</span></span><br></pre></td></tr></table></figure><p><strong>文件路径：</strong> <code>solitude-latest/source/_data/nekko.yml</code></p><h3 id="3-创建页面模板">3. 创建页面模板</h3><p>创建nekko页面模板：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">include ../widgets/page/banner</span><br><span class="line">include ../widgets/page/nekko/content</span><br></pre></td></tr></table></figure><p><strong>文件路径：</strong> <code>solitude-latest/node_modules/hexo-theme-solitude/layout/includes/page/nekko.pug</code></p><h3 id="4-创建内容模板">4. 创建内容模板</h3><p>创建nekko内容模板：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">#nekko-box</span><br><span class="line">    #nekko-main</span><br><span class="line">      each group in site.data.nekko</span><br><span class="line">        .nekko-group</span><br><span class="line">          .group-header</span><br><span class="line">            .group-title #&#123;group.class_name&#125; (#&#123;group.anniversaries.length&#125;)</span><br><span class="line">            .group-desc #&#123;group.class_desc&#125;</span><br><span class="line">          .nekko-cards</span><br><span class="line">            each item in group.anniversaries</span><br><span class="line">              .nekko-card(style=`background-color: $&#123;item.color&#125;`)</span><br><span class="line">                .card-content</span><br><span class="line">                  .card-header(style=&quot;justify-content: center;&quot;)</span><br><span class="line">                    if item.icon</span><br><span class="line">                      img.card-icon(src=item.icon alt=&quot;icon&quot;)</span><br><span class="line">                    .card-title #&#123;item.name&#125;</span><br><span class="line">                  .card-body(style=&quot;background-color: white; padding: 20px; text-align: center;&quot;)</span><br><span class="line">                    .countdown-wrapper</span><br><span class="line">                      span.countdown(data-date=item.date data-lunar=item.lunar data-display-mode=item.display_mode) 计算中...</span><br><span class="line">                      .days-label 天后</span><br><span class="line">                  .card-footer</span><br><span class="line">                    .dashed-line(style=&quot;border-top: 1px dashed #ccc; margin: 10px 0;&quot;)</span><br><span class="line">                    .target-info </span><br><span class="line">                      if item.display_mode === &#x27;elapsed&#x27;</span><br><span class="line">                        span.target-label - 诞生日 -</span><br><span class="line">                      else</span><br><span class="line">                        span.target-label - 目标日 -</span><br><span class="line">                      br</span><br><span class="line">                      span.target-date(data-date=item.date data-lunar=item.lunar data-display-mode=item.display_mode) 计算中...</span><br><span class="line"></span><br><span class="line">                if item.show_copyright</span><br><span class="line">                  - let copyrightName = item.copyright_name ? item.copyright_name : &#x27;喵喵纪念日&#x27;</span><br><span class="line">                  - let copyrightLink = item.copyright_link ? item.copyright_link : &#x27;https://blog.bornforthis.cn/posts/41c7c45e.html&#x27;</span><br><span class="line">                  .card-copyright</span><br><span class="line">                    | 版权所有 © #&#123;item.name&#125;</span><br><span class="line">                    a(href=copyrightLink target=&quot;_blank&quot;) #&#123;copyrightName&#125;</span><br></pre></td></tr></table></figure><p><strong>文件路径：</strong> <code>solitude-latest/node_modules/hexo-theme-solitude/layout/includes/widgets/page/nekko/content.pug</code></p><h3 id="5-修改主题布局">5. 修改主题布局</h3><p>在page.pug中添加nekko类型支持：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">when &#x27;nekko&#x27;</span><br><span class="line">    include includes/page/nekko</span><br></pre></td></tr></table></figure><p><strong>文件路径：</strong> <code>solitude-latest/node_modules/hexo-theme-solitude/layout/page.pug</code></p><h3 id="6-创建样式文件">6. 创建样式文件</h3><p>创建nekko的CSS样式文件：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 背景与页面基本样式 */</span></span><br><span class="line"><span class="selector-tag">body</span><span class="selector-attr">[data-type=<span class="string">&quot;nekko&quot;</span>]</span> <span class="selector-id">#web_bg</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--anzhiyu-background);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span><span class="selector-attr">[data-type=<span class="string">&quot;nekko&quot;</span>]</span> <span class="selector-id">#page</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">0</span>;</span><br><span class="line">    -webkit-<span class="attribute">box-shadow</span>: none <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: none <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">0</span> <span class="number">0</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span><span class="selector-attr">[data-type=<span class="string">&quot;nekko&quot;</span>]</span> <span class="selector-id">#page</span> <span class="selector-class">.page-title</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Banner响应式高度设置 */</span></span><br><span class="line"><span class="selector-tag">body</span><span class="selector-attr">[data-type=<span class="string">&quot;nekko&quot;</span>]</span> <span class="selector-class">.author-content</span><span class="selector-class">.author-content-item</span><span class="selector-class">.sharePage</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">19rem</span>; <span class="comment">/* 与相册集保持一致 */</span></span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>; <span class="comment">/* 移除边距，与相册集保持一致 */</span></span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">12px</span>; <span class="comment">/* 恢复圆角，与相册集保持一致 */</span></span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 移动端banner设置 */</span></span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">max-width</span>: <span class="number">768px</span>) &#123;</span><br><span class="line">    <span class="selector-tag">body</span><span class="selector-attr">[data-type=<span class="string">&quot;nekko&quot;</span>]</span> <span class="selector-class">.author-content</span><span class="selector-class">.author-content-item</span><span class="selector-class">.sharePage</span> &#123;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">150px</span> <span class="meta">!important</span>; <span class="comment">/* 手机端高度 */</span></span><br><span class="line">        <span class="attribute">width</span>: <span class="number">95%</span> <span class="meta">!important</span>; <span class="comment">/* 手机端宽度 */</span></span><br><span class="line">        <span class="attribute">margin</span>: <span class="number">0</span> auto <span class="meta">!important</span>; <span class="comment">/* 居中显示 */</span></span><br><span class="line">        <span class="attribute">border-radius</span>: <span class="number">12px</span>; <span class="comment">/* 保持圆角 */</span></span><br><span class="line">        <span class="attribute">overflow</span>: hidden;</span><br><span class="line">        <span class="attribute">max-width</span>: <span class="number">95%</span>; <span class="comment">/* 确保最大宽度不超过95% */</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* 确保父容器不会影响宽度 */</span></span><br><span class="line">    <span class="selector-tag">body</span><span class="selector-attr">[data-type=<span class="string">&quot;nekko&quot;</span>]</span> <span class="selector-id">#page</span> &#123;</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">10px</span> <span class="meta">!important</span>; <span class="comment">/* 添加左右内边距 */</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="selector-tag">body</span><span class="selector-attr">[data-type=<span class="string">&quot;nekko&quot;</span>]</span> <span class="selector-class">.author-content-item</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">95%</span> <span class="meta">!important</span>; <span class="comment">/* 确保内容区域也是95%宽度 */</span></span><br><span class="line">        <span class="attribute">margin</span>: <span class="number">0</span> auto <span class="meta">!important</span>; <span class="comment">/* 居中显示 */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 卡片整体布局 */</span></span><br><span class="line"><span class="selector-class">.nekko-cards</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: grid;</span><br><span class="line">    <span class="attribute">grid-template-columns</span>: <span class="built_in">repeat</span>(auto-fill, <span class="built_in">minmax</span>(<span class="number">250px</span>, <span class="number">1</span>fr)); <span class="comment">/* 响应式布局 */</span></span><br><span class="line">    <span class="attribute">gap</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 卡片样式 */</span></span><br><span class="line"><span class="selector-class">.nekko-card</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#f9f9f9</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0px</span> <span class="number">4px</span> <span class="number">6px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>);</span><br><span class="line">    <span class="attribute">transition</span>: transform <span class="number">0.3s</span> ease-in-out, box-shadow <span class="number">0.3s</span> ease-in-out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.nekko-card</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">10px</span>);</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0px</span> <span class="number">10px</span> <span class="number">20px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 卡片标题和图标水平居中对齐的样式 */</span></span><br><span class="line"><span class="selector-class">.card-header</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">justify-content</span>: center; <span class="comment">/* 水平居中 */</span></span><br><span class="line">    <span class="attribute">align-items</span>: center; <span class="comment">/* 垂直居中 */</span></span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.card-title</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">1.5rem</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: bold;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#333</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center; <span class="comment">/* 文本居中 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.card-icon</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">54px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">54px</span>;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">10px</span>; <span class="comment">/* 图标与标题之间的间距 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 白色背景的中间部分 */</span></span><br><span class="line"><span class="selector-class">.card-body</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: white;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#333</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 剩余天数与&quot;天后&quot;的样式 */</span></span><br><span class="line"><span class="selector-class">.countdown-wrapper</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">3rem</span>; <span class="comment">/* 设置数字大小 */</span></span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#6b4226</span>; <span class="comment">/* 设置数字的颜色 */</span></span><br><span class="line">    <span class="attribute">font-weight</span>: bold;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.days-label</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: -<span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">right</span>: -<span class="number">45px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#36c5b2</span>;</span><br><span class="line">    <span class="attribute">color</span>: white;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">3px</span> <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">1rem</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: normal;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 目标日样式 */</span></span><br><span class="line"><span class="selector-class">.target-info</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">1rem</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: normal;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.target-label</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>; <span class="comment">/* 去掉额外的边距 */</span></span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">1rem</span>;</span><br><span class="line">    <span class="attribute">letter-spacing</span>: <span class="number">2px</span>; <span class="comment">/* 保持文字间距 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.target-date</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block; <span class="comment">/* 改为inline-block，直接与目标日标签对齐 */</span></span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">1rem</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#333</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>; <span class="comment">/* 去掉所有的上下边距 */</span></span><br><span class="line">    <span class="attribute">font-weight</span>: normal; <span class="comment">/* 去掉加粗效果 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 虚线样式 */</span></span><br><span class="line"><span class="selector-class">.dashed-line</span> &#123;</span><br><span class="line">    <span class="attribute">border-top</span>: <span class="number">1px</span> dashed <span class="number">#ccc</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 目标日期与已经过去的天数信息 */</span></span><br><span class="line"><span class="selector-class">.target-info</span>, <span class="selector-class">.total-days-info</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">1rem</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">5px</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#555</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 响应式布局优化，适配不同设备 */</span></span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">max-width</span>: <span class="number">768px</span>) &#123;</span><br><span class="line">    <span class="selector-class">.nekko-cards</span> &#123;</span><br><span class="line">        <span class="attribute">grid-template-columns</span>: <span class="number">1</span>fr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.nekko-card</span> &#123;</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">15px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.card-title</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">1.2rem</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 动画效果 */</span></span><br><span class="line"><span class="selector-class">.nekko-card</span> &#123;</span><br><span class="line">    <span class="attribute">transition</span>: all <span class="number">0.3s</span> ease-in-out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.nekko-card</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.05</span>);</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">6px</span> <span class="number">20px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.15</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 版权信息的样式 */</span></span><br><span class="line"><span class="selector-class">.card-copyright</span> &#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">0.85rem</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#777</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: right;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.card-copyright</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#007bff</span>;</span><br><span class="line">    <span class="attribute">text-decoration</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.card-copyright</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">text-decoration</span>: underline;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 分组标题和描述样式 */</span></span><br><span class="line"><span class="selector-class">.nekko-group</span> &#123;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">40px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.group-header</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: left; <span class="comment">/* 将文本左对齐 */</span></span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.group-title</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">1.5rem</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: bold;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: left; <span class="comment">/* 分组标题左对齐 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.group-desc</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">1rem</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#666</span>;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: left; <span class="comment">/* 分组描述左对齐 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>文件路径：</strong> <code>solitude-latest/node_modules/hexo-theme-solitude/source/css/custom/nekko.css</code></p><p><strong>重要更新：</strong></p><ul><li>添加了Banner响应式设置，与相册集页面保持一致</li><li>移动端banner高度为150px，宽度为95%</li><li>桌面端banner高度为19rem，与相册集一致</li></ul><h3 id="7-创建脚本文件">7. 创建脚本文件</h3><p>创建nekko的JavaScript文件：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// nekko.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">initializenekko</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">LunarDate</span>(<span class="params">Year, Month, Day</span>) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> solar = <span class="title class_">Lunar</span>.<span class="title function_">fromYmdHms</span>(<span class="title class_">Year</span>, <span class="title class_">Month</span>, <span class="title class_">Day</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>).<span class="title function_">getSolar</span>();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Date</span>(solar.<span class="title function_">getYear</span>(), solar.<span class="title function_">getMonth</span>() - <span class="number">1</span>, solar.<span class="title function_">getDay</span>());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="title class_">LunarDate</span>(<span class="title class_">Year</span>, <span class="title class_">Month</span>, <span class="title class_">Day</span> - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 计算两个日期之间的天数差</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">daysBetween</span>(<span class="params">date1, date2</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> oneDay = <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">floor</span>((date2 - date1) / oneDay);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 计算两个日期之间的周数和天数差</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">weeksAndDaysBetween</span>(<span class="params">date1, date2</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> totalDays = <span class="title function_">daysBetween</span>(date1, date2);</span><br><span class="line">        <span class="keyword">const</span> weeks = <span class="title class_">Math</span>.<span class="title function_">floor</span>(totalDays / <span class="number">7</span>);</span><br><span class="line">        <span class="keyword">const</span> days = totalDays % <span class="number">7</span>;</span><br><span class="line">        <span class="keyword">return</span> &#123; weeks, days &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 计算两个日期之间的月数和天数差</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">monthsAndDaysBetween</span>(<span class="params">date1, date2</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> years = date2.<span class="title function_">getFullYear</span>() - date1.<span class="title function_">getFullYear</span>();</span><br><span class="line">        <span class="keyword">let</span> months = date2.<span class="title function_">getMonth</span>() - date1.<span class="title function_">getMonth</span>() + years * <span class="number">12</span>;</span><br><span class="line">        <span class="keyword">let</span> days = date2.<span class="title function_">getDate</span>() - date1.<span class="title function_">getDate</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (days &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            months -= <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">let</span> previousMonth = <span class="keyword">new</span> <span class="title class_">Date</span>(date2.<span class="title function_">getFullYear</span>(), date2.<span class="title function_">getMonth</span>(), <span class="number">0</span>);</span><br><span class="line">            days += previousMonth.<span class="title function_">getDate</span>();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> &#123; months, days &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 剩余天数</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">daysLeft</span>(<span class="params">dateStr, isLunar</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> [<span class="title class_">Year</span>, <span class="title class_">Month</span>, <span class="title class_">Day</span>] = dateStr.<span class="title function_">split</span>(<span class="string">&quot;-&quot;</span>).<span class="title function_">map</span>(<span class="title class_">Number</span>);</span><br><span class="line">        <span class="keyword">let</span> now = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">        now = <span class="keyword">new</span> <span class="title class_">Date</span>(now.<span class="title function_">getFullYear</span>(), now.<span class="title function_">getMonth</span>(), now.<span class="title function_">getDate</span>());</span><br><span class="line">        <span class="keyword">let</span> nekkoDate;</span><br><span class="line">        <span class="keyword">if</span> (isLunar) &#123;</span><br><span class="line">            nekkoDate = <span class="title class_">LunarDate</span>(now.<span class="title function_">getFullYear</span>(), <span class="title class_">Month</span>, <span class="title class_">Day</span>);</span><br><span class="line">            <span class="keyword">if</span> (nekkoDate &lt; now) &#123;</span><br><span class="line">                nekkoDate = <span class="title class_">LunarDate</span>(now.<span class="title function_">getFullYear</span>() + <span class="number">1</span>, <span class="title class_">Month</span>, <span class="title class_">Day</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            nekkoDate = <span class="keyword">new</span> <span class="title class_">Date</span>(now.<span class="title function_">getFullYear</span>(), <span class="title class_">Month</span> - <span class="number">1</span>, <span class="title class_">Day</span>);</span><br><span class="line">            <span class="keyword">if</span> (nekkoDate &lt; now) &#123;</span><br><span class="line">                nekkoDate = <span class="keyword">new</span> <span class="title class_">Date</span>(now.<span class="title function_">getFullYear</span>() + <span class="number">1</span>, <span class="title class_">Month</span> - <span class="number">1</span>, <span class="title class_">Day</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">daysBetween</span>(now, nekkoDate);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 经过天数</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">totalDays</span>(<span class="params">dateStr, isLunar</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> [<span class="title class_">Year</span>, <span class="title class_">Month</span>, <span class="title class_">Day</span>] = dateStr.<span class="title function_">split</span>(<span class="string">&quot;-&quot;</span>).<span class="title function_">map</span>(<span class="title class_">Number</span>);</span><br><span class="line">        <span class="keyword">let</span> now = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">        now = <span class="keyword">new</span> <span class="title class_">Date</span>(now.<span class="title function_">getFullYear</span>(), now.<span class="title function_">getMonth</span>(), now.<span class="title function_">getDate</span>());</span><br><span class="line">        <span class="keyword">let</span> startDate;</span><br><span class="line">        <span class="keyword">if</span> (isLunar) &#123;</span><br><span class="line">            startDate = <span class="title class_">LunarDate</span>(<span class="title class_">Year</span>, <span class="title class_">Month</span>, <span class="title class_">Day</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            startDate = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="title class_">Year</span>, <span class="title class_">Month</span> - <span class="number">1</span>, <span class="title class_">Day</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">daysBetween</span>(startDate, now);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 返回目标或起始日期以及星期几</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">targetDate</span>(<span class="params">dateStr, isLunar</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> [<span class="title class_">Year</span>, <span class="title class_">Month</span>, <span class="title class_">Day</span>] = dateStr.<span class="title function_">split</span>(<span class="string">&quot;-&quot;</span>).<span class="title function_">map</span>(<span class="title class_">Number</span>);</span><br><span class="line">        <span class="keyword">let</span> now = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">        now = <span class="keyword">new</span> <span class="title class_">Date</span>(now.<span class="title function_">getFullYear</span>(), now.<span class="title function_">getMonth</span>(), now.<span class="title function_">getDate</span>());</span><br><span class="line">        <span class="keyword">let</span> nekkoDate;</span><br><span class="line">        <span class="keyword">if</span> (isLunar) &#123;</span><br><span class="line">            nekkoDate = <span class="title class_">LunarDate</span>(now.<span class="title function_">getFullYear</span>(), <span class="title class_">Month</span>, <span class="title class_">Day</span>);</span><br><span class="line">            <span class="keyword">if</span> (nekkoDate &lt; now) &#123;</span><br><span class="line">                nekkoDate = <span class="title class_">LunarDate</span>(now.<span class="title function_">getFullYear</span>() + <span class="number">1</span>, <span class="title class_">Month</span>, <span class="title class_">Day</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            nekkoDate = <span class="keyword">new</span> <span class="title class_">Date</span>(now.<span class="title function_">getFullYear</span>(), <span class="title class_">Month</span> - <span class="number">1</span>, <span class="title class_">Day</span>);</span><br><span class="line">            <span class="keyword">if</span> (nekkoDate &lt; now) &#123;</span><br><span class="line">                nekkoDate = <span class="keyword">new</span> <span class="title class_">Date</span>(now.<span class="title function_">getFullYear</span>() + <span class="number">1</span>, <span class="title class_">Month</span> - <span class="number">1</span>, <span class="title class_">Day</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">const</span> weekDay = nekkoDate.<span class="title function_">toLocaleDateString</span>(<span class="string">&#x27;zh-CN&#x27;</span>, &#123; <span class="attr">weekday</span>: <span class="string">&#x27;long&#x27;</span> &#125;);</span><br><span class="line">        <span class="keyword">const</span> year = nekkoDate.<span class="title function_">getFullYear</span>();</span><br><span class="line">        <span class="keyword">const</span> month = (nekkoDate.<span class="title function_">getMonth</span>() + <span class="number">1</span>).<span class="title function_">toString</span>().<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">        <span class="keyword">const</span> day = nekkoDate.<span class="title function_">getDate</span>().<span class="title function_">toString</span>().<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;year&#125;</span>-<span class="subst">$&#123;month&#125;</span>-<span class="subst">$&#123;day&#125;</span> (<span class="subst">$&#123;weekDay&#125;</span>)`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 返回目标或起始日期（根据 displayMode）</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">targetOrStartDate</span>(<span class="params">dateStr, isLunar, displayMode</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (displayMode === <span class="string">&quot;elapsed&quot;</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> dateStr;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="title function_">targetDate</span>(dateStr, isLunar);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> countdownElements = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;.countdown&quot;</span>);</span><br><span class="line"></span><br><span class="line">    countdownElements.<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">elem</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> dateStr = elem.<span class="title function_">getAttribute</span>(<span class="string">&quot;data-date&quot;</span>);</span><br><span class="line">        <span class="keyword">const</span> isLunar = elem.<span class="title function_">hasAttribute</span>(<span class="string">&quot;data-lunar&quot;</span>);</span><br><span class="line">        <span class="keyword">const</span> displayMode = elem.<span class="title function_">getAttribute</span>(<span class="string">&quot;data-display-mode&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (displayMode === <span class="string">&quot;elapsed&quot;</span>) &#123;</span><br><span class="line">            elem.<span class="property">dataset</span>.<span class="property">displayState</span> = <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">            <span class="title function_">updateElapsedDisplay</span>(elem, dateStr, isLunar, <span class="number">0</span>);</span><br><span class="line">            elem.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                <span class="keyword">let</span> currentState = <span class="built_in">parseInt</span>(elem.<span class="property">dataset</span>.<span class="property">displayState</span>);</span><br><span class="line">                currentState = (currentState + <span class="number">1</span>) % <span class="number">3</span>;</span><br><span class="line">                elem.<span class="property">dataset</span>.<span class="property">displayState</span> = currentState.<span class="title function_">toString</span>();</span><br><span class="line">                <span class="title function_">updateElapsedDisplay</span>(elem, dateStr, isLunar, currentState);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> daysText = <span class="title function_">daysLeft</span>(dateStr, isLunar);</span><br><span class="line">            elem.<span class="property">textContent</span> = daysText;</span><br><span class="line">            elem.<span class="property">nextElementSibling</span>.<span class="property">textContent</span> = <span class="string">&quot;天后&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 更新elapsed模式下的显示内容</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">updateElapsedDisplay</span>(<span class="params">elem, dateStr, isLunar, displayState</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (displayState === <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> days = <span class="title function_">totalDays</span>(dateStr, isLunar);</span><br><span class="line">            elem.<span class="property">textContent</span> = days;</span><br><span class="line">            elem.<span class="property">nextElementSibling</span>.<span class="property">textContent</span> = <span class="string">&quot;天了&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (displayState === <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> [<span class="title class_">Year</span>, <span class="title class_">Month</span>, <span class="title class_">Day</span>] = dateStr.<span class="title function_">split</span>(<span class="string">&quot;-&quot;</span>).<span class="title function_">map</span>(<span class="title class_">Number</span>);</span><br><span class="line">            <span class="keyword">let</span> now = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">            now = <span class="keyword">new</span> <span class="title class_">Date</span>(now.<span class="title function_">getFullYear</span>(), now.<span class="title function_">getMonth</span>(), now.<span class="title function_">getDate</span>());</span><br><span class="line">            <span class="keyword">let</span> startDate;</span><br><span class="line">            <span class="keyword">if</span> (isLunar) &#123;</span><br><span class="line">                startDate = <span class="title class_">LunarDate</span>(<span class="title class_">Year</span>, <span class="title class_">Month</span>, <span class="title class_">Day</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                startDate = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="title class_">Year</span>, <span class="title class_">Month</span> - <span class="number">1</span>, <span class="title class_">Day</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">let</span> &#123; weeks, days &#125; = <span class="title function_">weeksAndDaysBetween</span>(startDate, now);</span><br><span class="line">            <span class="keyword">if</span> (days === <span class="number">0</span>) &#123;</span><br><span class="line">                elem.<span class="property">textContent</span> = weeks;</span><br><span class="line">                elem.<span class="property">nextElementSibling</span>.<span class="property">textContent</span> = <span class="string">&quot;周了&quot;</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                elem.<span class="property">textContent</span> = <span class="string">`<span class="subst">$&#123;weeks&#125;</span>周<span class="subst">$&#123;days&#125;</span>天`</span>;</span><br><span class="line">                elem.<span class="property">nextElementSibling</span>.<span class="property">textContent</span> = <span class="string">&quot;了&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (displayState === <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> [<span class="title class_">Year</span>, <span class="title class_">Month</span>, <span class="title class_">Day</span>] = dateStr.<span class="title function_">split</span>(<span class="string">&quot;-&quot;</span>).<span class="title function_">map</span>(<span class="title class_">Number</span>);</span><br><span class="line">            <span class="keyword">let</span> now = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">            now = <span class="keyword">new</span> <span class="title class_">Date</span>(now.<span class="title function_">getFullYear</span>(), now.<span class="title function_">getMonth</span>(), now.<span class="title function_">getDate</span>());</span><br><span class="line">            <span class="keyword">let</span> startDate;</span><br><span class="line">            <span class="keyword">if</span> (isLunar) &#123;</span><br><span class="line">                startDate = <span class="title class_">LunarDate</span>(<span class="title class_">Year</span>, <span class="title class_">Month</span>, <span class="title class_">Day</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                startDate = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="title class_">Year</span>, <span class="title class_">Month</span> - <span class="number">1</span>, <span class="title class_">Day</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">let</span> &#123; months, days &#125; = <span class="title function_">monthsAndDaysBetween</span>(startDate, now);</span><br><span class="line">            elem.<span class="property">textContent</span> = <span class="string">`<span class="subst">$&#123;months&#125;</span>月<span class="subst">$&#123;days&#125;</span>天`</span>;</span><br><span class="line">            elem.<span class="property">nextElementSibling</span>.<span class="property">textContent</span> = <span class="string">&quot;了&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 显示目标或起始日期</span></span><br><span class="line">    <span class="keyword">const</span> targetDateElements = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;.target-date&quot;</span>);</span><br><span class="line">    targetDateElements.<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">elem</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> dateStr = elem.<span class="title function_">getAttribute</span>(<span class="string">&quot;data-date&quot;</span>);</span><br><span class="line">        <span class="keyword">const</span> isLunar = elem.<span class="title function_">hasAttribute</span>(<span class="string">&quot;data-lunar&quot;</span>);</span><br><span class="line">        <span class="keyword">const</span> displayMode = elem.<span class="title function_">getAttribute</span>(<span class="string">&quot;data-display-mode&quot;</span>);</span><br><span class="line">        elem.<span class="property">textContent</span> = <span class="title function_">targetOrStartDate</span>(dateStr, isLunar, displayMode);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 初始页面加载</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;DOMContentLoaded&quot;</span>, initializenekko);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 适配 pjax</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;pjax:complete&quot;</span>, initializenekko);</span><br></pre></td></tr></table></figure><p><strong>文件路径：</strong> <code>solitude-latest/node_modules/hexo-theme-solitude/source/js/custom/nekko.js</code></p><h3 id="8-修改配置文件">8. 修改配置文件</h3><p>在<code>_config.solitude.yml</code>中添加CSS和JS引用：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">extends:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">    <span class="comment"># 喵喵纪念日</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/custom/nekko.css&quot;&gt;</span></span><br><span class="line">  <span class="attr">body:</span></span><br><span class="line">    <span class="comment"># 喵喵纪念日</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">src=&quot;/js/custom/nekko.js&quot;&gt;&lt;/script&gt;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">src=&quot;https://cdnjs.cloudflare.com/ajax/libs/lunar-javascript/1.6.12/lunar.js&quot;&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure><h3 id="9-复制资源文件">9. 复制资源文件</h3><p>复制宠物图标和视频文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建目录</span></span><br><span class="line"><span class="built_in">mkdir</span> -p solitude-latest/public/img/cats</span><br><span class="line"></span><br><span class="line"><span class="comment"># 复制图标文件（从solitude-latest-huai目录）</span></span><br><span class="line"><span class="built_in">cp</span> solitude-latest-huai/public/img/cats/*.png solitude-latest/public/img/cats/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 复制视频文件</span></span><br><span class="line"><span class="built_in">cp</span> solitude-latest-huai/public/mp4/cats-banner.mp4 solitude-latest/public/mp4/</span><br></pre></td></tr></table></figure><p><strong>注意：</strong> 所有文件都可以从solitude-latest-huai目录复制，无需从原始blog-solitude项目获取。</p><h2 id="功能特点详解">功能特点详解</h2><h3 id="1-Banner视频播放">1. Banner视频播放</h3><ul><li>使用HTML5 video标签实现自动播放</li><li>支持静音、循环播放、内联播放</li><li>响应式设计，适配不同屏幕尺寸</li></ul><h3 id="2-Banner响应式设置">2. Banner响应式设置</h3><ul><li><strong>桌面端</strong>：高度19rem，宽度100%，与相册集页面保持一致</li><li><strong>移动端</strong>：高度150px，宽度95%，居中显示，左右各有2.5%边距</li><li><strong>圆角效果</strong>：12px圆角，保持美观</li><li><strong>自动居中</strong>：移动端使用<code>margin: 0 auto</code>确保居中显示</li></ul><h3 id="3-宠物纪念日卡片">3. 宠物纪念日卡片</h3><ul><li>网格布局，响应式设计</li><li>悬停动画效果</li><li>支持自定义颜色和图标</li><li>显示宠物名称和纪念日信息</li></ul><h3 id="4-时间计算功能">4. 时间计算功能</h3><ul><li><strong>天数模式</strong>：显示已经过去的天数</li><li><strong>周数模式</strong>：显示已经过去的周数和天数</li><li><strong>月数模式</strong>：显示已经过去的月数和天数</li><li>点击卡片可切换显示模式</li></ul><h3 id="5-农历支持">5. 农历支持</h3><ul><li>使用lunar-javascript库进行农历计算</li><li>支持农历日期转换</li><li>自动处理农历日期边界情况</li></ul><h3 id="6-响应式设计">6. 响应式设计</h3><ul><li>移动端优化</li><li>卡片布局自适应</li><li>字体大小和间距调整</li></ul><h2 id="与相册集页面的一致性">与相册集页面的一致性</h2><p>为了保持页面风格的一致性，猫の日页面的banner设置与相册集页面完全一致：</p><h3 id="Banner设置对比">Banner设置对比</h3><table><thead><tr><th>设置项</th><th>相册集页面</th><th>猫の日页面</th><th>说明</th></tr></thead><tbody><tr><td>页面类型</td><td><code>type: album</code></td><td><code>type: nekko</code></td><td>不同的页面类型</td></tr><tr><td>Banner视频</td><td><code>/mp4/album-banner.mp4</code></td><td><code>/mp4/cats-banner.mp4</code></td><td>不同的视频文件</td></tr><tr><td>桌面端高度</td><td>19rem</td><td>19rem</td><td>完全一致</td></tr><tr><td>桌面端宽度</td><td>100%</td><td>100%</td><td>完全一致</td></tr><tr><td>桌面端圆角</td><td>12px</td><td>12px</td><td>完全一致</td></tr><tr><td>移动端高度</td><td>150px</td><td>150px</td><td>完全一致</td></tr><tr><td>移动端宽度</td><td>95%</td><td>95%</td><td>完全一致</td></tr><tr><td>移动端居中</td><td>是</td><td>是</td><td>完全一致</td></tr></tbody></table><h3 id="模板结构对比">模板结构对比</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// 相册集页面模板</span><br><span class="line">include ../widgets/page/banner</span><br><span class="line">include ../widgets/page/album/content</span><br><span class="line"></span><br><span class="line">// 猫の日页面模板</span><br><span class="line">include ../widgets/page/banner</span><br><span class="line">include ../widgets/page/nekko/content</span><br></pre></td></tr></table></figure><p>两个页面都使用相同的banner模板，确保视觉效果的一致性。</p><h2 id="配置说明">配置说明</h2><h3 id="nekko-yml-数据结构">nekko.yml 数据结构</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">class_name:</span> <span class="string">&quot;分组名称&quot;</span>           <span class="comment"># 分组标题</span></span><br><span class="line">  <span class="attr">class_desc:</span> <span class="string">&quot;分组描述&quot;</span>           <span class="comment"># 分组说明</span></span><br><span class="line">  <span class="attr">anniversaries:</span>                   <span class="comment"># 纪念日列表</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">&quot;宠物名称&quot;</span>             <span class="comment"># 宠物名字</span></span><br><span class="line">      <span class="attr">date:</span> <span class="string">&#x27;YYYY-MM-DD&#x27;</span>          <span class="comment"># 纪念日日期</span></span><br><span class="line">      <span class="attr">icon:</span> <span class="string">&#x27;/path/to/icon.png&#x27;</span>   <span class="comment"># 宠物图标</span></span><br><span class="line">      <span class="attr">lunar:</span> <span class="literal">false</span>                <span class="comment"># 是否农历日期</span></span><br><span class="line">      <span class="attr">color:</span> <span class="string">&#x27;#colorcode&#x27;</span>         <span class="comment"># 卡片背景色</span></span><br><span class="line">      <span class="attr">display_mode:</span> <span class="string">&quot;elapsed&quot;</span>     <span class="comment"># 显示模式</span></span><br><span class="line">      <span class="attr">show_copyright:</span> <span class="literal">false</span>       <span class="comment"># 是否显示版权</span></span><br><span class="line">      <span class="attr">copyright_name:</span> <span class="string">&quot;版权名称&quot;</span>   <span class="comment"># 版权信息</span></span><br><span class="line">      <span class="attr">copyright_link:</span> <span class="string">&quot;版权链接&quot;</span>   <span class="comment"># 版权链接</span></span><br></pre></td></tr></table></figure><h3 id="显示模式说明">显示模式说明</h3><ul><li><code>elapsed</code>：显示已经过去的时间</li><li><code>countdown</code>：显示剩余时间（未实现）</li></ul><h3 id="农历计算">农历计算</h3><ul><li><code>lunar: true</code>：使用农历日期</li><li><code>lunar: false</code>：使用公历日期</li></ul><h2 id="常见问题解决">常见问题解决</h2><h3 id="1-Banner视频不显示">1. Banner视频不显示</h3><ul><li>检查视频文件路径是否正确</li><li>确保视频文件格式为MP4</li><li>检查浏览器是否支持HTML5 video</li></ul><h3 id="2-宠物图标不显示">2. 宠物图标不显示</h3><ul><li>检查图标文件是否存在</li><li>确认文件路径正确</li><li>检查文件权限</li></ul><h3 id="3-时间计算错误">3. 时间计算错误</h3><ul><li>检查lunar-javascript库是否正确加载</li><li>确认日期格式为YYYY-MM-DD</li><li>检查农历日期设置是否正确</li></ul><h3 id="4-样式不生效">4. 样式不生效</h3><ul><li>检查CSS文件是否正确引用</li><li>确认CSS选择器正确</li><li>检查浏览器缓存</li></ul><h3 id="5-移动端banner显示异常">5. 移动端banner显示异常</h3><ul><li>检查CSS中的<code>!important</code>设置是否正确</li><li>确认移动端媒体查询是否生效</li><li>检查父容器的padding设置</li><li>确保<code>margin: 0 auto</code>居中设置正确</li></ul><h2 id="总结">总结</h2><p>通过本次移植，我们成功将blog-solitude中的猫の日页面完整移植到solitude-latest中。这个页面不仅功能丰富，而且具有很好的用户体验：</p><ul><li>✅ <strong>Banner视频播放</strong> - 可爱的猫咪视频背景</li><li>✅ <strong>Banner响应式设计</strong> - 与相册集页面保持一致，移动端优化</li><li>✅ <strong>宠物纪念日卡片</strong> - 精美的卡片设计</li><li>✅ <strong>多模式时间显示</strong> - 支持天数/周数/月数切换</li><li>✅ <strong>农历计算支持</strong> - 精确的农历日期转换</li><li>✅ <strong>响应式设计</strong> - 完美适配各种设备</li><li>✅ <strong>动画效果</strong> - 流畅的悬停和切换动画</li></ul><h3 id="重要更新">重要更新</h3><ul><li><strong>页面配置</strong>：移除了<code>container: true</code>设置，与相册集页面保持一致</li><li><strong>Banner设置</strong>：桌面端19rem高度，移动端150px高度，95%宽度</li><li><strong>响应式优化</strong>：移动端自动居中，左右边距优化</li><li><strong>视觉一致性</strong>：与相册集页面完全一致的banner样式</li></ul><p>这个功能非常适合记录宠物的重要日子，比如生日、领养日等。用户可以通过点击卡片来切换不同的时间显示模式，让纪念日更加生动有趣。</p><h2 id="相关链接">相关链接</h2><ul><li><a href="/2025/01/07/solitude-theme-album-migration/">Solitude主题魔改教程(10)-相册集页面功能完整移植</a></li><li><a href="/2025/01/07/solitude-theme-musicsheets-migration/">Solitude主题魔改教程(9)-乐谱坊页面功能完整移植</a></li><li><a href="/2025/01/07/solitude-theme-collects-migration/">Solitude主题魔改教程(8)-藏宝阁页面功能完整移植</a></li><li><a href="/2025/01/07/solitude-theme-game-migration/">Solitude主题魔改教程(7)-电玩屋页面功能完整移植</a></li></ul><hr><p><em>本文详细介绍了猫の日页面的完整移植过程，包括所有必要的文件创建、配置修改和功能实现。如果您在移植过程中遇到任何问题，欢迎在评论区留言讨论。</em></p>]]></content>
      
      
      <categories>
          
          <category> 魔改教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 魔改教程 </tag>
            
            <tag> Solitude </tag>
            
            <tag> Hexo </tag>
            
            <tag> 页面移植 </tag>
            
            <tag> 猫の日 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>日本の書道芸術：文字を通じた心の表現</title>
      <link href="/2024/11/07/japanese-calligraphy-art/"/>
      <url>/2024/11/07/japanese-calligraphy-art/</url>
      
        <content type="html"><![CDATA[<h1>日本の書道芸術：文字を通じた心の表現</h1><p>日本の書道は、単なる文字を書く技術ではなく、心の表現と精神修養を目指す芸術です。この記事では、日本の書道芸術の歴史、技法、精神性について詳しく紹介します。</p><h2 id="書道の歴史と発展">書道の歴史と発展</h2><h3 id="中国からの伝来">中国からの伝来</h3><p>書道は中国から日本に伝来し、独自の発展を遂げました：</p><ul><li><strong>飛鳥時代</strong>：仏教と共に書道が伝来</li><li><strong>奈良時代</strong>：正倉院文書に見られる書風</li><li><strong>平安時代</strong>：仮名文字の発達と和様書道の確立</li><li><strong>鎌倉時代</strong>：禅宗の影響による書風の変化</li></ul><h3 id="和様書道の確立">和様書道の確立</h3><p>平安時代に日本独自の書道が確立されました：</p><ul><li><strong>仮名文字</strong>：ひらがな、カタカナの発達</li><li><strong>和歌</strong>：文学と書道の融合</li><li><strong>料紙装飾</strong>：美しい紙への書写</li><li><strong>散らし書き</strong>：文字の配置の芸術</li></ul><h2 id="書道の基本要素">書道の基本要素</h2><h3 id="筆法">筆法</h3><p>書道の基本となる筆の運び方：</p><p><strong>基本筆法</strong>：</p><ul><li><strong>永字八法</strong>：書道の基本となる八つの筆法</li><li><strong>点画</strong>：点と線の基本技法</li><li><strong>転折</strong>：筆の向きを変える技術</li><li><strong>収筆</strong>：筆を収める技術</li></ul><p><strong>筆の使い方</strong>：</p><ul><li><strong>中鋒</strong>：筆の中心で書く</li><li><strong>側鋒</strong>：筆の側面で書く</li><li><strong>逆鋒</strong>：筆を逆らって書く</li><li><strong>蔵鋒</strong>：筆先を隠して書く</li></ul><h3 id="墨法">墨法</h3><p>墨の使い方と表現：</p><p><strong>墨の種類</strong>：</p><ul><li><strong>固形墨</strong>：伝統的な墨</li><li><strong>液体墨</strong>：現代的な墨</li><li><strong>墨汁</strong>：手軽に使える墨</li></ul><p><strong>墨の調子</strong>：</p><ul><li><strong>濃墨</strong>：濃い墨</li><li><strong>淡墨</strong>：薄い墨</li><li><strong>潤墨</strong>：水分の多い墨</li><li><strong>渇墨</strong>：水分の少ない墨</li></ul><h3 id="紙法">紙法</h3><p>紙の選択と扱い方：</p><p><strong>紙の種類</strong>：</p><ul><li><strong>和紙</strong>：伝統的な日本紙</li><li><strong>半紙</strong>：練習用の紙</li><li><strong>画仙紙</strong>：作品用の高級紙</li><li><strong>色紙</strong>：色付きの紙</li></ul><p><strong>紙の特性</strong>：</p><ul><li><strong>吸水性</strong>：墨の吸収具合</li><li><strong>表面の粗さ</strong>：紙の質感</li><li><strong>サイズ</strong>：紙の大きさ</li><li><strong>色合い</strong>：紙の色</li></ul><h2 id="書道の書体">書道の書体</h2><h3 id="楷書">楷書</h3><p>最も基本的な書体：</p><p><strong>特徴</strong>：</p><ul><li>整然とした字形</li><li>一画一画が明確</li><li>学習の基本書体</li><li>実用的な書体</li></ul><p><strong>用途</strong>：</p><ul><li>学習用</li><li>実用文書</li><li>看板</li><li>印刷</li></ul><h3 id="行書">行書</h3><p>楷書と草書の中間：</p><p><strong>特徴</strong>：</p><ul><li>楷書より流れるような書体</li><li>実用性と美しさのバランス</li><li>筆の連続性</li><li>自然な流れ</li></ul><p><strong>用途</strong>：</p><ul><li>手紙</li><li>日記</li><li>実用文書</li><li>芸術作品</li></ul><h3 id="草書">草書</h3><p>最も抽象的な書体：</p><p><strong>特徴</strong>：</p><ul><li>線の省略が多い</li><li>流動的な表現</li><li>芸術性が高い</li><li>識別が困難</li></ul><p><strong>用途</strong>：</p><ul><li>芸術作品</li><li>印章</li><li>装飾</li><li>表現芸術</li></ul><h3 id="仮名">仮名</h3><p>日本独自の書体：</p><p><strong>特徴</strong>：</p><ul><li>ひらがな、カタカナ</li><li>流麗な線</li><li>和歌との融合</li><li>日本的な美しさ</li></ul><p><strong>用途</strong>：</p><ul><li>和歌</li><li>手紙</li><li>装飾</li><li>芸術作品</li></ul><h2 id="書道の精神性">書道の精神性</h2><h3 id="心正則筆正">心正則筆正</h3><p>書道の根本理念：</p><ul><li><strong>心の状態</strong>：心が正しければ筆も正しくなる</li><li><strong>精神統一</strong>：書く時は心を集中させる</li><li><strong>人格形成</strong>：書道を通じた人格の向上</li><li><strong>修養</strong>：精神的な修養の手段</li></ul><h3 id="書道の美学">書道の美学</h3><p>書道における美の概念：</p><p><strong>美的要素</strong>：</p><ul><li><strong>線の美</strong>：筆線の美しさ</li><li><strong>構成の美</strong>：文字の配置</li><li><strong>余白の美</strong>：空間の活用</li><li><strong>墨色の美</strong>：墨の濃淡</li></ul><p><strong>精神的美</strong>：</p><ul><li><strong>品格</strong>：上品で気品のある書</li><li><strong>力強さ</strong>：生命力を感じる書</li><li><strong>優雅さ</strong>：美しく上品な書</li><li><strong>自然さ</strong>：自然な流れのある書</li></ul><h2 id="書道の実践">書道の実践</h2><h3 id="基本練習">基本練習</h3><p>書道を学ぶための基本練習：</p><p><strong>姿勢</strong>：</p><ul><li>正座または椅子に座る</li><li>背筋を伸ばす</li><li>肩の力を抜く</li><li>呼吸を整える</li></ul><p><strong>筆の持ち方</strong>：</p><ul><li>親指、人差し指、中指で持つ</li><li>筆を垂直に保つ</li><li>力を入れすぎない</li><li>自然な持ち方</li></ul><p><strong>基本練習</strong>：</p><ul><li>横線、縦線の練習</li><li>円の練習</li><li>基本文字の練習</li><li>永字八法の練習</li></ul><h3 id="作品制作">作品制作</h3><p>書道作品の制作過程：</p><p><strong>準備</strong>：</p><ul><li>題材の選択</li><li>書体の決定</li><li>紙の選択</li><li>墨の準備</li></ul><p><strong>制作</strong>：</p><ul><li>下書き（必要に応じて）</li><li>本番の執筆</li><li>印の押印</li><li>作品の完成</li></ul><p><strong>評価</strong>：</p><ul><li>技術的な完成度</li><li>芸術的な表現</li><li>精神的な深さ</li><li>独創性</li></ul><h2 id="書道の流派">書道の流派</h2><h3 id="主要な流派">主要な流派</h3><p>日本の書道の主要な流派：</p><p><strong>古典派</strong>：</p><ul><li>王羲之の書風を重視</li><li>伝統的な技法を継承</li><li>古典の研究を重視</li><li>技術の習得を目指す</li></ul><p><strong>現代派</strong>：</p><ul><li>新しい表現を追求</li><li>抽象的な表現</li><li>個性的な書風</li><li>芸術性を重視</li></ul><p><strong>前衛派</strong>：</p><ul><li>伝統を超えた表現</li><li>実験的な技法</li><li>現代芸術との融合</li><li>新しい可能性の追求</li></ul><h2 id="書道と現代社会">書道と現代社会</h2><h3 id="教育での活用">教育での活用</h3><p>書道教育の現状：</p><ul><li><strong>小学校</strong>：書写教育</li><li><strong>中学校</strong>：書道の選択科目</li><li><strong>高等学校</strong>：書道科</li><li><strong>大学</strong>：書道専攻</li></ul><h3 id="文化的価値">文化的価値</h3><p>書道の文化的意義：</p><ul><li><strong>伝統文化の継承</strong>：日本の伝統文化</li><li><strong>国際交流</strong>：世界への文化発信</li><li><strong>心の修養</strong>：精神的な成長</li><li><strong>芸術表現</strong>：美的表現の手段</li></ul><h3 id="現代的な応用">現代的な応用</h3><p>書道の現代的な活用：</p><ul><li><strong>デザイン</strong>：ロゴデザインへの応用</li><li><strong>装飾</strong>：インテリア装飾</li><li><strong>セラピー</strong>：書道療法</li><li><strong>メディテーション</strong>：瞑想としての書道</li></ul><h2 id="書道の道具">書道の道具</h2><h3 id="文房四宝">文房四宝</h3><p>書道に必要な四つの道具：</p><p><strong>筆</strong>：</p><ul><li>毛の種類：羊毛、馬毛、狸毛</li><li>サイズ：大筆、中筆、小筆</li><li>用途：楷書用、行書用、草書用</li></ul><p><strong>墨</strong>：</p><ul><li>固形墨：伝統的な墨</li><li>液体墨：現代的な墨</li><li>墨汁：手軽に使える墨</li></ul><p><strong>紙</strong>：</p><ul><li>和紙：伝統的な日本紙</li><li>半紙：練習用</li><li>画仙紙：作品用</li></ul><p><strong>硯</strong>：</p><ul><li>石の種類：端渓石、歙州石</li><li>形状：円形、方形</li><li>用途：墨を磨る</li></ul><h3 id="その他の道具">その他の道具</h3><p>書道に必要なその他の道具：</p><ul><li><strong>文鎮</strong>：紙を押さえる</li><li><strong>水滴</strong>：水を入れる</li><li><strong>下敷き</strong>：紙の下に敷く</li><li><strong>印泥</strong>：印を押すための朱肉</li></ul><h2 id="書道の鑑賞">書道の鑑賞</h2><h3 id="鑑賞のポイント">鑑賞のポイント</h3><p>書道作品を鑑賞する際のポイント：</p><p><strong>技術面</strong>：</p><ul><li>筆法の正確さ</li><li>墨色の美しさ</li><li>構成のバランス</li><li>線の質</li></ul><p><strong>芸術面</strong>：</p><ul><li>表現の独創性</li><li>美しさの追求</li><li>個性の表現</li><li>時代性</li></ul><p><strong>精神面</strong>：</p><ul><li>作者の心の状態</li><li>作品に込められた思い</li><li>精神的な深さ</li><li>人格の反映</li></ul><h2 id="結論">結論</h2><p>日本の書道芸術は、千年以上の歴史を持つ伝統的な芸術です。単なる文字を書く技術ではなく、心の表現と精神修養を目指す深い芸術です。</p><p>書道を通じて、私たちは美しい文字を書く技術を身につけるだけでなく、心の静寂を見つけ、精神的な成長を遂げることができます。書道は、現代社会においても心の豊かさと精神的な充実を得るための貴重な手段です。</p><p>伝統的な技法を学びながら、現代的な表現も取り入れることで、書道はさらに豊かな芸術として発展していくでしょう。書道を通じて、私たちは日本の伝統文化の美しさと深さを理解し、心の豊かさを育むことができます。</p>]]></content>
      
      
      <categories>
          
          <category> 芸術 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 書道 </tag>
            
            <tag> 書法 </tag>
            
            <tag> 日本文化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>日本の瞑想法：心の静寂を求める伝統的な実践</title>
      <link href="/2024/11/06/japanese-meditation-practices/"/>
      <url>/2024/11/06/japanese-meditation-practices/</url>
      
        <content type="html"><![CDATA[<h1>日本の瞑想法：心の静寂を求める伝統的な実践</h1><p>日本の瞑想法は、禅宗を中心として発展し、心の静寂と精神的な成長を目指す伝統的な実践です。この記事では、日本の瞑想法の種類と実践方法について詳しく紹介します。</p><h2 id="瞑想の基本概念">瞑想の基本概念</h2><h3 id="瞑想とは">瞑想とは</h3><p>瞑想は、心を静め、内なる世界に集中する精神修養の方法です：</p><ul><li><strong>心の静寂</strong>：雑念を鎮め、心を落ち着かせる</li><li><strong>自己観察</strong>：自分の心と向き合う</li><li><strong>精神統一</strong>：一つの対象に集中する</li><li><strong>悟りへの道</strong>：真の自己を理解する</li></ul><h3 id="瞑想の目的">瞑想の目的</h3><p>瞑想の主な目的は以下の通りです：</p><ul><li><strong>ストレス軽減</strong>：心の緊張を解きほぐす</li><li><strong>集中力向上</strong>：注意力と集中力を高める</li><li><strong>自己理解</strong>：自分の本質を理解する</li><li><strong>精神的な成長</strong>：人格の向上を目指す</li></ul><h2 id="禅の瞑想">禅の瞑想</h2><h3 id="座禅">座禅</h3><p>禅宗の中心的な瞑想法：</p><p><strong>基本姿勢</strong>：</p><ul><li>結跏趺坐（けっかふざ）：蓮華座</li><li>半跏趺坐（はんかふざ）：片足を組む</li><li>正座：日本式の座り方</li></ul><p><strong>呼吸法</strong>：</p><ul><li>腹式呼吸：お腹で呼吸する</li><li>数息観：呼吸を数える</li><li>随息観：呼吸に集中する</li></ul><p><strong>心の持ち方</strong>：</p><ul><li>雑念を追わない</li><li>呼吸に集中する</li><li>今この瞬間にいる</li><li>判断をしない</li></ul><h3 id="公案">公案</h3><p>禅の修行で用いられる問題：</p><ul><li><strong>無字の公案</strong>：「無」の意味を考える</li><li><strong>趙州の無字</strong>：最も有名な公案</li><li><strong>狗子仏性</strong>：犬にも仏性があるか</li><li><strong>隻手の音</strong>：片手の拍手の音</li></ul><p><strong>公案の目的</strong>：</p><ul><li>論理的思考を超える</li><li>直感的な理解を目指す</li><li>悟りへの道筋を作る</li><li>心の転換を促す</li></ul><h2 id="他の瞑想法">他の瞑想法</h2><h3 id="念仏">念仏</h3><p>浄土宗の瞑想法：</p><p><strong>念仏の方法</strong>：</p><ul><li>南無阿弥陀仏を唱える</li><li>心を集中させる</li><li>仏の慈悲を感じる</li><li>感謝の心を持つ</li></ul><p><strong>念仏の効果</strong>：</p><ul><li>心の安らぎ</li><li>感謝の心</li><li>他者への慈悲</li><li>死への準備</li></ul><h3 id="真言密教の瞑想">真言密教の瞑想</h3><p>真言宗の瞑想法：</p><p><strong>阿字観</strong>：</p><ul><li>「阿」の字を観想する</li><li>宇宙の根源を理解する</li><li>自己と宇宙の一体感</li><li>曼荼羅を活用する</li></ul><p><strong>三密加持</strong>：</p><ul><li>身密：手印を結ぶ</li><li>口密：真言を唱える</li><li>意密：心で観想する</li></ul><h2 id="日常的な瞑想">日常的な瞑想</h2><h3 id="歩行禅">歩行禅</h3><p>歩きながら行う瞑想：</p><p><strong>歩行禅の方法</strong>：</p><ul><li>ゆっくりと歩く</li><li>足の動きに集中する</li><li>呼吸と歩調を合わせる</li><li>周囲の音に耳を澄ます</li></ul><p><strong>歩行禅の効果</strong>：</p><ul><li>身体の感覚を研ぎ澄ます</li><li>心と身体の調和</li><li>日常動作の意識化</li><li>ストレス解消</li></ul><h3 id="食事の瞑想">食事の瞑想</h3><p>食事を通じた瞑想：</p><p><strong>食事瞑想の方法</strong>：</p><ul><li>食材への感謝</li><li>味わいながら食べる</li><li>噛むことに集中する</li><li>食事の時間を大切にする</li></ul><p><strong>食事瞑想の効果</strong>：</p><ul><li>感謝の心を育む</li><li>味覚の感覚を高める</li><li>健康な食習慣</li><li>心の満足感</li></ul><h2 id="瞑想の実践方法">瞑想の実践方法</h2><h3 id="準備">準備</h3><p>瞑想を始める前の準備：</p><p><strong>環境の整備</strong>：</p><ul><li>静かな場所を選ぶ</li><li>適切な温度と湿度</li><li>明るさの調整</li><li>快適な座布団やクッション</li></ul><p><strong>身体の準備</strong>：</p><ul><li>軽いストレッチ</li><li>深呼吸でリラックス</li><li>トイレを済ませる</li><li>空腹や満腹を避ける</li></ul><h3 id="基本姿勢">基本姿勢</h3><p>正しい姿勢の取り方：</p><p><strong>座り方</strong>：</p><ul><li>背筋を伸ばす</li><li>肩の力を抜く</li><li>顎を少し引く</li><li>手は膝の上に置く</li></ul><p><strong>呼吸法</strong>：</p><ul><li>鼻から吸って鼻から吐く</li><li>腹式呼吸を心がける</li><li>自然な呼吸を保つ</li><li>呼吸に集中する</li></ul><h3 id="心の持ち方">心の持ち方</h3><p>瞑想中の心の状態：</p><p><strong>集中の方法</strong>：</p><ul><li>呼吸に集中する</li><li>マントラを唱える</li><li>特定の対象を観想する</li><li>身体の感覚に注意を向ける</li></ul><p><strong>雑念の対処</strong>：</p><ul><li>雑念を追わない</li><li>優しく呼吸に戻る</li><li>判断をしない</li><li>忍耐強く続ける</li></ul><h2 id="瞑想の効果">瞑想の効果</h2><h3 id="身体的効果">身体的効果</h3><p>瞑想による身体への影響：</p><ul><li><strong>血圧の安定</strong>：高血圧の改善</li><li><strong>心拍数の安定</strong>：自律神経の調整</li><li><strong>免疫力の向上</strong>：病気への抵抗力</li><li><strong>睡眠の改善</strong>：質の良い睡眠</li></ul><h3 id="心理的効果">心理的効果</h3><p>瞑想による心への影響：</p><ul><li><strong>ストレス軽減</strong>：心の緊張を解く</li><li><strong>集中力向上</strong>：注意力の向上</li><li><strong>感情の安定</strong>：情緒の安定</li><li><strong>自己理解</strong>：自分を理解する</li></ul><h3 id="精神的効果">精神的効果</h3><p>瞑想による精神的な成長：</p><ul><li><strong>慈悲の心</strong>：他者への思いやり</li><li><strong>智慧の開発</strong>：深い理解力</li><li><strong>心の自由</strong>：執着からの解放</li><li><strong>悟りへの道</strong>：真の自己理解</li></ul><h2 id="瞑想の継続">瞑想の継続</h2><h3 id="習慣化のコツ">習慣化のコツ</h3><p>瞑想を継続するための方法：</p><p><strong>時間の設定</strong>：</p><ul><li>毎日同じ時間に行う</li><li>短時間から始める</li><li>徐々に時間を延ばす</li><li>無理のないペース</li></ul><p><strong>環境の整備</strong>：</p><ul><li>専用の場所を作る</li><li>瞑想用の道具を準備</li><li>家族の理解を得る</li><li>記録をつける</li></ul><h3 id="困難の克服">困難の克服</h3><p>瞑想を続ける際の困難と対処法：</p><p><strong>雑念が多い</strong>：</p><ul><li>雑念は自然なこと</li><li>優しく呼吸に戻る</li><li>忍耐強く続ける</li><li>判断をしない</li></ul><p><strong>身体の痛み</strong>：</p><ul><li>無理な姿勢を避ける</li><li>適切な座布団を使用</li><li>短時間から始める</li><li>身体の声を聞く</li></ul><p><strong>継続の困難</strong>：</p><ul><li>目標を低く設定</li><li>仲間と一緒に行う</li><li>記録をつける</li><li>成果を実感する</li></ul><h2 id="現代社会での瞑想">現代社会での瞑想</h2><h3 id="瞑想の普及">瞑想の普及</h3><p>現代社会での瞑想の広がり：</p><ul><li><strong>企業での導入</strong>：ストレス軽減プログラム</li><li><strong>医療での活用</strong>：心身医学での応用</li><li><strong>教育での活用</strong>：学校での瞑想教育</li><li><strong>一般への普及</strong>：瞑想教室の増加</li></ul><h3 id="デジタル時代の瞑想">デジタル時代の瞑想</h3><p>テクノロジーを活用した瞑想：</p><ul><li><strong>瞑想アプリ</strong>：スマートフォンでの瞑想</li><li><strong>オンライン瞑想</strong>：インターネットでの指導</li><li><strong>瞑想機器</strong>：脳波測定などの機器</li><li><strong>VR瞑想</strong>：仮想現実での瞑想</li></ul><h2 id="瞑想の注意点">瞑想の注意点</h2><h3 id="安全な実践">安全な実践</h3><p>瞑想を安全に行うための注意点：</p><ul><li><strong>無理をしない</strong>：自分のペースで</li><li><strong>専門家の指導</strong>：適切な指導を受ける</li><li><strong>身体の状態</strong>：体調に注意する</li><li><strong>精神的な準備</strong>：心の準備を整える</li></ul><h3 id="誤解の解消">誤解の解消</h3><p>瞑想に関する誤解：</p><ul><li><strong>宗教的なものではない</strong>：誰でも実践可能</li><li><strong>特別な能力は不要</strong>：普通の人でもできる</li><li><strong>即効性はない</strong>：継続が重要</li><li><strong>逃避ではない</strong>：現実との向き合い</li></ul><h2 id="結論">結論</h2><p>日本の瞑想法は、千年以上の歴史を持つ伝統的な精神修養法です。これらの実践を通じて、私たちは心の静寂を見つけ、より豊かな人生を送ることができます。</p><p>現代の忙しい生活の中でも、瞑想を取り入れることで、ストレスを軽減し、心の健康を保つことができます。瞑想は特別なものではなく、誰でも実践できる心の修養法です。</p><p>継続的な実践を通じて、私たちは自分自身をより深く理解し、他者への慈悲の心を育み、より充実した人生を送ることができるでしょう。瞑想は、現代社会において心の安らぎを見つけるための貴重な方法です。</p>]]></content>
      
      
      <categories>
          
          <category> 精神修養 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 瞑想 </tag>
            
            <tag> 禅 </tag>
            
            <tag> 心の修養 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>日本の庭園技術：自然との調和を目指す造園術</title>
      <link href="/2024/11/06/japanese-gardening-techniques/"/>
      <url>/2024/11/06/japanese-gardening-techniques/</url>
      
        <content type="html"><![CDATA[<h1>日本の庭園技術：自然との調和を目指す造園術</h1><p>日本の庭園技術は、自然との調和を重視し、美しさと精神性を追求する独特の造園術です。この記事では、日本の庭園技術の特徴と実践方法について詳しく紹介します。</p><h2 id="日本庭園の基本理念">日本庭園の基本理念</h2><h3 id="自然との調和">自然との調和</h3><p>日本庭園の根本的な理念は、自然との調和にあります：</p><ul><li><strong>自然の縮小</strong>：大きな自然を小さな空間に表現</li><li><strong>季節の移ろい</strong>：四季の変化を庭園に取り入れる</li><li><strong>不規則性</strong>：人工的でない自然な配置</li><li><strong>余白の美</strong>：空間の余白を活かした構成</li></ul><h3 id="精神性の表現">精神性の表現</h3><p>庭園は単なる装飾ではなく、精神的な修養の場でもあります：</p><ul><li><strong>禅の精神</strong>：枯山水に代表される禅的思想</li><li><strong>侘び寂び</strong>：簡素で静寂な美しさ</li><li><strong>一期一会</strong>：その時その場の特別な出会い</li><li><strong>内省の場</strong>：心を落ち着かせる空間</li></ul><h2 id="庭園の種類と特徴">庭園の種類と特徴</h2><h3 id="枯山水">枯山水</h3><p>石と砂で自然を表現する抽象的な庭園：</p><ul><li><strong>龍安寺</strong>：京都の代表的な枯山水</li><li><strong>銀閣寺</strong>：銀沙灘と向月台</li><li><strong>大徳寺</strong>：禅寺の枯山水</li></ul><p><strong>特徴</strong>：</p><ul><li>石を山や島に見立てる</li><li>砂で水の流れを表現</li><li>最小限の要素で最大の効果</li><li>瞑想と内省の場</li></ul><h3 id="池泉庭園">池泉庭園</h3><p>池を中心とした自然風の庭園：</p><ul><li><strong>桂離宮</strong>：京都の代表的な池泉庭園</li><li><strong>修学院離宮</strong>：借景を活かした庭園</li><li><strong>二条城</strong>：武家屋敷の庭園</li></ul><p><strong>特徴</strong>：</p><ul><li>池を中心とした構成</li><li>自然な地形を活かす</li><li>四季の変化を楽しむ</li><li>散策路の配置</li></ul><h3 id="茶庭">茶庭</h3><p>茶道のための専用庭園：</p><ul><li><strong>表千家</strong>：茶道の流派別庭園</li><li><strong>裏千家</strong>：茶室への導入空間</li><li><strong>武者小路千家</strong>：茶道の精神を表現</li></ul><p><strong>特徴</strong>：</p><ul><li>茶室への導入空間</li><li>心を落ち着かせる演出</li><li>自然石の飛び石</li><li>手水鉢の配置</li></ul><h2 id="庭園の構成要素">庭園の構成要素</h2><h3 id="石組">石組</h3><p>庭園の骨格となる重要な要素：</p><ul><li><strong>立石</strong>：垂直に立つ石</li><li><strong>伏石</strong>：横に寝かせた石</li><li><strong>石橋</strong>：石で作られた橋</li><li><strong>飛び石</strong>：歩行用の石</li></ul><p><strong>配置の原則</strong>：</p><ul><li>奇数個の石を使用</li><li>三角形の配置を基本とする</li><li>自然な配置を心がける</li><li>バランスを重視する</li></ul><h3 id="水の表現">水の表現</h3><p>水は庭園の生命を表現します：</p><ul><li><strong>池</strong>：静寂な水面</li><li><strong>滝</strong>：動的な水の流れ</li><li><strong>小川</strong>：自然な流れ</li><li><strong>砂紋</strong>：水の流れを表現</li></ul><p><strong>水の効果</strong>：</p><ul><li>涼しさと清涼感</li><li>音の演出</li><li>光の反射</li><li>生態系の維持</li></ul><h3 id="植物の配置">植物の配置</h3><p>植物は季節感と生命を表現します：</p><ul><li><strong>常緑樹</strong>：一年中緑を保つ</li><li><strong>落葉樹</strong>：季節の変化を表現</li><li><strong>草花</strong>：色彩と香りを添える</li><li><strong>苔</strong>：静寂と古さを表現</li></ul><p><strong>植物選択のポイント</strong>：</p><ul><li>地域の気候に適した植物</li><li>四季の変化を考慮</li><li>成長後の姿を想像</li><li>手入れのしやすさ</li></ul><h2 id="造園技術">造園技術</h2><h3 id="地形の造成">地形の造成</h3><p>自然な地形を作り出す技術：</p><ul><li><strong>盛土</strong>：土を盛って起伏を作る</li><li><strong>掘削</strong>：池や川を作る</li><li><strong>整地</strong>：地面を平らにする</li><li><strong>排水</strong>：水はけを考慮</li></ul><p><strong>地形設計の原則</strong>：</p><ul><li>自然な流れを重視</li><li>水の流れを考慮</li><li>視点を設定</li><li>スケール感を統一</li></ul><h3 id="石の配置技術">石の配置技術</h3><p>石を効果的に配置する技術：</p><ul><li><strong>石の選定</strong>：形、色、質感を考慮</li><li><strong>配置の基本</strong>：三角形を基本とする</li><li><strong>深さの表現</strong>：奥行きを演出</li><li><strong>バランス</strong>：全体の調和を保つ</li></ul><p><strong>石組の技法</strong>：</p><ul><li>三尊石組：三つの石で構成</li><li>七五三：石の数を基本とする</li><li>自然石：加工しない自然な石</li><li>石の向き：石の表情を活かす</li></ul><h3 id="植物の植栽技術">植物の植栽技術</h3><p>植物を効果的に植える技術：</p><ul><li><strong>植栽設計</strong>：植物の配置計画</li><li><strong>土壌改良</strong>：植物に適した土作り</li><li><strong>植栽時期</strong>：適切な時期の選択</li><li><strong>手入れ計画</strong>：長期的な管理</li></ul><p><strong>植栽のポイント</strong>：</p><ul><li>植物の特性を理解</li><li>成長後の姿を想像</li><li>季節の変化を考慮</li><li>手入れのしやすさ</li></ul><h2 id="庭園の手入れ">庭園の手入れ</h2><h3 id="日常の手入れ">日常の手入れ</h3><p>庭園を美しく保つための日常作業：</p><ul><li><strong>掃除</strong>：落ち葉やゴミの除去</li><li><strong>除草</strong>：雑草の除去</li><li><strong>水やり</strong>：植物への水やり</li><li><strong>剪定</strong>：植物の形を整える</li></ul><h3 id="季節の手入れ">季節の手入れ</h3><p>季節に応じた特別な手入れ：</p><p><strong>春</strong>：</p><ul><li>新芽の確認</li><li>施肥</li><li>植え替え</li></ul><p><strong>夏</strong>：</p><ul><li>水やり</li><li>害虫対策</li><li>日除け</li></ul><p><strong>秋</strong>：</p><ul><li>落ち葉の掃除</li><li>冬支度</li><li>剪定</li></ul><p><strong>冬</strong>：</p><ul><li>防寒対策</li><li>雪対策</li><li>来春の準備</li></ul><h2 id="現代の庭園技術">現代の庭園技術</h2><h3 id="伝統技術の継承">伝統技術の継承</h3><p>伝統的な技術を現代に活かす：</p><ul><li><strong>職人の技術</strong>：熟練職人の技</li><li><strong>材料の選択</strong>：自然素材の活用</li><li><strong>設計思想</strong>：伝統的な美学</li><li><strong>施工技術</strong>：昔ながらの工法</li></ul><h3 id="新しい技術の導入">新しい技術の導入</h3><p>現代的な技術を取り入れる：</p><ul><li><strong>自動灌水システム</strong>：水やりの自動化</li><li><strong>LED照明</strong>：夜間の演出</li><li><strong>センサー技術</strong>：環境の監視</li><li><strong>3D設計</strong>：デジタル設計技術</li></ul><h2 id="庭園の楽しみ方">庭園の楽しみ方</h2><h3 id="四季の変化">四季の変化</h3><p>季節ごとの庭園の楽しみ方：</p><ul><li><strong>春</strong>：新芽と花の季節</li><li><strong>夏</strong>：緑の濃い季節</li><li><strong>秋</strong>：紅葉の季節</li><li><strong>冬</strong>：静寂の季節</li></ul><h3 id="時間帯の変化">時間帯の変化</h3><p>一日の中での庭園の変化：</p><ul><li><strong>朝</strong>：清々しい朝の光</li><li><strong>昼</strong>：明るい日差し</li><li><strong>夕方</strong>：夕陽の美しさ</li><li><strong>夜</strong>：月明かりの神秘</li></ul><h3 id="心の修養">心の修養</h3><p>庭園を通じた精神的な修養：</p><ul><li><strong>瞑想</strong>：静寂な空間での瞑想</li><li><strong>茶道</strong>：茶庭での茶道</li><li><strong>写経</strong>：庭園での写経</li><li><strong>散策</strong>：心を落ち着かせる散歩</li></ul><h2 id="庭園の設計と施工">庭園の設計と施工</h2><h3 id="設計の流れ">設計の流れ</h3><p>庭園設計の基本的な流れ：</p><ol><li><strong>現地調査</strong>：地形、気候、環境の確認</li><li><strong>コンセプト決定</strong>：庭園のテーマ設定</li><li><strong>基本設計</strong>：全体の構成計画</li><li><strong>詳細設計</strong>：細部の設計</li><li><strong>施工</strong>：実際の工事</li><li><strong>完成後の手入れ</strong>：維持管理</li></ol><h3 id="施工のポイント">施工のポイント</h3><p>良い庭園を作るための施工技術：</p><ul><li><strong>材料の品質</strong>：良質な材料の選択</li><li><strong>職人の技術</strong>：熟練した職人の活用</li><li><strong>工期の管理</strong>：適切な工期設定</li><li><strong>品質管理</strong>：施工品質の確保</li></ul><h2 id="結論">結論</h2><p>日本の庭園技術は、自然との調和を重視し、美しさと精神性を追求する独特の造園術です。これらの技術は、単なる庭園作りではなく、自然との共生を目指す日本人の精神性を反映しています。</p><p>現代社会においても、日本の庭園技術は多くの人々に心の安らぎと美しさを提供しています。伝統的な技術を継承しながら、新しい技術を取り入れることで、より良い庭園を作ることができます。</p><p>庭園を通じて、私たちは自然とのつながりを深め、心の豊かさと精神的な充実を得ることができます。日本の庭園技術を理解し、実践することで、より美しく、より心豊かな生活を送ることができるでしょう。</p>]]></content>
      
      
      <categories>
          
          <category> 庭園 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日本庭園 </tag>
            
            <tag> 造園 </tag>
            
            <tag> 自然 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>日本の四季の料理：季節を味わう食文化</title>
      <link href="/2024/11/06/japanese-seasonal-cuisine/"/>
      <url>/2024/11/06/japanese-seasonal-cuisine/</url>
      
        <content type="html"><![CDATA[<h1>日本の四季の料理：季節を味わう食文化</h1><p>日本の食文化は、四季の移ろいと密接に結びついています。この記事では、日本の季節料理の魅力と、それぞれの季節に適した食材や料理について詳しく紹介します。</p><h2 id="春の料理：新芽と桜の季節">春の料理：新芽と桜の季節</h2><h3 id="春の食材">春の食材</h3><p>春は新しい生命が芽吹く季節で、多くの食材が旬を迎えます：</p><ul><li><strong>筍（たけのこ）</strong>：春の訪れを告げる食材</li><li><strong>菜の花</strong>：苦味と甘味のバランス</li><li><strong>桜鯛</strong>：桜の季節に旬を迎える魚</li><li><strong>春キャベツ</strong>：柔らかく甘い春野菜</li><li><strong>新玉ねぎ</strong>：辛味が少なく甘い</li></ul><h3 id="春の代表料理">春の代表料理</h3><h4 id="筍ご飯">筍ご飯</h4><p>筍の香りと食感を楽しむ春の定番料理です：</p><p><strong>材料</strong>：</p><ul><li>米 3合</li><li>筍 200g</li><li>油揚げ 1枚</li><li>酒 大さじ2</li><li>醤油 大さじ1</li></ul><p><strong>作り方</strong>：</p><ol><li>筍は薄切り、油揚げは細切りにする</li><li>米を研ぎ、調味料と一緒に炊飯器に入れる</li><li>筍と油揚げを加えて炊く</li></ol><h4 id="桜鯛の刺身">桜鯛の刺身</h4><p>春の海の幸を味わう一品：</p><ul><li><strong>新鮮さ</strong>：活きの良さが重要</li><li><strong>切り方</strong>：薄造りで桜の花びらのように</li><li><strong>盛り付け</strong>：春らしい色合いで</li></ul><h2 id="夏の料理：涼しさと清涼感">夏の料理：涼しさと清涼感</h2><h3 id="夏の食材">夏の食材</h3><p>夏は暑さを乗り切るための食材が豊富です：</p><ul><li><strong>うなぎ</strong>：土用の丑の日の定番</li><li><strong>そうめん</strong>：涼やかな麺料理</li><li><strong>枝豆</strong>：ビールのお供に最適</li><li><strong>トマト</strong>：夏野菜の代表</li><li><strong>きゅうり</strong>：水分補給に最適</li></ul><h3 id="夏の代表料理">夏の代表料理</h3><h4 id="冷やし中華">冷やし中華</h4><p>夏の定番麺料理：</p><p><strong>材料</strong>：</p><ul><li>中華麺 200g</li><li>きゅうり 1本</li><li>ハム 2枚</li><li>錦糸卵 適量</li><li>ごまドレッシング 適量</li></ul><p><strong>作り方</strong>：</p><ol><li>麺を茹でて冷水で締める</li><li>野菜とハムを細切りにする</li><li>錦糸卵を作る</li><li>盛り付けてドレッシングをかける</li></ol><h4 id="うなぎの蒲焼き">うなぎの蒲焼き</h4><p>夏のスタミナ料理：</p><ul><li><strong>調理法</strong>：蒸してから焼く二段階調理</li><li><strong>タレ</strong>：甘辛い醤油ベースのタレ</li><li><strong>盛り付け</strong>：山椒と共に</li></ul><h2 id="秋の料理：実りの季節">秋の料理：実りの季節</h2><h3 id="秋の食材">秋の食材</h3><p>秋は収穫の季節で、多くの食材が旬を迎えます：</p><ul><li><strong>松茸</strong>：秋の香りの王様</li><li><strong>栗</strong>：甘くて栄養豊富</li><li><strong>秋刀魚</strong>：秋の味覚の代表</li><li><strong>さつまいも</strong>：甘味が増す根菜</li><li><strong>柿</strong>：秋の果物</li></ul><h3 id="秋の代表料理">秋の代表料理</h3><h4 id="松茸ご飯">松茸ご飯</h4><p>秋の香りを楽しむ贅沢な料理：</p><p><strong>材料</strong>：</p><ul><li>米 3合</li><li>松茸 2本</li><li>酒 大さじ2</li><li>醤油 大さじ1</li><li>塩 小さじ1</li></ul><p><strong>作り方</strong>：</p><ol><li>松茸は薄切りにする</li><li>米を研ぎ、調味料と一緒に炊飯器に入れる</li><li>松茸を加えて炊く</li></ol><h4 id="秋刀魚の塩焼き">秋刀魚の塩焼き</h4><p>秋の定番魚料理：</p><ul><li><strong>調理法</strong>：塩を振って焼く</li><li><strong>食べ方</strong>：大根おろしと共に</li><li><strong>骨の処理</strong>：上手に骨を取る技術</li></ul><h2 id="冬の料理：温かさと栄養">冬の料理：温かさと栄養</h2><h3 id="冬の食材">冬の食材</h3><p>冬は体を温める食材が豊富です：</p><ul><li><strong>白菜</strong>：鍋料理に欠かせない</li><li><strong>大根</strong>：冬野菜の代表</li><li><strong>牡蠣</strong>：冬の海の幸</li><li><strong>みかん</strong>：ビタミンC補給</li><li><strong>かぶ</strong>：甘くて柔らかい</li></ul><h3 id="冬の代表料理">冬の代表料理</h3><h4 id="おでん">おでん</h4><p>冬の定番煮込み料理：</p><p><strong>材料</strong>：</p><ul><li>大根 1/2本</li><li>卵 4個</li><li>こんにゃく 1枚</li><li>ちくわ 4本</li><li>だし汁 適量</li></ul><p><strong>作り方</strong>：</p><ol><li>材料を一口大に切る</li><li>だし汁で煮込む</li><li>味が染み込むまで煮る</li></ol><h4 id="鍋料理">鍋料理</h4><p>家族団らんの冬料理：</p><ul><li><strong>種類</strong>：すき焼き、しゃぶしゃぶ、キムチ鍋</li><li><strong>食材</strong>：肉、魚、野菜、豆腐</li><li><strong>だし</strong>：昆布、かつお節、鶏ガラ</li></ul><h2 id="季節の行事食">季節の行事食</h2><h3 id="正月料理">正月料理</h3><p>新年を祝う特別な料理：</p><ul><li><strong>おせち料理</strong>：縁起を担いだ料理</li><li><strong>お雑煮</strong>：地域によって異なる</li><li><strong>鏡餅</strong>：神様への供え物</li></ul><h3 id="節句料理">節句料理</h3><p>季節の節目を祝う料理：</p><ul><li><strong>ひな祭り</strong>：ちらし寿司、はまぐりのお吸い物</li><li><strong>こどもの日</strong>：ちまき、柏餅</li><li><strong>七夕</strong>：そうめん</li><li><strong>お月見</strong>：月見団子、里芋</li></ul><h2 id="季節の調理法">季節の調理法</h2><h3 id="春の調理法">春の調理法</h3><ul><li><strong>蒸す</strong>：筍や春野菜の甘味を引き出す</li><li><strong>和える</strong>：新鮮な春野菜を生かす</li><li><strong>炊く</strong>：筍ご飯など季節のご飯</li></ul><h3 id="夏の調理法">夏の調理法</h3><ul><li><strong>冷やす</strong>：そうめんや冷やし中華</li><li><strong>焼く</strong>：うなぎや魚の蒲焼き</li><li><strong>漬ける</strong>：きゅうりの漬物</li></ul><h3 id="秋の調理法">秋の調理法</h3><ul><li><strong>煮る</strong>：栗やさつまいもの煮物</li><li><strong>焼く</strong>：秋刀魚の塩焼き</li><li><strong>炊く</strong>：松茸ご飯</li></ul><h3 id="冬の調理法">冬の調理法</h3><ul><li><strong>煮込む</strong>：おでんや鍋料理</li><li><strong>蒸す</strong>：茶碗蒸し</li><li><strong>揚げる</strong>：天ぷら</li></ul><h2 id="季節の盛り付け">季節の盛り付け</h2><h3 id="春の盛り付け">春の盛り付け</h3><ul><li><strong>桜色</strong>：ピンクや薄紅色</li><li><strong>新緑</strong>：若葉の緑色</li><li><strong>花のモチーフ</strong>：桜や菜の花</li></ul><h3 id="夏の盛り付け">夏の盛り付け</h3><ul><li><strong>涼しさ</strong>：透明感のある器</li><li><strong>青系</strong>：涼やかな色合い</li><li><strong>流水</strong>：水の流れを表現</li></ul><h3 id="秋の盛り付け">秋の盛り付け</h3><ul><li><strong>紅葉色</strong>：赤やオレンジ</li><li><strong>実り</strong>：豊かな色合い</li><li><strong>月</strong>：中秋の名月を意識</li></ul><h3 id="冬の盛り付け">冬の盛り付け</h3><ul><li><strong>温かさ</strong>：深い色合い</li><li><strong>雪</strong>：白い器や盛り付け</li><li><strong>暖色</strong>：温かみのある色</li></ul><h2 id="現代の季節料理">現代の季節料理</h2><h3 id="伝統と革新">伝統と革新</h3><p>現代では伝統的な季節料理に新しい要素を加えています：</p><ul><li><strong>フュージョン</strong>：和洋折衷の料理</li><li><strong>プレゼンテーション</strong>：美しい盛り付け</li><li><strong>健康志向</strong>：栄養バランスの考慮</li><li><strong>時短調理</strong>：忙しい現代人向け</li></ul><h3 id="季節感の継承">季節感の継承</h3><p>季節料理の伝統を守りながら、現代に適応させています：</p><ul><li><strong>地産地消</strong>：地域の食材を活用</li><li><strong>有機栽培</strong>：安全で美味しい食材</li><li><strong>家庭料理</strong>：家族で作る楽しさ</li><li><strong>食育</strong>：子供への食文化教育</li></ul><h2 id="結論">結論</h2><p>日本の四季の料理は、自然との調和を大切にする日本人の精神性を反映しています。季節の食材を活かした料理を通じて、私たちは自然の恵みに感謝し、季節の移ろいを味わうことができます。</p><p>現代の忙しい生活の中でも、季節の料理を取り入れることで、心の豊かさと身体の健康を保つことができます。日本の四季の料理文化を理解し、継承していくことは、私たちの食生活をより豊かにし、自然とのつながりを深めることにつながるでしょう。</p>]]></content>
      
      
      <categories>
          
          <category> 料理 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 和食 </tag>
            
            <tag> 季節料理 </tag>
            
            <tag> 日本食文化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>日本の伝統文化：美しさと精神性の探求</title>
      <link href="/2024/11/06/japanese-culture-tradition/"/>
      <url>/2024/11/06/japanese-culture-tradition/</url>
      
        <content type="html"><![CDATA[<h1>日本の伝統文化：美しさと精神性の探求</h1><p>日本の伝統文化は、千年以上の歴史を経て育まれた深い精神性と美意識を反映しています。この記事では、日本の伝統文化の様々な側面を探求し、その現代的な意義について考察します。</p><h2 id="茶道：和敬清寂の精神">茶道：和敬清寂の精神</h2><h3 id="茶道の歴史">茶道の歴史</h3><p>茶道は、16世紀に千利休によって完成された日本の伝統芸術です。茶道の精神は「和敬清寂」という四つの理念に集約されています：</p><ul><li><strong>和（わ）</strong>：調和と平和</li><li><strong>敬（けい）</strong>：尊敬と礼節</li><li><strong>清（せい）</strong>：清潔と純粋</li><li><strong>寂（じゃく）</strong>：静寂と落ち着き</li></ul><h3 id="茶道の作法">茶道の作法</h3><p>茶道では、細かな作法を通じて精神的な修養を目指します：</p><ul><li><strong>正座</strong>：背筋を伸ばして座る</li><li><strong>お辞儀</strong>：深い敬意を表す</li><li><strong>茶器の扱い</strong>：丁寧で美しい動作</li><li><strong>一期一会</strong>：出会いを大切にする心</li></ul><h2 id="華道：花を通じた自然との対話">華道：花を通じた自然との対話</h2><h3 id="華道の流派">華道の流派</h3><p>華道には様々な流派があり、それぞれ独自の美学を持っています：</p><ul><li><strong>池坊</strong>：最も古い流派、自然の美を重視</li><li><strong>草月流</strong>：現代的な表現を追求</li><li><strong>小原流</strong>：自然主義的なアプローチ</li><li><strong>未生流</strong>：幾何学的な構成美</li></ul><h3 id="華道の精神">華道の精神</h3><p>華道は単なる花の装飾ではなく、自然との調和を目指す精神修養です：</p><ul><li><strong>自然への敬意</strong>：花の生命を大切にする</li><li><strong>空間の美</strong>：余白を活かした構成</li><li><strong>季節感</strong>：四季の移ろいを表現</li><li><strong>心の静寂</strong>：花と向き合う時間</li></ul><h2 id="書道：文字の芸術">書道：文字の芸術</h2><h3 id="書道の歴史">書道の歴史</h3><p>書道は中国から伝来し、日本で独自の発展を遂げました。平安時代には仮名文字が発達し、和様書道が確立されました。</p><h3 id="書道の要素">書道の要素</h3><ul><li><strong>筆法</strong>：筆の運び方と技術</li><li><strong>墨法</strong>：墨の濃淡と調子</li><li><strong>紙法</strong>：紙の選択と扱い</li><li><strong>章法</strong>：全体の構成とバランス</li></ul><h3 id="書道の精神">書道の精神</h3><p>書道は文字を書く技術だけでなく、心の表現でもあります：</p><ul><li><strong>集中力</strong>：一筆一筆に集中する</li><li><strong>呼吸</strong>：深い呼吸で心を整える</li><li><strong>表現力</strong>：感情を文字に込める</li><li><strong>継続性</strong>：日々の練習の積み重ね</li></ul><h2 id="武道：心身の鍛錬">武道：心身の鍛錬</h2><h3 id="武道の種類">武道の種類</h3><p>日本には様々な武道があり、それぞれ独自の哲学を持っています：</p><ul><li><strong>剣道</strong>：剣の道、精神の鍛錬</li><li><strong>柔道</strong>：柔らかな道、相手との調和</li><li><strong>空手道</strong>：空の手、自己防衛と精神修養</li><li><strong>合気道</strong>：気の合わす道、調和の武道</li></ul><h3 id="武道の精神">武道の精神</h3><p>武道は単なる格闘技ではなく、人格形成を目指す道です：</p><ul><li><strong>礼節</strong>：相手への敬意と礼儀</li><li><strong>忍耐</strong>：困難に耐える心</li><li><strong>謙虚</strong>：驕りを戒める心</li><li><strong>勇気</strong>：正しいことを行う勇気</li></ul><h2 id="和食：季節と自然の恵み">和食：季節と自然の恵み</h2><h3 id="和食の特徴">和食の特徴</h3><p>和食は2013年にユネスコ無形文化遺産に登録され、世界に認められた日本の食文化です：</p><ul><li><strong>季節感</strong>：四季折々の食材を活用</li><li><strong>自然の美</strong>：盛り付けの美しさ</li><li><strong>栄養バランス</strong>：健康的な食事構成</li><li><strong>感謝の心</strong>：食材への感謝</li></ul><h3 id="和食の精神">和食の精神</h3><p>和食には深い精神性が込められています：</p><ul><li><strong>もったいない</strong>：食材を無駄にしない心</li><li><strong>いただきます</strong>：感謝の気持ち</li><li><strong>ごちそうさま</strong>：満足と感謝</li><li><strong>旬の食材</strong>：自然のリズムに従う</li></ul><h2 id="着物：日本の美意識">着物：日本の美意識</h2><h3 id="着物の歴史">着物の歴史</h3><p>着物は日本の伝統的な衣装で、時代とともに様々な変化を遂げてきました：</p><ul><li><strong>平安時代</strong>：十二単などの貴族の装束</li><li><strong>江戸時代</strong>：庶民の着物文化の発展</li><li><strong>明治時代</strong>：洋装との共存</li><li><strong>現代</strong>：伝統と革新の融合</li></ul><h3 id="着物の美">着物の美</h3><p>着物には日本の美意識が凝縮されています：</p><ul><li><strong>直線美</strong>：直線的な裁断と縫製</li><li><strong>色彩美</strong>：季節に応じた色彩</li><li><strong>模様美</strong>：伝統的な文様</li><li><strong>着付け美</strong>：美しい着付け技術</li></ul><h2 id="庭園：自然と人工の調和">庭園：自然と人工の調和</h2><h3 id="日本庭園の種類">日本庭園の種類</h3><p>日本庭園には様々な形式があります：</p><ul><li><strong>枯山水</strong>：石と砂で自然を表現</li><li><strong>池泉庭園</strong>：池を中心とした庭園</li><li><strong>茶庭</strong>：茶道のための庭園</li><li><strong>回遊式庭園</strong>：歩きながら楽しむ庭園</li></ul><h3 id="庭園の哲学">庭園の哲学</h3><p>日本庭園は自然を縮小して表現する芸術です：</p><ul><li><strong>自然への敬意</strong>：自然の美を再現</li><li><strong>ミニチュア化</strong>：大きな自然を小さく表現</li><li><strong>象徴性</strong>：石や砂で山や海を表現</li><li><strong>精神性</strong>：瞑想と内省の場</li></ul><h2 id="現代における伝統文化">現代における伝統文化</h2><h3 id="伝統の継承">伝統の継承</h3><p>現代社会において、伝統文化の継承は重要な課題です：</p><ul><li><strong>若者の関心</strong>：伝統文化への興味喚起</li><li><strong>教育の役割</strong>：学校での伝統文化教育</li><li><strong>国際交流</strong>：世界への文化発信</li><li><strong>デジタル化</strong>：新しい技術との融合</li></ul><h3 id="伝統と革新">伝統と革新</h3><p>伝統文化は現代社会で新たな価値を生み出しています：</p><ul><li><strong>グローバル化</strong>：世界への文化発信</li><li><strong>観光資源</strong>：文化観光の促進</li><li><strong>精神性</strong>：現代人の心の拠り所</li><li><strong>創造性</strong>：新しい表現の源泉</li></ul><h2 id="結論">結論</h2><p>日本の伝統文化は、単なる過去の遺産ではなく、現代社会においても深い意義を持つ精神的な財産です。これらの文化を通じて、私たちは自然との調和、他者への敬意、そして自己修養の大切さを学ぶことができます。</p><p>伝統文化を理解し、継承していくことは、私たちのアイデンティティを確立し、より豊かな人生を送るための重要な要素です。現代の忙しい生活の中でも、これらの伝統的な価値観を取り入れることで、心の豊かさと精神的な充実を得ることができるでしょう。</p>]]></content>
      
      
      <categories>
          
          <category> 文化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日本文化 </tag>
            
            <tag> 伝統 </tag>
            
            <tag> 精神性 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>The Art of Creative Writing： A Comprehensive Guide for Aspiring Authors</title>
      <link href="/2024/11/06/creative-writing-guide/"/>
      <url>/2024/11/06/creative-writing-guide/</url>
      
        <content type="html"><![CDATA[<h1>The Art of Creative Writing: A Comprehensive Guide for Aspiring Authors</h1><p>Creative writing is a powerful form of self-expression that allows us to explore imagination, share stories, and connect with readers on a deep emotional level. This comprehensive guide will help you develop your creative writing skills and find your unique voice.</p><h2 id="Understanding-Creative-Writing">Understanding Creative Writing</h2><h3 id="What-is-Creative-Writing">What is Creative Writing?</h3><p>Creative writing encompasses various forms of artistic expression through written language, including:</p><ul><li><strong>Fiction</strong>: Novels, short stories, and novellas</li><li><strong>Poetry</strong>: Verse, free verse, and experimental forms</li><li><strong>Creative Nonfiction</strong>: Personal essays, memoirs, and literary journalism</li><li><strong>Drama</strong>: Plays and screenplays</li><li><strong>Children’s Literature</strong>: Picture books and young adult fiction</li></ul><h3 id="The-Creative-Writing-Process">The Creative Writing Process</h3><ul><li><strong>Inspiration</strong>: Finding ideas and creative sparks</li><li><strong>Planning</strong>: Outlining and structuring your work</li><li><strong>Drafting</strong>: Getting your ideas on paper</li><li><strong>Revision</strong>: Refining and improving your writing</li><li><strong>Editing</strong>: Polishing for publication</li></ul><h2 id="Developing-Your-Writing-Skills">Developing Your Writing Skills</h2><h3 id="Reading-as-a-Writer">Reading as a Writer</h3><ul><li><strong>Analyze Structure</strong>: Study how other authors organize their work</li><li><strong>Study Style</strong>: Examine sentence structure and word choice</li><li><strong>Identify Themes</strong>: Understand underlying messages and meanings</li><li><strong>Learn Techniques</strong>: Observe how authors create effects</li></ul><h3 id="Writing-Exercises">Writing Exercises</h3><ul><li><strong>Free Writing</strong>: Unstructured writing to generate ideas</li><li><strong>Character Development</strong>: Creating detailed character profiles</li><li><strong>Scene Writing</strong>: Focusing on specific moments or interactions</li><li><strong>Dialogue Practice</strong>: Writing conversations between characters</li></ul><h2 id="Elements-of-Fiction">Elements of Fiction</h2><h3 id="Character-Development">Character Development</h3><ul><li><strong>Protagonist</strong>: Main character with clear goals and motivations</li><li><strong>Antagonist</strong>: Character or force opposing the protagonist</li><li><strong>Supporting Characters</strong>: Secondary characters who enhance the story</li><li><strong>Character Arc</strong>: How characters change throughout the story</li></ul><h3 id="Plot-Structure">Plot Structure</h3><ul><li><strong>Exposition</strong>: Setting up the world and characters</li><li><strong>Rising Action</strong>: Building tension and conflict</li><li><strong>Climax</strong>: The turning point or highest tension</li><li><strong>Falling Action</strong>: Resolving conflicts and consequences</li><li><strong>Resolution</strong>: Final outcome and closure</li></ul><h3 id="Setting-and-World-Building">Setting and World-Building</h3><ul><li><strong>Physical Environment</strong>: Time, place, and atmosphere</li><li><strong>Social Context</strong>: Cultural, political, and economic factors</li><li><strong>Rules and Systems</strong>: Magic, technology, or social structures</li><li><strong>Sensory Details</strong>: Engaging all five senses</li></ul><h3 id="Point-of-View">Point of View</h3><ul><li><strong>First Person</strong>: “I” perspective, intimate but limited</li><li><strong>Second Person</strong>: “You” perspective, immersive but challenging</li><li><strong>Third Person Limited</strong>: Following one character’s perspective</li><li><strong>Third Person Omniscient</strong>: All-knowing narrator</li></ul><h2 id="Crafting-Compelling-Stories">Crafting Compelling Stories</h2><h3 id="Conflict-and-Tension">Conflict and Tension</h3><ul><li><strong>Internal Conflict</strong>: Character’s inner struggles and decisions</li><li><strong>External Conflict</strong>: Obstacles and opposition from outside</li><li><strong>Interpersonal Conflict</strong>: Disagreements between characters</li><li><strong>Environmental Conflict</strong>: Challenges from nature or society</li></ul><h3 id="Dialogue-Writing">Dialogue Writing</h3><ul><li><strong>Natural Speech</strong>: Mimicking how people actually talk</li><li><strong>Character Voice</strong>: Distinct speech patterns for each character</li><li><strong>Advancing Plot</strong>: Using dialogue to move the story forward</li><li><strong>Subtext</strong>: Hidden meanings beneath surface conversation</li></ul><h3 id="Show-Don’t-Tell">Show, Don’t Tell</h3><ul><li><strong>Action</strong>: Letting characters’ actions reveal their nature</li><li><strong>Dialogue</strong>: Using conversation to convey information</li><li><strong>Sensory Details</strong>: Engaging readers’ senses</li><li><strong>Internal Thoughts</strong>: Revealing character psychology</li></ul><h2 id="Poetry-and-Verse">Poetry and Verse</h2><h3 id="Poetic-Forms">Poetic Forms</h3><ul><li><strong>Sonnet</strong>: 14-line poem with specific rhyme schemes</li><li><strong>Haiku</strong>: Three-line poem with 5-7-5 syllable pattern</li><li><strong>Free Verse</strong>: Poetry without strict meter or rhyme</li><li><strong>Villanelle</strong>: 19-line poem with repeating lines</li></ul><h3 id="Poetic-Devices">Poetic Devices</h3><ul><li><strong>Metaphor</strong>: Direct comparison between unlike things</li><li><strong>Simile</strong>: Comparison using “like” or “as”</li><li><strong>Alliteration</strong>: Repetition of consonant sounds</li><li><strong>Assonance</strong>: Repetition of vowel sounds</li><li><strong>Imagery</strong>: Vivid descriptive language</li></ul><h2 id="Creative-Nonfiction">Creative Nonfiction</h2><h3 id="Personal-Essay">Personal Essay</h3><ul><li><strong>Personal Experience</strong>: Drawing from your own life</li><li><strong>Universal Themes</strong>: Connecting personal stories to broader truths</li><li><strong>Reflection</strong>: Deep thinking about experiences and meaning</li><li><strong>Authentic Voice</strong>: Honest and genuine expression</li></ul><h3 id="Memoir-Writing">Memoir Writing</h3><ul><li><strong>Selective Memory</strong>: Choosing significant events and moments</li><li><strong>Narrative Arc</strong>: Structuring life events into a story</li><li><strong>Character Development</strong>: Portraying real people as characters</li><li><strong>Thematic Focus</strong>: Exploring specific themes or periods</li></ul><h2 id="Writing-Techniques-and-Style">Writing Techniques and Style</h2><h3 id="Voice-and-Tone">Voice and Tone</h3><ul><li><strong>Authorial Voice</strong>: Your unique writing style and personality</li><li><strong>Character Voice</strong>: How individual characters express themselves</li><li><strong>Tone</strong>: The emotional quality of your writing</li><li><strong>Mood</strong>: The atmosphere you create for readers</li></ul><h3 id="Figurative-Language">Figurative Language</h3><ul><li><strong>Metaphors and Similes</strong>: Creating vivid comparisons</li><li><strong>Personification</strong>: Giving human qualities to non-human things</li><li><strong>Hyperbole</strong>: Deliberate exaggeration for effect</li><li><strong>Irony</strong>: Contrast between expectation and reality</li></ul><h3 id="Rhythm-and-Flow">Rhythm and Flow</h3><ul><li><strong>Sentence Variety</strong>: Mixing short and long sentences</li><li><strong>Paragraph Structure</strong>: Organizing ideas effectively</li><li><strong>Transitions</strong>: Smooth connections between ideas</li><li><strong>Pacing</strong>: Controlling the speed of your narrative</li></ul><h2 id="The-Writing-Process">The Writing Process</h2><h3 id="Finding-Inspiration">Finding Inspiration</h3><ul><li><strong>Observation</strong>: Paying attention to the world around you</li><li><strong>Personal Experience</strong>: Drawing from your own life</li><li><strong>Research</strong>: Exploring topics that interest you</li><li><strong>Creative Prompts</strong>: Using exercises to generate ideas</li></ul><h3 id="Overcoming-Writer’s-Block">Overcoming Writer’s Block</h3><ul><li><strong>Free Writing</strong>: Writing without stopping or editing</li><li><strong>Changing Environment</strong>: Writing in different locations</li><li><strong>Reading</strong>: Finding inspiration in other writers’ work</li><li><strong>Taking Breaks</strong>: Allowing your mind to rest and recharge</li></ul><h3 id="Revision-Strategies">Revision Strategies</h3><ul><li><strong>Big Picture Editing</strong>: Focusing on structure and content</li><li><strong>Line Editing</strong>: Improving sentence-level writing</li><li><strong>Peer Review</strong>: Getting feedback from other writers</li><li><strong>Professional Editing</strong>: Working with editors for publication</li></ul><h2 id="Publishing-and-Sharing-Your-Work">Publishing and Sharing Your Work</h2><h3 id="Traditional-Publishing">Traditional Publishing</h3><ul><li><strong>Literary Agents</strong>: Finding representation for your work</li><li><strong>Publishing Houses</strong>: Working with established publishers</li><li><strong>Submission Process</strong>: Following guidelines and requirements</li><li><strong>Contract Negotiation</strong>: Understanding publishing agreements</li></ul><h3 id="Self-Publishing">Self-Publishing</h3><ul><li><strong>Digital Platforms</strong>: Amazon Kindle, Apple Books, and others</li><li><strong>Print-on-Demand</strong>: Physical books without large print runs</li><li><strong>Marketing</strong>: Promoting your work to readers</li><li><strong>Distribution</strong>: Making your work available to audiences</li></ul><h3 id="Online-Publishing">Online Publishing</h3><ul><li><strong>Blogs and Websites</strong>: Sharing work on digital platforms</li><li><strong>Social Media</strong>: Building an audience and sharing excerpts</li><li><strong>Online Magazines</strong>: Submitting to digital publications</li><li><strong>Writing Communities</strong>: Connecting with other writers online</li></ul><h2 id="Building-a-Writing-Community">Building a Writing Community</h2><h3 id="Writing-Groups">Writing Groups</h3><ul><li><strong>Local Groups</strong>: Meeting with writers in your area</li><li><strong>Online Communities</strong>: Connecting with writers worldwide</li><li><strong>Workshops</strong>: Participating in structured writing programs</li><li><strong>Conferences</strong>: Attending writing events and festivals</li></ul><h3 id="Networking-and-Collaboration">Networking and Collaboration</h3><ul><li><strong>Beta Readers</strong>: Getting feedback from trusted readers</li><li><strong>Writing Partners</strong>: Collaborating with other writers</li><li><strong>Mentorship</strong>: Learning from experienced authors</li><li><strong>Professional Organizations</strong>: Joining writing associations</li></ul><h2 id="Developing-Your-Writing-Career">Developing Your Writing Career</h2><h3 id="Building-an-Author-Platform">Building an Author Platform</h3><ul><li><strong>Website</strong>: Creating an online presence</li><li><strong>Social Media</strong>: Engaging with readers and other writers</li><li><strong>Newsletter</strong>: Building an email list of interested readers</li><li><strong>Public Speaking</strong>: Sharing your expertise and experiences</li></ul><h3 id="Continuing-Education">Continuing Education</h3><ul><li><strong>Writing Courses</strong>: Taking classes to improve your skills</li><li><strong>Reading Widely</strong>: Exploring different genres and styles</li><li><strong>Attending Workshops</strong>: Participating in intensive learning experiences</li><li><strong>Staying Current</strong>: Keeping up with industry trends and changes</li></ul><h2 id="Conclusion">Conclusion</h2><p>Creative writing is a journey of self-discovery and artistic expression. Whether you’re writing for personal fulfillment or professional publication, the key is to keep writing, keep learning, and keep growing as an artist.</p><p>Remember that every writer has a unique voice and story to tell. Trust your instincts, embrace your creativity, and don’t be afraid to take risks. The world needs your stories, and your words have the power to inspire, entertain, and change lives.</p><p>Writing is both an art and a craft—it requires both inspiration and discipline. By developing your skills, building your community, and staying committed to your creative vision, you can create meaningful work that resonates with readers and fulfills your artistic aspirations.</p>]]></content>
      
      
      <categories>
          
          <category> Writing </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Creative Writing </tag>
            
            <tag> Fiction </tag>
            
            <tag> Storytelling </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mental Health and Wellness： A Comprehensive Guide to Emotional Well-being</title>
      <link href="/2024/11/06/mental-health-wellness/"/>
      <url>/2024/11/06/mental-health-wellness/</url>
      
        <content type="html"><![CDATA[<h1>Mental Health and Wellness: A Comprehensive Guide to Emotional Well-being</h1><p>Mental health is as important as physical health, yet it’s often overlooked in our busy lives. This comprehensive guide explores various aspects of mental wellness and provides practical strategies for maintaining emotional well-being.</p><h2 id="Understanding-Mental-Health">Understanding Mental Health</h2><h3 id="What-is-Mental-Health">What is Mental Health?</h3><p>Mental health encompasses our emotional, psychological, and social well-being. It affects how we think, feel, and act, influencing how we handle stress, relate to others, and make choices. Good mental health is characterized by:</p><ul><li><strong>Emotional Balance</strong>: Ability to experience and manage emotions appropriately</li><li><strong>Psychological Resilience</strong>: Capacity to cope with life’s challenges</li><li><strong>Social Connection</strong>: Meaningful relationships and community involvement</li><li><strong>Purpose and Meaning</strong>: Sense of direction and fulfillment in life</li></ul><h3 id="Common-Mental-Health-Challenges">Common Mental Health Challenges</h3><ul><li><strong>Anxiety</strong>: Excessive worry and fear about everyday situations</li><li><strong>Depression</strong>: Persistent feelings of sadness and loss of interest</li><li><strong>Stress</strong>: Physical and emotional tension from life pressures</li><li><strong>Burnout</strong>: Emotional exhaustion from prolonged stress</li><li><strong>Loneliness</strong>: Feeling disconnected from others</li></ul><h2 id="Building-Emotional-Resilience">Building Emotional Resilience</h2><h3 id="Self-Awareness">Self-Awareness</h3><ul><li><strong>Emotional Intelligence</strong>: Understanding and managing your emotions</li><li><strong>Mindfulness</strong>: Present-moment awareness without judgment</li><li><strong>Self-Reflection</strong>: Regular introspection and personal growth</li><li><strong>Values Clarification</strong>: Identifying what matters most to you</li></ul><h3 id="Coping-Strategies">Coping Strategies</h3><ul><li><strong>Problem-Solving</strong>: Systematic approach to addressing challenges</li><li><strong>Emotional Regulation</strong>: Techniques for managing intense emotions</li><li><strong>Cognitive Restructuring</strong>: Changing negative thought patterns</li><li><strong>Acceptance</strong>: Embracing difficult emotions and situations</li></ul><h2 id="Stress-Management-Techniques">Stress Management Techniques</h2><h3 id="Physical-Approaches">Physical Approaches</h3><ul><li><strong>Exercise</strong>: Regular physical activity to reduce stress hormones</li><li><strong>Deep Breathing</strong>: Controlled breathing exercises for relaxation</li><li><strong>Progressive Muscle Relaxation</strong>: Systematic tension and release</li><li><strong>Yoga and Tai Chi</strong>: Mind-body practices for stress relief</li></ul><h3 id="Mental-Approaches">Mental Approaches</h3><ul><li><strong>Meditation</strong>: Various forms of mindfulness and concentration practices</li><li><strong>Journaling</strong>: Writing to process thoughts and emotions</li><li><strong>Time Management</strong>: Organizing tasks to reduce overwhelm</li><li><strong>Setting Boundaries</strong>: Learning to say no and prioritize self-care</li></ul><h2 id="Building-Healthy-Relationships">Building Healthy Relationships</h2><h3 id="Communication-Skills">Communication Skills</h3><ul><li><strong>Active Listening</strong>: Fully engaging with others’ perspectives</li><li><strong>Assertive Communication</strong>: Expressing needs and feelings respectfully</li><li><strong>Conflict Resolution</strong>: Addressing disagreements constructively</li><li><strong>Empathy</strong>: Understanding and sharing others’ feelings</li></ul><h3 id="Social-Support">Social Support</h3><ul><li><strong>Building Community</strong>: Creating meaningful connections</li><li><strong>Asking for Help</strong>: Reaching out when you need support</li><li><strong>Supporting Others</strong>: Being there for friends and family</li><li><strong>Professional Support</strong>: Seeking therapy or counseling when needed</li></ul><h2 id="Lifestyle-Factors-for-Mental-Wellness">Lifestyle Factors for Mental Wellness</h2><h3 id="Sleep-Hygiene">Sleep Hygiene</h3><ul><li><strong>Consistent Schedule</strong>: Regular sleep and wake times</li><li><strong>Sleep Environment</strong>: Creating a comfortable, dark, quiet space</li><li><strong>Pre-Sleep Routine</strong>: Relaxing activities before bedtime</li><li><strong>Limiting Stimulants</strong>: Reducing caffeine and screen time</li></ul><h3 id="Nutrition-and-Mental-Health">Nutrition and Mental Health</h3><ul><li><strong>Balanced Diet</strong>: Nutrient-rich foods for brain health</li><li><strong>Omega-3 Fatty Acids</strong>: Found in fish, nuts, and seeds</li><li><strong>Complex Carbohydrates</strong>: Stable energy for mood regulation</li><li><strong>Hydration</strong>: Adequate water intake for cognitive function</li></ul><h3 id="Physical-Activity">Physical Activity</h3><ul><li><strong>Regular Exercise</strong>: Endorphin release and stress reduction</li><li><strong>Outdoor Activities</strong>: Nature exposure for mental well-being</li><li><strong>Movement Variety</strong>: Different types of exercise for overall health</li><li><strong>Consistency</strong>: Making physical activity a regular habit</li></ul><h2 id="Mindfulness-and-Meditation">Mindfulness and Meditation</h2><h3 id="Types-of-Meditation">Types of Meditation</h3><ul><li><strong>Mindfulness Meditation</strong>: Focusing on present-moment awareness</li><li><strong>Loving-Kindness</strong>: Cultivating compassion for self and others</li><li><strong>Body Scan</strong>: Progressive attention to physical sensations</li><li><strong>Breath Awareness</strong>: Using breath as an anchor for attention</li></ul><h3 id="Benefits-of-Mindfulness">Benefits of Mindfulness</h3><ul><li><strong>Stress Reduction</strong>: Lower cortisol levels and anxiety</li><li><strong>Emotional Regulation</strong>: Better control over reactions</li><li><strong>Improved Focus</strong>: Enhanced concentration and attention</li><li><strong>Self-Compassion</strong>: Kinder relationship with yourself</li></ul><h2 id="Professional-Mental-Health-Support">Professional Mental Health Support</h2><h3 id="When-to-Seek-Help">When to Seek Help</h3><ul><li><strong>Persistent Symptoms</strong>: Ongoing emotional difficulties</li><li><strong>Functional Impairment</strong>: Problems with daily activities</li><li><strong>Crisis Situations</strong>: Thoughts of self-harm or suicide</li><li><strong>Relationship Issues</strong>: Ongoing conflicts with others</li></ul><h3 id="Types-of-Mental-Health-Professionals">Types of Mental Health Professionals</h3><ul><li><strong>Psychiatrists</strong>: Medical doctors who can prescribe medication</li><li><strong>Psychologists</strong>: Doctoral-level therapists for talk therapy</li><li><strong>Licensed Counselors</strong>: Master’s-level mental health professionals</li><li><strong>Social Workers</strong>: Professionals with social work degrees</li></ul><h3 id="Therapy-Approaches">Therapy Approaches</h3><ul><li><strong>Cognitive Behavioral Therapy (CBT)</strong>: Changing thought patterns</li><li><strong>Dialectical Behavior Therapy (DBT)</strong>: Skills for emotional regulation</li><li><strong>Acceptance and Commitment Therapy (ACT)</strong>: Values-based living</li><li><strong>Psychodynamic Therapy</strong>: Exploring unconscious patterns</li></ul><h2 id="Self-Care-Practices">Self-Care Practices</h2><h3 id="Daily-Self-Care">Daily Self-Care</h3><ul><li><strong>Morning Routine</strong>: Starting the day with intention</li><li><strong>Breaks and Rest</strong>: Taking regular pauses throughout the day</li><li><strong>Evening Wind-Down</strong>: Preparing for restful sleep</li><li><strong>Gratitude Practice</strong>: Acknowledging positive aspects of life</li></ul><h3 id="Creative-Expression">Creative Expression</h3><ul><li><strong>Art and Music</strong>: Creative outlets for emotional expression</li><li><strong>Writing</strong>: Journaling, poetry, or creative writing</li><li><strong>Movement</strong>: Dance, yoga, or other expressive activities</li><li><strong>Crafting</strong>: Hands-on creative projects</li></ul><h3 id="Nature-Connection">Nature Connection</h3><ul><li><strong>Outdoor Time</strong>: Spending time in natural environments</li><li><strong>Gardening</strong>: Connecting with plants and growth</li><li><strong>Walking</strong>: Mindful movement in nature</li><li><strong>Wildlife Observation</strong>: Appreciating natural beauty</li></ul><h2 id="Digital-Wellness">Digital Wellness</h2><h3 id="Technology-Boundaries">Technology Boundaries</h3><ul><li><strong>Screen Time Limits</strong>: Setting boundaries for device use</li><li><strong>Digital Detox</strong>: Regular breaks from technology</li><li><strong>Mindful Social Media</strong>: Conscious engagement with online platforms</li><li><strong>Notification Management</strong>: Reducing digital interruptions</li></ul><h3 id="Online-Mental-Health-Resources">Online Mental Health Resources</h3><ul><li><strong>Mental Health Apps</strong>: Meditation, mood tracking, and therapy apps</li><li><strong>Online Communities</strong>: Support groups and forums</li><li><strong>Educational Content</strong>: Mental health information and resources</li><li><strong>Teletherapy</strong>: Remote counseling services</li></ul><h2 id="Crisis-Management">Crisis Management</h2><h3 id="Recognizing-Crisis-Signs">Recognizing Crisis Signs</h3><ul><li><strong>Severe Depression</strong>: Persistent hopelessness and despair</li><li><strong>Anxiety Attacks</strong>: Intense fear and physical symptoms</li><li><strong>Suicidal Thoughts</strong>: Thoughts of self-harm or death</li><li><strong>Psychosis</strong>: Loss of contact with reality</li></ul><h3 id="Emergency-Resources">Emergency Resources</h3><ul><li><strong>Crisis Hotlines</strong>: 24/7 support for mental health emergencies</li><li><strong>Emergency Services</strong>: Immediate professional help</li><li><strong>Trusted Contacts</strong>: Friends and family who can provide support</li><li><strong>Safety Planning</strong>: Creating plans for crisis situations</li></ul><h2 id="Long-term-Mental-Wellness">Long-term Mental Wellness</h2><h3 id="Personal-Growth">Personal Growth</h3><ul><li><strong>Lifelong Learning</strong>: Continuous education and skill development</li><li><strong>Goal Setting</strong>: Meaningful objectives for personal fulfillment</li><li><strong>Spiritual Exploration</strong>: Finding meaning and purpose</li><li><strong>Volunteer Work</strong>: Contributing to community and causes</li></ul><h3 id="Prevention-Strategies">Prevention Strategies</h3><ul><li><strong>Regular Check-ins</strong>: Monitoring your mental health status</li><li><strong>Stress Prevention</strong>: Proactive stress management</li><li><strong>Healthy Habits</strong>: Maintaining wellness routines</li><li><strong>Social Connection</strong>: Nurturing relationships and community</li></ul><h2 id="Conclusion">Conclusion</h2><p>Mental health and wellness require ongoing attention and care, just like physical health. By understanding the factors that influence our emotional well-being and implementing practical strategies, we can build resilience and maintain good mental health throughout our lives.</p><p>Remember that seeking help is a sign of strength, not weakness. Everyone faces mental health challenges at some point, and there are many resources and professionals available to provide support. Prioritizing mental wellness is an investment in your overall quality of life and your ability to thrive in all areas of life.</p>]]></content>
      
      
      <categories>
          
          <category> Health </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mental Health </tag>
            
            <tag> Wellness </tag>
            
            <tag> Self-Care </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>The Digital Nomad Lifestyle： Working and Traveling the World</title>
      <link href="/2024/11/06/digital-nomad-lifestyle/"/>
      <url>/2024/11/06/digital-nomad-lifestyle/</url>
      
        <content type="html"><![CDATA[<h1>The Digital Nomad Lifestyle: Working and Traveling the World</h1><p>The digital nomad lifestyle has become increasingly popular as technology enables people to work from anywhere in the world. This guide explores what it means to be a digital nomad and how to successfully embrace this lifestyle.</p><h2 id="What-is-a-Digital-Nomad">What is a Digital Nomad?</h2><h3 id="Definition-and-Concept">Definition and Concept</h3><p>A digital nomad is someone who uses technology to work remotely while traveling and living in different locations. This lifestyle combines:</p><ul><li><strong>Remote Work</strong>: Performing job duties from anywhere with internet access</li><li><strong>Geographic Freedom</strong>: Ability to choose where to live and work</li><li><strong>Flexible Schedule</strong>: Control over when and how you work</li><li><strong>Cultural Immersion</strong>: Experiencing different cultures and communities</li></ul><h3 id="The-Appeal-of-Digital-Nomadism">The Appeal of Digital Nomadism</h3><ul><li><strong>Work-Life Balance</strong>: Blend work and travel seamlessly</li><li><strong>Cultural Experiences</strong>: Immerse in diverse cultures and traditions</li><li><strong>Cost Efficiency</strong>: Live in affordable destinations while earning</li><li><strong>Personal Growth</strong>: Develop adaptability and independence</li><li><strong>Network Building</strong>: Connect with global communities</li></ul><h2 id="Essential-Skills-for-Digital-Nomads">Essential Skills for Digital Nomads</h2><h3 id="Technical-Skills">Technical Skills</h3><ul><li><strong>Digital Literacy</strong>: Proficiency with online tools and platforms</li><li><strong>Communication</strong>: Effective remote communication skills</li><li><strong>Time Management</strong>: Balancing work and exploration</li><li><strong>Problem Solving</strong>: Adapting to new environments and challenges</li></ul><h3 id="Soft-Skills">Soft Skills</h3><ul><li><strong>Adaptability</strong>: Thriving in changing environments</li><li><strong>Self-Discipline</strong>: Maintaining productivity without supervision</li><li><strong>Cultural Sensitivity</strong>: Respecting local customs and traditions</li><li><strong>Networking</strong>: Building relationships in new communities</li></ul><h2 id="Remote-Work-Opportunities">Remote Work Opportunities</h2><h3 id="Popular-Digital-Nomad-Jobs">Popular Digital Nomad Jobs</h3><ul><li><strong>Freelance Writing</strong>: Content creation and copywriting</li><li><strong>Web Development</strong>: Programming and website design</li><li><strong>Digital Marketing</strong>: Social media and SEO services</li><li><strong>Virtual Assistance</strong>: Administrative and support tasks</li><li><strong>Online Teaching</strong>: Language instruction and tutoring</li><li><strong>Graphic Design</strong>: Visual content creation</li><li><strong>Consulting</strong>: Business and technical consulting</li></ul><h3 id="Finding-Remote-Work">Finding Remote Work</h3><ul><li><strong>Freelance Platforms</strong>: Upwork, Fiverr, and Freelancer</li><li><strong>Remote Job Boards</strong>: <a href="http://Remote.co">Remote.co</a>, We Work Remotely</li><li><strong>Company Direct</strong>: Apply to companies with remote policies</li><li><strong>Networking</strong>: Connect with other digital nomads</li><li><strong>Personal Brand</strong>: Build an online presence and portfolio</li></ul><h2 id="Planning-Your-Digital-Nomad-Journey">Planning Your Digital Nomad Journey</h2><h3 id="Financial-Preparation">Financial Preparation</h3><ul><li><strong>Emergency Fund</strong>: 3-6 months of living expenses</li><li><strong>Income Streams</strong>: Multiple sources of remote income</li><li><strong>Budget Planning</strong>: Track expenses and income</li><li><strong>Insurance</strong>: Health, travel, and equipment coverage</li><li><strong>Tax Considerations</strong>: Understand tax obligations</li></ul><h3 id="Destination-Research">Destination Research</h3><ul><li><strong>Cost of Living</strong>: Research expenses in potential destinations</li><li><strong>Internet Quality</strong>: Ensure reliable connectivity for work</li><li><strong>Visa Requirements</strong>: Understand entry and stay requirements</li><li><strong>Safety</strong>: Check travel advisories and local conditions</li><li><strong>Community</strong>: Look for existing digital nomad communities</li></ul><h3 id="Essential-Equipment">Essential Equipment</h3><ul><li><strong>Laptop</strong>: Reliable computer for work</li><li><strong>Mobile Hotspot</strong>: Backup internet connection</li><li><strong>Power Bank</strong>: Portable charging solutions</li><li><strong>Universal Adapter</strong>: Compatible with different outlets</li><li><strong>VPN Service</strong>: Secure internet access</li><li><strong>Backup Storage</strong>: Cloud and physical storage options</li></ul><h2 id="Popular-Digital-Nomad-Destinations">Popular Digital Nomad Destinations</h2><h3 id="Southeast-Asia">Southeast Asia</h3><ul><li><strong>Thailand</strong>: Chiang Mai, Bangkok, and Phuket</li><li><strong>Bali, Indonesia</strong>: Ubud and Canggu</li><li><strong>Vietnam</strong>: Ho Chi Minh City and Hanoi</li><li><strong>Malaysia</strong>: Kuala Lumpur and Penang</li></ul><h3 id="Europe">Europe</h3><ul><li><strong>Portugal</strong>: Lisbon and Porto</li><li><strong>Spain</strong>: Barcelona and Madrid</li><li><strong>Germany</strong>: Berlin and Munich</li><li><strong>Netherlands</strong>: Amsterdam</li></ul><h3 id="Americas">Americas</h3><ul><li><strong>Mexico</strong>: Mexico City and Playa del Carmen</li><li><strong>Colombia</strong>: Medellin and Bogota</li><li><strong>Argentina</strong>: Buenos Aires</li><li><strong>United States</strong>: Austin, Miami, and Portland</li></ul><h2 id="Daily-Life-as-a-Digital-Nomad">Daily Life as a Digital Nomad</h2><h3 id="Work-Routine">Work Routine</h3><ul><li><strong>Dedicated Workspace</strong>: Find quiet, productive environments</li><li><strong>Regular Hours</strong>: Maintain consistent work schedule</li><li><strong>Time Zone Management</strong>: Coordinate with clients and teams</li><li><strong>Productivity Tools</strong>: Use apps for task management and focus</li></ul><h3 id="Accommodation-Options">Accommodation Options</h3><ul><li><strong>Co-living Spaces</strong>: Shared housing with other nomads</li><li><strong>Airbnb</strong>: Short-term rentals with amenities</li><li><strong>Hostels</strong>: Budget-friendly social environments</li><li><strong>Local Rentals</strong>: Longer-term apartment rentals</li><li><strong>House Sitting</strong>: Free accommodation in exchange for care</li></ul><h3 id="Community-Building">Community Building</h3><ul><li><strong>Co-working Spaces</strong>: Professional environments with networking</li><li><strong>Digital Nomad Groups</strong>: Online and offline communities</li><li><strong>Local Events</strong>: Meetups and cultural activities</li><li><strong>Social Media</strong>: Connect with nomad communities</li></ul><h2 id="Challenges-and-Solutions">Challenges and Solutions</h2><h3 id="Common-Challenges">Common Challenges</h3><ul><li><strong>Loneliness</strong>: Being away from family and friends</li><li><strong>Unstable Income</strong>: Irregular work and payment schedules</li><li><strong>Cultural Barriers</strong>: Language and cultural differences</li><li><strong>Work-Life Balance</strong>: Separating work from exploration</li><li><strong>Healthcare</strong>: Access to medical care while traveling</li></ul><h3 id="Solutions-and-Strategies">Solutions and Strategies</h3><ul><li><strong>Regular Communication</strong>: Stay connected with loved ones</li><li><strong>Diversified Income</strong>: Multiple income streams for stability</li><li><strong>Cultural Learning</strong>: Study local languages and customs</li><li><strong>Boundary Setting</strong>: Clear work hours and personal time</li><li><strong>Travel Insurance</strong>: Comprehensive health coverage</li></ul><h2 id="Legal-and-Practical-Considerations">Legal and Practical Considerations</h2><h3 id="Visa-and-Immigration">Visa and Immigration</h3><ul><li><strong>Tourist Visas</strong>: Short-term stays in most countries</li><li><strong>Digital Nomad Visas</strong>: Special visas for remote workers</li><li><strong>Work Permits</strong>: Required for longer-term work in some countries</li><li><strong>Tax Residency</strong>: Understanding tax obligations</li></ul><h3 id="Banking-and-Finance">Banking and Finance</h3><ul><li><strong>International Banking</strong>: Multi-currency accounts</li><li><strong>Digital Payments</strong>: PayPal, TransferWise, and cryptocurrency</li><li><strong>Credit Cards</strong>: Travel-friendly credit options</li><li><strong>Budget Tracking</strong>: Monitor expenses across currencies</li></ul><h2 id="Sustainability-and-Long-term-Planning">Sustainability and Long-term Planning</h2><h3 id="Environmental-Impact">Environmental Impact</h3><ul><li><strong>Slow Travel</strong>: Stay longer in fewer places</li><li><strong>Eco-friendly Transportation</strong>: Use public transit and walking</li><li><strong>Sustainable Accommodation</strong>: Choose environmentally conscious options</li><li><strong>Carbon Offsetting</strong>: Compensate for travel emissions</li></ul><h3 id="Career-Development">Career Development</h3><ul><li><strong>Skill Building</strong>: Continuous learning and development</li><li><strong>Portfolio Building</strong>: Document work and experiences</li><li><strong>Networking</strong>: Build professional relationships globally</li><li><strong>Future Planning</strong>: Consider long-term career goals</li></ul><h2 id="Conclusion">Conclusion</h2><p>The digital nomad lifestyle offers unprecedented freedom and opportunities for personal and professional growth. While it comes with challenges, proper planning and preparation can lead to a fulfilling and sustainable way of life.</p><p>Success as a digital nomad requires adaptability, discipline, and a willingness to embrace uncertainty. By building strong foundations in work, finances, and community, you can create a lifestyle that combines the best of work and travel.</p><p>Remember that digital nomadism is not just about location independence—it’s about creating a life that aligns with your values and aspirations while contributing to the global community of remote workers and travelers.</p>]]></content>
      
      
      <categories>
          
          <category> Lifestyle </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Digital Nomad </tag>
            
            <tag> Remote Work </tag>
            
            <tag> Travel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>A Complete Guide to Sustainable Living： Making Eco-Friendly Choices</title>
      <link href="/2024/11/06/sustainable-living-guide/"/>
      <url>/2024/11/06/sustainable-living-guide/</url>
      
        <content type="html"><![CDATA[<h1>A Complete Guide to Sustainable Living: Making Eco-Friendly Choices</h1><p>Sustainable living is not just a trend; it’s a necessary shift in how we interact with our planet. This comprehensive guide will help you understand and implement sustainable practices in your daily life.</p><h2 id="Understanding-Sustainability">Understanding Sustainability</h2><h3 id="What-is-Sustainable-Living">What is Sustainable Living?</h3><p>Sustainable living means making choices that reduce your environmental impact while maintaining a high quality of life. It involves:</p><ul><li><strong>Conserving Resources</strong>: Using less water, energy, and materials</li><li><strong>Reducing Waste</strong>: Minimizing what goes to landfills</li><li><strong>Supporting Local</strong>: Choosing local products and services</li><li><strong>Protecting Ecosystems</strong>: Preserving biodiversity and natural habitats</li></ul><h3 id="The-Three-Pillars-of-Sustainability">The Three Pillars of Sustainability</h3><ol><li><strong>Environmental</strong>: Protecting natural resources and ecosystems</li><li><strong>Social</strong>: Ensuring fair treatment and quality of life for all</li><li><strong>Economic</strong>: Creating systems that are financially viable long-term</li></ol><h2 id="Energy-Conservation">Energy Conservation</h2><h3 id="Home-Energy-Efficiency">Home Energy Efficiency</h3><ul><li><strong>Insulation</strong>: Properly insulate your home to reduce heating/cooling needs</li><li><strong>Energy-Efficient Appliances</strong>: Choose ENERGY STAR certified products</li><li><strong>LED Lighting</strong>: Replace incandescent bulbs with LED alternatives</li><li><strong>Smart Thermostats</strong>: Automate temperature control for optimal efficiency</li></ul><h3 id="Renewable-Energy-Options">Renewable Energy Options</h3><ul><li><strong>Solar Panels</strong>: Generate your own electricity</li><li><strong>Wind Power</strong>: Community wind projects</li><li><strong>Geothermal</strong>: Ground-source heat pumps</li><li><strong>Green Energy Plans</strong>: Choose renewable energy providers</li></ul><h2 id="Water-Conservation">Water Conservation</h2><h3 id="Indoor-Water-Saving">Indoor Water Saving</h3><ul><li><strong>Low-Flow Fixtures</strong>: Install water-efficient showerheads and faucets</li><li><strong>Dual-Flush Toilets</strong>: Reduce water usage for flushing</li><li><strong>Fix Leaks</strong>: Repair dripping faucets and running toilets</li><li><strong>Efficient Appliances</strong>: Choose water-saving washing machines and dishwashers</li></ul><h3 id="Outdoor-Water-Management">Outdoor Water Management</h3><ul><li><strong>Native Plants</strong>: Choose drought-resistant landscaping</li><li><strong>Rain Barrels</strong>: Collect rainwater for garden use</li><li><strong>Drip Irrigation</strong>: Use efficient watering systems</li><li><strong>Mulching</strong>: Retain soil moisture with organic mulch</li></ul><h2 id="Waste-Reduction">Waste Reduction</h2><h3 id="The-Zero-Waste-Philosophy">The Zero Waste Philosophy</h3><ul><li><strong>Refuse</strong>: Say no to unnecessary items</li><li><strong>Reduce</strong>: Minimize consumption</li><li><strong>Reuse</strong>: Find new purposes for items</li><li><strong>Recycle</strong>: Process materials into new products</li><li><strong>Rot</strong>: Compost organic waste</li></ul><h3 id="Practical-Waste-Reduction">Practical Waste Reduction</h3><ul><li><strong>Bulk Shopping</strong>: Buy items without packaging</li><li><strong>Reusable Containers</strong>: Use glass jars and cloth bags</li><li><strong>Composting</strong>: Turn food scraps into garden soil</li><li><strong>Repair Culture</strong>: Fix items instead of replacing them</li></ul><h2 id="Sustainable-Transportation">Sustainable Transportation</h2><h3 id="Green-Transportation-Options">Green Transportation Options</h3><ul><li><strong>Walking and Cycling</strong>: For short distances</li><li><strong>Public Transit</strong>: Buses, trains, and subways</li><li><strong>Carpooling</strong>: Share rides with others</li><li><strong>Electric Vehicles</strong>: Consider hybrid or electric cars</li></ul><h3 id="Travel-Considerations">Travel Considerations</h3><ul><li><strong>Local Tourism</strong>: Explore nearby destinations</li><li><strong>Carbon Offsetting</strong>: Compensate for travel emissions</li><li><strong>Sustainable Accommodations</strong>: Choose eco-friendly hotels</li><li><strong>Slow Travel</strong>: Take time to experience destinations deeply</li></ul><h2 id="Sustainable-Food-Choices">Sustainable Food Choices</h2><h3 id="Plant-Based-Eating">Plant-Based Eating</h3><ul><li><strong>Reduced Meat Consumption</strong>: Lower environmental impact</li><li><strong>Local and Seasonal</strong>: Support local farmers and reduce transport</li><li><strong>Organic Options</strong>: Choose pesticide-free products</li><li><strong>Food Waste Prevention</strong>: Plan meals and use leftovers</li></ul><h3 id="Sustainable-Food-Practices">Sustainable Food Practices</h3><ul><li><strong>Community Gardens</strong>: Grow your own food</li><li><strong>Farmers Markets</strong>: Support local agriculture</li><li><strong>Food Preservation</strong>: Can, freeze, or dehydrate seasonal produce</li><li><strong>Mindful Eating</strong>: Appreciate food and avoid overconsumption</li></ul><h2 id="Conscious-Consumerism">Conscious Consumerism</h2><h3 id="Ethical-Shopping">Ethical Shopping</h3><ul><li><strong>Fair Trade</strong>: Support fair labor practices</li><li><strong>Second-Hand</strong>: Buy used items when possible</li><li><strong>Quality Over Quantity</strong>: Invest in durable products</li><li><strong>Minimalism</strong>: Own fewer, better things</li></ul><h3 id="Sustainable-Fashion">Sustainable Fashion</h3><ul><li><strong>Slow Fashion</strong>: Choose quality over fast fashion</li><li><strong>Natural Fibers</strong>: Cotton, wool, hemp, and linen</li><li><strong>Vintage Shopping</strong>: Give old clothes new life</li><li><strong>Clothing Care</strong>: Extend garment lifespan through proper care</li></ul><h2 id="Green-Home-and-Garden">Green Home and Garden</h2><h3 id="Eco-Friendly-Home-Products">Eco-Friendly Home Products</h3><ul><li><strong>Natural Cleaners</strong>: Vinegar, baking soda, and essential oils</li><li><strong>Non-Toxic Paints</strong>: Low-VOC or natural paint options</li><li><strong>Sustainable Furniture</strong>: Bamboo, reclaimed wood, or certified sustainable materials</li><li><strong>Energy Monitoring</strong>: Track and optimize energy usage</li></ul><h3 id="Sustainable-Gardening">Sustainable Gardening</h3><ul><li><strong>Organic Methods</strong>: Avoid synthetic pesticides and fertilizers</li><li><strong>Companion Planting</strong>: Natural pest control through plant partnerships</li><li><strong>Water Conservation</strong>: Efficient irrigation and drought-resistant plants</li><li><strong>Wildlife Habitat</strong>: Create spaces for beneficial insects and birds</li></ul><h2 id="Community-Involvement">Community Involvement</h2><h3 id="Local-Sustainability">Local Sustainability</h3><ul><li><strong>Community Gardens</strong>: Participate in shared growing spaces</li><li><strong>Tool Libraries</strong>: Share resources with neighbors</li><li><strong>Repair Cafes</strong>: Learn to fix items with community help</li><li><strong>Environmental Groups</strong>: Join local conservation efforts</li></ul><h3 id="Advocacy-and-Education">Advocacy and Education</h3><ul><li><strong>Stay Informed</strong>: Learn about environmental issues</li><li><strong>Vote Responsibly</strong>: Support environmentally conscious policies</li><li><strong>Share Knowledge</strong>: Educate others about sustainable practices</li><li><strong>Support Organizations</strong>: Donate to environmental causes</li></ul><h2 id="Measuring-Your-Impact">Measuring Your Impact</h2><h3 id="Carbon-Footprint">Carbon Footprint</h3><ul><li><strong>Online Calculators</strong>: Assess your environmental impact</li><li><strong>Lifestyle Changes</strong>: Track improvements over time</li><li><strong>Goal Setting</strong>: Establish realistic sustainability targets</li><li><strong>Progress Monitoring</strong>: Regular assessment of your efforts</li></ul><h3 id="Sustainable-Living-Challenges">Sustainable Living Challenges</h3><ul><li><strong>30-Day Challenges</strong>: Try new sustainable practices</li><li><strong>Zero Waste Week</strong>: Reduce waste for a week</li><li><strong>Meatless Monday</strong>: Start with one day of plant-based eating</li><li><strong>Plastic-Free July</strong>: Eliminate single-use plastics</li></ul><h2 id="Conclusion">Conclusion</h2><p>Sustainable living is a journey, not a destination. Every small change contributes to a larger positive impact on our planet. Start with manageable steps and gradually incorporate more sustainable practices into your lifestyle.</p><p>Remember that sustainability is about balance and making the best choices available to you. Focus on progress rather than perfection, and inspire others through your actions. Together, we can create a more sustainable future for generations to come.</p>]]></content>
      
      
      <categories>
          
          <category> Lifestyle </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Sustainability </tag>
            
            <tag> Environment </tag>
            
            <tag> Green Living </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>The Future of Artificial Intelligence： Trends and Predictions</title>
      <link href="/2024/11/06/artificial-intelligence-future/"/>
      <url>/2024/11/06/artificial-intelligence-future/</url>
      
        <content type="html"><![CDATA[<h1>The Future of Artificial Intelligence: Trends and Predictions</h1><p>Artificial Intelligence (AI) has evolved from a science fiction concept to a transformative technology that is reshaping industries and societies worldwide. This article explores the current trends and future predictions for AI development.</p><h2 id="Current-State-of-AI">Current State of AI</h2><h3 id="Machine-Learning-Advancements">Machine Learning Advancements</h3><p>Machine learning algorithms have become increasingly sophisticated, enabling computers to learn from data without explicit programming. Deep learning, a subset of machine learning, has revolutionized fields such as:</p><ul><li><strong>Computer Vision</strong>: Image and video recognition</li><li><strong>Natural Language Processing</strong>: Text analysis and generation</li><li><strong>Speech Recognition</strong>: Voice-to-text conversion</li><li><strong>Recommendation Systems</strong>: Personalized content delivery</li></ul><h3 id="AI-Applications-in-Daily-Life">AI Applications in Daily Life</h3><p>AI is already integrated into our daily routines through:</p><ul><li><strong>Smartphones</strong>: Virtual assistants and camera features</li><li><strong>Social Media</strong>: Content filtering and friend suggestions</li><li><strong>E-commerce</strong>: Product recommendations and chatbots</li><li><strong>Transportation</strong>: Navigation systems and ride-sharing apps</li></ul><h2 id="Emerging-Trends">Emerging Trends</h2><h3 id="Generative-AI">Generative AI</h3><p>Generative AI models like GPT and DALL-E are creating new possibilities:</p><ul><li><strong>Text Generation</strong>: Automated content creation</li><li><strong>Image Generation</strong>: Artistic and design applications</li><li><strong>Code Generation</strong>: Programming assistance</li><li><strong>Music Composition</strong>: AI-generated melodies</li></ul><h3 id="Edge-AI">Edge AI</h3><p>Moving AI processing to edge devices offers several advantages:</p><ul><li><strong>Reduced Latency</strong>: Faster response times</li><li><strong>Privacy Protection</strong>: Local data processing</li><li><strong>Cost Efficiency</strong>: Lower bandwidth requirements</li><li><strong>Offline Capability</strong>: Function without internet connection</li></ul><h2 id="Industry-Transformations">Industry Transformations</h2><h3 id="Healthcare">Healthcare</h3><p>AI is revolutionizing healthcare through:</p><ul><li><strong>Diagnostic Imaging</strong>: Early disease detection</li><li><strong>Drug Discovery</strong>: Accelerated pharmaceutical research</li><li><strong>Personalized Medicine</strong>: Tailored treatment plans</li><li><strong>Administrative Efficiency</strong>: Automated record keeping</li></ul><h3 id="Finance">Finance</h3><p>The financial sector is leveraging AI for:</p><ul><li><strong>Fraud Detection</strong>: Real-time transaction monitoring</li><li><strong>Algorithmic Trading</strong>: Automated investment strategies</li><li><strong>Risk Assessment</strong>: Credit scoring and insurance</li><li><strong>Customer Service</strong>: Intelligent chatbots</li></ul><h3 id="Manufacturing">Manufacturing</h3><p>AI-driven manufacturing includes:</p><ul><li><strong>Predictive Maintenance</strong>: Equipment failure prevention</li><li><strong>Quality Control</strong>: Automated inspection systems</li><li><strong>Supply Chain Optimization</strong>: Inventory management</li><li><strong>Robotics</strong>: Collaborative robots (cobots)</li></ul><h2 id="Ethical-Considerations">Ethical Considerations</h2><h3 id="Bias-and-Fairness">Bias and Fairness</h3><p>AI systems can inherit biases from training data, leading to:</p><ul><li><strong>Discrimination</strong>: Unfair treatment of certain groups</li><li><strong>Privacy Concerns</strong>: Data collection and usage</li><li><strong>Transparency Issues</strong>: Black-box decision making</li><li><strong>Accountability</strong>: Responsibility for AI decisions</li></ul><h3 id="Job-Displacement">Job Displacement</h3><p>Automation may impact employment:</p><ul><li><strong>Skill Requirements</strong>: Need for AI literacy</li><li><strong>Job Creation</strong>: New roles in AI development</li><li><strong>Economic Inequality</strong>: Potential wealth concentration</li><li><strong>Education Reform</strong>: Preparing workforce for AI era</li></ul><h2 id="Future-Predictions">Future Predictions</h2><h3 id="Short-term-2024-2027">Short-term (2024-2027)</h3><ul><li><strong>Enhanced Personalization</strong>: More tailored user experiences</li><li><strong>Improved Natural Language Understanding</strong>: Better human-AI interaction</li><li><strong>Autonomous Vehicles</strong>: Limited self-driving capabilities</li><li><strong>AI-powered Education</strong>: Personalized learning platforms</li></ul><h3 id="Medium-term-2028-2035">Medium-term (2028-2035)</h3><ul><li><strong>Artificial General Intelligence</strong>: Narrow AI becoming more general</li><li><strong>Brain-Computer Interfaces</strong>: Direct neural communication</li><li><strong>Quantum AI</strong>: Quantum computing integration</li><li><strong>AI Governance</strong>: International AI regulations</li></ul><h3 id="Long-term-2035">Long-term (2035+)</h3><ul><li><strong>Superintelligence</strong>: AI surpassing human intelligence</li><li><strong>Human-AI Collaboration</strong>: Seamless integration</li><li><strong>Space Exploration</strong>: AI-driven space missions</li><li><strong>Scientific Discovery</strong>: AI accelerating research breakthroughs</li></ul><h2 id="Challenges-and-Opportunities">Challenges and Opportunities</h2><h3 id="Technical-Challenges">Technical Challenges</h3><ul><li><strong>Computational Power</strong>: Increasing processing requirements</li><li><strong>Data Quality</strong>: Need for high-quality training data</li><li><strong>Energy Consumption</strong>: Environmental impact of AI systems</li><li><strong>Security</strong>: Protection against AI-based attacks</li></ul><h3 id="Societal-Opportunities">Societal Opportunities</h3><ul><li><strong>Problem Solving</strong>: Addressing global challenges</li><li><strong>Creativity Enhancement</strong>: AI as creative partner</li><li><strong>Accessibility</strong>: Making technology available to all</li><li><strong>Scientific Progress</strong>: Accelerating research and discovery</li></ul><h2 id="Conclusion">Conclusion</h2><p>The future of AI holds immense potential for positive transformation across all aspects of human society. However, realizing this potential requires careful consideration of ethical implications, responsible development practices, and inclusive policies that ensure AI benefits all of humanity.</p><p>As we navigate this AI revolution, it’s crucial to maintain a balance between technological advancement and human values, ensuring that AI serves as a tool for human flourishing rather than a threat to human dignity and autonomy.</p>]]></content>
      
      
      <categories>
          
          <category> Technology </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AI </tag>
            
            <tag> Machine Learning </tag>
            
            <tag> Future </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>家庭园艺完全指南：打造您的绿色空间</title>
      <link href="/2024/11/06/gardening-guide/"/>
      <url>/2024/11/06/gardening-guide/</url>
      
        <content type="html"><![CDATA[<h1>家庭园艺完全指南：打造您的绿色空间</h1><p>园艺不仅能美化环境，还能带来心灵的宁静。本文将为您提供一份完整的家庭园艺指南，帮助您打造属于自己的绿色空间。</p><h2 id="园艺基础知识">园艺基础知识</h2><h3 id="植物生长要素">植物生长要素</h3><ul><li><strong>阳光</strong>：植物进行光合作用的能量来源</li><li><strong>水分</strong>：植物生长和代谢的必需品</li><li><strong>土壤</strong>：提供营养和支撑</li><li><strong>空气</strong>：提供二氧化碳和氧气</li><li><strong>温度</strong>：影响植物生长速度</li></ul><h3 id="土壤类型">土壤类型</h3><ul><li><strong>沙质土</strong>：排水性好，适合多肉植物</li><li><strong>粘土</strong>：保水性强，适合水生植物</li><li><strong>壤土</strong>：理想土壤，适合大多数植物</li></ul><h2 id="适合初学者的植物">适合初学者的植物</h2><h3 id="室内植物">室内植物</h3><ul><li><strong>绿萝</strong>：耐阴，易养护</li><li><strong>吊兰</strong>：净化空气，繁殖简单</li><li><strong>多肉植物</strong>：耐旱，造型可爱</li><li><strong>君子兰</strong>：花期长，观赏价值高</li></ul><h3 id="室外植物">室外植物</h3><ul><li><strong>月季</strong>：四季开花，品种丰富</li><li><strong>茉莉</strong>：香气怡人，易于管理</li><li><strong>薄荷</strong>：可食用，驱虫效果好</li><li><strong>迷迭香</strong>：耐旱，可做香料</li></ul><h2 id="种植技巧">种植技巧</h2><h3 id="播种方法">播种方法</h3><ol><li><strong>准备土壤</strong>：选择疏松肥沃的土壤</li><li><strong>播种深度</strong>：一般为种子直径的2-3倍</li><li><strong>浇水</strong>：保持土壤湿润但不积水</li><li><strong>光照</strong>：根据植物需求提供适当光照</li></ol><h3 id="扦插繁殖">扦插繁殖</h3><ol><li><strong>选择枝条</strong>：选择健康的新生枝条</li><li><strong>处理切口</strong>：斜切，增加生根面积</li><li><strong>插入土壤</strong>：深度为枝条长度的1/3</li><li><strong>保湿</strong>：保持土壤湿润</li></ol><h2 id="日常养护">日常养护</h2><h3 id="浇水技巧">浇水技巧</h3><ul><li><strong>观察土壤</strong>：表层干燥时浇水</li><li><strong>适量原则</strong>：浇透不积水</li><li><strong>时间选择</strong>：早晨或傍晚浇水</li><li><strong>水质要求</strong>：使用室温水</li></ul><h3 id="施肥方法">施肥方法</h3><ul><li><strong>有机肥</strong>：腐熟的动物粪便、堆肥</li><li><strong>无机肥</strong>：氮磷钾复合肥</li><li><strong>施肥时间</strong>：生长季节每月1-2次</li><li><strong>施肥量</strong>：遵循包装说明</li></ul><h3 id="修剪整形">修剪整形</h3><ul><li><strong>去除枯枝</strong>：保持植物健康</li><li><strong>控制高度</strong>：促进分枝</li><li><strong>造型修剪</strong>：创造美观形态</li><li><strong>花期修剪</strong>：延长开花时间</li></ul><h2 id="病虫害防治">病虫害防治</h2><h3 id="常见病害">常见病害</h3><ul><li><strong>白粉病</strong>：叶片出现白色粉末</li><li><strong>黑斑病</strong>：叶片出现黑色斑点</li><li><strong>根腐病</strong>：根部腐烂，植株萎蔫</li></ul><h3 id="防治方法">防治方法</h3><ul><li><strong>预防为主</strong>：保持通风，合理浇水</li><li><strong>物理防治</strong>：手工清除害虫</li><li><strong>生物防治</strong>：使用天敌或生物农药</li><li><strong>化学防治</strong>：使用低毒农药</li></ul><h2 id="季节管理">季节管理</h2><h3 id="春季">春季</h3><ul><li>修剪枯枝</li><li>施肥促进生长</li><li>播种新植物</li><li>防治病虫害</li></ul><h3 id="夏季">夏季</h3><ul><li>增加浇水频率</li><li>遮阳防晒</li><li>防治病虫害</li><li>修剪整形</li></ul><h3 id="秋季">秋季</h3><ul><li>减少浇水</li><li>停止施肥</li><li>收集种子</li><li>准备越冬</li></ul><h3 id="冬季">冬季</h3><ul><li>室内植物保温</li><li>减少浇水</li><li>清理枯叶</li><li>规划来年种植</li></ul><h2 id="创意园艺">创意园艺</h2><h3 id="垂直花园">垂直花园</h3><ul><li>利用墙面空间</li><li>种植攀爬植物</li><li>创造立体景观</li></ul><h3 id="容器园艺">容器园艺</h3><ul><li>选择合适容器</li><li>注意排水设计</li><li>搭配不同植物</li></ul><h3 id="水培园艺">水培园艺</h3><ul><li>无土栽培</li><li>营养液管理</li><li>适合室内种植</li></ul><h2 id="结论">结论</h2><p>园艺是一门需要耐心和细心的艺术。通过不断学习和实践，您一定能够打造出美丽的绿色空间。记住，每一株植物都有生命，用心呵护，它们会回报您美丽的风景和内心的宁静。</p>]]></content>
      
      
      <categories>
          
          <category> 园艺 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 植物 </tag>
            
            <tag> 种植 </tag>
            
            <tag> 养护 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>烹饪基础知识：从零开始学做菜</title>
      <link href="/2024/11/06/cooking-basics/"/>
      <url>/2024/11/06/cooking-basics/</url>
      
        <content type="html"><![CDATA[<h1>烹饪基础知识：从零开始学做菜</h1><p>烹饪是一门艺术，也是一门科学。本文将为您介绍烹饪的基础知识，帮助您从零开始掌握烹饪技巧。</p><h2 id="厨房必备工具">厨房必备工具</h2><h3 id="基础厨具">基础厨具</h3><ul><li><strong>刀具</strong>：主厨刀、水果刀、面包刀</li><li><strong>砧板</strong>：木质或塑料砧板</li><li><strong>锅具</strong>：炒锅、汤锅、平底锅</li><li><strong>铲勺</strong>：木铲、金属铲、汤勺</li></ul><h3 id="测量工具">测量工具</h3><ul><li>量杯和量勺</li><li>厨房秤</li><li>温度计</li></ul><h2 id="基础调味料">基础调味料</h2><h3 id="必备调味料">必备调味料</h3><ul><li><strong>盐</strong>：调味的基础</li><li><strong>糖</strong>：提鲜增甜</li><li><strong>酱油</strong>：增加咸鲜味</li><li><strong>醋</strong>：增加酸味</li><li><strong>料酒</strong>：去腥增香</li></ul><h3 id="香料">香料</h3><ul><li>葱、姜、蒜</li><li>八角、桂皮、香叶</li><li>辣椒、花椒</li><li>孜然、咖喱</li></ul><h2 id="基础烹饪技巧">基础烹饪技巧</h2><h3 id="切菜技巧">切菜技巧</h3><ul><li><strong>丝</strong>：细长条状</li><li><strong>片</strong>：薄片状</li><li><strong>丁</strong>：小方块</li><li><strong>末</strong>：细碎状</li></ul><h3 id="火候控制">火候控制</h3><ul><li><strong>大火</strong>：快速翻炒、爆炒</li><li><strong>中火</strong>：一般炒菜、煮汤</li><li><strong>小火</strong>：慢炖、焖煮</li></ul><h2 id="常见烹饪方法">常见烹饪方法</h2><h3 id="炒">炒</h3><ul><li>热锅冷油</li><li>大火快炒</li><li>保持食材脆嫩</li></ul><h3 id="煮">煮</h3><ul><li>水量要足</li><li>控制火候</li><li>注意时间</li></ul><h3 id="蒸">蒸</h3><ul><li>水开后上锅</li><li>保持蒸汽充足</li><li>避免开盖</li></ul><h3 id="炸">炸</h3><ul><li>油温控制</li><li>分批炸制</li><li>沥油处理</li></ul><h2 id="基础菜谱">基础菜谱</h2><h3 id="番茄炒蛋">番茄炒蛋</h3><p><strong>材料</strong>：</p><ul><li>番茄 2个</li><li>鸡蛋 3个</li><li>盐、糖适量</li></ul><p><strong>步骤</strong>：</p><ol><li>番茄切块，鸡蛋打散</li><li>热锅下油，炒散鸡蛋</li><li>加入番茄翻炒</li><li>加盐糖调味即可</li></ol><h3 id="清炒小白菜">清炒小白菜</h3><p><strong>材料</strong>：</p><ul><li>小白菜 300g</li><li>蒜末 适量</li><li>盐 适量</li></ul><p><strong>步骤</strong>：</p><ol><li>小白菜洗净切段</li><li>热锅下油，爆香蒜末</li><li>加入小白菜翻炒</li><li>加盐调味即可</li></ol><h2 id="营养搭配">营养搭配</h2><h3 id="荤素搭配">荤素搭配</h3><ul><li>每餐应有蛋白质、碳水化合物、维生素</li><li>蔬菜占餐盘的一半</li><li>适量摄入优质蛋白</li></ul><h3 id="色彩搭配">色彩搭配</h3><ul><li>红、黄、绿、白、黑五色搭配</li><li>增加食欲和营养</li></ul><h2 id="安全注意事项">安全注意事项</h2><h3 id="刀具使用">刀具使用</h3><ul><li>保持刀具锋利</li><li>使用正确的切菜姿势</li><li>注意安全距离</li></ul><h3 id="火源安全">火源安全</h3><ul><li>使用燃气时注意通风</li><li>离开厨房时关闭火源</li><li>准备灭火设备</li></ul><h2 id="结论">结论</h2><p>烹饪是一门需要不断练习的技能。通过掌握基础知识，您可以在厨房中创造美味，享受烹饪的乐趣。记住，最好的调味料是耐心和爱心。</p>]]></content>
      
      
      <categories>
          
          <category> 美食 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 烹饪 </tag>
            
            <tag> 菜谱 </tag>
            
            <tag> 技巧 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>旅行摄影技巧：如何拍出令人惊艳的照片</title>
      <link href="/2024/11/06/travel-photography-tips/"/>
      <url>/2024/11/06/travel-photography-tips/</url>
      
        <content type="html"><![CDATA[<h1>旅行摄影技巧：如何拍出令人惊艳的照片</h1><p>旅行摄影是记录美好回忆的最佳方式。本文将分享一些实用的摄影技巧，帮助您在旅途中拍出令人惊艳的照片。</p><h2 id="器材选择">器材选择</h2><h3 id="相机选择">相机选择</h3><ul><li><strong>单反相机</strong>：适合专业摄影，画质优秀</li><li><strong>微单相机</strong>：轻便便携，画质接近单反</li><li><strong>手机摄影</strong>：方便快捷，适合日常记录</li></ul><h3 id="必备配件">必备配件</h3><ul><li>三脚架：用于长时间曝光和自拍</li><li>滤镜：偏振镜、ND滤镜等</li><li>备用电池和存储卡</li><li>清洁工具</li></ul><h2 id="构图技巧">构图技巧</h2><h3 id="三分法则">三分法则</h3><p>将画面分为九宫格，将主体放在交叉点上，能够创造更平衡的构图。</p><h3 id="对称构图">对称构图</h3><p>利用建筑物、水面反射等创造对称效果，营造庄重感。</p><h3 id="引导线">引导线</h3><p>利用道路、河流、桥梁等线条引导观众视线，增加画面深度。</p><h2 id="光线运用">光线运用</h2><h3 id="黄金时段">黄金时段</h3><ul><li><strong>日出后1-2小时</strong>：光线柔和，色彩丰富</li><li><strong>日落前1-2小时</strong>：温暖的光线，长影子</li></ul><h3 id="阴天拍摄">阴天拍摄</h3><p>阴天光线均匀，适合拍摄人像和细节，避免强烈对比。</p><h2 id="不同场景的拍摄技巧">不同场景的拍摄技巧</h2><h3 id="风景摄影">风景摄影</h3><ul><li>使用小光圈（f/8-f/16）获得大景深</li><li>利用前景增加层次感</li><li>注意地平线水平</li></ul><h3 id="人像摄影">人像摄影</h3><ul><li>选择合适的光线角度</li><li>注意背景简洁</li><li>捕捉自然表情</li></ul><h3 id="街拍技巧">街拍技巧</h3><ul><li>观察周围环境</li><li>预判拍摄时机</li><li>尊重被摄对象</li></ul><h2 id="后期处理">后期处理</h2><h3 id="基础调整">基础调整</h3><ul><li>曝光和对比度</li><li>色彩平衡</li><li>锐化和降噪</li></ul><h3 id="创意处理">创意处理</h3><ul><li>黑白转换</li><li>HDR合成</li><li>局部调整</li></ul><h2 id="实用建议">实用建议</h2><h3 id="拍摄前准备">拍摄前准备</h3><ul><li>了解目的地特色</li><li>查看天气预报</li><li>规划拍摄时间</li></ul><h3 id="拍摄中注意">拍摄中注意</h3><ul><li>多角度尝试</li><li>注意安全</li><li>尊重当地文化</li></ul><h3 id="存储和备份">存储和备份</h3><ul><li>及时备份照片</li><li>使用云存储</li><li>整理照片分类</li></ul><h2 id="结论">结论</h2><p>旅行摄影不仅是技术，更是艺术。通过不断练习和尝试，您一定能够拍出令人满意的作品。记住，最好的相机是您随身携带的那一台，最重要的是享受拍摄的过程。</p>]]></content>
      
      
      <categories>
          
          <category> 摄影 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 旅行 </tag>
            
            <tag> 摄影技巧 </tag>
            
            <tag> 构图 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>现代人健康生活方式完全指南</title>
      <link href="/2024/11/06/healthy-lifestyle-guide/"/>
      <url>/2024/11/06/healthy-lifestyle-guide/</url>
      
        <content type="html"><![CDATA[<h1>现代人健康生活方式完全指南</h1><p>在快节奏的现代生活中，保持健康变得越来越重要。本文将为您提供一份全面的健康生活方式指南。</p><h2 id="营养均衡的重要性">营养均衡的重要性</h2><p>良好的营养是健康的基础。我们应该遵循以下原则：</p><h3 id="每日营养需求">每日营养需求</h3><ul><li><strong>蛋白质</strong>：每公斤体重1.2-1.6克</li><li><strong>碳水化合物</strong>：占总热量的45-65%</li><li><strong>脂肪</strong>：占总热量的20-35%</li><li><strong>维生素和矿物质</strong>：通过多样化饮食获取</li></ul><h3 id="推荐食物">推荐食物</h3><ul><li>新鲜蔬菜和水果</li><li>全谷物</li><li>瘦肉和鱼类</li><li>坚果和种子</li><li>低脂乳制品</li></ul><h2 id="规律运动的好处">规律运动的好处</h2><p>运动不仅有助于保持体重，还能改善心血管健康、增强免疫力和提升心情。</p><h3 id="运动建议">运动建议</h3><ul><li><strong>有氧运动</strong>：每周150分钟中等强度或75分钟高强度</li><li><strong>力量训练</strong>：每周2-3次，针对主要肌群</li><li><strong>柔韧性训练</strong>：每周2-3次拉伸运动</li></ul><h2 id="心理健康维护">心理健康维护</h2><p>心理健康与身体健康同样重要。以下是一些维护心理健康的建议：</p><h3 id="压力管理">压力管理</h3><ul><li>学习冥想和深呼吸技巧</li><li>保持规律的作息时间</li><li>培养兴趣爱好</li><li>与朋友和家人保持联系</li></ul><h3 id="睡眠质量">睡眠质量</h3><ul><li>每晚7-9小时睡眠</li><li>保持规律的睡眠时间</li><li>创造良好的睡眠环境</li><li>避免睡前使用电子设备</li></ul><h2 id="生活习惯调整">生活习惯调整</h2><h3 id="戒烟限酒">戒烟限酒</h3><ul><li>完全戒烟</li><li>限制酒精摄入（男性每日不超过2杯，女性不超过1杯）</li></ul><h3 id="定期体检">定期体检</h3><ul><li>每年进行一次全面体检</li><li>根据年龄和性别进行特定筛查</li><li>及时接种疫苗</li></ul><h2 id="结论">结论</h2><p>健康的生活方式需要长期坚持。通过合理的饮食、规律的运动、良好的心理状态和健康的生活习惯，我们可以显著提高生活质量，预防疾病，享受更健康、更快乐的人生。</p>]]></content>
      
      
      <categories>
          
          <category> 健康 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 营养 </tag>
            
            <tag> 运动 </tag>
            
            <tag> 心理健康 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2024年科技趋势展望</title>
      <link href="/2024/11/06/tech-trends-2024/"/>
      <url>/2024/11/06/tech-trends-2024/</url>
      
        <content type="html"><![CDATA[<h1>2024年科技趋势展望</h1><p>随着技术的快速发展，2024年将见证多个重要科技领域的突破性进展。本文将为您详细介绍几个关键趋势。</p><h2 id="人工智能的普及化">人工智能的普及化</h2><p>人工智能技术正在从实验室走向日常生活。从智能助手到自动驾驶汽车，AI正在改变我们的生活方式。特别是大语言模型的发展，使得人机交互变得更加自然和高效。</p><h3 id="主要应用领域">主要应用领域</h3><ul><li><strong>自然语言处理</strong>：更准确的翻译和文本生成</li><li><strong>计算机视觉</strong>：图像识别和视频分析</li><li><strong>机器学习</strong>：个性化推荐和预测分析</li></ul><h2 id="区块链技术的成熟">区块链技术的成熟</h2><p>区块链技术正在从加密货币扩展到更多应用场景。去中心化金融（DeFi）、非同质化代币（NFT）和智能合约正在重塑数字经济的格局。</p><h2 id="元宇宙的探索">元宇宙的探索</h2><p>虚拟现实和增强现实技术的结合，正在创造全新的数字世界。元宇宙不仅是一个概念，更是一个正在快速发展的技术生态系统。</p><h3 id="发展前景">发展前景</h3><p>元宇宙的发展将为娱乐、教育、工作等领域带来革命性的变化。虚拟会议、数字艺术展览、在线教育等应用正在成为现实。</p><h2 id="可持续发展技术">可持续发展技术</h2><p>随着环境问题的日益严重，绿色技术成为2024年的重要趋势。可再生能源、碳捕获技术和可持续材料正在获得更多关注。</p><h2 id="结论">结论</h2><p>2024年将是科技发展的重要一年。这些趋势不仅将改变技术本身，更将深刻影响我们的社会和经济结构。我们需要积极拥抱这些变化，同时也要关注技术发展带来的挑战和机遇。</p>]]></content>
      
      
      <categories>
          
          <category> 科技 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 人工智能 </tag>
            
            <tag> 区块链 </tag>
            
            <tag> 元宇宙 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Solitude主题魔改教程(10)-相册集页面</title>
      <link href="/2024/11/04/Solitude%E4%B8%BB%E9%A2%98%E9%AD%94%E6%94%B9%E6%95%99%E7%A8%8B(10)-%E7%9B%B8%E5%86%8C%E9%9B%86%E9%A1%B5%E9%9D%A2/"/>
      <url>/2024/11/04/Solitude%E4%B8%BB%E9%A2%98%E9%AD%94%E6%94%B9%E6%95%99%E7%A8%8B(10)-%E7%9B%B8%E5%86%8C%E9%9B%86%E9%A1%B5%E9%9D%A2/</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>Solitude主题默认没有相册集页面功能，但有时我们希望展示个人照片和相册。本文将详细介绍如何从blog-solitude项目完整移植相册集页面功能到solitude-latest，包括照片墙、相册分类、私密相册、模态框预览和响应式设计的完整实现方案。</p><hr><h2 id="现象与需求">现象与需求</h2><h3 id="现象">现象</h3><ul><li>Solitude主题默认没有相册集页面</li><li>缺少照片墙展示效果</li><li>无法展示个人相册和照片</li><li>缺少相册分类和私密相册功能</li><li>无法实现照片预览和模态框展示</li></ul><h3 id="期望效果">期望效果</h3><ul><li>独立的相册集页面（<code>/album/</code>）</li><li>照片墙动态展示效果</li><li>支持相册分类和标签筛选</li><li>支持私密相册密码保护</li><li>模态框照片预览功能</li><li>响应式设计，适配不同屏幕尺寸</li><li>视频Banner支持</li><li>照片保护功能（禁止右键下载）</li></ul><hr><h2 id="问题分析">问题分析</h2><h3 id="根本原因">根本原因</h3><ol><li><p><strong>页面类型缺失</strong><br>solitude-latest主题缺少album页面类型的支持</p></li><li><p><strong>模板文件缺失</strong><br>缺少album页面的模板文件和照片墙组件</p></li><li><p><strong>数据管理缺失</strong><br>缺少相册数据的配置和管理机制</p></li><li><p><strong>样式文件缺失</strong><br>缺少album页面的CSS样式文件</p></li><li><p><strong>JavaScript交互缺失</strong><br>缺少照片墙动态布局和模态框交互逻辑</p></li><li><p><strong>静态资源缺失</strong><br>缺少背景图片和照片资源</p></li></ol><hr><h2 id="修改文件清单">修改文件清单</h2><ul><li><code>solitude-latest/source/album/index.md</code></li><li><code>solitude-latest/source/_data/album.yml</code></li><li><code>solitude-latest/node_modules/hexo-theme-solitude/layout/page.pug</code></li><li><code>solitude-latest/node_modules/hexo-theme-solitude/layout/includes/page/album.pug</code></li><li><code>solitude-latest/node_modules/hexo-theme-solitude/layout/includes/widgets/page/album/content.pug</code></li><li><code>solitude-latest/node_modules/hexo-theme-solitude/source/css/_page/album.styl</code></li><li><code>solitude-latest/node_modules/hexo-theme-solitude/source/css/album-modal.css</code></li><li><code>solitude-latest/node_modules/hexo-theme-solitude/source/js/custom/album.js</code></li><li><code>solitude-latest/node_modules/hexo-theme-solitude/source/js/custom/album-modal.js</code></li><li><code>solitude-latest/node_modules/hexo-theme-solitude/source/js/custom/photo-wall.js</code></li><li><code>solitude-latest/public/img/letter.png</code></li><li><code>solitude-latest/_config.solitude.yml</code> (脚本引入配置)</li><li><code>solitude-latest/node_modules/hexo-theme-solitude/_config.yml</code> (主题配置)</li></ul><hr><h2 id="详细修改步骤">详细修改步骤</h2><h3 id="1-创建相册集页面配置">1. 创建相册集页面配置</h3><p><strong>文件路径：</strong><br><code>solitude-latest/source/album/index.md</code></p><p><strong>文件内容：</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">相册集</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2024-11-21 16:55:25</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">album</span></span><br><span class="line"><span class="attr">cover:</span> <span class="string">/mp4/album-banner.mp4</span></span><br><span class="line"><span class="attr">desc:</span> <span class="string">朝花夕拾，回忆往昔</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><p><strong>配置说明：</strong></p><ul><li><code>type: album</code> - 页面类型为album</li><li><code>cover: /mp4/album-banner.mp4</code> - 设置banner视频</li><li><code>desc</code> - banner描述文字</li></ul><hr><h3 id="2-创建相册数据配置文件">2. 创建相册数据配置文件</h3><p><strong>文件路径：</strong><br><code>solitude-latest/source/_data/album.yml</code></p><p><strong>文件结构：</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">gallery:</span></span><br><span class="line">  <span class="attr">photo_wall:</span></span><br><span class="line">    <span class="attr">class_name:</span> <span class="string">照片墙</span></span><br><span class="line">    <span class="attr">photo_list:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">可爱黑猫1</span></span><br><span class="line">        <span class="attr">imgUrl:</span> <span class="string">https://i.imgur.com/6XYUqLB.png</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">可爱黑猫2</span></span><br><span class="line">        <span class="attr">imgUrl:</span> <span class="string">https://i.imgur.com/e11gTUR.png</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">清晨阳光</span></span><br><span class="line">        <span class="attr">imgUrl:</span> <span class="string">https://i.imgur.com/P6NLpMD.jpeg</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">午日阳光</span></span><br><span class="line">        <span class="attr">imgUrl:</span> <span class="string">https://i.imgur.com/6pq7dg2.png</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">白月光</span></span><br><span class="line">        <span class="attr">imgUrl:</span> <span class="string">https://i.imgur.com/aX0Isw8.png</span></span><br><span class="line">  <span class="attr">album:</span></span><br><span class="line">    <span class="attr">class_name:</span> <span class="string">相册</span></span><br><span class="line">    <span class="attr">album_list:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">我怀念的</span></span><br><span class="line">        <span class="attr">cover:</span> <span class="string">https://i.imgur.com/2dPOSXZ.png</span></span><br><span class="line">        <span class="attr">access:</span> <span class="string">public</span></span><br><span class="line">        <span class="attr">date:</span> <span class="number">2021-01-01</span></span><br><span class="line">        <span class="attr">tag:</span> <span class="string">大学</span></span><br><span class="line">        <span class="attr">album_img_list:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">大学时光</span></span><br><span class="line">            <span class="attr">url:</span> <span class="string">https://i.imgur.com/XUirRGd.png</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">大厂经历</span></span><br><span class="line">            <span class="attr">url:</span> <span class="string">https://i.imgur.com/PCBmac3.png</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">实习经历</span></span><br><span class="line">            <span class="attr">url:</span> <span class="string">https://i.imgur.com/nT7KMiY.jpeg</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">自习室</span></span><br><span class="line">        <span class="attr">cover:</span> <span class="string">https://i.imgur.com/2dPOSXZ.png</span></span><br><span class="line">        <span class="attr">access:</span> <span class="string">public</span></span><br><span class="line">        <span class="attr">date:</span> <span class="number">2021-01-01</span></span><br><span class="line">        <span class="attr">tag:</span> <span class="string">大学</span></span><br><span class="line">        <span class="attr">album_img_list:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">大学时光</span></span><br><span class="line">            <span class="attr">url:</span> <span class="string">https://i.imgur.com/2dPOSXZ.png</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">大厂经历</span></span><br><span class="line">            <span class="attr">url:</span> <span class="string">https://i.imgur.com/2dPOSXZ.png</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">体育课</span></span><br><span class="line">        <span class="attr">cover:</span> <span class="string">https://i.imgur.com/2dPOSXZ.png</span></span><br><span class="line">        <span class="attr">access:</span> <span class="string">public</span></span><br><span class="line">        <span class="attr">date:</span> <span class="number">2021-01-01</span></span><br><span class="line">        <span class="attr">tag:</span> <span class="string">大学</span></span><br><span class="line">        <span class="attr">album_img_list:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">大学时光</span></span><br><span class="line">            <span class="attr">url:</span> <span class="string">https://i.imgur.com/2dPOSXZ.png</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">大厂经历</span></span><br><span class="line">            <span class="attr">url:</span> <span class="string">https://i.imgur.com/2dPOSXZ.png</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">运动会</span></span><br><span class="line">        <span class="attr">cover:</span> <span class="string">https://i.imgur.com/2dPOSXZ.png</span></span><br><span class="line">        <span class="attr">access:</span> <span class="string">public</span></span><br><span class="line">        <span class="attr">date:</span> <span class="number">2021-01-01</span></span><br><span class="line">        <span class="attr">tag:</span> <span class="string">大学</span></span><br><span class="line">        <span class="attr">album_img_list:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">大学时光</span></span><br><span class="line">            <span class="attr">url:</span> <span class="string">https://i.imgur.com/2dPOSXZ.png</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">大厂经历</span></span><br><span class="line">            <span class="attr">url:</span> <span class="string">https://i.imgur.com/2dPOSXZ.png</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">空手道社团</span></span><br><span class="line">        <span class="attr">cover:</span> <span class="string">https://i.imgur.com/2dPOSXZ.png</span></span><br><span class="line">        <span class="attr">access:</span> <span class="string">public</span></span><br><span class="line">        <span class="attr">date:</span> <span class="number">2021-01-01</span></span><br><span class="line">        <span class="attr">tag:</span> <span class="string">大学</span></span><br><span class="line">        <span class="attr">album_img_list:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">大学时光</span></span><br><span class="line">            <span class="attr">url:</span> <span class="string">https://i.imgur.com/2dPOSXZ.png</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">大厂经历</span></span><br><span class="line">            <span class="attr">url:</span> <span class="string">https://i.imgur.com/2dPOSXZ.png</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">支教活动</span></span><br><span class="line">        <span class="attr">cover:</span> <span class="string">https://i.imgur.com/2dPOSXZ.png</span></span><br><span class="line">        <span class="attr">access:</span> <span class="string">public</span></span><br><span class="line">        <span class="attr">date:</span> <span class="number">2021-01-01</span></span><br><span class="line">        <span class="attr">tag:</span> <span class="string">大学</span></span><br><span class="line">        <span class="attr">album_img_list:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">大学时光</span></span><br><span class="line">            <span class="attr">url:</span> <span class="string">https://i.imgur.com/2dPOSXZ.png</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">大厂经历</span></span><br><span class="line">            <span class="attr">url:</span> <span class="string">https://i.imgur.com/2dPOSXZ.png</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">团建</span></span><br><span class="line">        <span class="attr">cover:</span> <span class="string">https://i.imgur.com/2dPOSXZ.png</span></span><br><span class="line">        <span class="attr">access:</span> <span class="string">public</span></span><br><span class="line">        <span class="attr">date:</span> <span class="number">2021-01-01</span></span><br><span class="line">        <span class="attr">tag:</span> <span class="string">大学</span></span><br><span class="line">        <span class="attr">album_img_list:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">大学时光</span></span><br><span class="line">            <span class="attr">url:</span> <span class="string">https://i.imgur.com/2dPOSXZ.png</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">大厂经历</span></span><br><span class="line">            <span class="attr">url:</span> <span class="string">https://i.imgur.com/2dPOSXZ.png</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">两个人的时光</span></span><br><span class="line">        <span class="attr">cover:</span> <span class="string">https://i.imgur.com/2dPOSXZ.png</span></span><br><span class="line">        <span class="attr">access:</span> <span class="string">private</span></span><br><span class="line">        <span class="attr">password:</span> <span class="string">7UJM&#x27;ujm</span></span><br><span class="line">        <span class="attr">date:</span> <span class="number">2021-01-01</span></span><br><span class="line">        <span class="attr">tag:</span> <span class="string">浪漫</span></span><br><span class="line">        <span class="attr">album_img_list:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">一起看电影</span></span><br><span class="line">            <span class="attr">url:</span> <span class="string">https://i.imgur.com/2dPOSXZ.png</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">一起看猫咪迷因</span></span><br><span class="line">            <span class="attr">url:</span> <span class="string">https://i.imgur.com/2dPOSXZ.png</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">九寨沟之行</span></span><br><span class="line">        <span class="attr">cover:</span> <span class="string">https://i.imgur.com/2dPOSXZ.png</span></span><br><span class="line">        <span class="attr">access:</span> <span class="string">private</span></span><br><span class="line">        <span class="attr">password:</span> <span class="string">7UJM&#x27;ujm</span></span><br><span class="line">        <span class="attr">date:</span> <span class="number">2021-01-01</span></span><br><span class="line">        <span class="attr">tag:</span> <span class="string">旅行</span></span><br><span class="line">        <span class="attr">album_img_list:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">一起看电影</span></span><br><span class="line">            <span class="attr">url:</span> <span class="string">https://i.imgur.com/2dPOSXZ.png</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">一起看猫咪迷因</span></span><br><span class="line">            <span class="attr">url:</span> <span class="string">https://i.imgur.com/2dPOSXZ.png</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">富士急乐园</span></span><br><span class="line">        <span class="attr">cover:</span> <span class="string">https://i.imgur.com/2dPOSXZ.png</span></span><br><span class="line">        <span class="attr">access:</span> <span class="string">public</span></span><br><span class="line">        <span class="attr">date:</span> <span class="number">2021-01-01</span></span><br><span class="line">        <span class="attr">tag:</span> <span class="string">日常</span></span><br><span class="line">        <span class="attr">album_img_list:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">大学时光</span></span><br><span class="line">            <span class="attr">url:</span> <span class="string">https://i.imgur.com/2dPOSXZ.png</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">大厂经历</span></span><br><span class="line">            <span class="attr">url:</span> <span class="string">https://i.imgur.com/2dPOSXZ.png</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">爬富士山</span></span><br><span class="line">        <span class="attr">cover:</span> <span class="string">https://i.imgur.com/2dPOSXZ.png</span></span><br><span class="line">        <span class="attr">access:</span> <span class="string">private</span></span><br><span class="line">        <span class="attr">password:</span> <span class="string">7UJM&#x27;ujm</span></span><br><span class="line">        <span class="attr">date:</span> <span class="number">2021-01-01</span></span><br><span class="line">        <span class="attr">tag:</span> <span class="string">旅游</span></span><br><span class="line">        <span class="attr">album_img_list:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">一起看电影</span></span><br><span class="line">            <span class="attr">url:</span> <span class="string">https://i.imgur.com/2dPOSXZ.png</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">一起看猫咪迷因</span></span><br><span class="line">            <span class="attr">url:</span> <span class="string">https://i.imgur.com/2dPOSXZ.png</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">京都之旅</span></span><br><span class="line">        <span class="attr">cover:</span> <span class="string">https://i.imgur.com/2dPOSXZ.png</span></span><br><span class="line">        <span class="attr">access:</span> <span class="string">private</span></span><br><span class="line">        <span class="attr">password:</span> <span class="string">7UJM&#x27;ujm</span></span><br><span class="line">        <span class="attr">date:</span> <span class="number">2021-01-01</span></span><br><span class="line">        <span class="attr">tag:</span> <span class="string">旅游</span></span><br><span class="line">        <span class="attr">album_img_list:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">一起看电影</span></span><br><span class="line">            <span class="attr">url:</span> <span class="string">https://i.imgur.com/2dPOSXZ.png</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">一起看猫咪迷因</span></span><br><span class="line">            <span class="attr">url:</span> <span class="string">https://i.imgur.com/2dPOSXZ.png</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">可乐炸鸡</span></span><br><span class="line">        <span class="attr">cover:</span> <span class="string">https://i.imgur.com/2dPOSXZ.png</span></span><br><span class="line">        <span class="attr">access:</span> <span class="string">private</span></span><br><span class="line">        <span class="attr">password:</span> <span class="string">7UJM&#x27;ujm</span></span><br><span class="line">        <span class="attr">date:</span> <span class="number">2021-01-01</span></span><br><span class="line">        <span class="attr">tag:</span> <span class="string">生活</span></span><br><span class="line">        <span class="attr">album_img_list:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">一起看电影</span></span><br><span class="line">            <span class="attr">url:</span> <span class="string">https://i.imgur.com/2dPOSXZ.png</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">一起看猫咪迷因</span></span><br><span class="line">            <span class="attr">url:</span> <span class="string">https://i.imgur.com/2dPOSXZ.png</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">周杰伦日本演唱会</span></span><br><span class="line">        <span class="attr">cover:</span> <span class="string">https://i.imgur.com/2dPOSXZ.png</span></span><br><span class="line">        <span class="attr">access:</span> <span class="string">private</span></span><br><span class="line">        <span class="attr">password:</span> <span class="string">7UJM&#x27;ujm</span></span><br><span class="line">        <span class="attr">date:</span> <span class="number">2021-01-01</span></span><br><span class="line">        <span class="attr">tag:</span> <span class="string">生活</span></span><br><span class="line">        <span class="attr">album_img_list:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">一起看电影</span></span><br><span class="line">            <span class="attr">url:</span> <span class="string">https://i.imgur.com/2dPOSXZ.png</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">一起看猫咪迷因</span></span><br><span class="line">            <span class="attr">url:</span> <span class="string">https://i.imgur.com/2dPOSXZ.png</span></span><br></pre></td></tr></table></figure><p><strong>数据结构说明：</strong></p><ul><li><code>gallery</code> - 相册集数据结构</li><li><code>photo_wall</code> - 照片墙数据<ul><li><code>class_name</code> - 照片墙标题</li><li><code>photo_list</code> - 照片列表</li></ul></li><li><code>album</code> - 相册数据<ul><li><code>class_name</code> - 相册标题</li><li><code>album_list</code> - 相册列表<ul><li><code>name</code> - 相册名称</li><li><code>cover</code> - 相册封面</li><li><code>access</code> - 访问权限（public/private）</li><li><code>password</code> - 私密相册密码</li><li><code>date</code> - 相册日期</li><li><code>tag</code> - 相册标签</li><li><code>album_img_list</code> - 相册图片列表</li></ul></li></ul></li></ul><hr><h3 id="3-修改页面模板支持">3. 修改页面模板支持</h3><p><strong>文件路径：</strong><br><code>solitude-latest/node_modules/hexo-theme-solitude/layout/page.pug</code></p><p><strong>修改内容：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">extends includes/layout.pug</span><br><span class="line"></span><br><span class="line">block content</span><br><span class="line">    main.layout#content-inner(class=page.aside ? &#x27;&#x27; : &#x27;hide-aside&#x27;)</span><br><span class="line">        #page</span><br><span class="line">            case page.type</span><br><span class="line">                when &#x27;categories&#x27;</span><br><span class="line">                    include includes/page/categories</span><br><span class="line">                when &#x27;tags&#x27;</span><br><span class="line">                    include includes/page/tags</span><br><span class="line">                when &#x27;links&#x27;</span><br><span class="line">                    include includes/page/links</span><br><span class="line">                when &#x27;about&#x27;</span><br><span class="line">                    include includes/page/about</span><br><span class="line">                when &#x27;brevity&#x27;</span><br><span class="line">                    include includes/page/brevity</span><br><span class="line">                when &#x27;kit&#x27;</span><br><span class="line">                    include includes/page/kit</span><br><span class="line">                when &#x27;music&#x27;</span><br><span class="line">                    include includes/page/music</span><br><span class="line">                when &#x27;game&#x27;</span><br><span class="line">                    include includes/page/game</span><br><span class="line">                when &#x27;collects&#x27;</span><br><span class="line">                    include includes/page/collects</span><br><span class="line">                when &#x27;musicsheets&#x27;</span><br><span class="line">                    include includes/page/musicsheets</span><br><span class="line">                when &#x27;album&#x27;</span><br><span class="line">                    include includes/page/album</span><br><span class="line">                when &#x27;message&#x27;</span><br><span class="line">                    !=partial(&#x27;includes/page/message&#x27;, &#123;&#125;, &#123;cache: true&#125;)</span><br><span class="line">                when &#x27;recentcomment&#x27;</span><br><span class="line">                    !=partial(&#x27;includes/page/recentcomment&#x27;, &#123;&#125;, &#123;cache: true&#125;)</span><br><span class="line">                when &#x27;banner&#x27;</span><br><span class="line">                    include includes/widgets/page/banner</span><br><span class="line">                    if page.container</span><br><span class="line">                        include includes/page/default</span><br><span class="line">                    else</span><br><span class="line">                        != page.content</span><br><span class="line">                default</span><br><span class="line">                    include includes/page/default</span><br></pre></td></tr></table></figure><p><strong>说明：</strong><br>添加了 <code>when 'album'</code> 条件分支，支持album页面类型。</p><hr><h3 id="4-创建相册页面模板">4. 创建相册页面模板</h3><p><strong>文件路径：</strong><br><code>solitude-latest/node_modules/hexo-theme-solitude/layout/includes/page/album.pug</code></p><p><strong>文件内容：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">include ../widgets/page/banner</span><br><span class="line">include ../widgets/page/album/content</span><br></pre></td></tr></table></figure><p><strong>说明：</strong><br>包含banner组件和相册内容模板。</p><hr><h3 id="5-创建相册内容模板">5. 创建相册内容模板</h3><p><strong>文件路径：</strong><br><code>solitude-latest/node_modules/hexo-theme-solitude/layout/includes/widgets/page/album/content.pug</code></p><p><strong>文件内容：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">// 照片墙标题</span><br><span class="line">div(class=&quot;photo_wall_title&quot;)= site.data.album.gallery.photo_wall.class_name</span><br><span class="line"></span><br><span class="line">// 照片墙主容器</span><br><span class="line">div(id=&quot;photo_wall_section&quot;)</span><br><span class="line">  div(class=&quot;photo_container&quot;)</span><br><span class="line">    // 照片将由JavaScript动态生成</span><br><span class="line"></span><br><span class="line">// 相册部分主容器</span><br><span class="line">div(id=&quot;album_section&quot;)</span><br><span class="line">  div(class=&quot;album_title&quot;)= site.data.album.gallery.album.class_name</span><br><span class="line"></span><br><span class="line">  // 标签容器</span><br><span class="line">  div(class=&quot;album_tags&quot;)</span><br><span class="line">    each tag, index in site.data.album.gallery.album.album_list.map(album =&gt; album.tag).filter((v, i, a) =&gt; a.indexOf(v) === i)</span><br><span class="line">      div(class=&quot;tag&quot; data-tag=tag class=(index === 0 ? &#x27;active&#x27; : &#x27;&#x27;))= `$&#123;tag&#125;`</span><br><span class="line"></span><br><span class="line">  // 相册内容容器</span><br><span class="line">  div(class=&quot;album_container&quot;)</span><br><span class="line">    each album in site.data.album.gallery.album.album_list</span><br><span class="line">      div(class=&quot;album_card&quot; data-tag=album.tag data-images=JSON.stringify(album.album_img_list) data-access=album.access data-password=album.password)</span><br><span class="line">        div(class=&quot;image_wrapper&quot; style=(album.access === &#x27;private&#x27; ? &#x27;filter: blur(8px);&#x27; : &#x27;&#x27;))</span><br><span class="line">          img(src=album.cover alt=album.name class=&quot;album_cover&quot;)</span><br><span class="line">          if album.access === &#x27;private&#x27;</span><br><span class="line">            div(class=&quot;album_lock&quot;) 🔒</span><br><span class="line">        div(class=&quot;album_info&quot;)</span><br><span class="line">          h3(class=&quot;album_name&quot;)= album.name</span><br><span class="line">          - const formattedDate = new Date(album.date).toLocaleDateString(&#x27;zh-CN&#x27;, &#123; year: &#x27;numeric&#x27;, month: &#x27;2-digit&#x27;, day: &#x27;2-digit&#x27; &#125;);</span><br><span class="line">          p 日期: #&#123;formattedDate&#125;</span><br><span class="line"></span><br><span class="line">// 模态框容器（隐藏状态）</span><br><span class="line">div(id=&quot;album_modal&quot; class=&quot;hidden&quot;)</span><br><span class="line">  div(class=&quot;modal_content&quot;)</span><br><span class="line">    img(class=&quot;modal_main_image&quot;)</span><br><span class="line">    div(class=&quot;modal_thumbnails&quot;)</span><br></pre></td></tr></table></figure><p><strong>功能说明：</strong></p><ul><li><strong>照片墙</strong>：显示照片墙标题和容器</li><li><strong>相册分类</strong>：根据标签动态生成分类按钮</li><li><strong>相册卡片</strong>：显示相册封面、名称、日期</li><li><strong>私密相册</strong>：支持密码保护和模糊效果</li><li><strong>模态框</strong>：用于照片预览</li></ul><hr><h3 id="6-创建相册样式文件">6. 创建相册样式文件</h3><p><strong>文件路径：</strong><br><code>solitude-latest/node_modules/hexo-theme-solitude/source/css/_page/album.styl</code></p><p><strong>文件内容：</strong></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 全局变量 */</span></span><br><span class="line"><span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">  <span class="attr">--title-color</span>: <span class="number">#333</span>; <span class="comment">/* 默认浅色模式标题颜色 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> &#123;</span><br><span class="line">  <span class="attr">--title-color</span>: <span class="number">#fff</span>; <span class="comment">/* 深色模式标题颜色 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 照片墙主容器 */</span></span><br><span class="line"><span class="selector-id">#photo_wall_section</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">max-width</span>: <span class="number">1338.49px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">450px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">20px</span> auto;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">&#x27;/img/letter.png&#x27;</span>) center/cover no-repeat;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">visibility</span>: visible;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 照片墙标题样式 */</span></span><br><span class="line"><span class="selector-class">.photo_wall_title</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">1.5rem</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--title-color);</span><br><span class="line">  <span class="attribute">text-align</span>: left;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-class">.photo-wall</span> <span class="selector-class">.section_title</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 照片容器样式 */</span></span><br><span class="line"><span class="selector-class">.photo_container</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 单张照片样式 */</span></span><br><span class="line"><span class="selector-class">.photo</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">0.6s</span> ease;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.photo_img</span> &#123;</span><br><span class="line">  <span class="attribute">max-width</span>: <span class="number">400px</span>;;</span><br><span class="line">  <span class="attribute">max-height</span>: auto;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0deg</span>) <span class="built_in">scale</span>(<span class="number">1</span>);</span><br><span class="line">  <span class="attribute">transition</span>: transform <span class="number">0.5s</span> ease;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">10px</span> solid <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">4px</span> <span class="number">10px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.2</span>);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.photo</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.photo_img</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.2</span>) <span class="built_in">rotate</span>(<span class="number">15deg</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 响应式设计：小屏幕缩放 */</span></span><br><span class="line"><span class="keyword">@media</span> <span class="keyword">only</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">550px</span>) &#123;</span><br><span class="line">  <span class="selector-id">#photo_wall_section</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: none;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">420px</span>;</span><br><span class="line">    <span class="attribute">min-height</span>: <span class="number">320px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">0</span> <span class="number">20px</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.photo_container</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">min-height</span>: <span class="number">220px</span>;</span><br><span class="line">    <span class="attribute">padding-bottom</span>: <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.photo_img</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: auto;</span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">92vw</span>;</span><br><span class="line">    <span class="attribute">max-height</span>: <span class="number">60vw</span>;</span><br><span class="line">    <span class="attribute">border-width</span>: <span class="number">6px</span>;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> <span class="keyword">only</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>: <span class="number">550px</span>) <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">750px</span>) &#123;</span><br><span class="line">  <span class="selector-id">#photo_wall_section</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0.8</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 相册主容器 */</span></span><br><span class="line"><span class="selector-id">#album_section</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">align-items</span>: flex-start;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">20px</span> auto;</span><br><span class="line">  <span class="attribute">max-width</span>: <span class="number">1338.49px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 左侧标题 */</span></span><br><span class="line"><span class="selector-class">.album_title</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">1.5rem</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--title-color);</span><br><span class="line">  <span class="attribute">text-align</span>: left;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 标签容器样式 */</span></span><br><span class="line"><span class="selector-class">.album_tags</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">  <span class="attribute">gap</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.album_tags</span> <span class="selector-class">.tag</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">5px</span> <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#007BFF</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#007BFF</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#f9f9f9</span>;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">0.3s</span> ease;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.album_tags</span> <span class="selector-class">.tag</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#007BFF</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.album_tags</span> <span class="selector-class">.tag</span><span class="selector-class">.active</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#007BFF</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 相册容器 */</span></span><br><span class="line"><span class="selector-class">.album_container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">  <span class="attribute">gap</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">justify-content</span>: flex-start;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 相册卡片 */</span></span><br><span class="line"><span class="selector-class">.album_card</span> &#123;</span><br><span class="line">  <span class="attribute">flex</span>: <span class="number">1</span> <span class="number">1</span> <span class="built_in">calc</span>(<span class="number">20%</span> - <span class="number">16px</span>);</span><br><span class="line">  <span class="attribute">max-width</span>: <span class="built_in">calc</span>(<span class="number">20%</span> - <span class="number">16px</span>);</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">10px</span>; <span class="comment">/* 圆润边框 */</span></span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">6px</span> <span class="number">12px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>), <span class="number">0</span> <span class="number">12px</span> <span class="number">20px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>);</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">justify-content</span>: flex-start;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">transition</span>: transform <span class="number">0.3s</span> ease, box-shadow <span class="number">0.3s</span> ease;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.album_card</span> <span class="selector-class">.image_wrapper</span><span class="selector-attr">[style*=<span class="string">&quot;blur&quot;</span>]</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">filter</span>: <span class="built_in">blur</span>(<span class="number">8px</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.album_card</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">8px</span> <span class="number">16px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.2</span>), <span class="number">0</span> <span class="number">16px</span> <span class="number">24px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.15</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.album_card</span><span class="selector-class">.hidden</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: none <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.album_lock</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">2rem</span>;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.7</span>);</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 图片容器 */</span></span><br><span class="line"><span class="selector-class">.image_wrapper</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">90%</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#f0f0f0</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ddd</span>;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer; <span class="comment">/* 鼠标指针样式 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.image_wrapper</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">background</span>: transparent;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 图片样式 */</span></span><br><span class="line"><span class="selector-class">.image_wrapper</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">object-fit</span>: cover;</span><br><span class="line">  <span class="attribute">transition</span>: transform <span class="number">0.8s</span> ease;</span><br><span class="line">  <span class="attribute">pointer-events</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.image_wrapper</span><span class="selector-pseudo">:hover</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 相册信息 */</span></span><br><span class="line"><span class="selector-class">.album_info</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">20%</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">align-items</span>: flex-start;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.album_info</span> <span class="selector-class">.album_name</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">0.8rem</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#333</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1.2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.album_info</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">0.7rem</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#777</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1.2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> <span class="keyword">only</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">550px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.album_container</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: grid <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">grid-template-columns</span>: <span class="number">1</span>fr <span class="number">1</span>fr;</span><br><span class="line">    <span class="attribute">gap</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">    <span class="attribute">justify-items</span>: stretch;</span><br><span class="line">    <span class="attribute">align-items</span>: stretch;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.album_card</span> &#123;</span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">min-width</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">50vw</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">2px</span> solid <span class="number">#eee</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">aspect-ratio</span>: unset <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-direction</span>: column;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">justify-content</span>: flex-start;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">6px</span> <span class="number">6px</span> <span class="number">16px</span> <span class="number">6px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.image_wrapper</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="built_in">calc</span>(<span class="number">100%</span> - <span class="number">38px</span>);</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">0px</span> <span class="number">0px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.image_wrapper</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">object-fit</span>: cover;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#f8f8f8</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: none;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">transition</span>: transform <span class="number">0.8s</span> <span class="built_in">cubic-bezier</span>(.<span class="number">4</span>,<span class="number">0</span>,.<span class="number">2</span>,<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.image_wrapper</span><span class="selector-pseudo">:hover</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.album_info</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">0</span>;                <span class="comment">/* 紧贴拍立得底部 */</span></span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">background</span>: transparent;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">6px</span> <span class="number">6px</span>;     <span class="comment">/* 顶部0，底部6px，左侧6px，右侧0 */</span></span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-direction</span>: column;</span><br><span class="line">    <span class="attribute">align-items</span>: flex-start;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">2</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">0.8rem</span>;</span><br><span class="line">    <span class="attribute">pointer-events</span>: none;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">38px</span>;             <span class="comment">/* 保证底部白边高度一致，可根据实际微调 */</span></span><br><span class="line">    <span class="attribute">justify-content</span>: space-between; <span class="comment">/* 名字和日期分布上下 */</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.album_info</span> <span class="selector-class">.album_name</span>,</span><br><span class="line">  <span class="selector-class">.album_info</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="built_in">clamp</span>(<span class="number">0.6rem</span>, <span class="number">3vw</span>, <span class="number">0.8rem</span>); <span class="comment">/* 根据屏幕宽度自适应字体大小 */</span></span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">2px</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#333</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">1.2</span>;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">0</span> <span class="number">1px</span> <span class="number">2px</span> <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> <span class="keyword">only</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>: <span class="number">551px</span>) <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">900px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.album_container</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: grid <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">grid-template-columns</span>: <span class="number">1</span>fr <span class="number">1</span>fr <span class="number">1</span>fr;</span><br><span class="line">    <span class="attribute">gap</span>: <span class="number">16px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">    <span class="attribute">justify-items</span>: stretch;</span><br><span class="line">    <span class="attribute">align-items</span>: stretch;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.album_card</span> &#123;</span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">min-width</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">32vw</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">2px</span> solid <span class="number">#eee</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">aspect-ratio</span>: unset <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-direction</span>: column;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">justify-content</span>: flex-start;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">6px</span> <span class="number">6px</span> <span class="number">16px</span> <span class="number">6px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.image_wrapper</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="built_in">calc</span>(<span class="number">100%</span> - <span class="number">38px</span>);</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">10px</span>; <span class="comment">/* 四个角都有圆角 */</span></span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.image_wrapper</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">object-fit</span>: cover;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#f8f8f8</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: none;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">transition</span>: transform <span class="number">0.8s</span> <span class="built_in">cubic-bezier</span>(.<span class="number">4</span>,<span class="number">0</span>,.<span class="number">2</span>,<span class="number">1</span>);</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">10px</span>; <span class="comment">/* 图片本身也加圆角，和外框一致 */</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.image_wrapper</span><span class="selector-pseudo">:hover</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.album_info</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">background</span>: transparent;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">16px</span> <span class="number">0</span> <span class="number">0</span> <span class="number">16px</span>;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-direction</span>: column;</span><br><span class="line">    <span class="attribute">align-items</span>: flex-start;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">2</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">0.85rem</span>;</span><br><span class="line">    <span class="attribute">pointer-events</span>: none;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.album_info</span> <span class="selector-class">.album_name</span>,</span><br><span class="line">  <span class="selector-class">.album_info</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">2px</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#333</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">0.85rem</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">1.2</span>;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">0</span> <span class="number">1px</span> <span class="number">2px</span> <span class="number">#fff</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>样式特点：</strong></p><ul><li><strong>照片墙</strong>：动态背景和照片随机分布</li><li><strong>相册卡片</strong>：3D阴影和悬停效果</li><li><strong>标签筛选</strong>：交互式标签按钮</li><li><strong>私密相册</strong>：模糊效果和锁定图标</li><li><strong>响应式</strong>：适配移动端和桌面端</li></ul><hr><h3 id="7-创建模态框样式文件">7. 创建模态框样式文件</h3><p><strong>文件路径：</strong><br><code>solitude-latest/node_modules/hexo-theme-solitude/source/css/album-modal.css</code></p><p><strong>文件内容：</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 模态框样式 */</span></span><br><span class="line"><span class="selector-id">#album_modal</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: fixed;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.8</span>); <span class="comment">/* 半透明背景 */</span></span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-direction</span>: column;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">1000</span>;</span><br><span class="line">    <span class="attribute">visibility</span>: hidden; <span class="comment">/* 默认隐藏 */</span></span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>; <span class="comment">/* 默认透明 */</span></span><br><span class="line">    <span class="attribute">transition</span>: opacity <span class="number">0.3s</span> ease, visibility <span class="number">0.3s</span> ease; <span class="comment">/* 淡入淡出效果 */</span></span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="selector-id">#album_modal</span><span class="selector-pseudo">:not</span>(<span class="selector-class">.hidden</span>) &#123;</span><br><span class="line">    <span class="attribute">visibility</span>: visible;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/* 模态框内容区域 */</span></span><br><span class="line">  <span class="selector-id">#album_modal</span> <span class="selector-class">.modal_content</span> &#123;</span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">90%</span>; <span class="comment">/* 宽度占屏幕的 90% */</span></span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#fff</span>; <span class="comment">/* 白色背景 */</span></span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span>; <span class="comment">/* 圆角 */</span></span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">1rem</span>; <span class="comment">/* 内边距 */</span></span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">8px</span> <span class="number">16px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.2</span>); <span class="comment">/* 阴影效果 */</span></span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/* 主图片容器及透明遮罩 */</span></span><br><span class="line">  <span class="selector-class">.modal_main_image_wrapper</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">100%</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.modal_main_image_wrapper</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.2</span>);</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">2</span>; <span class="comment">/* 确保遮罩在图片上方 */</span></span><br><span class="line">    <span class="attribute">pointer-events</span>: none;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/* 主图片 */</span></span><br><span class="line">  <span class="selector-id">#album_modal</span> <span class="selector-class">.modal_main_image</span> &#123;</span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">100%</span>; <span class="comment">/* 主图片宽度不超过容器宽度 */</span></span><br><span class="line">    <span class="attribute">max-height</span>: <span class="number">400px</span>; <span class="comment">/* 主图片高度限制 */</span></span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">1rem</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span>; <span class="comment">/* 圆角 */</span></span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">4px</span> <span class="number">8px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>); <span class="comment">/* 主图片阴影 */</span></span><br><span class="line">    <span class="attribute">object-fit</span>: contain; <span class="comment">/* 保持图片比例 */</span></span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/* 缩略图容器 */</span></span><br><span class="line">  <span class="selector-id">#album_modal</span> <span class="selector-class">.modal_thumbnails</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex; <span class="comment">/* 水平排列缩略图 */</span></span><br><span class="line">    <span class="attribute">gap</span>: <span class="number">0.5rem</span>; <span class="comment">/* 缩略图之间的间距 */</span></span><br><span class="line">    <span class="attribute">overflow-x</span>: auto; <span class="comment">/* 横向滚动 */</span></span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0.5rem</span>; <span class="comment">/* 内边距 */</span></span><br><span class="line">    <span class="attribute">justify-content</span>: flex-start; <span class="comment">/* 左对齐 */</span></span><br><span class="line">    <span class="attribute">max-height</span>: <span class="number">150px</span>; <span class="comment">/* 缩略图容器的最大高度 */</span></span><br><span class="line">    <span class="attribute">align-items</span>: center; <span class="comment">/* 垂直居中 */</span></span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/* 缩略图 */</span></span><br><span class="line">  <span class="selector-id">#album_modal</span> <span class="selector-class">.thumbnail</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>; <span class="comment">/* 统一缩略图高度 */</span></span><br><span class="line">    <span class="attribute">flex-shrink</span>: <span class="number">0</span>; <span class="comment">/* 防止图片被压缩 */</span></span><br><span class="line">    <span class="attribute">object-fit</span>: contain; <span class="comment">/* 保持图片比例 */</span></span><br><span class="line">    <span class="attribute">border</span>: <span class="number">2px</span> solid transparent; <span class="comment">/* 默认透明边框 */</span></span><br><span class="line">    <span class="attribute">transition</span>: border <span class="number">0.3s</span> ease, transform <span class="number">0.3s</span> ease; <span class="comment">/* 动画效果 */</span></span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">5px</span>; <span class="comment">/* 缩略图圆角 */</span></span><br><span class="line">    <span class="attribute">cursor</span>: pointer; <span class="comment">/* 鼠标指针样式 */</span></span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="selector-id">#album_modal</span> <span class="selector-class">.thumbnail</span><span class="selector-class">.active</span> &#123;</span><br><span class="line">    <span class="attribute">border-color</span>: <span class="number">#007BFF</span>; <span class="comment">/* 激活缩略图的边框颜色 */</span></span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.1</span>); <span class="comment">/* 放大激活缩略图 */</span></span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="selector-id">#album_modal</span> <span class="selector-class">.thumbnail</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">border-color</span>: <span class="number">#007BFF</span>; <span class="comment">/* 鼠标悬停时边框颜色 */</span></span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.1</span>); <span class="comment">/* 鼠标悬停时放大 */</span></span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="selector-class">.modal_main_image</span> &#123;</span><br><span class="line">    <span class="attribute">pointer-events</span>: none;</span><br><span class="line">    <span class="attribute">user-select</span>: none; <span class="comment">/* 禁止选中文件名 */</span></span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="selector-class">.thumbnail</span> &#123;</span><br><span class="line">    <span class="attribute">pointer-events</span>: auto; <span class="comment">/* 缩略图依然可以点击 */</span></span><br><span class="line">    <span class="attribute">user-select</span>: none;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* 自适应优化 */</span></span><br><span class="line">  <span class="keyword">@media</span> (<span class="attribute">max-width</span>: <span class="number">768px</span>) &#123;</span><br><span class="line">    <span class="selector-id">#album_modal</span> <span class="selector-class">.modal_content</span> &#123;</span><br><span class="line">      <span class="attribute">max-width</span>: <span class="number">95%</span>; <span class="comment">/* 更小屏幕下的模态框宽度 */</span></span><br><span class="line">      <span class="attribute">padding</span>: <span class="number">0.5rem</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="selector-id">#album_modal</span> <span class="selector-class">.modal_main_image</span> &#123;</span><br><span class="line">      <span class="attribute">max-height</span>: <span class="number">300px</span>; <span class="comment">/* 主图片高度减少 */</span></span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="selector-id">#album_modal</span> <span class="selector-class">.thumbnail</span> &#123;</span><br><span class="line">      <span class="attribute">height</span>: <span class="number">80px</span>; <span class="comment">/* 缩略图高度减少 */</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p><strong>功能说明：</strong></p><ul><li><strong>全屏遮罩</strong>：半透明黑色背景</li><li><strong>内容居中</strong>：模态框内容居中显示</li><li><strong>图片预览</strong>：主图片和缩略图展示</li><li><strong>交互控制</strong>：点击缩略图切换主图片</li><li><strong>响应式</strong>：适配移动端显示</li></ul><hr><h3 id="8-创建相册交互JavaScript文件">8. 创建相册交互JavaScript文件</h3><p><strong>文件路径：</strong><br><code>solitude-latest/node_modules/hexo-theme-solitude/source/js/custom/album.js</code></p><p><strong>文件内容：</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">initializeAlbumSectionWithDelegation</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> albumSection = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#album_section&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!albumSection) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;#album_section not found!&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Initializing album section with event delegation...&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 默认分类逻辑</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">applyDefaultCategory</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> activeTag = albumSection.<span class="title function_">querySelector</span>(<span class="string">&quot;.album_tags .tag.active&quot;</span>);</span><br><span class="line">    <span class="keyword">const</span> defaultTag = activeTag || albumSection.<span class="title function_">querySelector</span>(<span class="string">&quot;.album_tags .tag&quot;</span>);</span><br><span class="line">    <span class="keyword">const</span> selectedTag = defaultTag?.<span class="property">dataset</span>.<span class="property">tag</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!selectedTag) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;No default tag found!&quot;</span>);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 切换标签激活状态</span></span><br><span class="line">    albumSection.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;.album_tags .tag&quot;</span>).<span class="title function_">forEach</span>(<span class="function">(<span class="params">el</span>) =&gt;</span> el.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;active&quot;</span>));</span><br><span class="line">    defaultTag.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;active&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 显示与默认标签匹配的相册，隐藏其他相册</span></span><br><span class="line">    albumSection.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;.album_card&quot;</span>).<span class="title function_">forEach</span>(<span class="function">(<span class="params">card</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (card.<span class="property">dataset</span>.<span class="property">tag</span> === selectedTag) &#123;</span><br><span class="line">        card.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;hidden&quot;</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        card.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;hidden&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 禁止图片右键下载</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">disableImageDownload</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    albumSection.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;img&quot;</span>).<span class="title function_">forEach</span>(<span class="function">(<span class="params">img</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 禁用右键菜单</span></span><br><span class="line">      img.<span class="title function_">addEventListener</span>(<span class="string">&quot;contextmenu&quot;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">        event.<span class="title function_">preventDefault</span>();</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 禁用拖拽下载</span></span><br><span class="line">      img.<span class="title function_">addEventListener</span>(<span class="string">&quot;dragstart&quot;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">        event.<span class="title function_">preventDefault</span>();</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 添加 CSS 防止复制</span></span><br><span class="line">      img.<span class="property">style</span>.<span class="property">userSelect</span> = <span class="string">&quot;none&quot;</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 应用默认分类逻辑</span></span><br><span class="line">  <span class="title function_">applyDefaultCategory</span>();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 禁止图片右键下载</span></span><br><span class="line">  <span class="title function_">disableImageDownload</span>();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 绑定事件委托到父容器</span></span><br><span class="line">  albumSection.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 检查是否点击了标签</span></span><br><span class="line">    <span class="keyword">const</span> tagElement = event.<span class="property">target</span>.<span class="title function_">closest</span>(<span class="string">&quot;.album_tags .tag&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (tagElement) &#123;</span><br><span class="line">      <span class="keyword">const</span> selectedTag = tagElement.<span class="property">dataset</span>.<span class="property">tag</span>;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 切换标签激活状态</span></span><br><span class="line">      albumSection.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;.album_tags .tag&quot;</span>).<span class="title function_">forEach</span>(<span class="function">(<span class="params">el</span>) =&gt;</span> el.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;active&quot;</span>));</span><br><span class="line">      tagElement.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;active&quot;</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 显示与选中标签匹配的相册，隐藏其他相册</span></span><br><span class="line">      albumSection.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;.album_card&quot;</span>).<span class="title function_">forEach</span>(<span class="function">(<span class="params">card</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (card.<span class="property">dataset</span>.<span class="property">tag</span> === selectedTag) &#123;</span><br><span class="line">          card.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;hidden&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          card.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;hidden&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Tag clicked: <span class="subst">$&#123;selectedTag&#125;</span>`</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 更新后重新禁止图片下载</span></span><br><span class="line">      <span class="title function_">disableImageDownload</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 初始化页面逻辑</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;DOMContentLoaded&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;DOM fully loaded. Initializing album section...&quot;</span>);</span><br><span class="line">  <span class="title function_">initializeAlbumSectionWithDelegation</span>();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 监听页面迁移（如 pjax:success）</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;pjax:success&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Page migrated. Reinitializing album section...&quot;</span>);</span><br><span class="line">  <span class="title function_">initializeAlbumSectionWithDelegation</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><strong>功能说明：</strong></p><ul><li><strong>标签筛选</strong>：点击标签切换相册分类</li><li><strong>默认分类</strong>：页面加载时显示默认分类</li><li><strong>图片保护</strong>：禁止右键下载和拖拽</li><li><strong>事件委托</strong>：优化性能的事件处理</li><li><strong>页面迁移</strong>：支持PJAX页面跳转</li></ul><hr><h3 id="9-创建模态框JavaScript文件">9. 创建模态框JavaScript文件</h3><p><strong>文件路径：</strong><br><code>solitude-latest/node_modules/hexo-theme-solitude/source/js/custom/album-modal.js</code></p><p><strong>文件内容：</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">initAlbumModal</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> modal = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;album_modal&quot;</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 如果模态框不存在，直接返回</span></span><br><span class="line">  <span class="keyword">if</span> (!modal) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Album modal not found, skipping initialization&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">const</span> mainImage = modal.<span class="title function_">querySelector</span>(<span class="string">&quot;.modal_main_image&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> thumbnails = modal.<span class="title function_">querySelector</span>(<span class="string">&quot;.modal_thumbnails&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 禁止右击和拖拽</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">disableImageInteractions</span> = (<span class="params">imageElement</span>) =&gt; &#123;</span><br><span class="line">    imageElement.<span class="title function_">addEventListener</span>(<span class="string">&quot;contextmenu&quot;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">      event.<span class="title function_">preventDefault</span>();</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    imageElement.<span class="title function_">addEventListener</span>(<span class="string">&quot;dragstart&quot;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">      event.<span class="title function_">preventDefault</span>();</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 显示模态框并加载图片</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">showModal</span> = (<span class="params">images</span>) =&gt; &#123;</span><br><span class="line">    modal.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;hidden&quot;</span>);</span><br><span class="line">    thumbnails.<span class="property">innerHTML</span> = <span class="string">&quot;&quot;</span>; <span class="comment">// 清空缩略图容器</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 默认显示第一张图片</span></span><br><span class="line">    mainImage.<span class="property">src</span> = images[<span class="number">0</span>]?.<span class="property">url</span> || <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="title function_">disableImageInteractions</span>(mainImage);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 渲染缩略图</span></span><br><span class="line">    images.<span class="title function_">forEach</span>(<span class="function">(<span class="params">img, index</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> thumbnail = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;img&quot;</span>);</span><br><span class="line">      thumbnail.<span class="property">src</span> = img.<span class="property">url</span>;</span><br><span class="line">      thumbnail.<span class="property">className</span> = <span class="string">&quot;thumbnail&quot;</span>;</span><br><span class="line">      <span class="keyword">if</span> (index === <span class="number">0</span>) thumbnail.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;active&quot;</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 禁止缩略图右击和拖拽</span></span><br><span class="line">      <span class="title function_">disableImageInteractions</span>(thumbnail);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 点击缩略图切换主图片</span></span><br><span class="line">      thumbnail.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">        mainImage.<span class="property">src</span> = img.<span class="property">url</span>;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;.thumbnail&quot;</span>).<span class="title function_">forEach</span>(<span class="function">(<span class="params">thumb</span>) =&gt;</span> thumb.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;active&quot;</span>));</span><br><span class="line">        thumbnail.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;active&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 阻止事件冒泡，避免触发模态框关闭</span></span><br><span class="line">        event.<span class="title function_">stopPropagation</span>();</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      thumbnails.<span class="title function_">appendChild</span>(thumbnail);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 关闭模态框</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">hideModal</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    modal.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;hidden&quot;</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 事件委托：绑定相册卡片点击事件</span></span><br><span class="line">  <span class="keyword">const</span> albumContainer = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.album_container&quot;</span>);</span><br><span class="line">  <span class="keyword">if</span> (albumContainer) &#123;</span><br><span class="line">    albumContainer.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> card = event.<span class="property">target</span>.<span class="title function_">closest</span>(<span class="string">&quot;.album_card&quot;</span>);</span><br><span class="line">      <span class="keyword">if</span> (card) &#123;</span><br><span class="line">        <span class="keyword">const</span> access = card.<span class="property">dataset</span>.<span class="property">access</span>;</span><br><span class="line">        <span class="keyword">const</span> images = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(card.<span class="property">dataset</span>.<span class="property">images</span> || <span class="string">&quot;[]&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 检查 access 是否为 private</span></span><br><span class="line">        <span class="keyword">if</span> (access === <span class="string">&quot;private&quot;</span>) &#123;</span><br><span class="line">          <span class="keyword">const</span> userPassword = <span class="title function_">prompt</span>(<span class="string">&quot;请输入密码以解锁相册：&quot;</span>);</span><br><span class="line">          <span class="keyword">if</span> (userPassword === card.<span class="property">dataset</span>.<span class="property">password</span>) &#123;</span><br><span class="line">            <span class="title function_">alert</span>(<span class="string">&quot;解锁成功！&quot;</span>);</span><br><span class="line">            <span class="title function_">showModal</span>(images); <span class="comment">// 解锁成功后显示模态框</span></span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="title function_">alert</span>(<span class="string">&quot;密码错误！&quot;</span>);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="comment">// 如果是公共相册直接打开</span></span><br><span class="line">          <span class="keyword">if</span> (images.<span class="property">length</span> &gt; <span class="number">0</span>) <span class="title function_">showModal</span>(images);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 点击模态框背景关闭模态框</span></span><br><span class="line">  modal.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (event.<span class="property">target</span> === modal) &#123;</span><br><span class="line">      <span class="title function_">hideModal</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 初始化或页面迁移后重新绑定事件</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;DOMContentLoaded&quot;</span>, initAlbumModal);</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;pjax:success&quot;</span>, initAlbumModal);</span><br></pre></td></tr></table></figure><p><strong>功能说明：</strong></p><ul><li><strong>模态框控制</strong>：显示和隐藏模态框</li><li><strong>图片预览</strong>：主图片和缩略图展示</li><li><strong>私密相册</strong>：密码验证功能</li><li><strong>图片保护</strong>：禁止右键和拖拽</li><li><strong>交互控制</strong>：点击缩略图切换主图片</li></ul><hr><h3 id="10-创建照片墙JavaScript文件">10. 创建照片墙JavaScript文件</h3><p><strong>文件路径：</strong><br><code>solitude-latest/node_modules/hexo-theme-solitude/source/js/custom/photo-wall.js</code></p><p><strong>文件内容：</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;JavaScript is running!&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 初始化照片墙</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">initializePhotoWall</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Starting to initialize photo wall...&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> wrap = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;photo_wall_section&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> container = wrap?.<span class="title function_">querySelector</span>(<span class="string">&quot;.photo_container&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!wrap) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&quot;#photo_wall_section not found!&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!container) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&quot;.photo_container not found inside #photo_wall_section!&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  container.<span class="property">innerHTML</span> = <span class="string">&quot;&quot;</span>; <span class="comment">// 清空容器内容</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 动态加载照片墙数据</span></span><br><span class="line">  <span class="keyword">const</span> photoWallData = [</span><br><span class="line">    &#123; <span class="attr">imgUrl</span>: <span class="string">&quot;https://i.imgur.com/6XYUqLB.png&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;可爱黑猫1&quot;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">imgUrl</span>: <span class="string">&quot;https://i.imgur.com/e11gTUR.png&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;可爱黑猫2&quot;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">imgUrl</span>: <span class="string">&quot;https://i.imgur.com/P6NLpMD.jpeg&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;清晨阳光&quot;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">imgUrl</span>: <span class="string">&quot;https://i.imgur.com/6pq7dg2.png&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;午日阳光&quot;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">imgUrl</span>: <span class="string">&quot;https://i.imgur.com/aX0Isw8.png&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;白月光&quot;</span> &#125;,</span><br><span class="line">  ];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!<span class="title class_">Array</span>.<span class="title function_">isArray</span>(photoWallData) || photoWallData.<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&quot;Photo wall data is empty or invalid.&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 获取随机位置</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">getRandomPosition</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> containerWidth = wrap.<span class="property">offsetWidth</span>;</span><br><span class="line">    <span class="keyword">const</span> containerHeight = wrap.<span class="property">offsetHeight</span>;</span><br><span class="line">    <span class="keyword">const</span> x = <span class="title class_">Math</span>.<span class="title function_">random</span>() * (containerWidth - <span class="number">200</span>);</span><br><span class="line">    <span class="keyword">const</span> y = <span class="title class_">Math</span>.<span class="title function_">random</span>() * (containerHeight - <span class="number">200</span>);</span><br><span class="line">    <span class="keyword">return</span> &#123; x, y &#125;;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 居中逻辑</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">centerPhoto</span> = (<span class="params">photoDiv</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> centerX = wrap.<span class="property">offsetWidth</span> / <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">const</span> centerY = wrap.<span class="property">offsetHeight</span> / <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">    photoDiv.<span class="property">style</span>.<span class="property">left</span> = <span class="string">`<span class="subst">$&#123;centerX&#125;</span>px`</span>;</span><br><span class="line">    photoDiv.<span class="property">style</span>.<span class="property">top</span> = <span class="string">`<span class="subst">$&#123;centerY&#125;</span>px`</span>;</span><br><span class="line">    photoDiv.<span class="property">style</span>.<span class="property">transform</span> = <span class="string">&quot;translate(-50%, -50%) scale(1.2) rotate(0deg)&quot;</span>;</span><br><span class="line">    photoDiv.<span class="property">style</span>.<span class="property">zIndex</span> = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 随机分布其他图片</span></span><br><span class="line">    container.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;.photo&quot;</span>).<span class="title function_">forEach</span>(<span class="function">(<span class="params">other</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (other !== photoDiv) &#123;</span><br><span class="line">        <span class="keyword">const</span> newPosition = <span class="title function_">getRandomPosition</span>();</span><br><span class="line">        other.<span class="property">style</span>.<span class="property">left</span> = <span class="string">`<span class="subst">$&#123;newPosition.x&#125;</span>px`</span>;</span><br><span class="line">        other.<span class="property">style</span>.<span class="property">top</span> = <span class="string">`<span class="subst">$&#123;newPosition.y&#125;</span>px`</span>;</span><br><span class="line">        other.<span class="property">style</span>.<span class="property">transform</span> = <span class="string">`rotate(<span class="subst">$&#123;<span class="built_in">Math</span>.random() * <span class="number">30</span> - <span class="number">15</span>&#125;</span>deg) scale(1)`</span>;</span><br><span class="line">        other.<span class="property">style</span>.<span class="property">zIndex</span> = <span class="number">1</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 渲染图片</span></span><br><span class="line">  photoWallData.<span class="title function_">forEach</span>(<span class="function">(<span class="params">photo, index</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> photoDiv = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;div&quot;</span>);</span><br><span class="line">    photoDiv.<span class="property">className</span> = <span class="string">&quot;photo&quot;</span>;</span><br><span class="line">    photoDiv.<span class="property">id</span> = <span class="string">`photo_<span class="subst">$&#123;index&#125;</span>`</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> imgElement = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;img&quot;</span>);</span><br><span class="line">    imgElement.<span class="property">src</span> = photo.<span class="property">imgUrl</span>;</span><br><span class="line">    imgElement.<span class="property">alt</span> = photo.<span class="property">name</span> || <span class="string">&quot;图片&quot;</span>;</span><br><span class="line">    imgElement.<span class="property">className</span> = <span class="string">&quot;photo_img&quot;</span>;</span><br><span class="line"></span><br><span class="line">    imgElement.<span class="property">onload</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> position = <span class="title function_">getRandomPosition</span>();</span><br><span class="line">      photoDiv.<span class="property">style</span>.<span class="property">left</span> = <span class="string">`<span class="subst">$&#123;position.x&#125;</span>px`</span>;</span><br><span class="line">      photoDiv.<span class="property">style</span>.<span class="property">top</span> = <span class="string">`<span class="subst">$&#123;position.y&#125;</span>px`</span>;</span><br><span class="line">      photoDiv.<span class="property">style</span>.<span class="property">position</span> = <span class="string">&quot;absolute&quot;</span>;</span><br><span class="line">      photoDiv.<span class="property">style</span>.<span class="property">transform</span> = <span class="string">`rotate(<span class="subst">$&#123;<span class="built_in">Math</span>.random() * <span class="number">30</span> - <span class="number">15</span>&#125;</span>deg)`</span>;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    imgElement.<span class="property">onerror</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`Failed to load image: <span class="subst">$&#123;photo.imgUrl&#125;</span>`</span>);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 点击事件：居中显示</span></span><br><span class="line">    photoDiv.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="function">() =&gt;</span> <span class="title function_">centerPhoto</span>(photoDiv));</span><br><span class="line"></span><br><span class="line">    photoDiv.<span class="title function_">appendChild</span>(imgElement);</span><br><span class="line">    container.<span class="title function_">appendChild</span>(photoDiv);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Photo wall initialized successfully.&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 监听页面跳转（通过 PJAX）</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;pjax:success&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;PJAX navigation detected. Reinitializing photo wall...&quot;</span>);</span><br><span class="line">  <span class="title function_">initializePhotoWall</span>();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// DOM 加载完成时初始化</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;DOMContentLoaded&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;DOM fully loaded. Initializing photo wall...&quot;</span>);</span><br><span class="line">  <span class="title function_">initializePhotoWall</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><strong>功能说明：</strong></p><ul><li><strong>动态布局</strong>：照片随机分布在照片墙中</li><li><strong>点击交互</strong>：点击照片可以将其居中显示</li><li><strong>旋转效果</strong>：照片有随机的旋转角度</li><li><strong>悬停动画</strong>：鼠标悬停时照片会放大和旋转</li><li><strong>响应式设计</strong>：支持移动端和桌面端</li></ul><hr><h3 id="11-配置脚本引入">11. 配置脚本引入</h3><p><strong>文件路径：</strong><br><code>solitude-latest/_config.solitude.yml</code></p><p><strong>修改内容：</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">extends:</span></span><br><span class="line">  <span class="attr">body:</span></span><br><span class="line">    <span class="comment"># 相册集</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">src=&quot;/js/custom/album.js&quot;&gt;&lt;/script&gt;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">src=&quot;/js/custom/album-modal.js&quot;&gt;&lt;/script&gt;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">src=&quot;/js/custom/photo-wall.js&quot;</span> <span class="string">defer&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure><p><strong>说明：</strong><br>在主题配置的extends.body部分添加相册集相关脚本的引入。</p><hr><h3 id="12-添加主题配置">12. 添加主题配置</h3><p><strong>文件路径：</strong><br><code>solitude-latest/node_modules/hexo-theme-solitude/_config.yml</code></p><p><strong>修改内容：</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># Album Page</span></span><br><span class="line"><span class="comment"># 相册集</span></span><br><span class="line"><span class="attr">album:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br></pre></td></tr></table></figure><p><strong>文件路径：</strong><br><code>solitude-latest/_config.solitude.yml</code></p><p><strong>修改内容：</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># Album Page</span></span><br><span class="line"><span class="comment"># 相册集</span></span><br><span class="line"><span class="attr">album:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br></pre></td></tr></table></figure><hr><h3 id="13-复制静态资源文件">13. 复制静态资源文件</h3><p><strong>背景图片文件：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 复制背景图片</span></span><br><span class="line">copy <span class="string">&quot;blog-solitude\public\img\letter.png&quot;</span> <span class="string">&quot;solitude-latest\public\img\letter.png&quot;</span></span><br></pre></td></tr></table></figure><p><strong>文件结构：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">solitude-latest/public/</span><br><span class="line">└── img/</span><br><span class="line">    └── letter.png</span><br></pre></td></tr></table></figure><hr><h3 id="14-添加CSS样式导入">14. 添加CSS样式导入</h3><p><strong>文件路径：</strong><br><code>solitude-latest/node_modules/hexo-theme-solitude/source/css/_page/index.styl</code></p><p><strong>修改内容：</strong></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="built_in">hexo-config</span>(<span class="string">&#x27;album.enable&#x27;</span>)</span><br><span class="line">  <span class="keyword">@import</span> <span class="string">&quot;album.styl&quot;</span></span><br></pre></td></tr></table></figure><p><strong>文件路径：</strong><br><code>solitude-latest/node_modules/hexo-theme-solitude/source/css/index.styl</code></p><p><strong>修改内容：</strong></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_page/album.styl&#x27;</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;album-modal.css&#x27;</span></span><br></pre></td></tr></table></figure><hr><h2 id="功能特性">功能特性</h2><h3 id="1-照片墙功能">1. 照片墙功能</h3><ul><li><strong>动态布局</strong>：照片随机分布在照片墙中</li><li><strong>点击交互</strong>：点击照片可以将其居中显示</li><li><strong>旋转效果</strong>：照片有随机的旋转角度</li><li><strong>悬停动画</strong>：鼠标悬停时照片会放大和旋转</li><li><strong>背景图片</strong>：使用letter.png作为照片墙背景</li><li><strong>响应式设计</strong>：支持小屏幕缩放和适配</li></ul><h3 id="2-相册分类功能">2. 相册分类功能</h3><ul><li><strong>标签筛选</strong>：根据标签分类显示相册（大学、浪漫、旅行、日常、旅游、生活）</li><li><strong>动态切换</strong>：点击标签切换相册分类</li><li><strong>默认分类</strong>：页面加载时显示默认分类</li><li><strong>响应式设计</strong>：适配不同屏幕尺寸</li></ul><h3 id="3-私密相册功能">3. 私密相册功能</h3><ul><li><strong>密码保护</strong>：私密相册需要输入密码才能查看</li><li><strong>模糊效果</strong>：私密相册封面显示模糊效果</li><li><strong>锁定图标</strong>：私密相册显示锁定图标</li><li><strong>安全验证</strong>：密码验证功能</li></ul><h3 id="4-模态框预览功能">4. 模态框预览功能</h3><ul><li><strong>图片预览</strong>：点击相册显示模态框预览</li><li><strong>缩略图切换</strong>：点击缩略图切换主图片</li><li><strong>全屏显示</strong>：模态框全屏显示图片</li><li><strong>背景关闭</strong>：点击背景关闭模态框</li><li><strong>图片保护</strong>：模态框中的图片也禁止右键下载</li></ul><h3 id="5-图片保护功能">5. 图片保护功能</h3><ul><li><strong>右键禁用</strong>：禁止右键菜单</li><li><strong>拖拽禁用</strong>：禁止拖拽下载</li><li><strong>复制禁用</strong>：禁止复制图片</li><li><strong>用户选择禁用</strong>：禁用用户选择</li></ul><h3 id="6-响应式设计">6. 响应式设计</h3><ul><li><strong>移动端适配</strong>：在小屏幕设备上正常显示（2列布局）</li><li><strong>平板端适配</strong>：中等屏幕设备适配（3列布局）</li><li><strong>桌面端适配</strong>：大屏幕设备适配（5列布局）</li><li><strong>触摸支持</strong>：支持触摸设备的操作</li><li><strong>性能优化</strong>：使用事件委托和防抖优化性能</li></ul><h3 id="7-相册数据统计">7. 相册数据统计</h3><ul><li><strong>相册总数</strong>：15个相册</li><li><strong>私密相册</strong>：7个（需要密码访问）</li><li><strong>公开相册</strong>：8个（可直接访问）</li><li><strong>照片墙照片</strong>：5张照片</li><li><strong>分类标签</strong>：6个分类（大学、浪漫、旅行、日常、旅游、生活）</li></ul><hr><h2 id="使用说明">使用说明</h2><h3 id="1-添加新相册">1. 添加新相册</h3><p>在 <code>source/_data/album.yml</code> 文件中添加新的相册：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">album_list:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">新相册</span></span><br><span class="line">    <span class="attr">cover:</span> <span class="string">https://example.com/cover.jpg</span></span><br><span class="line">    <span class="attr">access:</span> <span class="string">public</span></span><br><span class="line">    <span class="attr">date:</span> <span class="number">2024-01-01</span></span><br><span class="line">    <span class="attr">tag:</span> <span class="string">新分类</span></span><br><span class="line">    <span class="attr">album_img_list:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">照片1</span></span><br><span class="line">        <span class="attr">url:</span> <span class="string">https://example.com/photo1.jpg</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">照片2</span></span><br><span class="line">        <span class="attr">url:</span> <span class="string">https://example.com/photo2.jpg</span></span><br></pre></td></tr></table></figure><h3 id="2-添加私密相册">2. 添加私密相册</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">album_list:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">私密相册</span></span><br><span class="line">    <span class="attr">cover:</span> <span class="string">https://example.com/cover.jpg</span></span><br><span class="line">    <span class="attr">access:</span> <span class="string">private</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">your_password</span></span><br><span class="line">    <span class="attr">date:</span> <span class="number">2024-01-01</span></span><br><span class="line">    <span class="attr">tag:</span> <span class="string">私密</span></span><br><span class="line">    <span class="attr">album_img_list:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">私密照片</span></span><br><span class="line">        <span class="attr">url:</span> <span class="string">https://example.com/private.jpg</span></span><br></pre></td></tr></table></figure><h3 id="3-添加照片墙照片">3. 添加照片墙照片</h3><p>在 <code>photo-wall.js</code> 文件中修改照片数据：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> photoWallData = [</span><br><span class="line">  &#123; <span class="attr">imgUrl</span>: <span class="string">&quot;https://example.com/photo1.jpg&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;照片1&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">imgUrl</span>: <span class="string">&quot;https://example.com/photo2.jpg&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;照片2&quot;</span> &#125;,</span><br><span class="line">];</span><br></pre></td></tr></table></figure><h3 id="4-自定义样式">4. 自定义样式</h3><p>可以修改CSS样式来自定义效果：</p><ul><li>调整照片墙背景图片</li><li>修改相册卡片样式</li><li>自定义模态框效果</li><li>调整响应式布局</li></ul><hr><h2 id="常见问题解决">常见问题解决</h2><h3 id="1-照片墙背景图片不显示">1. 照片墙背景图片不显示</h3><p><strong>问题：</strong> 照片墙背景图片显示为404错误<br><strong>解决：</strong> 确保letter.png文件已正确复制到 <code>public/img/</code> 目录</p><h3 id="2-照片墙照片不显示">2. 照片墙照片不显示</h3><p><strong>问题：</strong> 照片墙照片不显示或位置异常<br><strong>解决：</strong></p><ul><li>确保photo-wall.js脚本已正确引入</li><li>检查照片URL是否可访问</li><li>检查控制台是否有JavaScript错误</li></ul><h3 id="3-相册分类不工作">3. 相册分类不工作</h3><p><strong>问题：</strong> 点击标签无法切换相册分类<br><strong>解决：</strong></p><ul><li>确保album.js脚本已正确引入</li><li>检查相册数据格式是否正确</li><li>检查标签名称是否一致</li></ul><h3 id="4-私密相册密码验证失败">4. 私密相册密码验证失败</h3><p><strong>问题：</strong> 输入正确密码仍无法解锁相册<br><strong>解决：</strong></p><ul><li>检查密码是否包含特殊字符</li><li>确保密码与配置文件中的完全一致</li><li>检查JavaScript控制台是否有错误</li></ul><h3 id="5-模态框不显示">5. 模态框不显示</h3><p><strong>问题：</strong> 点击相册无法显示模态框<br><strong>解决：</strong></p><ul><li>确保album-modal.js脚本已正确引入</li><li>检查相册图片数据是否正确</li><li>检查模态框HTML结构是否完整</li></ul><h3 id="6-移动端显示异常">6. 移动端显示异常</h3><p><strong>问题：</strong> 在移动设备上显示异常<br><strong>解决：</strong></p><ul><li>检查响应式CSS样式</li><li>确保触摸事件正常工作</li><li>测试不同屏幕尺寸的适配</li></ul><hr><h2 id="注意事项">注意事项</h2><ol><li><strong>文件路径</strong>：确保所有静态资源文件路径正确</li><li><strong>图片格式</strong>：建议使用JPG或PNG格式，确保图片质量</li><li><strong>私密相册</strong>：密码建议使用简单字符，避免特殊符号</li><li><strong>照片墙</strong>：照片数量建议控制在5-10张，避免性能问题</li><li><strong>浏览器兼容</strong>：某些效果需要现代浏览器支持</li><li><strong>性能优化</strong>：大量图片时注意性能优化</li></ol><hr><h2 id="总结">总结</h2><p>通过以上步骤，我们成功为Solitude主题添加了完整的相册集功能。这个功能不仅提供了美观的照片墙展示效果，还具有良好的交互性和扩展性。用户可以根据自己的需求轻松添加和管理相册资源，展示个人的照片收藏和回忆。</p><h3 id="实装完成的功能">实装完成的功能</h3><p><strong>核心功能：</strong></p><ul><li>✅ 照片墙动态布局（5张照片）</li><li>✅ 相册分类系统（6个标签分类）</li><li>✅ 私密相册密码保护（7个私密相册）</li><li>✅ 模态框图片预览</li><li>✅ 响应式设计（移动端2列、平板3列、桌面5列）</li><li>✅ 图片保护功能（禁止右键下载）</li></ul><p><strong>技术实现：</strong></p><ul><li>✅ Pug模板引擎</li><li>✅ Stylus CSS预处理器</li><li>✅ 原生JavaScript交互</li><li>✅ 事件委托优化</li><li>✅ PJAX页面跳转支持</li><li>✅ CSS Grid/Flexbox响应式布局</li></ul><p><strong>数据统计：</strong></p><ul><li>✅ 15个相册（8个公开 + 7个私密）</li><li>✅ 6个分类标签（大学、浪漫、旅行、日常、旅游、生活）</li><li>✅ 5张照片墙照片</li><li>✅ 完整的响应式适配</li></ul><h3 id="技术亮点">技术亮点</h3><p>相册集功能的实现体现了现代Web开发的核心技术：</p><ul><li><strong>CSS3变换</strong>：实现精美的视觉效果和动画</li><li><strong>JavaScript交互</strong>：提供流畅的用户交互体验</li><li><strong>数据驱动</strong>：通过配置文件管理内容</li><li><strong>响应式设计</strong>：适配各种设备和屏幕尺寸</li><li><strong>安全保护</strong>：私密相册和图片保护功能</li><li><strong>性能优化</strong>：事件委托和懒加载优化</li></ul><p>这个功能为Solitude主题增添了独特的相册展示模块，丰富了博客的内容展示形式，提升了用户体验。相册集功能不仅适合个人博客使用，也可以作为摄影作品展示、旅行记录、生活分享等多种用途。</p>]]></content>
      
      
      <categories>
          
          <category> 魔改教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 魔改教程 </tag>
            
            <tag> Solitude </tag>
            
            <tag> Hexo </tag>
            
            <tag> 页面移植 </tag>
            
            <tag> 相册集 </tag>
            
            <tag> 照片墙 </tag>
            
            <tag> 模态框 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Solitude主题魔改教程(9)-乐谱坊页面</title>
      <link href="/2024/10/28/Solitude%E4%B8%BB%E9%A2%98%E9%AD%94%E6%94%B9%E6%95%99%E7%A8%8B(9)-%E4%B9%90%E8%B0%B1%E5%9D%8A%E9%A1%B5%E9%9D%A2/"/>
      <url>/2024/10/28/Solitude%E4%B8%BB%E9%A2%98%E9%AD%94%E6%94%B9%E6%95%99%E7%A8%8B(9)-%E4%B9%90%E8%B0%B1%E5%9D%8A%E9%A1%B5%E9%9D%A2/</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>Solitude主题默认没有乐谱坊页面功能，但有时我们希望展示钢琴乐谱等音乐资源。本文将详细介绍如何从blog-solitude项目完整移植乐谱坊页面功能到solitude-latest，包括3D Coverflow效果、数据管理、静态资源处理和交互功能的完整实现方案。</p><hr><h2 id="现象与需求">现象与需求</h2><h3 id="现象">现象</h3><ul><li>Solitude主题默认没有乐谱坊页面</li><li>缺少3D Coverflow展示效果</li><li>无法展示钢琴乐谱等音乐资源</li><li>缺少乐谱数据管理和PDF链接功能</li></ul><h3 id="期望效果">期望效果</h3><ul><li>独立的乐谱坊页面（<code>/musicsheets/</code>）</li><li>3D Coverflow旋转展示效果</li><li>支持乐谱封面图片展示</li><li>支持PDF文件链接和下载</li><li>响应式设计，适配不同屏幕尺寸</li><li>视频Banner支持</li><li>键盘和鼠标交互控制</li></ul><hr><h2 id="问题分析">问题分析</h2><h3 id="根本原因">根本原因</h3><ol><li><p><strong>页面类型缺失</strong><br>solitude-latest主题缺少musicsheets页面类型的支持</p></li><li><p><strong>模板文件缺失</strong><br>缺少musicsheets页面的模板文件和3D Coverflow组件</p></li><li><p><strong>数据管理缺失</strong><br>缺少乐谱数据的配置和管理机制</p></li><li><p><strong>样式文件缺失</strong><br>缺少musicsheets页面的CSS样式文件</p></li><li><p><strong>静态资源缺失</strong><br>缺少乐谱图片和PDF文件</p></li><li><p><strong>JavaScript交互缺失</strong><br>缺少3D Coverflow的交互逻辑</p></li></ol><hr><h2 id="修改文件清单">修改文件清单</h2><ul><li><code>solitude-latest/source/musicsheets/index.md</code></li><li><code>solitude-latest/source/_data/musicsheets.yml</code></li><li><code>solitude-latest/public/js/custom/musicsheets.js</code></li><li><code>solitude-latest/public/css/index.css</code> (样式已编译)</li><li><code>solitude-latest/public/img/musicsheets/</code> (图片资源)</li><li><code>solitude-latest/public/pdf/</code> (PDF文件)</li><li><code>solitude-latest/_config.solitude.yml</code> (脚本引入配置)</li></ul><hr><h2 id="详细修改步骤">详细修改步骤</h2><h3 id="1-创建乐谱坊页面配置">1. 创建乐谱坊页面配置</h3><p><strong>文件路径：</strong><br><code>solitude-latest/source/musicsheets/index.md</code></p><p><strong>文件内容：</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">乐谱坊</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2024-11-17 21:27:43</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">musicsheets</span></span><br><span class="line"><span class="attr">cover:</span> <span class="string">/mp4/musicsheets-banner.mp4</span></span><br><span class="line"><span class="attr">desc:</span> <span class="string">钢琴乐谱分享</span></span><br><span class="line"><span class="attr">leftend:</span> <span class="string">跟</span> <span class="string">Ryan</span> <span class="string">一起聆听音乐的魅力</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><p><strong>配置说明：</strong></p><ul><li><code>type: musicsheets</code> - 页面类型为musicsheets</li><li><code>cover: /mp4/musicsheets-banner.mp4</code> - 设置banner视频</li><li><code>desc</code> - banner描述文字</li><li><code>leftend</code> - banner左侧信息</li></ul><hr><h3 id="2-创建乐谱数据配置文件">2. 创建乐谱数据配置文件</h3><p><strong>文件路径：</strong><br><code>solitude-latest/source/_data/musicsheets.yml</code></p><p><strong>文件结构：</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">musicsheets:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">image:</span> <span class="string">/img/musicsheets/六月船歌.png</span></span><br><span class="line">    <span class="attr">alt:</span> <span class="string">&quot;Image 1&quot;</span></span><br><span class="line">    <span class="attr">albumLink:</span> <span class="string">/pdf/The</span> <span class="string">Seasons,</span> <span class="string">Op.37a</span> <span class="bullet">-</span> <span class="string">Complete</span> <span class="string">Score</span> <span class="number">1.</span><span class="string">pdf</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">image:</span> <span class="string">/img/musicsheets/水边的阿第莉娜.png</span></span><br><span class="line">    <span class="attr">alt:</span> <span class="string">&quot;Image 2&quot;</span></span><br><span class="line">    <span class="attr">albumLink:</span> <span class="string">/pdf/The</span> <span class="string">Seasons,</span> <span class="string">Op.37a</span> <span class="bullet">-</span> <span class="string">Complete</span> <span class="string">Score</span> <span class="number">1.</span><span class="string">pdf</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">image:</span> <span class="string">/img/musicsheets/菊次郎的夏天.png</span></span><br><span class="line">    <span class="attr">alt:</span> <span class="string">&quot;Image 3&quot;</span></span><br><span class="line">    <span class="attr">albumLink:</span> <span class="string">/pdf/The</span> <span class="string">Seasons,</span> <span class="string">Op.37a</span> <span class="bullet">-</span> <span class="string">Complete</span> <span class="string">Score</span> <span class="number">1.</span><span class="string">pdf</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">image:</span> <span class="string">/img/musicsheets/夜曲.png</span></span><br><span class="line">    <span class="attr">alt:</span> <span class="string">&quot;Image 4&quot;</span></span><br><span class="line">    <span class="attr">albumLink:</span> <span class="string">/pdf/The</span> <span class="string">Seasons,</span> <span class="string">Op.37a</span> <span class="bullet">-</span> <span class="string">Complete</span> <span class="string">Score</span> <span class="number">1.</span><span class="string">pdf</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">image:</span> <span class="string">/img/musicsheets/月光.png</span></span><br><span class="line">    <span class="attr">alt:</span> <span class="string">&quot;Image 5&quot;</span></span><br><span class="line">    <span class="attr">albumLink:</span> <span class="string">/pdf/The</span> <span class="string">Seasons,</span> <span class="string">Op.37a</span> <span class="bullet">-</span> <span class="string">Complete</span> <span class="string">Score</span> <span class="number">1.</span><span class="string">pdf</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">image:</span> <span class="string">/img/musicsheets/胡桃夹子.png</span></span><br><span class="line">    <span class="attr">alt:</span> <span class="string">&quot;Image 6&quot;</span></span><br><span class="line">    <span class="attr">albumLink:</span> <span class="string">/pdf/The</span> <span class="string">Seasons,</span> <span class="string">Op.37a</span> <span class="bullet">-</span> <span class="string">Complete</span> <span class="string">Score</span> <span class="number">1.</span><span class="string">pdf</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">image:</span> <span class="string">/img/musicsheets/致爱丽丝.png</span></span><br><span class="line">    <span class="attr">alt:</span> <span class="string">&quot;Image 7&quot;</span></span><br><span class="line">    <span class="attr">albumLink:</span> <span class="string">/pdf/The</span> <span class="string">Seasons,</span> <span class="string">Op.37a</span> <span class="bullet">-</span> <span class="string">Complete</span> <span class="string">Score</span> <span class="number">1.</span><span class="string">pdf</span></span><br></pre></td></tr></table></figure><p><strong>数据结构说明：</strong></p><ul><li><code>musicsheets</code> - 乐谱数据数组</li><li><code>image</code> - 乐谱封面图片路径</li><li><code>alt</code> - 图片替代文本</li><li><code>albumLink</code> - 对应的PDF文件链接</li></ul><p><strong>注意事项：</strong></p><ul><li>图片路径使用相对路径，从public目录开始</li><li>PDF文件路径需要包含空格处理</li><li>建议使用PNG格式的乐谱封面图片</li><li>图片尺寸建议保持一致（300x400px）</li></ul><hr><h3 id="3-创建3D-Coverflow-JavaScript文件">3. 创建3D Coverflow JavaScript文件</h3><p><strong>文件路径：</strong><br><code>solitude-latest/public/js/custom/musicsheets.js</code></p><p><strong>文件内容：</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">initializeCoverflowWithDelegation</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> coverflowContainer = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.coverflow&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> albumButton = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.album-button&quot;</span>);</span><br><span class="line">  <span class="keyword">if</span> (!coverflowContainer || !albumButton) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> currentPosition;</span><br><span class="line">  <span class="keyword">let</span> images = [];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">calculateInitialPosition</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> totalImages = images.<span class="property">length</span>;</span><br><span class="line">    <span class="keyword">return</span> totalImages % <span class="number">2</span> === <span class="number">0</span> ? <span class="title class_">Math</span>.<span class="title function_">floor</span>(totalImages / <span class="number">2</span>) : <span class="title class_">Math</span>.<span class="title function_">ceil</span>(totalImages / <span class="number">2</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">updateCoverflow</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    coverflowContainer.<span class="property">dataset</span>.<span class="property">coverflowPosition</span> = currentPosition;</span><br><span class="line"></span><br><span class="line">    images.<span class="title function_">forEach</span>(<span class="function">(<span class="params">img, index</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> offset = index + <span class="number">1</span> - currentPosition;</span><br><span class="line">      <span class="keyword">const</span> translateX = offset * <span class="number">150</span>;</span><br><span class="line">      <span class="keyword">const</span> scale = <span class="title class_">Math</span>.<span class="title function_">max</span>(<span class="number">0.8</span>, <span class="number">1</span> - <span class="title class_">Math</span>.<span class="title function_">abs</span>(offset) * <span class="number">0.2</span>);</span><br><span class="line">      <span class="keyword">const</span> rotateY = offset * -<span class="number">25</span>;</span><br><span class="line">      <span class="keyword">const</span> opacity = <span class="title class_">Math</span>.<span class="title function_">max</span>(<span class="number">0.5</span>, <span class="number">1</span> - <span class="title class_">Math</span>.<span class="title function_">abs</span>(offset) * <span class="number">0.3</span>);</span><br><span class="line">      <span class="keyword">const</span> zIndex = <span class="number">50</span> - <span class="title class_">Math</span>.<span class="title function_">abs</span>(offset) * <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">      img.<span class="property">style</span>.<span class="property">transform</span> = <span class="string">`translateX(<span class="subst">$&#123;translateX&#125;</span>px) scale(<span class="subst">$&#123;scale&#125;</span>) rotateY(<span class="subst">$&#123;rotateY&#125;</span>deg)`</span>;</span><br><span class="line">      img.<span class="property">style</span>.<span class="property">opacity</span> = opacity;</span><br><span class="line">      img.<span class="property">style</span>.<span class="property">zIndex</span> = zIndex;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 更新按钮链接</span></span><br><span class="line">    <span class="keyword">const</span> activeImage = images[currentPosition - <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">if</span> (activeImage) &#123;</span><br><span class="line">      <span class="keyword">const</span> albumLink = activeImage.<span class="property">dataset</span>.<span class="property">album</span> || <span class="string">&quot;#&quot;</span>;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Album link for current image: <span class="subst">$&#123;albumLink&#125;</span>`</span>);</span><br><span class="line">      albumButton.<span class="title function_">setAttribute</span>(<span class="string">&quot;data-album&quot;</span>, albumLink);</span><br><span class="line">      albumButton.<span class="property">onclick</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (albumLink &amp;&amp; albumLink !== <span class="string">&quot;#&quot;</span>) &#123;</span><br><span class="line">          <span class="variable language_">window</span>.<span class="title function_">open</span>(albumLink, <span class="string">&quot;_blank&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="title function_">alert</span>(<span class="string">&quot;No album link available for this image.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> prevArrow = coverflowContainer.<span class="title function_">querySelector</span>(<span class="string">&quot;.prev-arrow&quot;</span>);</span><br><span class="line">    <span class="keyword">const</span> nextArrow = coverflowContainer.<span class="title function_">querySelector</span>(<span class="string">&quot;.next-arrow&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (prevArrow &amp;&amp; nextArrow) &#123;</span><br><span class="line">      prevArrow.<span class="property">style</span>.<span class="property">display</span> = currentPosition === <span class="number">1</span> ? <span class="string">&quot;none&quot;</span> : <span class="string">&quot;block&quot;</span>;</span><br><span class="line">      nextArrow.<span class="property">style</span>.<span class="property">display</span> = currentPosition === images.<span class="property">length</span> ? <span class="string">&quot;none&quot;</span> : <span class="string">&quot;block&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">moveToNext</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (currentPosition &lt; images.<span class="property">length</span>) &#123;</span><br><span class="line">      currentPosition++;</span><br><span class="line">      <span class="title function_">updateCoverflow</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">moveToPrev</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (currentPosition &gt; <span class="number">1</span>) &#123;</span><br><span class="line">      currentPosition--;</span><br><span class="line">      <span class="title function_">updateCoverflow</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">moveToClickedImage</span> = (<span class="params">clickedIndex</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (clickedIndex + <span class="number">1</span> !== currentPosition) &#123;</span><br><span class="line">      currentPosition = clickedIndex + <span class="number">1</span>;</span><br><span class="line">      <span class="title function_">updateCoverflow</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleCoverflowClick</span> = (<span class="params">event</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> target = event.<span class="property">target</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (target.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&quot;prev-arrow&quot;</span>)) &#123;</span><br><span class="line">      <span class="title function_">moveToPrev</span>();</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (target.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&quot;next-arrow&quot;</span>)) &#123;</span><br><span class="line">      <span class="title function_">moveToNext</span>();</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (target.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&quot;coverflow__image&quot;</span>)) &#123;</span><br><span class="line">      <span class="keyword">const</span> clickedIndex = images.<span class="title function_">indexOf</span>(target);</span><br><span class="line">      <span class="keyword">if</span> (clickedIndex !== -<span class="number">1</span>) <span class="title function_">moveToClickedImage</span>(clickedIndex);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">initializeCoverflowImages</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    images = <span class="title class_">Array</span>.<span class="title function_">from</span>(coverflowContainer.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;.coverflow__image&quot;</span>));</span><br><span class="line">    currentPosition = <span class="title function_">calculateInitialPosition</span>();</span><br><span class="line">    <span class="title function_">updateCoverflow</span>();</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 初始化 Coverflow 并绑定事件委托</span></span><br><span class="line">  <span class="title function_">initializeCoverflowImages</span>();</span><br><span class="line">  coverflowContainer.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, handleCoverflowClick);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 监听键盘事件</span></span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;keydown&quot;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (e.<span class="property">key</span> === <span class="string">&quot;ArrowLeft&quot;</span>) <span class="title function_">moveToPrev</span>();</span><br><span class="line">    <span class="keyword">if</span> (e.<span class="property">key</span> === <span class="string">&quot;ArrowRight&quot;</span>) <span class="title function_">moveToNext</span>();</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 如果有动态加载图片，可以用 MutationObserver 或手动调用重新初始化</span></span><br><span class="line">  <span class="keyword">const</span> observer = <span class="keyword">new</span> <span class="title class_">MutationObserver</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">initializeCoverflowImages</span>();</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  observer.<span class="title function_">observe</span>(coverflowContainer, &#123; <span class="attr">childList</span>: <span class="literal">true</span> &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 绑定到页面加载和页面迁移事件</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;DOMContentLoaded&quot;</span>, initializeCoverflowWithDelegation);</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;pjax:success&quot;</span>, initializeCoverflowWithDelegation);</span><br></pre></td></tr></table></figure><p><strong>功能说明：</strong></p><ul><li><strong>3D变换计算</strong>：根据图片位置计算translateX、scale、rotateY等变换参数</li><li><strong>事件委托</strong>：使用事件委托优化性能，处理点击和键盘事件</li><li><strong>动态更新</strong>：根据当前选中位置动态更新所有图片的3D效果</li><li><strong>按钮控制</strong>：更新&quot;欣赏乐谱&quot;按钮的链接和点击事件</li><li><strong>键盘支持</strong>：支持左右箭头键导航</li><li><strong>响应式</strong>：支持动态内容变化时的重新初始化</li></ul><hr><h3 id="4-配置脚本引入">4. 配置脚本引入</h3><p><strong>文件路径：</strong><br><code>solitude-latest/_config.solitude.yml</code></p><p><strong>修改内容：</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">extends:</span></span><br><span class="line">  <span class="attr">body:</span></span><br><span class="line">    <span class="comment"># 乐谱集</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">src=&quot;/js/custom/musicsheets.js&quot;&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure><p><strong>说明：</strong><br>在主题配置的extends.body部分添加musicsheets.js脚本的引入，确保3D Coverflow功能正常工作。</p><hr><h3 id="5-复制静态资源文件">5. 复制静态资源文件</h3><p><strong>乐谱图片文件：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 复制乐谱图片</span></span><br><span class="line"><span class="built_in">cp</span> -r blog-solitude/public/img/musicsheets solitude-latest/public/img/</span><br></pre></td></tr></table></figure><p><strong>PDF文件：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 复制PDF文件</span></span><br><span class="line"><span class="built_in">cp</span> -r blog-solitude/public/pdf solitude-latest/public/</span><br></pre></td></tr></table></figure><p><strong>文件结构：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">solitude-latest/public/</span><br><span class="line">├── img/musicsheets/</span><br><span class="line">│   ├── 六月船歌.png</span><br><span class="line">│   ├── 水边的阿第莉娜.png</span><br><span class="line">│   ├── 菊次郎的夏天.png</span><br><span class="line">│   ├── 夜曲.png</span><br><span class="line">│   ├── 月光.png</span><br><span class="line">│   ├── 胡桃夹子.png</span><br><span class="line">│   └── 致爱丽丝.png</span><br><span class="line">└── pdf/</span><br><span class="line">    └── The Seasons, Op.37a - Complete Score 1.pdf</span><br></pre></td></tr></table></figure><hr><h3 id="6-样式文件说明">6. 样式文件说明</h3><p><strong>CSS样式已编译到：</strong><br><code>solitude-latest/public/css/index.css</code></p><p><strong>主要样式特点：</strong></p><ul><li><strong>3D透视</strong>：使用<code>perspective: 1000px</code>创建3D空间</li><li><strong>变换效果</strong>：使用<code>transform</code>实现旋转、缩放、位移</li><li><strong>过渡动画</strong>：使用<code>transition</code>实现平滑的动画效果</li><li><strong>层级管理</strong>：使用<code>z-index</code>控制图片层级</li><li><strong>响应式</strong>：适配不同屏幕尺寸</li></ul><p><strong>关键样式类：</strong></p><ul><li><code>.coverflow</code> - 3D容器</li><li><code>.coverflow__image</code> - 乐谱图片</li><li><code>.prev-arrow/.next-arrow</code> - 导航箭头</li><li><code>.album-button</code> - 欣赏乐谱按钮</li></ul><hr><h2 id="功能特性">功能特性</h2><h3 id="1-3D-Coverflow效果">1. 3D Coverflow效果</h3><ul><li><strong>3D旋转</strong>：乐谱以3D方式旋转展示</li><li><strong>深度效果</strong>：通过perspective和rotateY创建深度感</li><li><strong>缩放效果</strong>：中心图片最大，两侧逐渐缩小</li><li><strong>透明度</strong>：根据位置动态调整透明度</li></ul><h3 id="2-交互控制">2. 交互控制</h3><ul><li><strong>鼠标点击</strong>：点击图片或箭头进行导航</li><li><strong>键盘控制</strong>：支持左右箭头键导航</li><li><strong>按钮控制</strong>：点击&quot;欣赏乐谱&quot;按钮打开PDF</li></ul><h3 id="3-数据管理">3. 数据管理</h3><ul><li><strong>YAML配置</strong>：使用YAML文件管理乐谱数据</li><li><strong>图片管理</strong>：支持PNG格式的乐谱封面</li><li><strong>PDF链接</strong>：支持PDF文件的链接和下载</li></ul><h3 id="4-响应式设计">4. 响应式设计</h3><ul><li><strong>移动端适配</strong>：在小屏幕设备上正常显示</li><li><strong>触摸支持</strong>：支持触摸设备的滑动操作</li><li><strong>性能优化</strong>：使用事件委托和防抖优化性能</li></ul><hr><h2 id="使用说明">使用说明</h2><h3 id="1-添加新乐谱">1. 添加新乐谱</h3><p>在 <code>source/_data/musicsheets.yml</code> 文件中添加新的乐谱：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">musicsheets:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">image:</span> <span class="string">/img/musicsheets/新乐谱.png</span></span><br><span class="line">    <span class="attr">alt:</span> <span class="string">&quot;新乐谱&quot;</span></span><br><span class="line">    <span class="attr">albumLink:</span> <span class="string">/pdf/新乐谱.pdf</span></span><br></pre></td></tr></table></figure><h3 id="2-添加乐谱图片">2. 添加乐谱图片</h3><p>将乐谱封面图片放入 <code>public/img/musicsheets/</code> 目录：</p><ul><li>建议尺寸：300x400px</li><li>格式：PNG（推荐）或JPG</li><li>命名：使用中文或英文名称</li></ul><h3 id="3-添加PDF文件">3. 添加PDF文件</h3><p>将PDF文件放入 <code>public/pdf/</code> 目录：</p><ul><li>文件名避免包含空格（可能导致URL编码问题）</li><li>建议使用英文命名</li><li>确保文件路径在配置中正确引用</li></ul><h3 id="4-自定义样式">4. 自定义样式</h3><p>可以修改CSS样式来自定义3D效果：</p><ul><li>调整<code>perspective</code>值改变3D深度</li><li>修改<code>rotateY</code>值改变旋转角度</li><li>调整<code>scale</code>值改变缩放比例</li></ul><hr><h2 id="常见问题解决">常见问题解决</h2><h3 id="1-图片显示404">1. 图片显示404</h3><p><strong>问题：</strong> 乐谱图片显示为404错误<br><strong>解决：</strong> 确保图片文件已正确复制到 <code>public/img/musicsheets/</code> 目录</p><h3 id="2-PDF链接无法访问">2. PDF链接无法访问</h3><p><strong>问题：</strong> 点击&quot;欣赏乐谱&quot;按钮无法打开PDF<br><strong>解决：</strong></p><ul><li>检查PDF文件是否存在</li><li>确保文件名不包含特殊字符</li><li>检查文件路径是否正确</li></ul><h3 id="3-3D效果不显示">3. 3D效果不显示</h3><p><strong>问题：</strong> 乐谱没有3D旋转效果<br><strong>解决：</strong></p><ul><li>确保musicsheets.js脚本已正确引入</li><li>检查浏览器是否支持CSS3 3D变换</li><li>检查控制台是否有JavaScript错误</li></ul><h3 id="4-移动端显示异常">4. 移动端显示异常</h3><p><strong>问题：</strong> 在移动设备上显示异常<br><strong>解决：</strong></p><ul><li>检查响应式CSS样式</li><li>确保触摸事件正常工作</li><li>测试不同屏幕尺寸的适配</li></ul><hr><h2 id="注意事项">注意事项</h2><ol><li><strong>文件路径</strong>：确保所有静态资源文件路径正确</li><li><strong>文件名</strong>：避免使用包含空格或特殊字符的文件名</li><li><strong>图片格式</strong>：建议使用PNG格式，确保透明背景效果</li><li><strong>PDF文件</strong>：确保PDF文件可以正常打开和下载</li><li><strong>浏览器兼容</strong>：3D效果需要现代浏览器支持</li><li><strong>性能优化</strong>：大量图片时注意性能优化</li></ol><hr><h2 id="总结">总结</h2><p>通过以上步骤，我们成功为Solitude主题添加了完整的乐谱坊功能。这个功能不仅提供了美观的3D Coverflow展示效果，还具有良好的交互性和扩展性。用户可以根据自己的需求轻松添加和管理乐谱资源，展示个人的音乐收藏和品味。</p><p>乐谱坊功能的实现体现了现代Web开发的核心技术：</p><ul><li><strong>CSS3 3D变换</strong>：实现精美的3D视觉效果</li><li><strong>JavaScript交互</strong>：提供流畅的用户交互体验</li><li><strong>数据驱动</strong>：通过配置文件管理内容</li><li><strong>响应式设计</strong>：适配各种设备和屏幕尺寸</li></ul><p>这个功能为Solitude主题增添了独特的音乐展示模块，丰富了博客的内容展示形式，提升了用户体验。</p>]]></content>
      
      
      <categories>
          
          <category> 魔改教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 魔改教程 </tag>
            
            <tag> Solitude </tag>
            
            <tag> Hexo </tag>
            
            <tag> 页面移植 </tag>
            
            <tag> 乐谱坊 </tag>
            
            <tag> 3D Coverflow </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>从零开始butterfly博客的魔改教程(二)</title>
      <link href="/2024/10/25/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8Bbutterfly%E5%8D%9A%E5%AE%A2%E7%9A%84%E9%AD%94%E6%94%B9%E6%95%99%E7%A8%8B(%E4%BA%8C)/"/>
      <url>/2024/10/25/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8Bbutterfly%E5%8D%9A%E5%AE%A2%E7%9A%84%E9%AD%94%E6%94%B9%E6%95%99%E7%A8%8B(%E4%BA%8C)/</url>
      
        <content type="html"><![CDATA[<h1>前言</h1><p>上一篇文章主要解决了关于如何搭建hexo博客和使用butterfly主题的问题。这篇文章开始我们将一步一步改良我们的博客，内容可能比较分散，但我尽可能的把大纲梳理清楚，写在最前面。</p><h1>修改内容</h1><h2 id="终端ASCII字符自定义">终端ASCII字符自定义</h2><p>首先定位到这次需要我们修改的地方<br>[BlogRoot]\themes\butterfly\scripts\events\welcome.js</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">hexo.on(&#x27;ready&#x27;<span class="punctuation">,</span> () =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">  const <span class="punctuation">&#123;</span> version <span class="punctuation">&#125;</span> = require(&#x27;../../package.json&#x27;)</span><br><span class="line">  hexo.log.info(`</span><br><span class="line">  ===================================================================</span><br><span class="line">      #####  #    # ##### ##### ###### #####  ###### #      #   #</span><br><span class="line">      #    # #    #   #     #   #      #    # #      #       # #</span><br><span class="line">      #####  #    #   #     #   #####  #    # #####  #        #</span><br><span class="line">      #    # #    #   #     #   #      #####  #      #        #</span><br><span class="line">      #    # #    #   #     #   #      #   #  #      #        #</span><br><span class="line">      #####   ####    #     #   ###### #    # #      ######   #</span><br><span class="line">                            $<span class="punctuation">&#123;</span>version<span class="punctuation">&#125;</span></span><br><span class="line">  ===================================================================`)</span><br><span class="line"><span class="punctuation">&#125;</span>)</span><br></pre></td></tr></table></figure><p>如何自定义我们想要使用的ASCII字符呢？我们可以在下面这个网站里选择自己喜欢的字符：<br><a href="https://patorjk.com/software/taag">ASCII 生成器</a>,画面如下：<br><img src="https://i.imgur.com/UWT9hqT.png" alt="ASCII 生成器"><br>修改[BlogRoot]\themes\butterfly\scripts\events\welcome.js文件</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">hexo.on(&#x27;ready&#x27;<span class="punctuation">,</span> () =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">  const <span class="punctuation">&#123;</span> version <span class="punctuation">&#125;</span> = require(&#x27;../../package.json&#x27;)</span><br><span class="line">  hexo.log.info(`</span><br><span class="line">  ===================================================================</span><br><span class="line">        ███████╗██╗   ██╗███╗   ███╗███╗   ███╗███████╗██████╗ </span><br><span class="line">        ██╔════╝██║   ██║████╗ ████║████╗ ████║██╔════╝██╔══██╗</span><br><span class="line">        ███████╗██║   ██║██╔████╔██║██╔████╔██║█████╗  ██████╔╝</span><br><span class="line">        ╚════██║██║   ██║██║╚██╔╝██║██║╚██╔╝██║██╔══╝  ██╔══██╗</span><br><span class="line">        ███████║╚██████╔╝██║ ╚═╝ ██║██║ ╚═╝ ██║███████╗██║  ██║</span><br><span class="line">        ╚══════╝ ╚═════╝ ╚═╝     ╚═╝╚═╝     ╚═╝╚══════╝╚═╝  ╚═╝</span><br><span class="line">                            $<span class="punctuation">&#123;</span>version<span class="punctuation">&#125;</span></span><br><span class="line">  ===================================================================`)</span><br><span class="line"><span class="punctuation">&#125;</span>)</span><br></pre></td></tr></table></figure><p>重新执行Hexo三板斧，搞定！<br><img src="https://i.imgur.com/FBZw5T8.png" alt="ASCII 自定义成功"></p><h2 id="语雀同款链接卡片">语雀同款链接卡片</h2><h3 id="创建数据">创建数据</h3><ul><li>创建 <code>[blogRoot]/themes/butterfly/scripts/tag/link.js</code> 文件，并新增以下内容</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * link</span></span><br><span class="line"><span class="comment"> * &#123;% link url,title,favicon,desc %&#125;</span></span><br><span class="line"><span class="comment"> * &#123;% link 链接,标题,图标,介绍 %&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">&#x27;use strict&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> defaultIcon = <span class="string">&#x27;&lt;svg t=&quot;1670307855063&quot; viewBox=&quot;0 0 1024 1024&quot; version=&quot;1.1&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; p-id=&quot;19066&quot; width=&quot;200&quot; height=&quot;200&quot;&gt;&lt;path d=&quot;M504.064 516.608m-384.256 0a384.256 384.256 0 1 0 768.512 0 384.256 384.256 0 1 0-768.512 0Z&quot; fill=&quot;#009CF5&quot; p-id=&quot;19068&quot;&gt;&lt;/path&gt;&lt;path d=&quot;M746.112 270.464L472.448 485.12l63.104 63.104L750.08 274.56c2.304-2.688-1.28-6.144-3.968-4.096z&quot; fill=&quot;#FF4C3A&quot; p-id=&quot;19069&quot;&gt;&lt;/path&gt;&lt;path d=&quot;M262.016 762.752l273.664-214.528-63.104-63.104-214.656 273.536c-2.176 2.688 1.28 6.144 4.096 4.096z&quot; fill=&quot;#FFFFFF&quot; p-id=&quot;19070&quot;&gt;&lt;/path&gt;&lt;path d=&quot;M505.216 155.136c-3.2 0-5.888 2.56-5.888 5.888v53.504c0 3.2 2.56 5.888 5.888 5.888s5.888-2.56 5.888-5.888v-53.504c-0.128-3.2-2.688-5.888-5.888-5.888zM442.368 160.512c-3.2 0.512-5.376 3.584-4.736 6.784l9.344 52.736c0.512 3.2 3.584 5.376 6.784 4.736 3.2-0.512 5.376-3.584 4.736-6.784l-9.344-52.736c-0.512-3.2-3.584-5.376-6.784-4.736zM396.288 234.368c1.152 3.072 4.48 4.608 7.552 3.456 3.072-1.152 4.608-4.48 3.456-7.552l-18.304-50.304c-1.152-3.072-4.48-4.608-7.552-3.456-3.072 1.152-4.608 4.48-3.456 7.552l18.304 50.304zM348.928 257.408c1.664 2.816 5.248 3.712 7.936 2.176s3.712-5.248 2.176-7.936l-26.752-46.336c-1.664-2.816-5.248-3.712-7.936-2.176-2.816 1.664-3.712 5.248-2.176 7.936l26.752 46.336zM306.304 288.256c2.048 2.432 5.76 2.816 8.192 0.768 2.432-2.048 2.816-5.76 0.768-8.192l-34.432-40.96c-2.048-2.432-5.76-2.816-8.192-0.768-2.432 2.048-2.816 5.76-0.768 8.192l34.432 40.96zM269.696 326.144c2.432 2.048 6.144 1.792 8.192-0.768 2.048-2.432 1.792-6.144-0.768-8.192l-40.96-34.432c-2.432-2.048-6.144-1.792-8.192 0.768-2.048 2.432-1.792 6.144 0.768 8.192l40.96 34.432zM193.792 342.912l46.336 26.752c2.816 1.664 6.4 0.64 7.936-2.176 1.664-2.816 0.64-6.4-2.176-8.064L199.552 332.8c-2.816-1.664-6.4-0.64-7.936 2.176-1.664 2.688-0.64 6.272 2.176 7.936zM168.32 399.488l50.304 18.304c3.072 1.152 6.4-0.512 7.552-3.456 1.152-3.072-0.512-6.4-3.456-7.552l-50.304-18.304c-3.072-1.152-6.4 0.512-7.552 3.456-1.152 3.072 0.384 6.4 3.456 7.552zM207.872 457.344l-52.736-9.344c-3.2-0.512-6.272 1.536-6.784 4.736-0.512 3.2 1.536 6.272 4.736 6.784l52.736 9.344c3.2 0.512 6.272-1.536 6.784-4.736 0.512-3.2-1.536-6.272-4.736-6.784zM201.984 509.568H148.48c-3.2 0-5.888 2.56-5.888 5.888 0 3.2 2.56 5.888 5.888 5.888h53.504c3.2 0 5.888-2.56 5.888-5.888 0-3.2-2.56-5.888-5.888-5.888zM205.44 562.176l-52.736 9.344c-3.2 0.512-5.376 3.584-4.736 6.784 0.512 3.2 3.584 5.376 6.784 4.736l52.736-9.344c3.2-0.512 5.376-3.584 4.736-6.784s-3.584-5.248-6.784-4.736zM217.856 613.376l-50.304 18.304c-3.072 1.152-4.608 4.48-3.456 7.552 1.152 3.072 4.48 4.608 7.552 3.456l50.304-18.304c3.072-1.152 4.608-4.48 3.456-7.552-1.152-3.072-4.48-4.608-7.552-3.456zM238.976 661.504l-46.336 26.752c-2.816 1.664-3.712 5.248-2.176 8.064 1.664 2.816 5.248 3.712 8.064 2.176l46.336-26.752c2.816-1.664 3.712-5.248 2.176-8.064-1.664-2.816-5.248-3.712-8.064-2.176zM268.16 705.408l-40.96 34.432c-2.432 2.048-2.816 5.76-0.768 8.192 2.048 2.432 5.76 2.816 8.192 0.768l40.96-34.432c2.432-2.048 2.816-5.76 0.768-8.192-1.92-2.56-5.632-2.816-8.192-0.768zM304.512 743.424l-34.432 40.96c-2.048 2.432-1.792 6.144 0.768 8.192 2.432 2.048 6.144 1.792 8.192-0.768l34.432-40.96c2.048-2.432 1.792-6.144-0.768-8.192-2.304-1.92-6.016-1.664-8.192 0.768zM347.008 774.656l-26.752 46.336c-1.664 2.816-0.64 6.4 2.176 7.936 2.816 1.664 6.4 0.64 8.064-2.176l26.752-46.336c1.664-2.816 0.64-6.4-2.176-7.936-2.816-1.536-6.4-0.64-8.064 2.176zM394.24 798.08l-18.304 50.304c-1.152 3.072 0.512 6.4 3.456 7.552 3.072 1.152 6.4-0.512 7.552-3.456l18.304-50.304c1.152-3.072-0.512-6.4-3.456-7.552-3.072-1.152-6.528 0.384-7.552 3.456zM440.192 872.32c3.2 0.512 6.272-1.536 6.784-4.736l9.344-52.736c0.512-3.2-1.536-6.272-4.736-6.784-3.2-0.512-6.272 1.536-6.784 4.736l-9.344 52.736c-0.64 3.2 1.536 6.272 4.736 6.784zM502.912 878.08c3.2 0 5.888-2.56 5.888-5.888v-53.504c0-3.2-2.56-5.888-5.888-5.888-3.2 0-5.888 2.56-5.888 5.888v53.504c0 3.2 2.688 5.888 5.888 5.888zM549.632 815.232l9.344 52.736c0.512 3.2 3.584 5.376 6.784 4.736 3.2-0.512 5.376-3.584 4.736-6.784l-9.344-52.736c-0.512-3.2-3.584-5.376-6.784-4.736-3.2 0.512-5.248 3.584-4.736 6.784zM600.832 802.816l18.304 50.304c1.152 3.072 4.48 4.608 7.552 3.456 3.072-1.152 4.608-4.48 3.456-7.552L611.84 798.72c-1.152-3.072-4.48-4.608-7.552-3.456-3.072 1.152-4.608 4.48-3.456 7.552zM649.088 781.696l26.752 46.336c1.664 2.816 5.248 3.712 8.064 2.176 2.816-1.664 3.712-5.248 2.176-8.064l-26.88-46.336c-1.664-2.816-5.248-3.712-8.064-2.176-2.816 1.664-3.712 5.248-2.048 8.064zM692.864 752.384l34.432 40.96c2.048 2.432 5.76 2.816 8.192 0.768 2.432-2.048 2.816-5.76 0.768-8.192l-34.432-40.96c-2.048-2.432-5.76-2.816-8.192-0.768-2.56 2.048-2.816 5.76-0.768 8.192zM730.88 716.032l40.96 34.432c2.432 2.048 6.144 1.792 8.192-0.768 2.048-2.432 1.792-6.144-0.768-8.192l-40.96-34.432c-2.432-2.048-6.144-1.792-8.192 0.768-1.92 2.432-1.664 6.144 0.768 8.192zM762.112 673.664l46.336 26.752c2.816 1.664 6.4 0.64 8.064-2.176 1.664-2.816 0.64-6.4-2.176-7.936L768 663.552c-2.816-1.664-6.4-0.64-8.064 2.176-1.536 2.688-0.64 6.272 2.176 7.936zM785.536 626.432l50.304 18.304c3.072 1.152 6.4-0.512 7.552-3.456 1.152-3.072-0.512-6.4-3.456-7.552l-50.304-18.304c-3.072-1.152-6.4 0.512-7.552 3.456-1.152 3.072 0.384 6.4 3.456 7.552zM800.256 575.872l52.736 9.344c3.2 0.512 6.272-1.536 6.784-4.736 0.512-3.2-1.536-6.272-4.736-6.784l-52.736-9.344c-3.2-0.512-6.272 1.536-6.784 4.736-0.512 3.2 1.536 6.272 4.736 6.784zM800.256 517.76c0 3.2 2.56 5.888 5.888 5.888h53.504c3.2 0 5.888-2.56 5.888-5.888 0-3.2-2.56-5.888-5.888-5.888h-53.504c-3.328 0-5.888 2.56-5.888 5.888zM802.688 471.04l52.736-9.344c3.2-0.512 5.376-3.584 4.736-6.784-0.512-3.2-3.584-5.376-6.784-4.736l-52.736 9.344c-3.2 0.512-5.376 3.584-4.736 6.784 0.512 3.2 3.584 5.248 6.784 4.736zM790.272 419.84l50.304-18.304c3.072-1.152 4.608-4.48 3.456-7.552-1.152-3.072-4.48-4.608-7.552-3.456l-50.304 18.304c-3.072 1.152-4.608 4.48-3.456 7.552 1.152 2.944 4.48 4.608 7.552 3.456zM769.152 371.584l46.336-26.752c2.816-1.664 3.712-5.248 2.176-7.936-1.664-2.816-5.248-3.712-8.064-2.176l-46.336 26.752c-2.816 1.664-3.712 5.248-2.176 8.064 1.664 2.688 5.248 3.712 8.064 2.048zM739.84 327.808l40.96-34.432c2.432-2.048 2.816-5.76 0.768-8.192-2.048-2.432-5.76-2.816-8.192-0.768l-40.96 34.432c-2.432 2.048-2.816 5.76-0.768 8.192 2.048 2.56 5.76 2.816 8.192 0.768zM703.488 289.664l34.432-40.96c2.048-2.432 1.792-6.144-0.768-8.192-2.432-2.048-6.144-1.792-8.192 0.768l-34.432 40.96c-2.048 2.432-1.792 6.144 0.768 8.192 2.432 2.048 6.144 1.792 8.192-0.768zM661.12 258.56l26.752-46.336c1.664-2.816 0.64-6.4-2.176-7.936-2.816-1.664-6.4-0.64-8.064 2.176l-26.752 46.336c-1.664 2.816-0.64 6.4 2.176 7.936 2.816 1.536 6.4 0.64 8.064-2.176zM613.888 235.136l18.304-50.304c1.152-3.072-0.512-6.4-3.456-7.552-3.072-1.152-6.4 0.512-7.552 3.456L602.88 231.168c-1.152 3.072 0.512 6.4 3.456 7.552 3.072 1.024 6.4-0.512 7.552-3.584zM556.544 225.152c3.2 0.512 6.272-1.536 6.784-4.736l9.344-52.736c0.512-3.2-1.536-6.272-4.736-6.784-3.2-0.512-6.272 1.536-6.784 4.736l-9.344 52.736c-0.512 3.2 1.536 6.144 4.736 6.784zM273.536 290.432c2.432 2.432 6.528 2.432 8.96 0 2.432-2.432 2.432-6.528 0-8.96l-21.12-21.12c-2.432-2.432-6.528-2.432-8.96 0-2.432 2.432-2.432 6.528 0 8.96l21.12 21.12zM237.824 333.824c2.944 2.048 6.912 1.28 8.832-1.536 2.048-2.944 1.28-6.912-1.536-8.832l-24.448-17.152c-2.944-2.048-6.912-1.28-8.832 1.536s-1.28 6.912 1.536 8.832l24.448 17.152zM183.04 370.176l27.136 12.672c3.2 1.536 7.04 0.128 8.448-3.072 1.536-3.2 0.128-7.04-3.072-8.448l-27.136-12.672c-3.2-1.536-7.04-0.128-8.448 3.072-1.536 3.2-0.128 7.04 3.072 8.448zM194.688 423.68l-28.928-7.68c-3.456-0.896-6.912 1.152-7.808 4.48-0.896 3.456 1.152 6.912 4.48 7.808l28.928 7.68c3.456 0.896 6.912-1.152 7.808-4.48 0.896-3.456-1.152-6.912-4.48-7.808zM183.168 478.72l-29.824-2.56c-3.456-0.256-6.656 2.304-6.912 5.76-0.256 3.456 2.304 6.656 5.76 6.912l29.824 2.56c3.456 0.256 6.656-2.304 6.912-5.76 0.384-3.456-2.176-6.528-5.76-6.912zM181.504 535.04l-29.824 2.56c-3.456 0.256-6.144 3.456-5.76 6.912 0.256 3.456 3.456 6.144 6.912 5.76l29.824-2.56c3.456-0.256 6.144-3.456 5.76-6.912-0.256-3.456-3.328-6.016-6.912-5.76zM191.36 590.72l-28.928 7.68c-3.456 0.896-5.376 4.352-4.48 7.808 0.896 3.456 4.352 5.376 7.808 4.48l28.928-7.68c3.456-0.896 5.376-4.352 4.48-7.808-0.896-3.328-4.352-5.376-7.808-4.48zM207.232 644.224l-27.136 12.672c-3.2 1.536-4.608 5.248-3.072 8.448 1.536 3.2 5.248 4.608 8.448 3.072l27.136-12.672c3.2-1.536 4.608-5.248 3.072-8.448-1.408-3.2-5.248-4.48-8.448-3.072zM233.984 693.888l-24.448 17.152c-2.944 2.048-3.584 6.016-1.536 8.832 2.048 2.944 6.016 3.584 8.832 1.536l24.448-17.152c2.944-2.048 3.584-6.016 1.536-8.832-2.048-2.944-6.016-3.584-8.832-1.536zM310.912 775.552L293.76 800c-2.048 2.944-1.28 6.912 1.536 8.832 2.944 2.048 6.912 1.28 8.832-1.536l17.152-24.448c2.048-2.944 1.28-6.912-1.536-8.832-2.816-2.048-6.912-1.408-8.832 1.536zM349.184 840.704c3.2 1.536 7.04 0.128 8.448-3.072l12.672-27.136c1.536-3.2 0.128-7.04-3.072-8.448-3.2-1.536-7.04-0.128-8.448 3.072l-12.672 27.136c-1.408 3.2-0.128 6.912 3.072 8.448zM407.808 862.72c3.456 0.896 6.912-1.152 7.808-4.48l7.68-28.928c0.896-3.456-1.152-6.912-4.48-7.808-3.456-0.896-6.912 1.152-7.808 4.48l-7.68 28.928c-0.896 3.328 1.152 6.912 4.48 7.808zM469.376 874.112c3.456 0.256 6.656-2.304 6.912-5.76l2.56-29.824c0.256-3.456-2.304-6.656-5.76-6.912-3.456-0.256-6.656 2.304-6.912 5.76l-2.56 29.824c-0.256 3.584 2.304 6.656 5.76 6.912zM522.496 839.168l2.56 29.824c0.256 3.456 3.456 6.144 6.912 5.76 3.456-0.256 6.144-3.456 5.76-6.912l-2.56-29.824c-0.256-3.456-3.456-6.144-6.912-5.76-3.456 0.256-6.016 3.328-5.76 6.912zM578.176 830.976l7.68 28.928c0.896 3.456 4.352 5.376 7.808 4.48 3.456-0.896 5.376-4.352 4.48-7.808l-7.68-28.928c-0.896-3.456-4.352-5.376-7.808-4.48-3.328 0.896-5.376 4.48-4.48 7.808zM631.68 813.312l12.672 27.136c1.536 3.2 5.248 4.608 8.448 3.072 3.2-1.536 4.608-5.248 3.072-8.448l-12.672-27.136c-1.536-3.2-5.248-4.608-8.448-3.072-3.2 1.536-4.48 5.248-3.072 8.448zM681.344 786.688l17.152 24.448c2.048 2.944 6.016 3.584 8.832 1.536 2.944-2.048 3.584-6.016 1.536-8.832l-17.152-24.448c-2.048-2.944-6.016-3.584-8.832-1.536-2.944 1.92-3.584 5.888-1.536 8.832zM725.504 751.744l21.12 21.12c2.432 2.432 6.528 2.432 8.96 0 2.432-2.432 2.432-6.528 0-8.96l-21.12-21.12c-2.432-2.432-6.528-2.432-8.96 0-2.432 2.432-2.432 6.528 0 8.96zM763.008 709.76l24.448 17.152c2.944 2.048 6.912 1.28 8.832-1.536 2.048-2.944 1.28-6.912-1.536-8.832l-24.448-17.152c-2.944-2.048-6.912-1.28-8.832 1.536-2.048 2.816-1.408 6.784 1.536 8.832zM792.576 661.888l27.136 12.672c3.2 1.536 7.04 0.128 8.448-3.072 1.536-3.2 0.128-7.04-3.072-8.448l-27.136-12.672c-3.2-1.536-7.04-0.128-8.448 3.072-1.536 3.2-0.128 6.912 3.072 8.448zM813.44 609.536l28.928 7.68c3.456 0.896 6.912-1.152 7.808-4.48 0.896-3.456-1.152-6.912-4.48-7.808l-28.928-7.68c-3.456-0.896-6.912 1.152-7.808 4.48-0.896 3.456 1.024 6.912 4.48 7.808zM824.832 554.368l29.824 2.56c3.456 0.256 6.656-2.304 6.912-5.76 0.256-3.456-2.304-6.656-5.76-6.912l-29.824-2.56c-3.456-0.256-6.656 2.304-6.912 5.76-0.256 3.584 2.304 6.656 5.76 6.912zM826.624 498.176l29.824-2.56c3.456-0.256 6.144-3.456 5.76-6.912-0.256-3.456-3.456-6.144-6.912-5.76l-29.824 2.56c-3.456 0.256-6.144 3.456-5.76 6.912 0.256 3.456 3.328 6.016 6.912 5.76zM818.432 442.368l28.928-7.68c3.456-0.896 5.376-4.352 4.48-7.808-0.896-3.456-4.352-5.376-7.808-4.48l-28.928 7.68c-3.456 0.896-5.376 4.352-4.48 7.808 0.896 3.456 4.48 5.376 7.808 4.48zM800.768 388.992l27.136-12.672c3.2-1.536 4.608-5.248 3.072-8.448-1.536-3.2-5.248-4.608-8.448-3.072l-27.136 12.672c-3.2 1.536-4.608 5.248-3.072 8.448 1.536 3.072 5.248 4.48 8.448 3.072zM774.144 339.328l24.448-17.152c2.944-2.048 3.584-6.016 1.536-8.832-2.048-2.944-6.016-3.584-8.832-1.536L766.848 328.96c-2.944 2.048-3.584 6.016-1.536 8.832 1.92 2.816 5.888 3.584 8.832 1.536zM697.216 257.664l17.152-24.448c2.048-2.944 1.28-6.912-1.536-8.832-2.944-2.048-6.912-1.28-8.832 1.536l-17.152 24.448c-2.048 2.944-1.28 6.912 1.536 8.832 2.816 2.048 6.784 1.408 8.832-1.536zM658.944 192.512c-3.2-1.536-7.04-0.128-8.448 3.072l-12.672 27.136c-1.536 3.2-0.128 7.04 3.072 8.448 3.2 1.536 7.04 0.128 8.448-3.072l12.672-27.136c1.408-3.2 0-7.04-3.072-8.448zM600.192 170.496c-3.456-0.896-6.912 1.152-7.808 4.48l-7.68 28.928c-0.896 3.456 1.152 6.912 4.48 7.808 3.456 0.896 6.912-1.152 7.808-4.48l7.68-28.928c1.024-3.328-1.024-6.912-4.48-7.808zM534.912 201.6c3.456 0.256 6.656-2.304 6.912-5.76l2.56-29.824c0.256-3.456-2.304-6.656-5.76-6.912-3.456-0.256-6.656 2.304-6.912 5.76l-2.56 29.824c-0.256 3.456 2.304 6.528 5.76 6.912zM476.032 158.464c-3.456 0.256-6.144 3.456-5.76 6.912l2.56 29.824c0.256 3.456 3.456 6.144 6.912 5.76 3.456-0.256 6.144-3.456 5.76-6.912l-2.56-29.824c-0.256-3.456-3.328-6.016-6.912-5.76zM422.144 173.312c-0.896-3.456-4.352-5.376-7.808-4.48-3.456 0.896-5.376 4.352-4.48 7.808l7.68 28.928c0.896 3.456 4.352 5.376 7.808 4.48 3.456-0.896 5.376-4.352 4.48-7.808l-7.68-28.928zM376.448 219.776l-12.672-27.136c-1.536-3.2-5.248-4.608-8.448-3.072-3.2 1.536-4.608 5.248-3.072 8.448L364.8 225.28c1.536 3.2 5.248 4.608 8.448 3.072 3.2-1.536 4.608-5.376 3.2-8.576zM316.416 253.824c2.048 2.944 6.016 3.584 8.832 1.536 2.944-2.048 3.584-6.016 1.536-8.832l-17.152-24.448c-2.048-2.944-6.016-3.584-8.832-1.536-2.944 2.048-3.584 6.016-1.536 8.832l17.152 24.448z&quot; fill=&quot;#FFFFFF&quot; p-id=&quot;19071&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">link</span>(<span class="params">args</span>) &#123;</span><br><span class="line">    args = args.<span class="title function_">join</span>(<span class="string">&#x27; &#x27;</span>).<span class="title function_">split</span>(<span class="string">&#x27;,&#x27;</span>);</span><br><span class="line">    <span class="comment">// 获取参数</span></span><br><span class="line">    <span class="keyword">let</span> url = (args[<span class="number">0</span>] || <span class="string">&#x27;&#x27;</span>).<span class="title function_">trim</span>(),</span><br><span class="line">        title = (args[<span class="number">1</span>] || <span class="string">&#x27;点击直达链接&#x27;</span>).<span class="title function_">trim</span>(),</span><br><span class="line">        favicon = (args[<span class="number">2</span>] ? <span class="string">`&lt;img src=&quot;<span class="subst">$&#123;args[<span class="number">2</span>]&#125;</span>&quot; class=&quot;no-lightbox&quot;&gt;`</span> : defaultIcon).<span class="title function_">trim</span>(),</span><br><span class="line">        desc = (args[<span class="number">3</span>] || <span class="string">&#x27;&#x27;</span>).<span class="title function_">trim</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="string">`&lt;a href=&quot;<span class="subst">$&#123;url&#125;</span>&quot; <span class="subst">$&#123;url.includes(<span class="string">&#x27;http&#x27;</span>)?<span class="string">&#x27;target=&quot;_blank&quot;&#x27;</span>:<span class="string">&#x27;&#x27;</span>&#125;</span> title=&quot;<span class="subst">$&#123;title&#125;</span>&quot; referrerPolicy=&quot;no-referrer&quot; class=&quot;link_card&quot;&gt;&lt;div class=&quot;link_icon&quot;&gt;<span class="subst">$&#123;favicon&#125;</span>&lt;/div&gt;&lt;div class=&quot;link_content&quot;&gt;&lt;div class=&quot;link_title&quot;&gt;<span class="subst">$&#123;title&#125;</span>&lt;/div&gt;<span class="subst">$&#123;desc?<span class="string">`&lt;div class=&quot;link_desc&quot;&gt;<span class="subst">$&#123;desc&#125;</span>&lt;/div&gt;`</span>:<span class="string">&#x27;&#x27;</span>&#125;</span>&lt;/div&gt;&lt;/a&gt;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">hexo.<span class="property">extend</span>.<span class="property">tag</span>.<span class="title function_">register</span>(<span class="string">&#x27;link&#x27;</span>, link, &#123; <span class="attr">ends</span>: <span class="literal">false</span> &#125;)</span><br></pre></td></tr></table></figure><ul><li>创建 <code>[blogRoot]/themes/butterfly/source/css/_tags/link.styl</code> 样式文件，并新增以下内容</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.link_card</span></span><br><span class="line">  <span class="attribute">display</span>: flex</span><br><span class="line">  margin: <span class="number">10px</span> <span class="number">0</span></span><br><span class="line">  color: <span class="built_in">var</span>(--font-color) <span class="meta">!important</span></span><br><span class="line">  text-decoration: none <span class="meta">!important</span></span><br><span class="line">  background: <span class="built_in">var</span>(--icat-background)</span><br><span class="line">  border-radius: <span class="number">8px</span></span><br><span class="line">  border: <span class="built_in">var</span>(--style-border)</span><br><span class="line">  padding: <span class="number">12px</span></span><br><span class="line">  &amp;:hover</span><br><span class="line">    background: <span class="built_in">var</span>(--icat-theme)</span><br><span class="line">    color: white <span class="meta">!important</span></span><br><span class="line">  .link_icon,.link_content</span><br><span class="line">    height: <span class="number">4rem</span></span><br><span class="line">  .link_icon</span><br><span class="line">    img,svg</span><br><span class="line">      height: <span class="number">4rem</span></span><br><span class="line">      width: <span class="number">4rem</span></span><br><span class="line">      border-radius: <span class="number">6px</span> <span class="meta">!important</span></span><br><span class="line">  .link_content</span><br><span class="line">    margin-left: <span class="number">1rem</span></span><br><span class="line">    width: <span class="built_in">calc</span>(<span class="number">100%</span> - <span class="number">6rem</span>)</span><br><span class="line">    overflow: hidden</span><br><span class="line">    line-height: <span class="number">1.5</span></span><br><span class="line">    display: flex</span><br><span class="line">    flex-direction: column</span><br><span class="line">    justify-content: center</span><br><span class="line">    .link_title</span><br><span class="line">      font-weight: bold</span><br><span class="line">      font-size: <span class="number">1.2rem</span></span><br><span class="line">    .link_title,.link_desc</span><br><span class="line">      word-break: break-all</span><br><span class="line">      overflow:hidden</span><br><span class="line">      text-overflow: ellipsis</span><br><span class="line">    &amp;:<span class="built_in">not</span>(:<span class="built_in">has</span>(.link_desc)) .link_title</span><br><span class="line">      display:-webkit-box</span><br><span class="line">      -webkit-box-orient:vertical</span><br><span class="line">      -webkit-line-clamp:<span class="number">2</span></span><br><span class="line">    .link_desc</span><br><span class="line">      opacity: .<span class="number">6</span></span><br><span class="line">    .link_desc,&amp;:<span class="built_in">has</span>(.link_desc) .link_title</span><br><span class="line">      white-space: nowrap</span><br></pre></td></tr></table></figure><h3 id="使用参数">使用参数</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 使用html是为了高亮代码，不必在意 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 参数如下： --&gt;</span></span><br><span class="line">&#123;% link 链接,标题,图标,介绍 %&#125;</span><br><span class="line"><span class="comment">&lt;!-- 示例如下： --&gt;</span></span><br><span class="line">&#123;% link https://meuicat.com/,MeuiCat,https://meuicat.com/media/favicon.ico,有肉有猫有生活. %&#125;</span><br><span class="line"><span class="comment">&lt;!-- 你也可以什么都不填，将会全部使用默认值，如下： --&gt;</span></span><br><span class="line">&#123;% card %&#125;</span><br><span class="line"><span class="comment">&lt;!-- 你也可以省略部分内容，如下： --&gt;</span></span><br><span class="line">&#123;% link https://meuicat.com/ %&#125;</span><br><span class="line"><span class="comment">&lt;!-- 位置在后面的参数不填的话可以直接省略，但是如果中间的不想填必须留空，如下： --&gt;</span></span><br><span class="line">&#123;% link https://meuicat.com/,,,有肉有猫有生活. %&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 魔改教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 魔改教程 </tag>
            
            <tag> butterfly </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>从零开始butterfly博客的魔改教程(一)</title>
      <link href="/2024/10/25/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8Bbutterfly%E5%8D%9A%E5%AE%A2%E7%9A%84%E9%AD%94%E6%94%B9%E6%95%99%E7%A8%8B(%E4%B8%80)/"/>
      <url>/2024/10/25/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8Bbutterfly%E5%8D%9A%E5%AE%A2%E7%9A%84%E9%AD%94%E6%94%B9%E6%95%99%E7%A8%8B(%E4%B8%80)/</url>
      
        <content type="html"><![CDATA[<h1>前言</h1><p>这是一篇从零开始构建butterfly博客的教程，主要面向的完全不知道如何构建Hexo博客的小白，这篇教程会从构建hexo博客开始，初步目标是给Hexo安装上本次的主人公butterfly主题。</p><h1>Hexo的依赖要求</h1><ul><li><strong>Node.js</strong> (Node.js 版本需不低于 10.13，建议使用 Node.js 12.0 及以上版本)</li><li><strong>Git</strong></li></ul><h2 id="1-安装Git">1. 安装Git</h2><p>这里我们将介绍不同操作系统的安装方式。</p><ul><li>Windows: 去指定官网<a href="https://git-scm.com/downloads/win">Git官网</a>下载安装包安装。</li><li>Linux: 一般Linux系统都自带Git，如果没有，可以用包管理器安装。<ul><li>Ubuntu/Debian: <code>sudo apt-get install git</code></li><li>CentOS/Red Hat/Fedora: <code>sudo yum install git</code></li><li>Arch Linux: <code>sudo pacman -S git</code></li></ul></li><li>macOS: 去指定官网<a href="https://sourceforge.net/projects/git-osx-installer/">Git官网</a>下载安装包安装。</li></ul><h2 id="2-安装Node-js">2. 安装Node.js</h2><p>这里我们将介绍不同操作系统的安装方式。</p><ul><li>Windows: 去指定官网<a href="https://nodejs.org/en/download/">Node.js官网</a>下载安装包安装。</li><li>Linux: 一般Linux系统都自带Node.js，如果没有，可以用包管理器安装。<ul><li>Ubuntu/Debian: <code>sudo apt-get install nodejs</code></li><li>CentOS/Red Hat/Fedora: <code>sudo yum install nodejs</code></li><li>Arch Linux: <code>sudo pacman -S nodejs</code></li></ul></li><li>macOS: 去指定官网<a href="https://nodejs.org/en/download/">Node.js官网</a>下载安装包安装。</li></ul><h1>安装 Hexo</h1><p>所有必备的应用程序安装完成后，即可使用 npm 安装 Hexo。</p><h2 id="1-安装Hexo客户端">1. 安装Hexo客户端</h2><ul><li>Windows: 在命令提示符中运行 <code>npm install -g hexo-cli</code></li><li>Linux: 在终端中运行 <code>sudo npm install -g hexo-cli</code></li><li>macOS： 在终端中运行 <code>sudo -s npm install -g hexo-cli</code></li></ul><h2 id="2-执行Hexo命令">2. 执行Hexo命令</h2><ul><li>Linux以外执行<code>npx hexo &lt;command&gt;</code></li><li>Linux用户可以将 Hexo 所在的目录下的 node_modules 添加到环境变量之中即可直接使用<code>npx hexo &lt;command&gt;</code><br><code>echo 'PATH=&quot;$PATH:./node_modules/.bin&quot;' &gt;&gt; ~/.profile</code></li></ul><h2 id="3-安装-Hexo-完成后，需要再指定文件夹内新增文件，执行hexo-init命令，Hexo会在指定文件夹内生成所需文件。">3. 安装 Hexo 完成后，需要再指定文件夹内新增文件，执行<code>hexo init</code>命令，Hexo会在指定文件夹内生成所需文件。</h2><ol><li><code>$ hexo init &lt;folder&gt;</code></li><li><code>cd &lt;folder&gt;</code></li><li><code>npm install</code> macOS用户安装需要开启管理员，所以需要在终端中运行<code>sudo npm install</code></li></ol><p>初始化后，您的项目文件夹将如下所示：<br>.<br>├── _config.yml<br>├── package.json<br>├── scaffolds<br>├── source<br>|   ├── _drafts<br>|   └── _posts<br>└── themes</p><h2 id="4-执行Hexo三板斧">4. 执行Hexo三板斧</h2><ol><li><code>hexo cl</code><br>在终端中运行<code>hexo cl</code>命令，确认刺青。(<code>hexo cl</code>是<code>hexo clean</code>的简写)</li><li><code>hexo g</code><br>在终端中运行<code>hexo g</code>命令，生成静态文件。(<code>hexo g</code>是<code>hexo generate</code>的简写)</li><li><code>hexo s</code><br>在终端中运行<code>hexo s</code>命令，启动本地服务器。(<code>hexo s</code>是<code>hexo server</code>的简写)</li></ol><p>在<a href="http://localhost:4000/">本地端口</a>确认Hexo博客是否正常运行。</p><p>若成功运行则会显示成下图这样:</p><p><img src="https://i.imgur.com/C80Biuy.png" alt="hexo成功运行"></p><p>接下来，我们可以开始安装butterfly主题了。</p><h1>安装butterfly主题</h1><h2 id="1-通过Git获取源代码">1. 通过Git获取源代码</h2><p>Stable branch [recommend]:<br><code>git clone -b master https://github.com/jerryc127/hexo-theme-butterfly.git themes/butterfly</code></p><p>Dev branch:<br><code>git clone -b dev https://github.com/jerryc127/hexo-theme-butterfly.git themes/butterfly</code></p><h2 id="2-NPM安装Butterfly主题">2. NPM安装Butterfly主题</h2><p>在终端中运行<code>npm install hexo-theme-butterfly --save</code>命令，安装Butterfly主题。<br>（macOS用户需要开启管理员，所以需要在终端中运行<code>sudo npm install hexo-theme-butterfly --save</code>）</p><h2 id="3-修改Hexo配置文件">3. 修改Hexo配置文件</h2><p>打开Hexo配置文件<code>_config.yml</code>，找到<code>theme</code>项，将<code>theme</code>的值修改为<code>butterfly</code>。</p><p>如果你没有pug和stylus renderer，请在终端中运行以下代码:<br><code>npm install hexo-renderer-pug hexo-renderer-stylus --save</code>命令安装。<br>(macOS用户需要开启管理员，所以需要在终端中运行<code>sudo npm install hexo-renderer-pug hexo-renderer-stylus --save</code>)</p><h2 id="4-启用Butterfly主题">4. 启用Butterfly主题</h2><p>执行hexo三板斧命令，确认无误后，在浏览器中访问<a href="http://localhost:4000/">本地端口</a>，即可看到Butterfly主题的博客页面。</p><p>如果成功安装，你将看到如下画面:</p><p><img src="https://i.imgur.com/U2HhcyD.png" alt="butterfly安装成功"></p><h1>总结</h1><p>以上就是butterfly主题的傻瓜式安装教程，如果你遇到了问题，欢迎在评论区留言，希望能帮助到大家。</p>]]></content>
      
      
      <categories>
          
          <category> 魔改教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 魔改教程 </tag>
            
            <tag> butterfly </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Markdown从小白到精通</title>
      <link href="/2024/10/25/Markdown%E4%BB%8E%E5%B0%8F%E7%99%BD%E5%88%B0%E7%B2%BE%E9%80%9A/"/>
      <url>/2024/10/25/Markdown%E4%BB%8E%E5%B0%8F%E7%99%BD%E5%88%B0%E7%B2%BE%E9%80%9A/</url>
      
        <content type="html"><![CDATA[<h1><strong>前言</strong></h1><p>相信很多人在看技术博客，做笔记时都经常接触Typora呀熊掌记等一系列笔记软件，这些软件都有着很强大的Markdown语法支持，让我们可以快速、轻松地进行排版。由于Hexo等静态博客主要通过对Markdown文件进行解析来渲染出很多让人眼前一亮的画面效果，所以我觉得在正式开始博客搭建之前，有必要让大家对Markdown语法有一个基本的了解。本文将介绍一些常用的Markdown语法，希望能帮助大家快速上手。废话不多说啦，开始干活！</p><h1><strong>基本语法</strong></h1><table><thead><tr><th>元素</th><th>Markdown 语法</th></tr></thead><tbody><tr><td>标题（Heading）</td><td><code># H1</code><br><code>## H2</code><br><code>### H3</code></td></tr><tr><td>粗体（Bold）</td><td><code>**bold text**</code></td></tr><tr><td>斜体（Italic）</td><td><code>*italicized text*</code></td></tr><tr><td>引用块（Blockquote）</td><td><code>&gt; blockquote</code></td></tr><tr><td>有序列表（Ordered List）</td><td><code>1. First item</code><br><code>2. Second item</code><br><code>3. Third item</code></td></tr><tr><td>无序列表（Unordered List）</td><td><code>- First item</code><br><code>- Second item</code><br><code>- Third item</code></td></tr><tr><td>代码（Code）</td><td><code>code</code></td></tr><tr><td>分隔线（Horizontal Rule）</td><td><code>---</code></td></tr><tr><td>链接（Link）</td><td><code>[title](https://www.example.com)</code></td></tr><tr><td>图片（Image)</td><td><code>![alt text](image.jpg)</code></td></tr></tbody></table><h1><strong>扩展语法</strong></h1><table><thead><tr><th>元素</th><th>Markdown 语法</th></tr></thead><tbody><tr><td>表格（Table）</td><td>| Syntax      | Description |<br>| ----------- | ----------- |<br>| Header      | Title       |<br>| Paragraph   | Tex.      |</td></tr><tr><td>代码块（Fenced Code Block）</td><td><code>&lt;br&gt;&#123;&lt;br&gt;  &quot;firstName&quot;: &quot;John&quot;,&lt;br&gt;  &quot;lastName&quot;: &quot;Smith&quot;,&lt;br&gt;  &quot;age&quot;: 25&lt;br&gt;&#125;&lt;br&gt;</code></td></tr><tr><td>脚注（Footnote）</td><td><code>Here's a sentence with a footnote. [^1]</code><br><code>[^1]: This is the footnote.</code></td></tr><tr><td>标题编号（Heading ID）</td><td><code>### My Great Heading &#123;#custom-id&#125;</code></td></tr><tr><td>定义列表（Definition List）</td><td><code>term</code><br><code>: definition</code></td></tr><tr><td>删除线（Strikethrough）</td><td><code>~~The world is flat.~~</code></td></tr><tr><td>任务列表（Task List）</td><td><code>- [x] Write the press release</code><br><code>- [ ] Update the website</code><br><code>- [ ] Contact the media</code></td></tr></tbody></table><!-- # 目录- [标题语法](#标题语法)- [段落语法](#段落语法)- [换行语法](#换行语法)- [强调语法](#强调语法)- [引用语法](#引用语法)- [列表语法](#列表语法)- [代码语法](#代码语法)- [分隔线语法](#分隔线语法)- [链接语法](#链接语法)- [图片语法](#图片语法)- [转义字符语法](#转义字符语法)- [内嵌HTML语法](#内嵌HTML语法)# 语法详解## 标题语法要创建标题，请在单词或短语前面添加井号 (`#`)。`#`的数量代表了标题的级别。例如，添加三个`#`表示创建一个三级标题(`<h3>`)(例如：`### My Header`)。| Markdown语法            | HTML                       |     |------------------------|----------------------------||`# Heading level 1`     |`<h1>Heading level 1</h1>`  | |`## Heading level 2`    | `<h2>Heading level 2</h2>` | |`### Heading level 3`   | `<h3>Heading level 3</h3>` | |`#### Heading level 4`  | `<h4>Heading level 4</h4>` | |`##### Heading level 5` | `<h5>Heading level 5</h5>` | |`###### Heading level 6`| `<h6>Heading level 6</h6>` | ## 段落语法要创建段落，请使用空白行将一行或多行文本进行分隔。| Markdown语法            | HTML                       ||------------------------|----------------------------||`I really like using Markdown.`<br><br>`I think I'll use it to format all of my documents from now on.` | `<p>I really like using Markdown.</p>`<br><br>`<p>I think I'll use it to format all of my documents from now on.</p>` |## 换行语法在一行的末尾添加两个或多个空格，然后按回车键,即可创建一个换行(`<br>`)。| Markdown语法 |HTML ||--------------|------||`This is the first line.`<br>`And this is the second line.`|`<p>This is the first line. <br>`<br>`And this is the second line.</p>`|## 强调语法通过将文本设置为粗体或斜体来强调其重要性。1. 粗体（Bold）要加粗文本，请在单词或短语的前后各添加两个星号（asterisks）或下划线（underscores）。如需加粗一个单词或短语的中间部分用以表示强调的话，请在要加粗部分的两侧各添加两个星号（asterisks）。| Markdown语法 |HTML ||--------------|------||`I really **love** writing in Markdown.`|`<p>I really <strong>love</strong> writing in Markdown.</p>`||`I really __love__ writing in Markdown.`|`<p>I really <strong>love</strong> writing in Markdown.</p>`||`I really **love** writing in __Markdown__`|`<p>I really <strong>love</strong> writing in <strong>Markdown</strong></p>`|2. 斜体（Italic）要用斜体显示文本，请在单词或短语前后添加一个星号（asterisk）或下划线（underscore）。要斜体突出单词的中间部分，请在字母前后各添加一个星号，中间不要带空格。| Markdown语法 |HTML ||--------------|------||`IItalicized text is the *cat's meow*.`|`Italicized text is the <em>cat's meow</em>.`||`Italicized text is the _cat's meow_.`|`Italicized text is the <em>cat's meow</em>.`||`A*cat*meow`|`A<em>cat</em>meow`|`Acatmeow`|3. 粗体（Bold）和斜体（Italic）要同时使用粗体和斜体，请在要加粗的单词或短语前后各添加三个星号（asterisks）或下划线（underscores）。要加粗并用斜体显示单词或短语的中间部分，请在要突出显示的部分前后各添加三个星号，中间不要带空格。| Markdown语法 |HTML ||--------------|------||`This text is ***really important***.`|`This text is <strong><em>really important</em></strong>.`||`This text is ___really important___.`  |`This text is <strong><em>really important</em></strong>.`||`This text is **_really_** important.`|`This text is <strong><em>really</em> important</strong>.`||`This text is __*really important*__.`  |`This text is <strong><em>really important</em></strong>.`|## 引用语法要创建块引用，请在段落前添加一个 `>` 符号。`>  Dorothy followed her through many of the beautiful rooms in her castle.`渲染效果如下所示：> Dorothy followed her through many of the beautiful rooms in her castle.1. 多个段落的块引用块引用可以包含多个段落。为段落之间的空白行添加一个 `>` 符号。`> Dorothy followed her through many of the beautiful rooms in her castle.``>``> The Witch bade her clean the pots and kettles and sweep the floor and keep the fire fed with wood.`渲染效果如下：> Dorothy followed her through many of the beautiful rooms in her castle.> > The Witch bade her clean the pots and kettles and sweep the floor and keep the fire fed with wood.2. 嵌套块引用块引用可以嵌套。在要嵌套的段落前添加一个 `>>` 符号。`> Dorothy followed her through many of the beautiful rooms in her castle.``>``>> The Witch bade her clean the pots and kettles and sweep the floor and keep the fire fed with wood.`渲染效果如下：> Dorothy followed her through many of the beautiful rooms in her castle.>> The Witch bade her clean the pots and kettles and sweep the floor and keep the fire fed with wood.3. 带有其它元素的块引用块引用可以包含其他 Markdown 格式的元素。并非所有元素都可以使用，你需要进行实验以查看哪些元素有效。`> #### The quarterly results look great!``>``> - Revenue was off the chart.``> - Profits were higher than ever.``>``>> *Everything* is going according to **plan**.`渲染效果如下：> #### The quarterly results look great!> > - Revenue was off the chart.> - Profits were higher than ever.> >> *Everything* is going according to **plan**.## 列表语法可以将多个条目组织成有序或无序列表。1. 有序列表要创建有序列表，请在每个列表项前添加数字并紧跟一个英文句点。数字不必按数学顺序排列，但是列表应当以数字 1 起始。要创建有序列表，请在每个列表项前添加数字并紧跟一个英文句点。数字不必按数学顺序排列，但是列表应当以数字 1 起始。| Markdown语法 |HTML ||--------------|------||`1. First item`<br>`2. Second item`<br>`3. Third item`|`<ol>`<br>`<li>First item</li>`<br>`<li>Second item</li>`<br>`<li>Third item</li>`<br>`</ol>`|2. 无序列表要创建无序列表，请在每个列表项前面添加破折号 (-)、星号 (*) 或加号 (+) 。缩进一个或多个列表项可创建嵌套列表。| Markdown语法 |HTML ||--------------|------||`- First item`<br>`- Second item`<br>`- Third item`|`<ul>`<br>`<li>First item</li>`<br>`<li>Second item</li>`<br>`<li>Third item</li>`<br>`</ul>`||`* First item`<br>`* Second item`<br>`* Third item`|`<ul>`<br>`<li>First item</li>`<br>`<li>Second item</li>`<br>`<li>Third item</li>`<br>`</ul>`||`+ First item`<br>`+ Second item`<br>`+ Third item`|`<ul>`<br>`<li>First item</li>`<br>`<li>Second item</li>`<br>`<li>Third item</li>`<br>`</ul>`|3. 在列表中嵌套其他元素要在保留列表连续性的同时在列表中添加另一种元素，请将该元素缩进四个空格或一个制表符，如下例所示：  ### 段落  `*   This is the first list item.`  `*   Here's the second list item.`  `    I need to add another paragraph below the second list item.`  `*   And here's the third list item.`  渲染效果如下：  *   This is the first list item.  *   Here's the second list item.      I need to add another paragraph below the second list item.  *   And here's the third list item.  ### 引用块  `*   This is the first list item.`  `*   Here's the second list item.`  `    > A blockquote would look great below the second list item.`  `*   And here's the third list item.`  渲染效果如下：  *   This is the first list item.  *   Here's the second list item.      > A blockquote would look great below the second list item.  *   And here's the third list item.  ### 代码块  `*   Open the file.`  `*   Find the following code block on line 21:`          `&lt;html>`          `&lt;head>`            `&lt;title>Test&lt;/title>`          `&lt;/head>`  `*   Update the title to match the name of your website.`  渲染效果如下：  *   Open the file.  *   Find the following code block on line 21:          &lt;html>          &lt;head>            &lt;title>Test&lt;/title>          &lt;/head>  *   Update the title to match the name of your website.  ### 图片  `*   Open the file containing the Linux mascot.`  `*   Marvel at its beauty.`      `![Tux, the Linux mascot](/assets/images/tux.png)`  `*   Close the file.`  渲染效果如下：  *   Open the file containing the Linux mascot.  *   Marvel at its beauty.      ![Tux, the Linux mascot](/assets/images/tux.png)  *   Close the file.  ### 列表  `*   First item`  `*   Second item`      `- Indented item`      `- Indented item`  `*   Third item`  渲染效果如下：  *   First item  *   Second item      - Indented item      - Indented item  *   Third item -->]]></content>
      
      
      
        <tags>
            
            <tag> Markdown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Solitude主题魔改教程(8)-藏宝阁页面</title>
      <link href="/2024/10/21/Solitude%E4%B8%BB%E9%A2%98%E9%AD%94%E6%94%B9%E6%95%99%E7%A8%8B(8)-%E8%97%8F%E5%AE%9D%E9%98%81%E9%A1%B5%E9%9D%A2/"/>
      <url>/2024/10/21/Solitude%E4%B8%BB%E9%A2%98%E9%AD%94%E6%94%B9%E6%95%99%E7%A8%8B(8)-%E8%97%8F%E5%AE%9D%E9%98%81%E9%A1%B5%E9%9D%A2/</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>Solitude主题默认没有藏宝阁页面功能，但有时我们希望展示个人收藏的番剧、小说、电影、漫画等内容。本文将详细介绍如何从blog-solitude项目完整移植藏宝阁页面功能到solitude-latest，包括页面配置、模板创建、数据管理和样式设计的完整实现方案。</p><hr><h2 id="现象与需求">现象与需求</h2><h3 id="现象">现象</h3><ul><li>Solitude主题默认没有藏宝阁页面</li><li>缺少收藏展示和分类功能</li><li>无法展示个人收藏的番剧、小说、电影等</li><li>缺少收藏数据管理机制</li></ul><h3 id="期望效果">期望效果</h3><ul><li>独立的藏宝阁页面（<code>/collects/</code>）</li><li>支持收藏分类展示（番剧、小说、电影、漫画等）</li><li>每个收藏包含封面、名称、评分、标签、描述</li><li>支持豆瓣链接跳转</li><li>响应式设计，适配不同屏幕尺寸</li><li>视频Banner支持</li><li>悬停效果和动画</li></ul><hr><h2 id="问题分析">问题分析</h2><h3 id="根本原因">根本原因</h3><ol><li><p><strong>页面类型缺失</strong><br>solitude-latest主题缺少collects页面类型的支持</p></li><li><p><strong>模板文件缺失</strong><br>缺少collects页面的模板文件和内容组件</p></li><li><p><strong>数据管理缺失</strong><br>缺少收藏数据的配置和管理机制</p></li><li><p><strong>样式文件缺失</strong><br>缺少collects页面的CSS样式文件</p></li><li><p><strong>路由配置缺失</strong><br>页面路由中缺少collects类型的处理</p></li></ol><hr><h2 id="修改文件清单">修改文件清单</h2><ul><li><code>solitude-latest/source/collects/index.md</code></li><li><code>solitude-latest/source/_data/collects.yml</code></li><li><code>solitude-latest/node_modules/hexo-theme-solitude/layout/page.pug</code></li><li><code>solitude-latest/node_modules/hexo-theme-solitude/layout/includes/page/collects.pug</code></li><li><code>solitude-latest/node_modules/hexo-theme-solitude/source/css/_page/collects.styl</code></li><li><code>solitude-latest/node_modules/hexo-theme-solitude/source/css/index.styl</code></li></ul><hr><h2 id="详细修改步骤">详细修改步骤</h2><h3 id="1-创建藏宝阁页面配置">1. 创建藏宝阁页面配置</h3><p><strong>文件路径：</strong><br><code>solitude-latest/source/collects/index.md</code></p><p><strong>文件内容：</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">藏宝阁</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2025-01-01 14:00:00</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">collects</span></span><br><span class="line"><span class="attr">data:</span> <span class="string">collects</span></span><br><span class="line"><span class="attr">banner:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">cover:</span> <span class="string">/mp4/collects-banner.mp4</span></span><br><span class="line"><span class="attr">desc:</span> <span class="string">这里收集了一些我喜欢的东西</span></span><br><span class="line"><span class="attr">leftend:</span> <span class="string">看看</span> <span class="string">Ryan</span> <span class="string">都收集些什么奇奇怪怪的东西吧！</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><p><strong>配置说明：</strong></p><ul><li><code>type: collects</code> - 页面类型为collects</li><li><code>data: collects</code> - 数据源为collects.yml</li><li><code>banner: true</code> - 启用banner显示</li><li><code>cover: /mp4/collects-banner.mp4</code> - 设置banner视频</li><li><code>desc</code> - banner描述文字</li><li><code>leftend</code> - banner左侧信息</li></ul><hr><h3 id="2-创建收藏数据配置文件">2. 创建收藏数据配置文件</h3><p><strong>文件路径：</strong><br><code>solitude-latest/source/_data/collects.yml</code></p><p><strong>文件结构：</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">class_name:</span> <span class="string">📺</span> <span class="string">番剧</span></span><br><span class="line">  <span class="attr">item_list:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">间谍过家家</span> <span class="string">第一季</span></span><br><span class="line">      <span class="attr">image:</span> <span class="string">https://i.imgur.com/XUirRGd.png/cover</span></span><br><span class="line">      <span class="attr">rating:</span> <span class="number">8.9</span></span><br><span class="line">      <span class="attr">icon:</span> <span class="string">fab</span> <span class="string">fa-bilibili</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">番剧</span></span><br><span class="line">      <span class="attr">date:</span> <span class="number">2022</span><span class="string">/04/09</span></span><br><span class="line">      <span class="attr">tags:</span> [<span class="string">&quot;治愈&quot;</span>, <span class="string">&quot;可爱&quot;</span>]</span><br><span class="line">      <span class="attr">tag_colors:</span> [<span class="string">&quot;#007BFF&quot;</span>, <span class="string">&quot;#FF5733&quot;</span>]</span><br><span class="line">      <span class="attr">description:</span> <span class="string">为了潜入名校,西国能力最强的间谍&quot;黄昏&quot;被下令组建家庭...</span></span><br><span class="line">      <span class="attr">douban_link:</span> <span class="string">&quot;https://movie.douban.com/subject/35258427/&quot;</span></span><br></pre></td></tr></table></figure><p><strong>数据结构说明：</strong></p><ul><li><code>class_name</code> - 分类名称（支持emoji）</li><li><code>item_list</code> - 该分类下的收藏列表</li><li><code>name</code> - 收藏名称</li><li><code>image</code> - 封面图片链接</li><li><code>rating</code> - 评分（0-10分）</li><li><code>icon</code> - Font Awesome图标类名</li><li><code>type</code> - 收藏类型</li><li><code>date</code> - 创建日期</li><li><code>tags</code> - 标签数组</li><li><code>tag_colors</code> - 标签颜色数组</li><li><code>description</code> - 详细描述</li><li><code>douban_link</code> - 豆瓣链接</li></ul><p><strong>注意事项：</strong></p><ul><li>日期格式建议使用 <code>YYYY/MM/DD</code> 或 <code>YYYY-MM-DD</code></li><li>图片链接建议使用HTTPS</li><li>标签和颜色数组需要一一对应</li><li>描述文字避免过长，建议控制在合理长度</li></ul><hr><h3 id="3-修改页面路由配置">3. 修改页面路由配置</h3><p><strong>文件路径：</strong><br><code>solitude-latest/node_modules/hexo-theme-solitude/layout/page.pug</code></p><p><strong>修改内容：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">when &#x27;game&#x27;</span><br><span class="line">    include includes/page/game</span><br><span class="line">when &#x27;collects&#x27;</span><br><span class="line">    include includes/page/collects</span><br><span class="line">when &#x27;message&#x27;</span><br></pre></td></tr></table></figure><p><strong>说明：</strong><br>在页面路由中添加collects类型的处理，确保访问 <code>/collects/</code> 时能正确渲染collects页面。</p><hr><h3 id="4-创建藏宝阁页面模板">4. 创建藏宝阁页面模板</h3><p><strong>文件路径：</strong><br><code>solitude-latest/node_modules/hexo-theme-solitude/layout/includes/page/collects.pug</code></p><p><strong>文件内容：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">- var $data = page.data</span><br><span class="line">if page.banner</span><br><span class="line">    include ../widgets/page/banner</span><br><span class="line">.collects.article-container</span><br><span class="line">    if site.data[$data]</span><br><span class="line">        each collect in site.data[$data]</span><br><span class="line">            .collect-section</span><br><span class="line">                h2.collect-title= collect.class_name</span><br><span class="line">                .collects</span><br><span class="line">                    each item in (collect.item_list || [])</span><br><span class="line">                        .collect_box(style=`background-image: url($&#123;item.image&#125;);`)</span><br><span class="line">                            .collect_top</span><br><span class="line">                                div.collect_icon</span><br><span class="line">                                    i(class=item.icon)</span><br><span class="line">                                div.collect_category= item.type</span><br><span class="line">                            .collect_bottom</span><br><span class="line">                                div.collect_name= item.name</span><br><span class="line">                                if typeof item.date === &#x27;string&#x27; &amp;&amp; item.date.includes(&#x27;/&#x27;)</span><br><span class="line">                                    div.collect_date 创建日期: #&#123;item.date.split(&#x27; &#x27;)[0]&#125;</span><br><span class="line">                                else</span><br><span class="line">                                    div.collect_date 创建日期: 未知</span><br><span class="line">                                div.collect_rating</span><br><span class="line">                                    each i in Array(Math.floor(item.rating / 2))</span><br><span class="line">                                        i.fa-solid.fa-star</span><br><span class="line">                                    if (item.rating % 2) &gt;= 1</span><br><span class="line">                                        i.fa-solid.fa-star-half</span><br><span class="line">                                    each i in Array(5 - Math.ceil(item.rating / 2))</span><br><span class="line">                                        i.fa-regular.fa-star</span><br><span class="line">                                    span.collect_score= item.rating</span><br><span class="line">                                div.collect_tags</span><br><span class="line">                                    each tag, index in (item.tags || [])</span><br><span class="line">                                        span.collect_tag(style=`background-color: $&#123;item.tag_colors[index] || &#x27;#007BFF&#x27;&#125;;`)= tag</span><br><span class="line">                                if item.description</span><br><span class="line">                                    p.collect_description #&#123;item.description&#125;</span><br><span class="line">                                div.collect_douban</span><br><span class="line">                                    a(href=item.douban_link target=&quot;_blank&quot; title=&quot;豆瓣链接&quot;)</span><br><span class="line">                                        div.douban-icon</span><br><span class="line">    != page.content</span><br></pre></td></tr></table></figure><p><strong>模板逻辑说明：</strong></p><ul><li>动态加载数据：<code>site.data[$data]</code> 根据页面配置的data字段加载对应数据</li><li>条件渲染banner：根据 <code>page.banner</code> 决定是否显示banner</li><li>分类展示：遍历每个分类（<code>collect</code>）和其下的收藏项（<code>item</code>）</li><li>评分显示：使用Font Awesome星星图标显示评分</li><li>标签展示：动态设置标签颜色</li><li>豆瓣链接：提供跳转到豆瓣的链接</li></ul><hr><h3 id="5-创建藏宝阁样式文件">5. 创建藏宝阁样式文件</h3><p><strong>文件路径：</strong><br><code>solitude-latest/node_modules/hexo-theme-solitude/source/css/_page/collects.styl</code></p><p><strong>文件内容：</strong></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.collects</span></span><br><span class="line">  <span class="attribute">display</span>: grid</span><br><span class="line">  <span class="attribute">grid-template-columns</span>: <span class="built_in">repeat</span>(auto-fill, <span class="built_in">minmax</span>(<span class="number">300px</span>, <span class="number">1</span>fr))</span><br><span class="line">  <span class="attribute">gap</span>: <span class="number">20px</span></span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">20px</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.collect-section</span></span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">40px</span></span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.collect-title</span></span><br><span class="line">      <span class="attribute">font-size</span>: <span class="number">1.5em</span></span><br><span class="line">      <span class="attribute">margin-bottom</span>: <span class="number">20px</span></span><br><span class="line">      <span class="attribute">color</span>: <span class="built_in">var</span>(--font-color)</span><br><span class="line">      <span class="attribute">border-bottom</span>: <span class="number">2px</span> solid <span class="built_in">var</span>(--theme-color)</span><br><span class="line">      <span class="attribute">padding-bottom</span>: <span class="number">10px</span></span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.collects</span></span><br><span class="line">      <span class="attribute">display</span>: grid</span><br><span class="line">      <span class="attribute">grid-template-columns</span>: <span class="built_in">repeat</span>(auto-fill, <span class="built_in">minmax</span>(<span class="number">280px</span>, <span class="number">1</span>fr))</span><br><span class="line">      <span class="attribute">gap</span>: <span class="number">20px</span></span><br><span class="line"></span><br><span class="line">      <span class="selector-class">.collect_box</span></span><br><span class="line">        <span class="attribute">position</span>: relative</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">400px</span></span><br><span class="line">        <span class="attribute">border-radius</span>: <span class="number">15px</span></span><br><span class="line">        <span class="attribute">overflow</span>: hidden</span><br><span class="line">        <span class="attribute">background-size</span>: cover</span><br><span class="line">        <span class="attribute">background-position</span>: center</span><br><span class="line">        <span class="attribute">transition</span>: all <span class="number">0.3s</span> ease</span><br><span class="line">        <span class="attribute">cursor</span>: pointer</span><br><span class="line"></span><br><span class="line">        <span class="selector-pseudo">&amp;:hover</span></span><br><span class="line">          <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">5px</span>)</span><br><span class="line">          <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">10px</span> <span class="number">25px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.2</span>)</span><br><span class="line"></span><br><span class="line">        <span class="selector-class">.collect_top</span></span><br><span class="line">          <span class="attribute">position</span>: absolute</span><br><span class="line">          <span class="attribute">top</span>: <span class="number">0</span></span><br><span class="line">          <span class="attribute">left</span>: <span class="number">0</span></span><br><span class="line">          <span class="attribute">right</span>: <span class="number">0</span></span><br><span class="line">          <span class="attribute">padding</span>: <span class="number">15px</span></span><br><span class="line">          <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(<span class="number">180deg</span>, <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.8</span>) <span class="number">0%</span>, transparent <span class="number">100%</span>)</span><br><span class="line">          <span class="attribute">display</span>: flex</span><br><span class="line">          <span class="attribute">justify-content</span>: space-between</span><br><span class="line">          <span class="attribute">align-items</span>: center</span><br><span class="line"></span><br><span class="line">          <span class="selector-class">.collect_icon</span></span><br><span class="line">            <span class="selector-tag">i</span></span><br><span class="line">              <span class="attribute">font-size</span>: <span class="number">1.2em</span></span><br><span class="line">              <span class="attribute">color</span>: <span class="number">#fff</span></span><br><span class="line"></span><br><span class="line">          <span class="selector-class">.collect_category</span></span><br><span class="line">            <span class="attribute">color</span>: <span class="number">#fff</span></span><br><span class="line">            <span class="attribute">font-size</span>: <span class="number">0.9em</span></span><br><span class="line">            <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.2</span>)</span><br><span class="line">            <span class="attribute">padding</span>: <span class="number">4px</span> <span class="number">8px</span></span><br><span class="line">            <span class="attribute">border-radius</span>: <span class="number">4px</span></span><br><span class="line"></span><br><span class="line">        <span class="selector-class">.collect_bottom</span></span><br><span class="line">          <span class="attribute">position</span>: absolute</span><br><span class="line">          <span class="attribute">bottom</span>: <span class="number">0</span></span><br><span class="line">          <span class="attribute">left</span>: <span class="number">0</span></span><br><span class="line">          <span class="attribute">right</span>: <span class="number">0</span></span><br><span class="line">          <span class="attribute">padding</span>: <span class="number">20px</span></span><br><span class="line">          <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(<span class="number">0deg</span>, <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.9</span>) <span class="number">0%</span>, transparent <span class="number">100%</span>)</span><br><span class="line">          <span class="attribute">color</span>: <span class="number">#fff</span></span><br><span class="line"></span><br><span class="line">          <span class="selector-class">.collect_name</span></span><br><span class="line">            <span class="attribute">font-size</span>: <span class="number">1.2em</span></span><br><span class="line">            <span class="attribute">font-weight</span>: bold</span><br><span class="line">            <span class="attribute">margin-bottom</span>: <span class="number">10px</span></span><br><span class="line">            <span class="attribute">line-height</span>: <span class="number">1.3</span></span><br><span class="line"></span><br><span class="line">          <span class="selector-class">.collect_date</span></span><br><span class="line">            <span class="attribute">font-size</span>: <span class="number">0.8em</span></span><br><span class="line">            <span class="attribute">opacity</span>: <span class="number">0.8</span></span><br><span class="line">            <span class="attribute">margin-bottom</span>: <span class="number">8px</span></span><br><span class="line"></span><br><span class="line">          <span class="selector-class">.collect_rating</span></span><br><span class="line">            <span class="attribute">margin-bottom</span>: <span class="number">10px</span></span><br><span class="line"></span><br><span class="line">            <span class="selector-tag">i</span></span><br><span class="line">              <span class="attribute">color</span>: <span class="number">#FFD700</span></span><br><span class="line">              <span class="attribute">margin-right</span>: <span class="number">2px</span></span><br><span class="line"></span><br><span class="line">            <span class="selector-class">.collect_score</span></span><br><span class="line">              <span class="attribute">margin-left</span>: <span class="number">5px</span></span><br><span class="line">              <span class="attribute">font-weight</span>: bold</span><br><span class="line"></span><br><span class="line">          <span class="selector-class">.collect_tags</span></span><br><span class="line">            <span class="attribute">margin-bottom</span>: <span class="number">10px</span></span><br><span class="line"></span><br><span class="line">            <span class="selector-class">.collect_tag</span></span><br><span class="line">              <span class="attribute">display</span>: inline-block</span><br><span class="line">              <span class="attribute">padding</span>: <span class="number">2px</span> <span class="number">8px</span></span><br><span class="line">              <span class="attribute">margin-right</span>: <span class="number">5px</span></span><br><span class="line">              <span class="attribute">margin-bottom</span>: <span class="number">5px</span></span><br><span class="line">              <span class="attribute">border-radius</span>: <span class="number">12px</span></span><br><span class="line">              <span class="attribute">font-size</span>: <span class="number">0.8em</span></span><br><span class="line">              <span class="attribute">color</span>: <span class="number">#fff</span></span><br><span class="line"></span><br><span class="line">          <span class="selector-class">.collect_description</span></span><br><span class="line">            <span class="attribute">font-size</span>: <span class="number">0.9em</span></span><br><span class="line">            <span class="attribute">line-height</span>: <span class="number">1.4</span></span><br><span class="line">            <span class="attribute">opacity</span>: <span class="number">0.9</span></span><br><span class="line">            <span class="attribute">margin-bottom</span>: <span class="number">10px</span></span><br><span class="line">            <span class="attribute">display</span>: -webkit-box</span><br><span class="line">            -webkit-line-clamp: <span class="number">3</span></span><br><span class="line">            -webkit-<span class="attribute">box-orient</span>: vertical</span><br><span class="line">            <span class="attribute">overflow</span>: hidden</span><br><span class="line"></span><br><span class="line">          <span class="selector-class">.collect_douban</span></span><br><span class="line">            <span class="attribute">text-align</span>: right</span><br><span class="line"></span><br><span class="line">            <span class="selector-tag">a</span></span><br><span class="line">              <span class="attribute">display</span>: inline-block</span><br><span class="line">              <span class="attribute">padding</span>: <span class="number">5px</span> <span class="number">10px</span></span><br><span class="line">              <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.2</span>)</span><br><span class="line">              <span class="attribute">border-radius</span>: <span class="number">4px</span></span><br><span class="line">              <span class="attribute">color</span>: <span class="number">#fff</span></span><br><span class="line">              <span class="attribute">text-decoration</span>: none</span><br><span class="line">              <span class="attribute">font-size</span>: <span class="number">0.8em</span></span><br><span class="line">              <span class="attribute">transition</span>: all <span class="number">0.3s</span> ease</span><br><span class="line"></span><br><span class="line">              <span class="selector-pseudo">&amp;:hover</span></span><br><span class="line">                <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.3</span>)</span><br><span class="line"></span><br><span class="line">              <span class="selector-class">.douban-icon</span></span><br><span class="line">                <span class="attribute">width</span>: <span class="number">16px</span></span><br><span class="line">                <span class="attribute">height</span>: <span class="number">16px</span></span><br><span class="line">                <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">&#x27;data:image/svg+xml,&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; viewBox=&quot;0 0 24 24&quot; fill=&quot;white&quot;&gt;&lt;path d=&quot;M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z&quot;/&gt;&lt;/svg&gt;&#x27;</span>) no-repeat center</span><br><span class="line">                <span class="attribute">background-size</span>: contain</span><br><span class="line"></span><br><span class="line"><span class="comment">// 响应式设计</span></span><br><span class="line"><span class="function"><span class="title">maxWidth768</span><span class="params">()</span></span></span><br><span class="line">  <span class="selector-class">.collects</span></span><br><span class="line">    <span class="selector-class">.collects</span></span><br><span class="line">      <span class="attribute">grid-template-columns</span>: <span class="built_in">repeat</span>(auto-fill, <span class="built_in">minmax</span>(<span class="number">250px</span>, <span class="number">1</span>fr))</span><br><span class="line">      <span class="attribute">gap</span>: <span class="number">15px</span></span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.collect_box</span></span><br><span class="line">      <span class="attribute">height</span>: <span class="number">350px</span></span><br><span class="line"></span><br><span class="line">      <span class="selector-class">.collect_bottom</span></span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">15px</span></span><br><span class="line"></span><br><span class="line">        <span class="selector-class">.collect_name</span></span><br><span class="line">          <span class="attribute">font-size</span>: <span class="number">1.1em</span></span><br><span class="line"></span><br><span class="line">        <span class="selector-class">.collect_description</span></span><br><span class="line">          -webkit-line-clamp: <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">maxWidth480</span><span class="params">()</span></span></span><br><span class="line">  <span class="selector-class">.collects</span></span><br><span class="line">    <span class="selector-class">.collects</span></span><br><span class="line">      <span class="attribute">grid-template-columns</span>: <span class="number">1</span>fr</span><br><span class="line">      <span class="attribute">gap</span>: <span class="number">15px</span></span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.collect_box</span></span><br><span class="line">      <span class="attribute">height</span>: <span class="number">320px</span></span><br><span class="line"></span><br><span class="line">      <span class="selector-class">.collect_bottom</span></span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">12px</span></span><br><span class="line"></span><br><span class="line">        <span class="selector-class">.collect_name</span></span><br><span class="line">          <span class="attribute">font-size</span>: <span class="number">1em</span></span><br><span class="line"></span><br><span class="line">        <span class="selector-class">.collect_description</span></span><br><span class="line">          -webkit-line-clamp: <span class="number">2</span></span><br><span class="line">          <span class="attribute">font-size</span>: <span class="number">0.8em</span></span><br></pre></td></tr></table></figure><p><strong>样式特点：</strong></p><ul><li>网格布局：使用CSS Grid实现响应式布局</li><li>卡片设计：每个收藏项以卡片形式展示</li><li>悬停效果：鼠标悬停时有上移和阴影效果</li><li>渐变背景：顶部和底部使用渐变背景确保文字可读性</li><li>评分显示：使用星星图标显示评分</li><li>标签系统：彩色标签展示分类信息</li><li>响应式：适配不同屏幕尺寸</li></ul><hr><h3 id="6-导入样式文件">6. 导入样式文件</h3><p><strong>文件路径：</strong><br><code>solitude-latest/node_modules/hexo-theme-solitude/source/css/index.styl</code></p><p><strong>修改内容：</strong></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_page/game.styl&#x27;</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_page/collects.styl&#x27;</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_mode/*&#x27;</span></span><br></pre></td></tr></table></figure><p><strong>说明：</strong><br>在主题的样式入口文件中导入collects样式，确保样式生效。</p><hr><h2 id="功能特性">功能特性</h2><h3 id="1-数据管理">1. 数据管理</h3><ul><li>支持YAML格式的数据文件</li><li>分类管理：番剧、小说、电影、漫画等</li><li>详细信息：封面、评分、标签、描述、豆瓣链接</li></ul><h3 id="2-展示效果">2. 展示效果</h3><ul><li>卡片式布局，美观大方</li><li>悬停动画效果</li><li>评分星级显示</li><li>彩色标签系统</li><li>响应式设计</li></ul><h3 id="3-交互功能">3. 交互功能</h3><ul><li>豆瓣链接跳转</li><li>分类筛选展示</li><li>移动端适配</li></ul><h3 id="4-扩展性">4. 扩展性</h3><ul><li>易于添加新的收藏分类</li><li>支持自定义标签和颜色</li><li>灵活的数据结构</li></ul><hr><h2 id="使用说明">使用说明</h2><h3 id="1-添加新收藏">1. 添加新收藏</h3><p>在 <code>source/_data/collects.yml</code> 文件中添加新的收藏项：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">新收藏名称</span></span><br><span class="line">  <span class="attr">image:</span> <span class="string">封面图片链接</span></span><br><span class="line">  <span class="attr">rating:</span> <span class="string">评分</span></span><br><span class="line">  <span class="attr">icon:</span> <span class="string">图标类名</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">类型</span></span><br><span class="line">  <span class="attr">date:</span> <span class="string">日期</span></span><br><span class="line">  <span class="attr">tags:</span> [<span class="string">&quot;标签1&quot;</span>, <span class="string">&quot;标签2&quot;</span>]</span><br><span class="line">  <span class="attr">tag_colors:</span> [<span class="string">&quot;#颜色1&quot;</span>, <span class="string">&quot;#颜色2&quot;</span>]</span><br><span class="line">  <span class="attr">description:</span> <span class="string">描述文字</span></span><br><span class="line">  <span class="attr">douban_link:</span> <span class="string">&quot;豆瓣链接&quot;</span></span><br></pre></td></tr></table></figure><h3 id="2-添加新分类">2. 添加新分类</h3><p>在数据文件中添加新的分类：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">class_name:</span> <span class="string">🎵</span> <span class="string">音乐</span></span><br><span class="line">  <span class="attr">item_list:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">音乐收藏项</span></span><br><span class="line">      <span class="comment"># ... 其他属性</span></span><br></pre></td></tr></table></figure><h3 id="3-自定义样式">3. 自定义样式</h3><p>可以修改 <code>_page/collects.styl</code> 文件来自定义样式效果。</p><hr><h2 id="注意事项">注意事项</h2><ol><li><strong>YAML格式</strong>：确保数据文件的YAML格式正确，避免缩进错误</li><li><strong>图片链接</strong>：建议使用HTTPS链接，确保图片能正常显示</li><li><strong>日期格式</strong>：建议使用标准日期格式，避免解析错误</li><li><strong>标签颜色</strong>：确保标签数组和颜色数组长度一致</li><li><strong>描述长度</strong>：建议控制描述文字长度，避免影响布局</li></ol><hr><h2 id="总结">总结</h2><p>通过以上步骤，我们成功为Solitude主题添加了完整的藏宝阁功能。这个功能不仅提供了美观的收藏展示界面，还具有良好的扩展性和维护性。用户可以根据自己的需求轻松添加和管理收藏内容，展示个人的兴趣爱好和品味。</p><p>藏宝阁功能的实现体现了Hexo主题开发的核心思想：通过数据驱动的方式实现内容的动态展示，通过模板化的方式实现界面的统一管理，通过样式化的方式实现视觉效果的精美呈现。</p>]]></content>
      
      
      <categories>
          
          <category> 魔改教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 魔改教程 </tag>
            
            <tag> Solitude </tag>
            
            <tag> Hexo </tag>
            
            <tag> 页面移植 </tag>
            
            <tag> 藏宝阁 </tag>
            
            <tag> 收藏展示 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Solitude主题魔改教程(7)-电玩屋页面</title>
      <link href="/2024/10/14/Solitude%E4%B8%BB%E9%A2%98%E9%AD%94%E6%94%B9%E6%95%99%E7%A8%8B(7)-%E7%94%B5%E7%8E%A9%E5%B1%8B%E9%A1%B5%E9%9D%A2/"/>
      <url>/2024/10/14/Solitude%E4%B8%BB%E9%A2%98%E9%AD%94%E6%94%B9%E6%95%99%E7%A8%8B(7)-%E7%94%B5%E7%8E%A9%E5%B1%8B%E9%A1%B5%E9%9D%A2/</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>Solitude主题默认没有电玩屋页面功能，但有时我们希望展示游戏评测和推荐。本文将详细介绍如何从blog-solitude项目完整移植电玩屋页面功能到solitude-latest，包括页面配置、模板创建、数据管理和样式设计的完整实现方案。</p><hr><h2 id="现象与需求">现象与需求</h2><h3 id="现象">现象</h3><ul><li>Solitude主题默认没有电玩屋页面</li><li>缺少游戏展示和分类功能</li><li>无法展示游戏评测和推荐</li><li>缺少游戏数据管理机制</li></ul><h3 id="期望效果">期望效果</h3><ul><li>独立的电玩屋页面（<code>/game/</code>）</li><li>支持游戏分类展示（MMORPG/MOBA、单机游戏等）</li><li>每个游戏包含封面、名称、规格、描述</li><li>支持外部链接跳转和评论功能</li><li>响应式设计，适配不同屏幕尺寸</li><li>视频Banner支持</li><li>悬停效果和交互功能</li></ul><hr><h2 id="问题分析">问题分析</h2><h3 id="根本原因">根本原因</h3><ol><li><p><strong>页面类型缺失</strong><br>solitude-latest主题缺少game页面类型的支持</p></li><li><p><strong>模板文件缺失</strong><br>缺少game页面的模板文件和内容组件</p></li><li><p><strong>数据管理缺失</strong><br>缺少游戏数据的配置和管理机制</p></li><li><p><strong>样式文件缺失</strong><br>缺少game页面的CSS样式文件</p></li><li><p><strong>路由配置缺失</strong><br>页面路由中缺少game类型的处理</p></li></ol><hr><h2 id="修改文件清单">修改文件清单</h2><ul><li><code>solitude-latest/source/game/index.md</code></li><li><code>solitude-latest/source/_data/game.yml</code></li><li><code>solitude-latest/node_modules/hexo-theme-solitude/layout/page.pug</code></li><li><code>solitude-latest/node_modules/hexo-theme-solitude/layout/includes/page/game.pug</code></li><li><code>solitude-latest/node_modules/hexo-theme-solitude/layout/includes/widgets/page/game/content.pug</code></li><li><code>solitude-latest/node_modules/hexo-theme-solitude/source/css/_page/game.styl</code></li><li><code>solitude-latest/node_modules/hexo-theme-solitude/source/css/index.styl</code></li></ul><hr><h2 id="详细修改步骤">详细修改步骤</h2><h3 id="1-创建电玩屋页面配置">1. 创建电玩屋页面配置</h3><p><strong>文件路径：</strong><br><code>solitude-latest/source/game/index.md</code></p><p><strong>文件内容：</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">电玩城</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2025-01-07 10:00:00</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">game</span></span><br><span class="line"><span class="attr">data:</span> <span class="string">game</span></span><br><span class="line"><span class="attr">banner:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">cover:</span> <span class="string">/mp4/game-banner.mp4</span></span><br><span class="line"><span class="attr">desc:</span> <span class="string">品电子毒药💊，享游戏人生🕹️</span></span><br><span class="line"><span class="attr">leftend:</span> <span class="string">跟</span> <span class="string">Ryan</span> <span class="string">一起体验冒险的旅程吧！</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><p><strong>配置说明：</strong></p><ul><li><code>type: game</code> - 页面类型为game</li><li><code>data: game</code> - 数据源为game.yml</li><li><code>banner: true</code> - 启用banner显示</li><li><code>cover: /mp4/game-banner.mp4</code> - 设置banner视频</li><li><code>desc</code> - banner描述文字</li><li><code>leftend</code> - banner左侧信息</li></ul><hr><h3 id="2-创建游戏数据配置文件">2. 创建游戏数据配置文件</h3><p><strong>文件路径：</strong><br><code>solitude-latest/source/_data/game.yml</code></p><p><strong>文件结构：</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">class_name:</span> <span class="string">MMORPG，MOBA</span></span><br><span class="line">  <span class="attr">description:</span> <span class="string">全球最大死宅网恋中心开业啦</span></span><br><span class="line">  <span class="attr">game_list:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">魔兽世界</span></span><br><span class="line">        <span class="attr">specification:</span> <span class="number">80</span><span class="string">,90后的记忆。什么？00？你为啥想不开玩这个？</span></span><br><span class="line">        <span class="attr">description:</span> <span class="string">自CTM入坑,退坑于BFA,自从全地图飞行要声望崇拜才可以,肝度飙升,至今还是走地鸡,后续剧情真的一般,部落PVP法王。</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">https://i.imgur.com/K3ggfhp.jpeg</span></span><br><span class="line">        <span class="attr">link:</span> <span class="string">https://worldofwarcraft.blizzard.com/en-us/</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">最终幻想XIV</span></span><br><span class="line">        <span class="attr">specification:</span> <span class="string">多人在线世纪佳缘,可恶,被撩走的永远都是团友。。</span></span><br><span class="line">        <span class="attr">description:</span> <span class="string">新世代MMORPG的神！3.0和5.0是完美版本,7.0是什么鬼？许多自闭症死宅的脱单利器,高难,钓鱼,装修,RP,总有一款适合你。</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">https://i.imgur.com/fO18ReB.png</span></span><br><span class="line">        <span class="attr">link:</span> <span class="string">https://jp.finalfantasyxiv.com/</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Dota2</span></span><br><span class="line">        <span class="attr">specification:</span> <span class="string">大学记忆之一,MOBA只推Dota2,其他的都是垃圾。</span></span><br><span class="line">        <span class="attr">description:</span> <span class="string">擅长屠夫,米拉娜,祈求者,米波。屠夫的钩子,米拉娜的穿云箭,祈求者天火,让队友啧啧称奇让对手怒砸键盘的效率型ganker。</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">https://i.imgur.com/Tez2mB2.jpeg</span></span><br><span class="line">        <span class="attr">link:</span> <span class="string">https://store.steampowered.com/app/570/Dota_2/</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">王者荣耀</span></span><br><span class="line">        <span class="attr">specification:</span> <span class="string">这游戏实在是太好玩啦,王者荣耀是最好玩的游戏！</span></span><br><span class="line">        <span class="attr">description:</span> <span class="string">三路都废,本命西施,只要是个女角色我都废。玩什么什么削弱的苦逼仔,把把败方MVP,一边嘴臭BB策划一边买皮肤的牢玩家。建议删策划</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">https://i.imgur.com/HPjGKS7.png</span></span><br><span class="line">        <span class="attr">link:</span> <span class="string">https://pvp.qq.com/web202311/index.html</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">class_name:</span> <span class="string">单机游戏</span></span><br><span class="line">  <span class="attr">description:</span> <span class="string">那些年自己玩过的游戏</span></span><br><span class="line">  <span class="attr">game_list:</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">黑神话:悟空</span></span><br><span class="line">       <span class="attr">specification:</span> <span class="string">中国第一款大型3D大作,不多说了,猿神启动！</span></span><br><span class="line">       <span class="attr">description:</span> <span class="string">游戏难度介于动作冒险游戏和魂类游戏之间,不会让你打不过,但也绝对没那么轻松,风格全世界独一份,音乐很棒！</span></span><br><span class="line">       <span class="attr">image:</span> <span class="string">https://i.imgur.com/jNtY3tA.jpeg</span></span><br><span class="line">       <span class="attr">link:</span> <span class="string">https://store.steampowered.com/app/2358720/_/</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">侠盗猎车手5</span></span><br><span class="line">       <span class="attr">specification:</span> <span class="string">游戏2013年出的,到底是谁还在买GTA5？</span></span><br><span class="line">       <span class="attr">description:</span> <span class="string">开放世界自由度拉满,车辆操控感很好,一边听着电台歌,一边载着一个迷糊的乘客前往利他教,感觉棒极了！</span></span><br><span class="line">       <span class="attr">image:</span> <span class="string">https://i.imgur.com/FSMf1y0.jpeg</span></span><br><span class="line">       <span class="attr">link:</span> <span class="string">https://store.steampowered.com/app/271590/Grand_Theft_Auto_V/</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">女神异闻录5</span> <span class="string">皇家版</span></span><br><span class="line">       <span class="attr">specification:</span> <span class="string">成功实现九艘跳,好的我的周可儿越来越渣了。</span></span><br><span class="line">       <span class="attr">description:</span> <span class="string">非常独树一帜的画风,精良的角色设计,超绝的音乐演出,唯一缺点就是学妹的上场时间太短了,学妹党大失败。</span></span><br><span class="line">       <span class="attr">image:</span> <span class="string">https://i.imgur.com/JgIzQ3a.jpeg</span></span><br><span class="line">       <span class="attr">link:</span> <span class="string">https://store.steampowered.com/app/1687950/Persona_5_Royal/</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">只狼:影逝二度</span></span><br><span class="line">       <span class="attr">specification:</span> <span class="string">初见只管叮叮当,后期才知道爽上的意义。</span></span><br><span class="line">       <span class="attr">description:</span> <span class="string">著名打铁游戏,金石之音里光速变菜,向前一小步,通关一大步的完美诠释。犹豫就会败北,果断就会白给。</span></span><br><span class="line">       <span class="attr">image:</span> <span class="string">https://i.imgur.com/qjfa224.jpeg</span></span><br><span class="line">       <span class="attr">link:</span> <span class="string">https://store.steampowered.com/app/814380/Sekiro_Shadows_Die_Twice__GOTY_Edition/</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">尼尔:机械纪元</span></span><br><span class="line">       <span class="attr">specification:</span> <span class="string">人類に栄光あれ！</span></span><br><span class="line">       <span class="attr">description:</span> <span class="string">非常出彩的音乐。角色可以自爆,造成伤害并且爆衣,加分,必须加分。游乐园正门雕像持续刮痧可以打爆获取巨多经验秒升99不是梦。</span></span><br><span class="line">       <span class="attr">image:</span> <span class="string">https://i.imgur.com/psVgaHe.png</span></span><br><span class="line">       <span class="attr">link:</span> <span class="string">https://store.steampowered.com/app/524220/NieRAutomata/</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">赛博朋克2077</span></span><br><span class="line">       <span class="attr">specification:</span> <span class="string">怕痛吗？那就电子纹身,身体改造</span></span><br><span class="line">       <span class="attr">description:</span> <span class="string">真男人从不沉迷性偶,只想与真爱帕南解锁坦震。杰洛特什么马震、云震到后来的船震都弱爆辣,玩的花还得是你波兰蠢驴。</span></span><br><span class="line">       <span class="attr">image:</span> <span class="string">https://i.imgur.com/a6zS6Er.jpeg</span></span><br><span class="line">       <span class="attr">link:</span> <span class="string">https://store.steampowered.com/app/1091500/Cyberpunk_2077/</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">文明6</span></span><br><span class="line">       <span class="attr">specification:</span> <span class="string">他们只是不（想）喜（要）欢（宣）您（战）。</span></span><br><span class="line">       <span class="attr">description:</span> <span class="string">文明系列的通病之一就是一局游戏耗时很长且很容易让人上瘾,此游戏已获得第一届STEAM大赏的&quot;再五分钟就好了&quot;奖。</span></span><br><span class="line">       <span class="attr">image:</span> <span class="string">https://i.imgur.com/A4j41WK.jpeg</span></span><br><span class="line">       <span class="attr">link:</span> <span class="string">https://store.steampowered.com/app/289070/Sid_Meiers_Civilization_VI/</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">鬼泣5</span></span><br><span class="line">       <span class="attr">specification:</span> <span class="string">玩的越久你就会越发现只有但丁能带给你快乐</span></span><br><span class="line">       <span class="attr">description:</span> <span class="string">希望各位男性玩家不要成为那个像个沙雕一样为了找你弟弟单挑,所以把你儿子的手臂卸了的那位中二大人。</span></span><br><span class="line">       <span class="attr">image:</span> <span class="string">https://i.imgur.com/Zmz0eNp.png</span></span><br><span class="line">       <span class="attr">link:</span> <span class="string">https://store.steampowered.com/app/601150/Devil_May_Cry_5/</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">艾尔登法环</span></span><br><span class="line">       <span class="attr">specification:</span> <span class="string">请叫我《艾尔登法环》，好的老头环！</span></span><br><span class="line">       <span class="attr">description:</span> <span class="string">前有好物但危险！牢玩家告知各位新手玩家绅士一点，陌生的女性胖次不要乱捡,尤其是名为菲雅的少女所穿的&quot;死眠长裤&quot;！</span></span><br><span class="line">       <span class="attr">image:</span> <span class="string">https://i.imgur.com/RVLtr0O.jpeg</span></span><br><span class="line">       <span class="attr">link:</span> <span class="string">https://store.steampowered.com/app/1245620/ELDEN_RING/</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">最终幻想7重制版</span></span><br><span class="line">       <span class="attr">specification:</span> <span class="string">呜呜呜~儿时经典再现，泰裤辣！</span></span><br><span class="line">       <span class="attr">description:</span> <span class="string">这是一个卖相很好但一点都不好玩的游戏,也就卖卖情怀了,新玩家慎玩。优点:女角色塑造的不错,Tifa是3D区永远滴神,xp得到空前满足。</span></span><br><span class="line">       <span class="attr">image:</span> <span class="string">https://i.imgur.com/QZFW5mT.jpeg</span></span><br><span class="line">       <span class="attr">link:</span> <span class="string">https://store.steampowered.com/app/1462040/FINAL_FANTASY_VII_REMAKE_INTERGRADE/</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">怪物猎人:世界</span></span><br><span class="line">       <span class="attr">specification:</span> <span class="string">我的aibo除了吃就是惹事,我要隔壁龙人族姐妹花</span></span><br><span class="line">       <span class="attr">description:</span> <span class="string">即便不是系列最佳，那也是系列最为大胆的一作，它呈现了无比新颖的画面,作为怪猎作初入坑的我表示,出后续可能会再玩。比曙光强！</span></span><br><span class="line">       <span class="attr">image:</span> <span class="string">https://i.imgur.com/ucM17bY.jpeg</span></span><br><span class="line">       <span class="attr">link:</span> <span class="string">https://store.steampowered.com/app/582010/Monster_Hunter_World/</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">黑暗之魂3</span></span><br><span class="line">       <span class="attr">specification:</span> <span class="string">在攻其阴睾的恶意世界里,最重要的还是活在裆下</span></span><br><span class="line">       <span class="attr">description:</span> <span class="string">毛多弱火,体大弱门,重甲弱雷,体胖弱菊,受苦游戏的代表作,对于我来讲根本不苦,因为还有同作品系列更苦的。我嘞个抖M之魂啊!就离谱！</span></span><br><span class="line">       <span class="attr">image:</span> <span class="string">https://i.imgur.com/xXMovdt.jpeg</span></span><br><span class="line">       <span class="attr">link:</span> <span class="string">https://store.steampowered.com/app/374320/DARK_SOULS_III/</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">巫师3:狂猎</span></span><br><span class="line">       <span class="attr">specification:</span> <span class="string">昆特3:狂赌</span> <span class="string">朋友，不来一把昆特牌吗？</span></span><br><span class="line">       <span class="attr">description:</span> <span class="string">女术士打桩机但老寒腿,动不动摔死,3m的高度难倒英雄汉。风花雪月不妨碍拔x无情,各种震开创者。见人就拜,有个神奇马儿,最怕神器草叉！</span></span><br><span class="line">       <span class="attr">image:</span> <span class="string">https://i.imgur.com/8jWp6sl.jpeg</span></span><br><span class="line">       <span class="attr">link:</span> <span class="string">https://store.steampowered.com/app/292030/The_Witcher_3_Wild_Hunt/</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">上古卷轴5</span></span><br><span class="line">       <span class="attr">specification:</span> <span class="string">我以前也是个冒险家，直到我的膝盖中了一箭。</span></span><br><span class="line">       <span class="attr">description:</span> <span class="string">进新手村要夹起尾巴做人,不要惹鸡神,游戏的审美并不重要,打上MOD就是我的审美!少女卷轴名不虚传。别人笑我抓根宝,我笑别人后宫少!</span></span><br><span class="line">       <span class="attr">image:</span> <span class="string">https://i.imgur.com/cPqWmxj.jpeg</span></span><br><span class="line">       <span class="attr">link:</span> <span class="string">https://store.steampowered.com/app/489830/The_Elder_Scrolls_V_Skyrim_Special_Edition/</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">看门狗2</span></span><br><span class="line">       <span class="attr">specification:</span> <span class="string">沙盒+高自由度+黑客+各种高科技无人机</span></span><br><span class="line">       <span class="attr">description:</span> <span class="string">你的手机终端可以操控一切，小到开门、开车，大到控飞机、炸建筑。偷看别人的隐私我一点都没兴趣,可以滴滴打车我可太有兴趣了！</span></span><br><span class="line">       <span class="attr">image:</span> <span class="string">https://i.imgur.com/UWQte2u.jpeg</span></span><br><span class="line">       <span class="attr">link:</span> <span class="string">https://store.steampowered.com/app/447040/Watch_Dogs_2/</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">全面战争:战锤2</span></span><br><span class="line">       <span class="attr">specification:</span> <span class="string">拔剑泰哥真正做到了心中无女人,拔剑自然神</span></span><br><span class="line">       <span class="attr">description:</span> <span class="string">全战系列里最好玩的版本没有之一,充分展示了种族的多样性,让吸血鬼大军对抗古墓王成为可能。你也可以选择当反派。妙啊妙啊。</span></span><br><span class="line">       <span class="attr">image:</span> <span class="string">https://i.imgur.com/xhPh7XZ.jpeg</span></span><br><span class="line">       <span class="attr">link:</span> <span class="string">https://store.steampowered.com/app/594570/Total_War_WARHAMMER_II/</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">全面战争:三国</span></span><br><span class="line">       <span class="attr">specification:</span> <span class="string">什么忠于旧主，还是小命要紧...</span></span><br><span class="line">       <span class="attr">description:</span> <span class="string">最初满脑子想着匡扶汉室,后来发现还是学曹操强夺别人老婆更有效率,再到后来甚至皇叔祭天法力无边,献祭流蜀汉真是tql。</span></span><br><span class="line">       <span class="attr">image:</span> <span class="string">https://i.imgur.com/sZMmQtw.jpeg</span></span><br><span class="line">       <span class="attr">link:</span> <span class="string">https://store.steampowered.com/app/779340/Total_War_THREE_KINGDOMS/</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Arma</span> <span class="number">3</span></span><br><span class="line">       <span class="attr">specification:</span> <span class="string">硬核，真的是太硬核了...</span></span><br><span class="line">       <span class="attr">description:</span> <span class="string">作为一款让我到现在为止都还没摸明白所有快捷键怎么使用的游戏,对萌新属实不太友好。游戏中很明显就能体会中国国力提升2333</span></span><br><span class="line">       <span class="attr">image:</span> <span class="string">https://i.imgur.com/hhMIyb8.jpeg</span></span><br><span class="line">       <span class="attr">link:</span> <span class="string">https://store.steampowered.com/app/107410/Arma_3/</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Hades</span></span><br><span class="line">       <span class="attr">specification:</span> <span class="string">玩到最后谁还在乎老妈的花园</span></span><br><span class="line">       <span class="attr">description:</span> <span class="string">好感度主要来自于游戏的操作性设计和创意灵感,伴随着音乐加持使Roguelike脱胎换骨,有趣的角色对话也是亮点之一。</span></span><br><span class="line">       <span class="attr">image:</span> <span class="string">https://i.imgur.com/Ku4wD7t.png</span></span><br><span class="line">       <span class="attr">link:</span> <span class="string">https://store.steampowered.com/app/1145360/Hades/</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">幻兽帕鲁</span></span><br><span class="line">       <span class="attr">specification:</span> <span class="string">白天大厂搬砖，晚上当赛博老板</span></span><br><span class="line">       <span class="attr">description:</span> <span class="string">在游戏中利益体会黑心资本家的资本原始积累,开放世界的宝可梦游戏很新颖很有趣,但是疯狂压榨员工让我有点罪恶的无力感。</span></span><br><span class="line">       <span class="attr">image:</span> <span class="string">https://i.imgur.com/UI9VE2w.jpeg</span></span><br><span class="line">       <span class="attr">link:</span> <span class="string">https://store.steampowered.com/app/1623730/Palworld/</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">无主之地2</span></span><br><span class="line">       <span class="attr">specification:</span> <span class="string">完美的词条,总是伴随着肝到破碎的心</span></span><br><span class="line">       <span class="attr">description:</span> <span class="string">肝，实在是太肝了！家人们谁懂啊我在游戏爆肝一周刷不出想要装备的感觉。感觉身体被掏空，没朋友一起玩不要轻易尝试。</span></span><br><span class="line">       <span class="attr">image:</span> <span class="string">https://i.imgur.com/zcmSwJ6.jpeg</span></span><br><span class="line">       <span class="attr">link:</span> <span class="string">https://store.steampowered.com/app/49520/Borderlands_2/</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">古墓丽影:前传</span></span><br><span class="line">       <span class="attr">specification:</span> <span class="string">三部曲之一，作为系列终结很不错</span></span><br><span class="line">       <span class="attr">description:</span> <span class="string">主要描述了幼年劳拉踏上古墓寻宝的经历，其中贯穿了和圣三一的命运纠缠，解密要素少，动作收集要素多，总体还不错。</span></span><br><span class="line">       <span class="attr">image:</span> <span class="string">https://i.imgur.com/yXBi5b8.jpeg</span></span><br><span class="line">       <span class="attr">link:</span> <span class="string">https://store.steampowered.com/app/203160/Tomb_Raider/</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">古墓丽影:崛起</span></span><br><span class="line">       <span class="attr">specification:</span> <span class="string">三部曲之二，作为系列终结很不错</span></span><br><span class="line">       <span class="attr">description:</span> <span class="string">继上一作和圣三一的纠葛，再次踏上寻找古墓的旅途，优化了生存类要素的设计加入了潜行偷袭元素，总体还不错。</span></span><br><span class="line">       <span class="attr">image:</span> <span class="string">https://i.imgur.com/KFZXpgR.jpeg</span></span><br><span class="line">       <span class="attr">link:</span> <span class="string">https://store.steampowered.com/app/391220/Rise_of_the_Tomb_Raider/</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">古墓丽影:暗影</span></span><br><span class="line">       <span class="attr">specification:</span> <span class="string">三部曲之三，作为系列终结差一点</span></span><br><span class="line">       <span class="attr">description:</span> <span class="string">作为三部曲的收官作属实有点拉跨，画质虽然提升了，但是叙事的节奏感上有点差，难度曲线不合理，让人如鲠在喉。</span></span><br><span class="line">       <span class="attr">image:</span> <span class="string">https://i.imgur.com/MbCWaID.jpeg</span></span><br><span class="line">       <span class="attr">link:</span> <span class="string">https://store.steampowered.com/app/750920/Shadow_of_the_Tomb_Raider_Definitive_Edition/</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">生化危机6</span></span><br><span class="line">       <span class="attr">specification:</span> <span class="string">个人认为生化系列最好作品</span></span><br><span class="line">       <span class="attr">description:</span> <span class="string">三条故事线的设计真心不错，每条线的玩法都不一样，赞👍🏻。个人偏向玩艾达线，疯狂寻找通风口钻，谁懂啊！</span></span><br><span class="line">       <span class="attr">image:</span> <span class="string">https://i.imgur.com/6c2JaOR.jpeg</span></span><br><span class="line">       <span class="attr">link:</span> <span class="string">https://store.steampowered.com/app/221040/Resident_Evil_6/</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Bayonetta</span></span><br><span class="line">       <span class="attr">specification:</span> <span class="string">漂亮女人很多，能称得上美魔女的只有贝姐一人</span></span><br><span class="line">       <span class="attr">description:</span> <span class="string">顶级的战斗、丰富多样且异想天开的武器、无与伦比的华丽风格依然熠熠生辉。喜欢看贝姐处刑，我不对劲.jpg</span></span><br><span class="line">       <span class="attr">image:</span> <span class="string">https://i.imgur.com/zvhUCTU.jpeg</span></span><br><span class="line">       <span class="attr">link:</span> <span class="string">https://store.steampowered.com/app/460790/Bayonetta/</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">刺客信条:大革命</span></span><br><span class="line">       <span class="attr">specification:</span> <span class="string">AI确定不是小聋瞎🦞？</span></span><br><span class="line">       <span class="attr">description:</span> <span class="string">系列中细节最为丰富的一座城市,不仅拥有许多美丽的建筑,也拥有最多可以进入的房屋。糟心的是会因为BUG卡关。</span></span><br><span class="line">       <span class="attr">image:</span> <span class="string">https://i.imgur.com/sachMgH.jpeg</span></span><br><span class="line">       <span class="attr">link:</span> <span class="string">https://store.steampowered.com/app/289650/Assassins_Creed_Unity/</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">刺客信条:枭雄</span></span><br><span class="line">       <span class="attr">specification:</span> <span class="string">油炸姐弟花，解放全靠杀</span></span><br><span class="line">       <span class="attr">description:</span> <span class="string">可以和历史名人互动是亮点,剧情马马虎虎,处决动画花样百出,但没什么用,任务重复性高,双人物还是姐姐有意思。</span></span><br><span class="line">       <span class="attr">image:</span> <span class="string">https://i.imgur.com/PxxSvmU.jpeg</span></span><br><span class="line">       <span class="attr">link:</span> <span class="string">https://store.steampowered.com/app/368500/Assassins_Creed_Syndicate/</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">刺客信条:起源</span></span><br><span class="line">       <span class="attr">specification:</span> <span class="string">埃及城管的执法之旅</span></span><br><span class="line">       <span class="attr">description:</span> <span class="string">画面让人耳目一新，就是巴爷和他老婆的结局让人摸不到小脑袋瓜，缺点：任务重复性一如既往的高。</span></span><br><span class="line">       <span class="attr">image:</span> <span class="string">https://i.imgur.com/kSCbOvn.jpeg</span></span><br><span class="line">       <span class="attr">link:</span> <span class="string">https://store.steampowered.com/app/582160/Assassins_Creed_Origins/</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">歧路旅人</span></span><br><span class="line">       <span class="attr">specification:</span> <span class="string">较高的游戏售价让我苦等一年</span></span><br><span class="line">       <span class="attr">description:</span> <span class="string">主线流程有点简略,它采用了一种舞台剧的风格,较新颖。画面精致感觉不可思议,需要靠接触NPC才能深挖剧情。</span></span><br><span class="line">       <span class="attr">image:</span> <span class="string">https://i.imgur.com/keaMWwq.jpeg</span></span><br><span class="line">       <span class="attr">link:</span> <span class="string">https://store.steampowered.com/app/1971650/OCTOPATH_TRAVELER_II/</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">茶杯头</span></span><br><span class="line">       <span class="attr">specification:</span> <span class="string">打了几个小时自己开启了狂暴模式,我是boss？</span></span><br><span class="line">       <span class="attr">description:</span> <span class="string">千万不要被这款画面酷似猫和老鼠的游戏欺骗了,很硬核,相当的硬核。为什么我黑魂都过了这个过不去？</span></span><br><span class="line">       <span class="attr">image:</span> <span class="string">https://i.imgur.com/1s1v2VA.png</span></span><br><span class="line">       <span class="attr">link:</span> <span class="string">https://store.steampowered.com/app/268910/Cuphead/</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">小梦魇</span></span><br><span class="line">       <span class="attr">specification:</span> <span class="string">黑暗幻想恐怖风小游戏</span></span><br><span class="line">       <span class="attr">description:</span> <span class="string">游戏的角色很可爱,但是没什么用。本来对恐怖类的就有点怕怕的😥,现在真被这种主打渲染氛围沉浸感的秒杀了。</span></span><br><span class="line">       <span class="attr">image:</span> <span class="string">https://i.imgur.com/4w4nYmP.png</span></span><br><span class="line">       <span class="attr">link:</span> <span class="string">https://store.steampowered.com/app/424840/Little_Nightmares/</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">动物园之星</span></span><br><span class="line">       <span class="attr">specification:</span> <span class="string">在家养国宝🐼可太酷了</span></span><br><span class="line">       <span class="attr">description:</span> <span class="string">足不出门可以接触各种各样的动物,比较适合静下心的玩家游玩。看看动物的习性，甚至看动物拉屎💩有时也是极好的。</span></span><br><span class="line">       <span class="attr">image:</span> <span class="string">https://i.imgur.com/GHyt3QD.jpeg</span></span><br><span class="line">       <span class="attr">link:</span> <span class="string">https://store.steampowered.com/app/703080/Planet_Zoo/</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">饥荒</span></span><br><span class="line">       <span class="attr">specification:</span> <span class="string">你注视着深渊，深渊也在注视着你</span></span><br><span class="line">       <span class="attr">description:</span> <span class="string">这款游戏的特点在于孤独与生存,一个人在一片不知名的土地上苦苦挣扎的活下去。但是抱歉,SAN值的存在让我很难玩下去。</span></span><br><span class="line">       <span class="attr">image:</span> <span class="string">https://i.imgur.com/o5BeKyH.jpeg</span></span><br><span class="line">       <span class="attr">link:</span> <span class="string">https://store.steampowered.com/app/219740/Dont_Starve/</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">以撒的结合:重生</span></span><br><span class="line">       <span class="attr">specification:</span> <span class="string">最最最经典Roguelike游戏</span></span><br><span class="line">       <span class="attr">description:</span> <span class="string">看不见走位走位,手里干。更多是像弹幕游戏一样需要妖艳风骚的走位。只要你跟包租公一样会扭动，你就是这个游戏的神。</span></span><br><span class="line">       <span class="attr">image:</span> <span class="string">https://i.imgur.com/aF5cjiw.jpeg</span></span><br><span class="line">       <span class="attr">link:</span> <span class="string">https://store.steampowered.com/app/250900/The_Binding_of_Isaac_Rebirth/</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">命运石之门</span></span><br><span class="line">       <span class="attr">specification:</span> <span class="string">神作，还要啥解释？！</span></span><br><span class="line">       <span class="attr">description:</span> <span class="string">懒得置评了,字越少分量越重。别找评论了,先玩了好吗？</span></span><br><span class="line">       <span class="attr">image:</span> <span class="string">https://i.imgur.com/eW6Yee8.jpeg</span></span><br><span class="line">       <span class="attr">link:</span> <span class="string">https://store.steampowered.com/app/412830/STEINSGATE/</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Alan</span> <span class="string">Wake</span></span><br><span class="line">       <span class="attr">specification:</span> <span class="string">解秘恐怖动作风游戏</span></span><br><span class="line">       <span class="attr">description:</span> <span class="string">名副其实的氛围动作类恐怖游戏，主人公小说家的角色很讨喜。有在看美剧的感觉。这种直击心灵的恐怖氛围的佳作其实不多。</span></span><br><span class="line">       <span class="attr">image:</span> <span class="string">https://i.imgur.com/IEvswlk.jpeg</span></span><br><span class="line">       <span class="attr">link:</span> <span class="string">https://store.steampowered.com/app/108710/Alan_Wake/</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">辐射4</span></span><br><span class="line">       <span class="attr">specification:</span> <span class="string">开局一人一狗，装备全靠捡</span></span><br><span class="line">       <span class="attr">description:</span> <span class="string">谁跟你讲捡垃圾会使你一无所有的，游戏里我富得流油！兄弟们，又捡到破烂啦。这是一款能切实体验讲师美国生活的好游戏。</span></span><br><span class="line">       <span class="attr">image:</span> <span class="string">https://i.imgur.com/8kf9tYw.jpeg</span></span><br><span class="line">       <span class="attr">link:</span> <span class="string">https://store.steampowered.com/app/377160/Fallout_4/</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">光之子</span></span><br><span class="line">       <span class="attr">specification:</span> <span class="string">离谱吧，竟然是育碧做的</span></span><br><span class="line">       <span class="attr">description:</span> <span class="string">育碧少有的2D横版卷轴游戏,整个游戏世界都是由水彩风的物件所构成的,一草一木都显得清新而精致。啧啧啧,居然是育碧做的。</span></span><br><span class="line">       <span class="attr">image:</span> <span class="string">https://i.imgur.com/p3wgp6h.png</span></span><br><span class="line">       <span class="attr">link:</span> <span class="string">https://store.steampowered.com/app/256290/Child_of_Light/</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">弹丸论破</span></span><br><span class="line">       <span class="attr">specification:</span> <span class="string">我被狛枝同学整怕了</span></span><br><span class="line">       <span class="attr">description:</span> <span class="string">作为超高校级的Gamer,推理类文字游戏一直是我的心头好，成功使推理游戏从有声电子书的刻板印象里拉出来。</span></span><br><span class="line">       <span class="attr">image:</span> <span class="string">https://i.imgur.com/2qZf0aV.png</span></span><br><span class="line">       <span class="attr">link:</span> <span class="string">https://store.steampowered.com/app/413410/Danganronpa_Trigger_Happy_Havoc/</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">我的世界</span></span><br><span class="line">       <span class="attr">specification:</span> <span class="string">弟弟把我账号借走后再没还我.jpg</span></span><br><span class="line">       <span class="attr">description:</span> <span class="string">一个开放世界沙盒的生存类游戏，大多数人都是被电脑的渣渣配置所限制。大佬们都在搞建筑设计了，我还在防古力帕。没救了。</span></span><br><span class="line">       <span class="attr">image:</span> <span class="string">https://i.imgur.com/Yq4UlqW.png</span></span><br><span class="line">       <span class="attr">link:</span> <span class="string">https://www.minecraft.net/ja-jp</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Transistor</span></span><br><span class="line">       <span class="attr">specification:</span> <span class="string">《堡垒》的制作团队倾情打造</span></span><br><span class="line">       <span class="attr">description:</span> <span class="string">科幻主题动作RPG游戏,充分诠释了浪漫理性四个字的含义,主人公的歌声太赞了,有点偏回合制,可能喜恶参半。</span></span><br><span class="line">       <span class="attr">image:</span> <span class="string">https://i.imgur.com/xrHpQdy.jpeg</span></span><br><span class="line">       <span class="attr">link:</span> <span class="string">https://store.steampowered.com/app/237930/Transistor/</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">模拟人生4</span></span><br><span class="line">       <span class="attr">specification:</span> <span class="string">我的小人云生活</span></span><br><span class="line">       <span class="attr">description:</span> <span class="string">可能这个游戏吸引我的一直不是社交对话，搞社交不是我的天赋，但是论设计建筑我是真的强啊！</span></span><br><span class="line">       <span class="attr">image:</span> <span class="string">https://i.imgur.com/5PkB5HT.png</span></span><br><span class="line">       <span class="attr">link:</span> <span class="string">https://store.steampowered.com/app/1222670/The_Sims_4/</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">欲神幻想</span></span><br><span class="line">       <span class="attr">specification:</span> <span class="string">真男人只会在色色游戏里修行！</span></span><br><span class="line">       <span class="attr">description:</span> <span class="string">你没看错,就是色色的小黄油。但其实是一个超硬核战斗游戏,嘘,别说话,把衣服穿以来。朕在修行！</span></span><br><span class="line">       <span class="attr">image:</span> <span class="string">https://i.imgur.com/3m6HwxL.png</span></span><br><span class="line">       <span class="attr">link:</span> <span class="string">https://store.steampowered.com/app/2346550/Rise_of_Eros/</span></span><br></pre></td></tr></table></figure><p><strong>数据结构说明：</strong></p><ul><li><code>class_name</code> - 游戏分类名称</li><li><code>description</code> - 分类描述</li><li><code>game_list</code> - 该分类下的游戏列表</li><li><code>name</code> - 游戏名称</li><li><code>specification</code> - 游戏规格/简介</li><li><code>description</code> - 详细描述/评测</li><li><code>image</code> - 游戏封面图片链接</li><li><code>link</code> - 游戏官方链接</li></ul><p><strong>注意事项：</strong></p><ul><li>图片链接建议使用HTTPS</li><li>描述文字可以包含个人评测和体验</li><li>链接可以是官方链接或Steam等平台链接</li><li>支持多个游戏分类</li></ul><hr><h3 id="3-修改页面路由配置">3. 修改页面路由配置</h3><p><strong>文件路径：</strong><br><code>solitude-latest/node_modules/hexo-theme-solitude/layout/page.pug</code></p><p><strong>修改内容：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">extends includes/layout.pug</span><br><span class="line"></span><br><span class="line">block content</span><br><span class="line">    main.layout#content-inner(class=page.aside ? &#x27;&#x27; : &#x27;hide-aside&#x27;)</span><br><span class="line">        #page</span><br><span class="line">            case page.type</span><br><span class="line">                when &#x27;categories&#x27;</span><br><span class="line">                    include includes/page/categories</span><br><span class="line">                when &#x27;tags&#x27;</span><br><span class="line">                    include includes/page/tags</span><br><span class="line">                when &#x27;links&#x27;</span><br><span class="line">                    include includes/page/links</span><br><span class="line">                when &#x27;about&#x27;</span><br><span class="line">                    include includes/page/about</span><br><span class="line">                when &#x27;brevity&#x27;</span><br><span class="line">                    include includes/page/brevity</span><br><span class="line">                when &#x27;kit&#x27;</span><br><span class="line">                    include includes/page/kit</span><br><span class="line">                when &#x27;music&#x27;</span><br><span class="line">                    include includes/page/music</span><br><span class="line">                when &#x27;game&#x27;</span><br><span class="line">                    include includes/page/game</span><br><span class="line">                when &#x27;message&#x27;</span><br><span class="line">                    !=partial(&#x27;includes/page/message&#x27;, &#123;&#125;, &#123;cache: true&#125;)</span><br><span class="line">                when &#x27;recentcomment&#x27;</span><br><span class="line">                    !=partial(&#x27;includes/page/recentcomment&#x27;, &#123;&#125;, &#123;cache: true&#125;)</span><br><span class="line">                when &#x27;banner&#x27;</span><br><span class="line">                    include includes/widgets/page/banner</span><br><span class="line">                    if page.container</span><br><span class="line">                        include includes/page/default</span><br><span class="line">                    else</span><br><span class="line">                        != page.content</span><br><span class="line">                default</span><br><span class="line">                    include includes/page/default</span><br><span class="line">            if page.comment</span><br><span class="line">                - var comment_js = true</span><br><span class="line">                include includes/widgets/third-party/comments/comment</span><br><span class="line">        if page.aside</span><br><span class="line">            include includes/widgets/aside/aside</span><br></pre></td></tr></table></figure><p><strong>说明：</strong><br>在页面路由中添加game类型的处理，确保访问 <code>/game/</code> 时能正确渲染game页面。</p><hr><h3 id="4-创建电玩屋页面模板">4. 创建电玩屋页面模板</h3><p><strong>文件路径：</strong><br><code>solitude-latest/node_modules/hexo-theme-solitude/layout/includes/page/game.pug</code></p><p><strong>文件内容：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">extends includes/layout.pug</span><br><span class="line"></span><br><span class="line">block content</span><br><span class="line">    main.layout#content-inner(class=page.aside ? &#x27;&#x27; : &#x27;hide-aside&#x27;)</span><br><span class="line">        #page</span><br><span class="line">            case page.type</span><br><span class="line">                when &#x27;categories&#x27;</span><br><span class="line">                    include includes/page/categories</span><br><span class="line">                when &#x27;tags&#x27;</span><br><span class="line">                    include includes/page/tags</span><br><span class="line">                when &#x27;links&#x27;</span><br><span class="line">                    include includes/page/links</span><br><span class="line">                when &#x27;about&#x27;</span><br><span class="line">                    include includes/page/about</span><br><span class="line">                when &#x27;brevity&#x27;</span><br><span class="line">                    include includes/page/brevity</span><br><span class="line">                when &#x27;kit&#x27;</span><br><span class="line">                    include includes/page/kit</span><br><span class="line">                when &#x27;music&#x27;</span><br><span class="line">                    include includes/page/music</span><br><span class="line">                when &#x27;game&#x27;</span><br><span class="line">                    include includes/page/game</span><br><span class="line">                when &#x27;message&#x27;</span><br><span class="line">                    !=partial(&#x27;includes/page/message&#x27;, &#123;&#125;, &#123;cache: true&#125;)</span><br><span class="line">                when &#x27;recentcomment&#x27;</span><br><span class="line">                    !=partial(&#x27;includes/page/recentcomment&#x27;, &#123;&#125;, &#123;cache: true&#125;)</span><br><span class="line">                when &#x27;banner&#x27;</span><br><span class="line">                    include includes/widgets/page/banner</span><br><span class="line">                    if page.container</span><br><span class="line">                        include includes/page/default</span><br><span class="line">                    else</span><br><span class="line">                        != page.content</span><br><span class="line">                default</span><br><span class="line">                    include includes/page/default</span><br><span class="line">            if page.comment</span><br><span class="line">                - var comment_js = true</span><br><span class="line">                include includes/widgets/third-party/comments/comment</span><br><span class="line">        if page.aside</span><br><span class="line">            include includes/widgets/aside/aside</span><br></pre></td></tr></table></figure><p><strong>说明：</strong><br>使用include结构引入banner和content组件，保持模板的模块化。</p><hr><h3 id="5-创建游戏内容组件">5. 创建游戏内容组件</h3><p><strong>文件路径：</strong><br><code>solitude-latest/node_modules/hexo-theme-solitude/layout/includes/widgets/page/game/content.pug</code></p><p><strong>文件内容：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">extends includes/layout.pug</span><br><span class="line"></span><br><span class="line">block content</span><br><span class="line">    main.layout#content-inner(class=page.aside ? &#x27;&#x27; : &#x27;hide-aside&#x27;)</span><br><span class="line">        #page</span><br><span class="line">            case page.type</span><br><span class="line">                when &#x27;categories&#x27;</span><br><span class="line">                    include includes/page/categories</span><br><span class="line">                when &#x27;tags&#x27;</span><br><span class="line">                    include includes/page/tags</span><br><span class="line">                when &#x27;links&#x27;</span><br><span class="line">                    include includes/page/links</span><br><span class="line">                when &#x27;about&#x27;</span><br><span class="line">                    include includes/page/about</span><br><span class="line">                when &#x27;brevity&#x27;</span><br><span class="line">                    include includes/page/brevity</span><br><span class="line">                when &#x27;kit&#x27;</span><br><span class="line">                    include includes/page/kit</span><br><span class="line">                when &#x27;music&#x27;</span><br><span class="line">                    include includes/page/music</span><br><span class="line">                when &#x27;game&#x27;</span><br><span class="line">                    include includes/page/game</span><br><span class="line">                when &#x27;message&#x27;</span><br><span class="line">                    !=partial(&#x27;includes/page/message&#x27;, &#123;&#125;, &#123;cache: true&#125;)</span><br><span class="line">                when &#x27;recentcomment&#x27;</span><br><span class="line">                    !=partial(&#x27;includes/page/recentcomment&#x27;, &#123;&#125;, &#123;cache: true&#125;)</span><br><span class="line">                when &#x27;banner&#x27;</span><br><span class="line">                    include includes/widgets/page/banner</span><br><span class="line">                    if page.container</span><br><span class="line">                        include includes/page/default</span><br><span class="line">                    else</span><br><span class="line">                        != page.content</span><br><span class="line">                default</span><br><span class="line">                    include includes/page/default</span><br><span class="line">            if page.comment</span><br><span class="line">                - var comment_js = true</span><br><span class="line">                include includes/widgets/third-party/comments/comment</span><br><span class="line">        if page.aside</span><br><span class="line">            include includes/widgets/aside/aside</span><br></pre></td></tr></table></figure><p><strong>模板逻辑说明：</strong></p><ul><li>数据遍历：遍历<code>site.data.game</code>中的每个分类和游戏</li><li>分类展示：显示分类名称和描述</li><li>游戏卡片：每个游戏以卡片形式展示</li><li>交互功能：点击游戏名称复制、详情链接、评论功能</li><li>条件判断：根据链接类型显示不同的按钮文本</li></ul><hr><h3 id="6-创建电玩屋样式文件">6. 创建电玩屋样式文件</h3><p><strong>文件路径：</strong><br><code>solitude-latest/node_modules/hexo-theme-solitude/source/css/_page/game.styl</code></p><p><strong>文件内容：</strong></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#game</span></span><br><span class="line">  <span class="attribute">margin-top</span> <span class="number">26px</span></span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.game-item</span></span><br><span class="line">    <span class="selector-class">.game-item-title</span></span><br><span class="line">      <span class="attribute">line-height</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.game-item-description</span></span><br><span class="line">      <span class="attribute">line-height</span> <span class="number">1</span></span><br><span class="line">      <span class="attribute">margin</span> <span class="number">4px</span> <span class="number">0</span> <span class="number">8px</span> <span class="number">0</span></span><br><span class="line">      <span class="attribute">color</span> <span class="built_in">var</span>(--efu-secondtext)</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.game-item-content</span></span><br><span class="line">      <span class="attribute">display</span> flex</span><br><span class="line">      <span class="attribute">flex-direction</span> row</span><br><span class="line">      <span class="attribute">flex-wrap</span> wrap</span><br><span class="line">      <span class="attribute">margin</span> <span class="number">0</span> -<span class="number">8px</span></span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.game-item-content-item</span></span><br><span class="line">      <span class="attribute">width</span> <span class="built_in">calc</span>(<span class="number">25%</span> - <span class="number">12px</span>)</span><br><span class="line">      <span class="attribute">border-radius</span> <span class="number">12px</span></span><br><span class="line">      <span class="attribute">border</span> <span class="built_in">var</span>(--style-border-always)</span><br><span class="line">      <span class="attribute">overflow</span> hidden</span><br><span class="line">      <span class="attribute">margin</span> <span class="number">8px</span> <span class="number">6px</span></span><br><span class="line">      <span class="attribute">background</span> <span class="built_in">var</span>(--efu-card-bg)</span><br><span class="line">      <span class="attribute">box-shadow</span> <span class="built_in">var</span>(--efu-shadow-border)</span><br><span class="line">      <span class="attribute">min-height</span> <span class="number">400px</span></span><br><span class="line">      <span class="attribute">position</span> relative</span><br><span class="line">      <span class="attribute">user-select</span> none</span><br><span class="line"></span><br><span class="line">      +<span class="built_in">maxWidth1200</span>()</span><br><span class="line">        <span class="attribute">width</span> <span class="built_in">calc</span>(<span class="number">50%</span> - <span class="number">12px</span>)</span><br><span class="line"></span><br><span class="line">      +<span class="built_in">maxWidth768</span>()</span><br><span class="line">        <span class="attribute">width</span> <span class="number">100%</span></span><br><span class="line"></span><br><span class="line">      <span class="selector-class">.game-item-content-item-cover</span></span><br><span class="line">        <span class="attribute">width</span> <span class="number">100%</span></span><br><span class="line">        <span class="attribute">height</span> <span class="number">200px</span></span><br><span class="line">        <span class="attribute">background</span> <span class="built_in">var</span>(--efu-secondbg)</span><br><span class="line">        <span class="attribute">display</span> flex</span><br><span class="line">        <span class="attribute">justify-content</span> center</span><br><span class="line"></span><br><span class="line">        <span class="selector-class">.game-item-content-item-image</span></span><br><span class="line">          <span class="attribute">object-fit</span> cover</span><br><span class="line">          <span class="attribute">height</span> <span class="number">100%</span></span><br><span class="line"></span><br><span class="line">      <span class="selector-class">.game-item-content-item-info</span></span><br><span class="line">        <span class="attribute">padding</span> <span class="number">8px</span> <span class="number">16px</span> <span class="number">16px</span> <span class="number">16px</span></span><br><span class="line">        <span class="attribute">margin-top</span> <span class="number">12px</span></span><br><span class="line"></span><br><span class="line">        <span class="selector-class">.game-item-content-item-name</span></span><br><span class="line">          <span class="attribute">font-size</span> <span class="number">18px</span></span><br><span class="line">          <span class="attribute">font-weight</span> <span class="number">700</span></span><br><span class="line">          <span class="attribute">line-height</span> <span class="number">1</span></span><br><span class="line">          <span class="attribute">margin-bottom</span> <span class="number">8px</span></span><br><span class="line">          <span class="attribute">white-space</span> nowrap</span><br><span class="line">          <span class="attribute">text-overflow</span> ellipsis</span><br><span class="line">          <span class="attribute">width</span> fit-content</span><br><span class="line"></span><br><span class="line">          <span class="selector-pseudo">&amp;:hover</span></span><br><span class="line">            <span class="attribute">color</span> <span class="built_in">var</span>(--efu-vip)</span><br><span class="line">            <span class="attribute">cursor</span> pointer</span><br><span class="line"></span><br><span class="line">        <span class="selector-class">.game-item-content-item-specification</span></span><br><span class="line">          <span class="attribute">font-size</span> <span class="number">12px</span></span><br><span class="line">          <span class="attribute">color</span> <span class="built_in">var</span>(--efu-secondtext)</span><br><span class="line">          <span class="attribute">line-height</span> <span class="number">1</span></span><br><span class="line">          <span class="attribute">margin-bottom</span> <span class="number">12px</span></span><br><span class="line">          <span class="attribute">white-space</span> nowrap</span><br><span class="line">          <span class="attribute">overflow</span> hidden</span><br><span class="line">          <span class="attribute">text-overflow</span> ellipsis</span><br><span class="line"></span><br><span class="line">        <span class="selector-class">.game-item-content-item-description</span></span><br><span class="line">          <span class="attribute">line-height</span> <span class="number">20px</span></span><br><span class="line">          <span class="attribute">color</span> <span class="built_in">var</span>(--efu-secondtext)</span><br><span class="line">          <span class="attribute">height</span> <span class="number">60px</span></span><br><span class="line">          <span class="attribute">display</span> -webkit-box</span><br><span class="line">          <span class="attribute">overflow</span> hidden</span><br><span class="line">          -webkit-line-clamp <span class="number">3</span></span><br><span class="line">          -webkit-<span class="attribute">box-orient</span> vertical</span><br><span class="line">          <span class="attribute">font-size</span> <span class="number">14px</span></span><br><span class="line"></span><br><span class="line">        <span class="selector-class">.game-item-content-item-toolbar</span></span><br><span class="line">          <span class="attribute">display</span> flex</span><br><span class="line">          <span class="attribute">justify-content</span> space-between</span><br><span class="line">          <span class="attribute">position</span> absolute</span><br><span class="line">          <span class="attribute">bottom</span> <span class="number">12px</span></span><br><span class="line">          <span class="attribute">left</span> <span class="number">0</span></span><br><span class="line">          <span class="attribute">width</span> <span class="number">100%</span></span><br><span class="line">          <span class="attribute">padding</span> <span class="number">0</span> <span class="number">16px</span></span><br><span class="line"></span><br><span class="line">          <span class="selector-class">.game-item-content-item-link</span></span><br><span class="line">            <span class="attribute">font-size</span> <span class="number">12px</span></span><br><span class="line">            <span class="attribute">background</span> <span class="built_in">var</span>(--efu-gray-op)</span><br><span class="line">            <span class="attribute">padding</span> <span class="number">4px</span> <span class="number">8px</span></span><br><span class="line">            <span class="attribute">border-radius</span> <span class="number">8px</span></span><br><span class="line">            <span class="attribute">cursor</span> pointer</span><br><span class="line"></span><br><span class="line">            <span class="selector-pseudo">&amp;:hover</span></span><br><span class="line">              <span class="attribute">background</span> <span class="built_in">var</span>(--efu-main)</span><br><span class="line">              <span class="attribute">color</span> <span class="built_in">var</span>(--efu-white)</span><br></pre></td></tr></table></figure><p><strong>样式特点：</strong></p><ul><li>响应式布局：桌面端4列，平板端2列，手机端1列</li><li>卡片设计：圆角边框，阴影效果，悬停交互</li><li>图片展示：固定高度，object-fit cover保持比例</li><li>文字处理：名称悬停变色，规格单行省略，描述3行截断</li><li>工具栏：底部固定位置，详情链接和评论按钮</li></ul><hr><h3 id="7-导入样式文件">7. 导入样式文件</h3><p><strong>文件路径：</strong><br><code>solitude-latest/node_modules/hexo-theme-solitude/source/css/index.styl</code></p><p><strong>修改内容：</strong></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@charset</span> <span class="string">&quot;UTF-8&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">hexo-config</span>(<span class="string">&#x27;css_prefix&#x27;</span>)</span><br><span class="line">  <span class="keyword">@import</span> <span class="string">&#x27;nib&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&quot;third_party/snackbar.min.css&quot;</span></span><br><span class="line"><span class="comment">// project</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&quot;var.styl&quot;</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_global/*&#x27;</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_layout/*&#x27;</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_page/index.styl&#x27;</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_post/index.styl&#x27;</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_page/game.styl&#x27;</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_page/collects.styl&#x27;</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_mode/*&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// highlight</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_highlight/index&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// search</span></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">hexo-config</span>(<span class="string">&#x27;search.enable&#x27;</span>)</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">hexo-config</span>(<span class="string">&#x27;search.type&#x27;</span>) == <span class="string">&#x27;algolia&#x27;</span></span><br><span class="line">    <span class="keyword">@import</span> <span class="string">&#x27;_search/algolia-search&#x27;</span></span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> <span class="built_in">hexo-config</span>(<span class="string">&#x27;search.type&#x27;</span>) == <span class="string">&#x27;local&#x27;</span></span><br><span class="line">    <span class="keyword">@import</span> <span class="string">&#x27;_search/local-search&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// tags plugin</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&quot;_tags/*&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// comment</span></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">hexo-config</span>(<span class="string">&#x27;comment.use&#x27;</span>)</span><br><span class="line">  <span class="keyword">@import</span> <span class="string">&#x27;_comments/comment.styl&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// components</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;_components/index&#x27;</span></span><br></pre></td></tr></table></figure><p><strong>说明：</strong><br>在主题的样式入口文件中导入game样式，确保样式生效。</p><hr><h2 id="功能特性">功能特性</h2><h3 id="1-数据管理">1. 数据管理</h3><ul><li>支持YAML格式的数据文件</li><li>分类管理：MMORPG/MOBA、单机游戏等</li><li>详细信息：游戏名称、规格、描述、封面、链接</li></ul><h3 id="2-展示效果">2. 展示效果</h3><ul><li>卡片式布局，美观大方</li><li>响应式设计，适配不同屏幕</li><li>悬停交互效果</li><li>图片展示优化</li></ul><h3 id="3-交互功能">3. 交互功能</h3><ul><li>点击游戏名称复制</li><li>详情链接跳转</li><li>评论功能</li><li>外部链接支持</li></ul><h3 id="4-扩展性">4. 扩展性</h3><ul><li>易于添加新的游戏分类</li><li>支持自定义游戏信息</li><li>灵活的数据结构</li></ul><hr><h2 id="使用说明">使用说明</h2><h3 id="1-添加新游戏">1. 添加新游戏</h3><p>在 <code>source/_data/game.yml</code> 文件中添加新的游戏：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">新游戏名称</span></span><br><span class="line">  <span class="attr">specification:</span> <span class="string">游戏规格/简介</span></span><br><span class="line">  <span class="attr">description:</span> <span class="string">详细描述/评测</span></span><br><span class="line">  <span class="attr">image:</span> <span class="string">游戏封面图片链接</span></span><br><span class="line">  <span class="attr">link:</span> <span class="string">游戏官方链接</span></span><br></pre></td></tr></table></figure><h3 id="2-添加新分类">2. 添加新分类</h3><p>在数据文件中添加新的游戏分类：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">class_name:</span> <span class="string">新分类名称</span></span><br><span class="line">  <span class="attr">description:</span> <span class="string">分类描述</span></span><br><span class="line">  <span class="attr">game_list:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">游戏名称</span></span><br><span class="line">      <span class="comment"># ... 其他属性</span></span><br></pre></td></tr></table></figure><h3 id="3-自定义样式">3. 自定义样式</h3><p>可以修改 <code>_page/game.styl</code> 文件来自定义样式效果。</p><hr><h2 id="注意事项">注意事项</h2><ol><li><strong>YAML格式</strong>：确保数据文件的YAML格式正确，避免缩进错误</li><li><strong>图片链接</strong>：建议使用HTTPS链接，确保图片能正常显示</li><li><strong>描述长度</strong>：建议控制描述文字长度，避免影响布局</li><li><strong>链接格式</strong>：确保链接格式正确，支持外部链接判断</li><li><strong>CSS选择器</strong>：使用<code>#game</code>作为根选择器，确保样式正确应用</li></ol><hr><h2 id="总结">总结</h2><p>通过以上步骤，我们成功为Solitude主题添加了完整的电玩屋功能。这个功能不仅提供了美观的游戏展示界面，还具有良好的扩展性和维护性。用户可以根据自己的需求轻松添加和管理游戏内容，展示个人的游戏体验和推荐。</p><p>电玩屋功能的实现体现了Hexo主题开发的核心思想：通过数据驱动的方式实现内容的动态展示，通过模板化的方式实现界面的统一管理，通过样式化的方式实现视觉效果的精美呈现。</p><p>主要特性包括：</p><ul><li>🎮 完整的游戏展示页面</li><li>📱 响应式设计，适配不同屏幕</li><li>🎥 视频Banner支持</li><li>🔗 外部链接跳转</li><li>💬 评论功能</li><li>✨ 悬停效果和交互</li><li>📊 分类管理游戏数据</li></ul>]]></content>
      
      
      <categories>
          
          <category> 魔改教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 魔改教程 </tag>
            
            <tag> Solitude </tag>
            
            <tag> Hexo </tag>
            
            <tag> 页面移植 </tag>
            
            <tag> 电玩屋 </tag>
            
            <tag> 游戏展示 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Solitude主题魔改教程(6)-Banner视频播放功能移植与移动端优化</title>
      <link href="/2024/10/07/Solitude%E4%B8%BB%E9%A2%98%E9%AD%94%E6%94%B9%E6%95%99%E7%A8%8B(6)-Banner%E8%A7%86%E9%A2%91%E6%92%AD%E6%94%BE%E5%8A%9F%E8%83%BD%E7%A7%BB%E6%A4%8D%E4%B8%8E%E7%A7%BB%E5%8A%A8%E7%AB%AF%E4%BC%98%E5%8C%96/"/>
      <url>/2024/10/07/Solitude%E4%B8%BB%E9%A2%98%E9%AD%94%E6%94%B9%E6%95%99%E7%A8%8B(6)-Banner%E8%A7%86%E9%A2%91%E6%92%AD%E6%94%BE%E5%8A%9F%E8%83%BD%E7%A7%BB%E6%A4%8D%E4%B8%8E%E7%A7%BB%E5%8A%A8%E7%AB%AF%E4%BC%98%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>Solitude主题默认支持图片banner，但有时我们希望使用视频banner来增加页面的动态效果和视觉冲击力。本文将详细介绍如何从blog-solitude项目移植Banner视频播放功能到solitude-latest，并针对移动端进行响应式优化，让你的博客banner更加生动有趣。</p><hr><h2 id="现象与需求">现象与需求</h2><h3 id="现象">现象</h3><ul><li>Solitude主题默认只支持图片banner</li><li>页面banner无法播放视频文件</li><li>移动端banner高度固定，在小屏幕上显示效果不佳</li><li>缺少banner控制配置，无法灵活切换图片/视频模式</li></ul><h3 id="期望效果">期望效果</h3><ul><li>Banner支持视频播放（自动播放、循环、静音）</li><li>支持图片/视频模式切换</li><li>移动端banner高度自适应</li><li>响应式设计，适配不同屏幕尺寸</li><li>通过配置文件控制banner类型</li></ul><hr><h2 id="问题分析">问题分析</h2><h3 id="根本原因">根本原因</h3><ol><li><p><strong>功能缺失</strong><br>solitude-latest主题缺少视频播放相关的模板和JavaScript支持</p></li><li><p><strong>配置不完整</strong><br><code>_config.solitude.yml</code> 中缺少banner控制配置项</p></li><li><p><strong>响应式设计不足</strong><br>CSS样式未针对移动端进行优化，banner高度固定</p></li><li><p><strong>模板限制</strong><br>页面banner模板中height写死，无法实现响应式</p></li></ol><hr><h2 id="修改文件清单">修改文件清单</h2><ul><li><code>solitude-latest/_config.solitude.yml</code></li><li><code>solitude-latest/node_modules/hexo-theme-solitude/layout/includes/widgets/page/banner.pug</code></li><li><code>solitude-latest/node_modules/hexo-theme-solitude/layout/includes/widgets/home/topGroup.pug</code></li><li><code>solitude-latest/node_modules/hexo-theme-solitude/source/js/custom/banner-video.js</code></li><li><code>solitude-latest/node_modules/hexo-theme-solitude/source/css/_page/other.styl</code></li></ul><hr><h2 id="详细修改步骤">详细修改步骤</h2><h3 id="1-添加Banner控制配置">1. 添加Banner控制配置</h3><p><strong>文件路径：</strong><br><code>solitude-latest/_config.solitude.yml</code></p><p><strong>修改前：</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">hometop:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">banner:</span></span><br><span class="line">    <span class="attr">title:</span> <span class="string">分享技术&lt;br</span> <span class="string">&gt;与科技生活</span></span><br><span class="line">    <span class="attr">desc:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">一个热爱生活的人</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">我只是一个普通的程序员</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">但我有一个不平凡的梦想</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">我希望能够改变世界</span></span><br><span class="line">  <span class="attr">group:</span></span><br><span class="line">    <span class="comment"># 热门: /tags/Fire/ || fas fa-fire || linear-gradient(to right,#f65,#ffbf37)</span></span><br><span class="line">  <span class="attr">recommendList:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">sup:</span> <span class="string">置顶</span></span><br><span class="line">    <span class="attr">title:</span> <span class="string">Solitude</span> <span class="string">官方文档</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">https://solitude.js.org/</span></span><br><span class="line">    <span class="attr">img:</span> <span class="string">/img/default.avif</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">video</span></span><br><span class="line">    <span class="attr">media:</span> <span class="string">/mp4/recommend-banner/recommend-banner7.mp4</span></span><br><span class="line">    <span class="attr">color:</span> <span class="string">&quot;none&quot;</span></span><br></pre></td></tr></table></figure><p><strong>修改后：</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">hometop:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">banner:</span></span><br><span class="line">    <span class="attr">title:</span> <span class="string">分享技术&lt;br</span> <span class="string">&gt;与科技生活</span></span><br><span class="line">    <span class="attr">desc:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">一个热爱生活的人</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">我只是一个普通的程序员</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">但我有一个不平凡的梦想</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">我希望能够改变世界</span></span><br><span class="line">  <span class="attr">group:</span></span><br><span class="line">    <span class="comment"># 热门: /tags/Fire/ || fas fa-fire || linear-gradient(to right,#f65,#ffbf37)</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Banner 控制配置</span></span><br><span class="line">  <span class="comment"># Banner Control Configuration</span></span><br><span class="line">  <span class="attr">banner_control:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment"># 是否启用banner控制 / Enable banner control</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">video</span> <span class="comment"># img / video</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">recommendList:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">sup:</span> <span class="string">置顶</span></span><br><span class="line">    <span class="attr">title:</span> <span class="string">Solitude</span> <span class="string">官方文档</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">https://solitude.js.org/</span></span><br><span class="line">    <span class="attr">img:</span> <span class="string">/img/default.avif</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">video</span></span><br><span class="line">    <span class="attr">media:</span> <span class="string">/mp4/recommend-banner/recommend-banner7.mp4</span></span><br><span class="line">    <span class="attr">color:</span> <span class="string">&quot;none&quot;</span></span><br></pre></td></tr></table></figure><hr><h3 id="2-创建Banner视频播放JavaScript">2. 创建Banner视频播放JavaScript</h3><p><strong>文件路径：</strong><br><code>solitude-latest/node_modules/hexo-theme-solitude/source/js/custom/banner-video.js</code></p><p><strong>文件内容：</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> video = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;banner-video&#x27;</span>);</span><br><span class="line">  <span class="keyword">if</span> (video) &#123;</span><br><span class="line">    video.<span class="property">muted</span> = <span class="literal">true</span>;</span><br><span class="line">    video.<span class="property">playsInline</span> = <span class="literal">true</span>;</span><br><span class="line">    video.<span class="title function_">play</span>().<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&#x27;Autoplay failed:&#x27;</span>, err);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><hr><h3 id="3-修改页面Banner模板">3. 修改页面Banner模板</h3><p><strong>文件路径：</strong><br><code>solitude-latest/node_modules/hexo-theme-solitude/layout/includes/widgets/page/banner.pug</code></p><p><strong>修改前：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">.author-content.author-content-item.single.sharePage(style=`background: url($&#123;page.cover&#125;) no-repeat center; background-size: cover;`)</span><br><span class="line">    .card-content</span><br><span class="line">        .author-content-item-tips= page.desc</span><br><span class="line">        span.author-content-item-title= page.title</span><br><span class="line">        .content-bottom</span><br><span class="line">            if page.leftend</span><br><span class="line">                .tips= page.leftend</span><br><span class="line">            if page.rightend</span><br><span class="line">                .tips= page.rightend</span><br><span class="line">        if page.rightbtn</span><br><span class="line">            .banner-button-group</span><br><span class="line">                - const isInternalLink = page.rightbtnlink.startsWith(&#x27;/&#x27;)</span><br><span class="line">                a.banner-button(onclick=isInternalLink ? `pjax.loadUrl(&quot;$&#123;page.rightbtnlink&#125;&quot;)`: null, href=isInternalLink ? null : url_for(page.rightbtnlink), target=isInternalLink ? null : &quot;_blank&quot;)</span><br><span class="line">                    i.solitude.fas.fa-circle-chevron-right</span><br><span class="line">                    span.banner-button-text= page.rightbtn</span><br></pre></td></tr></table></figure><p><strong>修改后：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">script(src=url_for(&#x27;/js/custom/banner-video.js&#x27;))</span><br><span class="line">.author-content.author-content-item.single.sharePage(style=&quot;position: relative; width: 100%; overflow: hidden;&quot;)</span><br><span class="line">    if theme.hometop.banner_control &amp;&amp; theme.hometop.banner_control.enable &amp;&amp; theme.hometop.banner_control.type === &#x27;video&#x27; &amp;&amp; page.cover &amp;&amp; page.cover.endsWith(&#x27;.mp4&#x27;)</span><br><span class="line">        video#banner-video(</span><br><span class="line">            autoplay</span><br><span class="line">            muted</span><br><span class="line">            loop</span><br><span class="line">            playsinline</span><br><span class="line">            preload=&quot;auto&quot;</span><br><span class="line">            style=&quot;position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;&quot;</span><br><span class="line">            )</span><br><span class="line">            source(src=page.cover type=&quot;video/mp4&quot;)</span><br><span class="line">    else</span><br><span class="line">        .image-container(style=&quot;position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden;&quot;)</span><br><span class="line">            img(src=page.cover, style=&quot;width: 100%; height: 100%; object-fit: cover;&quot;)</span><br><span class="line">    .card-content(style=&quot;position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 2; pointer-events: none;&quot;)</span><br><span class="line">        .author-content-item-tips= page.desc</span><br><span class="line">        span.author-content-item-title= page.title</span><br><span class="line">        .content-bottom</span><br><span class="line">            if page.leftend</span><br><span class="line">                .tips= page.leftend</span><br><span class="line">            if page.rightend</span><br><span class="line">                .tips= page.rightend</span><br><span class="line">        if page.rightbtn</span><br><span class="line">            .banner-button-group</span><br><span class="line">                - const isInternalLink = page.rightbtnlink.startsWith(&#x27;/&#x27;)</span><br><span class="line">                a.banner-button(onclick=isInternalLink ? `pjax.loadUrl(&quot;$&#123;page.rightbtnlink&#125;&quot;)`: null, href=isInternalLink ? null : url_for(page.rightbtnlink), target=isInternalLink ? null : &quot;_blank&quot;)</span><br><span class="line">                    i.solitude.fas.fa-circle-chevron-right</span><br><span class="line">                    span.banner-button-text= page.rightbtn</span><br></pre></td></tr></table></figure><hr><h3 id="4-修改首页推荐卡片模板">4. 修改首页推荐卡片模板</h3><p><strong>文件路径：</strong><br><code>solitude-latest/node_modules/hexo-theme-solitude/layout/includes/widgets/home/topGroup.pug</code></p><p><strong>修改前：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">if theme.hometop.recommendList.type === &#x27;video&#x27;</span><br><span class="line">    .todayCard-cover.nolazyload</span><br><span class="line">        video.todayCard-video(</span><br><span class="line">            src=theme.hometop.recommendList.media, </span><br><span class="line">            autoplay=true, </span><br><span class="line">            loop=true, </span><br><span class="line">            muted=true, </span><br><span class="line">            playsinline=true, </span><br><span class="line">            style=&quot;width: 100%; height: 100%; object-fit: cover;&quot;)</span><br><span class="line">else</span><br><span class="line">    .todayCard-cover.nolazyload(style=`background: url(&#x27;$&#123;theme.hometop.recommendList.img&#125;&#x27;) no-repeat center /cover`)</span><br></pre></td></tr></table></figure><p><strong>修改后：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">if theme.hometop.banner_control &amp;&amp; theme.hometop.banner_control.enable &amp;&amp; theme.hometop.banner_control.type === &#x27;video&#x27; &amp;&amp; theme.hometop.recommendList.type === &#x27;video&#x27;</span><br><span class="line">    .todayCard-cover.nolazyload</span><br><span class="line">        video.todayCard-video(</span><br><span class="line">            src=theme.hometop.recommendList.media, </span><br><span class="line">            autoplay=true, </span><br><span class="line">            loop=true, </span><br><span class="line">            muted=true, </span><br><span class="line">            playsinline=true, </span><br><span class="line">            style=&quot;width: 100%; height: 100%; object-fit: cover;&quot;)</span><br><span class="line">else</span><br><span class="line">    .todayCard-cover.nolazyload(style=`background: url(&#x27;$&#123;theme.hometop.recommendList.img&#125;&#x27;) no-repeat center /cover`)</span><br></pre></td></tr></table></figure><hr><h3 id="5-添加响应式CSS样式">5. 添加响应式CSS样式</h3><p><strong>文件路径：</strong><br><code>solitude-latest/node_modules/hexo-theme-solitude/source/css/_page/other.styl</code></p><p><strong>修改前：</strong></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.author-content</span><span class="selector-class">.author-content-item</span><span class="selector-class">.sharePage</span></span><br><span class="line">  <span class="attribute">height</span> <span class="number">19rem</span></span><br><span class="line">  <span class="attribute">background-size</span> cover</span><br><span class="line">  <span class="attribute">color</span> <span class="built_in">var</span>(--efu-white)</span><br><span class="line">  <span class="attribute">overflow</span> hidden</span><br><span class="line">  <span class="attribute">margin-top</span> <span class="number">0</span></span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">12px</span></span><br></pre></td></tr></table></figure><p><strong>修改后：</strong></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.author-content</span><span class="selector-class">.author-content-item</span><span class="selector-class">.sharePage</span></span><br><span class="line">  <span class="attribute">height</span> <span class="number">300px</span></span><br><span class="line">  <span class="attribute">background-size</span> cover</span><br><span class="line">  <span class="attribute">color</span> <span class="built_in">var</span>(--efu-white)</span><br><span class="line">  <span class="attribute">overflow</span> hidden</span><br><span class="line">  <span class="attribute">margin-top</span> <span class="number">0</span></span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">12px</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 移动端高度调整</span></span><br><span class="line">  +<span class="built_in">maxWidth768</span>()</span><br><span class="line">    <span class="attribute">height</span> <span class="number">150px</span></span><br><span class="line"></span><br><span class="line">  <span class="selector-pseudo">&amp;::before</span></span><br><span class="line">    <span class="attribute">content</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="attribute">position</span> absolute</span><br><span class="line">    <span class="attribute">width</span> <span class="number">100%</span></span><br><span class="line">    <span class="attribute">height</span> <span class="number">100%</span></span><br><span class="line">    <span class="attribute">background</span> <span class="built_in">var</span>(--efu-black)</span><br><span class="line">    <span class="attribute">opacity</span> .<span class="number">3</span></span><br><span class="line">    <span class="attribute">z-index</span> <span class="number">1</span></span><br><span class="line">    <span class="attribute">top</span> <span class="number">0</span></span><br><span class="line">    <span class="attribute">left</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 针对single类的banner高度控制</span></span><br><span class="line"><span class="selector-class">.author-content</span><span class="selector-class">.author-content-item</span><span class="selector-class">.single</span><span class="selector-class">.sharePage</span></span><br><span class="line">  <span class="attribute">height</span> <span class="number">300px</span></span><br><span class="line"></span><br><span class="line">  +<span class="built_in">maxWidth768</span>()</span><br><span class="line">    <span class="attribute">height</span> <span class="number">150px</span></span><br></pre></td></tr></table></figure><hr><h2 id="效果对比">效果对比</h2><h3 id="修改前">修改前</h3><ul><li>❌ Banner只支持图片显示</li><li>❌ 无法播放视频文件</li><li>❌ 移动端banner高度固定，显示效果差</li><li>❌ 缺少banner控制配置</li></ul><h3 id="修改后">修改后</h3><ul><li>✅ Banner支持视频播放（自动播放、循环、静音）</li><li>✅ 支持图片/视频模式切换</li><li>✅ 移动端banner高度自适应（电脑端300px，手机端150px）</li><li>✅ 响应式设计，适配不同屏幕尺寸</li><li>✅ 通过配置文件控制banner类型</li></ul><hr><h2 id="配置说明">配置说明</h2><h3 id="Banner控制配置">Banner控制配置</h3><p>在 <code>_config.solitude.yml</code> 中可以通过以下配置控制banner：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">hometop:</span></span><br><span class="line">  <span class="attr">banner_control:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span>  <span class="comment"># 是否启用banner控制</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">video</span>   <span class="comment"># img / video</span></span><br></pre></td></tr></table></figure><h3 id="页面Banner配置">页面Banner配置</h3><p>在文章的front-matter中设置：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">文章标题</span></span><br><span class="line"><span class="attr">cover:</span> <span class="string">/mp4/recommend-banner/recommend-banner7.mp4</span>  <span class="comment"># 视频文件路径</span></span><br><span class="line"><span class="attr">desc:</span> <span class="string">Banner描述</span></span><br><span class="line"><span class="attr">leftend:</span> <span class="string">左侧信息</span></span><br><span class="line"><span class="attr">rightend:</span> <span class="string">右侧信息</span></span><br><span class="line"><span class="attr">rightbtn:</span> <span class="string">按钮文字</span></span><br><span class="line"><span class="attr">rightbtnlink:</span> <span class="string">/about/</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><hr><h2 id="故障排查">故障排查</h2><ol><li><p><strong>视频不播放？</strong></p><ul><li>检查视频文件路径是否正确</li><li>确认 <code>banner_control.enable: true</code></li><li>确认 <code>banner_control.type: video</code></li><li>检查视频文件格式是否为mp4</li></ul></li><li><p><strong>移动端显示异常？</strong></p><ul><li>清理缓存：<code>hexo clean &amp;&amp; hexo g</code></li><li>检查CSS样式是否正确加载</li></ul></li><li><p><strong>JavaScript报错？</strong></p><ul><li>确认 <code>banner-video.js</code> 文件存在</li><li>检查浏览器控制台是否有其他错误</li></ul></li></ol><hr><h2 id="总结">总结</h2><p>通过本次魔改，你可以让Solitude主题的Banner支持视频播放功能，并针对移动端进行了响应式优化。视频Banner不仅增加了页面的动态效果，也让博客更加生动有趣。</p><p>主要特性：</p><ul><li>🎥 支持视频自动播放、循环播放、静音播放</li><li>📱 移动端响应式设计，高度自适应</li><li>⚙️ 灵活的配置控制，支持图片/视频切换</li><li>🎨 保持原有的视觉效果和交互功能</li></ul><p>如需进一步个性化视频Banner样式，可参考CSS样式文件进行自定义修改。</p><hr><h2 id="相关链接">相关链接</h2><ul><li><a href="https://solitude.js.org/">Solitude主题官方文档</a></li><li><a href="https://hexo.io/">Hexo官方文档</a></li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/video">HTML5 Video API文档</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 魔改教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 魔改教程 </tag>
            
            <tag> Solitude </tag>
            
            <tag> Hexo </tag>
            
            <tag> Banner </tag>
            
            <tag> 视频播放 </tag>
            
            <tag> 响应式设计 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Solitude主题魔改教程(5)-统计图功能修复与增强</title>
      <link href="/2024/09/30/Solitude%E4%B8%BB%E9%A2%98%E9%AD%94%E6%94%B9%E6%95%99%E7%A8%8B(5)-%E7%BB%9F%E8%AE%A1%E5%9B%BE%E5%8A%9F%E8%83%BD%E4%BF%AE%E5%A4%8D%E4%B8%8E%E5%A2%9E%E5%BC%BA/"/>
      <url>/2024/09/30/Solitude%E4%B8%BB%E9%A2%98%E9%AD%94%E6%94%B9%E6%95%99%E7%A8%8B(5)-%E7%BB%9F%E8%AE%A1%E5%9B%BE%E5%8A%9F%E8%83%BD%E4%BF%AE%E5%A4%8D%E4%B8%8E%E5%A2%9E%E5%BC%BA/</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>在使用Solitude主题时，归档、标签、分类页面本应支持文章统计图（如折线图、柱状图、饼图），但有时会遇到统计图不显示或功能失效的问题。本文将详细介绍如何修复和增强Solitude主题的统计图功能，让你的博客数据一目了然，提升专业感和交互体验。</p><hr><h2 id="现象与需求">现象与需求</h2><h3 id="现象">现象</h3><ul><li>归档、标签、分类页面本应有统计图，但页面未显示任何图表</li><li>控制台无明显报错，或仅有部分依赖缺失提示</li><li>主题配置和页面模板未见明显异常</li></ul><h3 id="期望效果">期望效果</h3><ul><li>归档页面显示文章发布趋势折线图</li><li>标签页面显示标签分布柱状图</li><li>分类页面显示分类分布饼图</li><li>图表可交互，点击跳转到对应归档/标签/分类</li></ul><hr><h2 id="问题分析">问题分析</h2><h3 id="根本原因">根本原因</h3><ol><li><p><strong>主题配置缺失</strong><br><code>_config.solitude.yml</code> 中未启用统计图功能（缺少 <code>page.echart: true</code> 配置项）</p></li><li><p><strong>页面模板未包含统计图容器</strong><br>分类页面模板 <code>category.pug</code> 缺少统计图的HTML容器</p></li><li><p><strong>依赖未安装</strong><br>主题统计图脚本依赖 <code>cheerio</code>，未安装时会导致生成失败</p></li></ol><hr><h2 id="修改文件清单">修改文件清单</h2><ul><li><code>solitude-latest/_config.solitude.yml</code></li><li><code>solitude-latest/node_modules/hexo-theme-solitude/layout/category.pug</code></li><li><code>solitude-latest/package.json</code>（依赖安装）</li></ul><hr><h2 id="详细修改步骤">详细修改步骤</h2><h3 id="1-启用统计图功能">1. 启用统计图功能</h3><p><strong>文件路径：</strong><br><code>solitude-latest/_config.solitude.yml</code></p><p><strong>修改前：</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">page:</span></span><br><span class="line">  <span class="attr">error:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">tags:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">categories:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">archives:</span> <span class="number">0</span></span><br><span class="line">  <span class="comment"># Default value</span></span><br><span class="line">  <span class="attr">default:</span></span><br><span class="line">    <span class="attr">cover:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/img/default.avif</span></span><br></pre></td></tr></table></figure><p><strong>修改后：</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">page:</span></span><br><span class="line">  <span class="attr">error:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">tags:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">categories:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">archives:</span> <span class="number">0</span></span><br><span class="line">  <span class="attr">echart:</span> <span class="literal">true</span>   <span class="comment"># ← 新增，启用统计图</span></span><br><span class="line">  <span class="attr">default:</span></span><br><span class="line">    <span class="attr">cover:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/img/default.avif</span></span><br></pre></td></tr></table></figure><hr><h3 id="2-分类页面添加统计图容器">2. 分类页面添加统计图容器</h3><p><strong>文件路径：</strong><br><code>solitude-latest/node_modules/hexo-theme-solitude/layout/category.pug</code></p><p><strong>修改前：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">extends includes/layout.pug</span><br><span class="line"></span><br><span class="line">block content</span><br><span class="line">    main.layout#content-inner</span><br><span class="line">        #category</span><br><span class="line">            #category-bar</span><br><span class="line">                include includes/widgets/home/categoryBar</span><br><span class="line">            .recent-posts#recent-posts</span><br><span class="line">                each post,index in page.posts.find(&#123; parent: &#123; $exists: false &#125; &#125;).data</span><br><span class="line">                    include includes/widgets/home/postList</span><br><span class="line">                include includes/mixins/pagination</span><br><span class="line">            if theme.comment.hot_tip.enable</span><br><span class="line">                include ./includes/widgets/third-party/hot/index.pug</span><br><span class="line">        include includes/widgets/aside/aside</span><br></pre></td></tr></table></figure><p><strong>修改后：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">extends includes/layout.pug</span><br><span class="line"></span><br><span class="line">block content</span><br><span class="line">    main.layout#content-inner</span><br><span class="line">        #category</span><br><span class="line">            &lt;div id=&quot;categories-chart&quot; data-parent=&quot;false&quot; style=&quot;height: 300px; padding: 10px;&quot;&gt;&lt;/div&gt;  // ← 新增</span><br><span class="line">            #category-bar</span><br><span class="line">                include includes/widgets/home/categoryBar</span><br><span class="line">            .recent-posts#recent-posts</span><br><span class="line">                each post,index in page.posts.find(&#123; parent: &#123; $exists: false &#125; &#125;).data</span><br><span class="line">                    include includes/widgets/home/postList</span><br><span class="line">                include includes/mixins/pagination</span><br><span class="line">            if theme.comment.hot_tip.enable</span><br><span class="line">                include ./includes/widgets/third-party/hot/index.pug</span><br><span class="line">        include includes/widgets/aside/aside</span><br></pre></td></tr></table></figure><hr><h3 id="3-安装依赖">3. 安装依赖</h3><p><strong>命令行操作：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install cheerio</span><br></pre></td></tr></table></figure><p><strong>说明：</strong><br><code>cheerio</code> 是主题统计图脚本所需的依赖，缺失会导致 <code>hexo generate</code> 时报错。</p><hr><h2 id="效果对比">效果对比</h2><h3 id="修改前">修改前</h3><ul><li>❌ 归档、标签、分类页面无统计图</li><li>❌ 页面数据分布不可视化</li></ul><h3 id="修改后">修改后</h3><ul><li>✅ 归档页面有文章发布趋势折线图</li><li>✅ 标签页面有标签分布柱状图</li><li>✅ 分类页面有分类分布饼图/旭日图</li><li>✅ 图表可交互，点击跳转</li><li>✅ 数据一目了然，提升专业感</li></ul><hr><h2 id="故障排查">故障排查</h2><ol><li><p><strong>统计图仍不显示？</strong></p><ul><li>检查 <code>_config.solitude.yml</code> 是否有 <code>page.echart: true</code></li><li>检查页面模板是否有统计图容器</li><li>检查 <code>cheerio</code> 是否已安装</li></ul></li><li><p><strong>生成时报错？</strong></p><ul><li>多为依赖缺失，执行 <code>npm install cheerio</code> 解决</li></ul></li><li><p><strong>页面样式错乱？</strong></p><ul><li>清理缓存，重新生成：<code>hexo clean &amp;&amp; hexo g</code></li></ul></li></ol><hr><h2 id="总结">总结</h2><p>通过本次魔改，你可以让Solitude主题的归档、标签、分类页面都拥有美观、实用的统计图功能。数据可视化不仅提升了博客的专业度，也让访客更直观地了解你的内容分布。<br>如需进一步个性化统计图样式，可参考ECharts官方文档进行自定义。</p><hr><h2 id="相关链接">相关链接</h2><ul><li><a href="https://solitude.js.org/">Solitude主题官方文档</a></li><li><a href="https://hexo.io/">Hexo官方文档</a></li><li><a href="https://echarts.apache.org/zh/index.html">ECharts官方文档</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 魔改教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 魔改教程 </tag>
            
            <tag> Solitude </tag>
            
            <tag> Hexo </tag>
            
            <tag> ECharts </tag>
            
            <tag> 数据可视化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Solitude主题魔改教程(4)-文章页波浪线效果自定义修改</title>
      <link href="/2024/09/23/Solitude%E4%B8%BB%E9%A2%98%E9%AD%94%E6%94%B9%E6%95%99%E7%A8%8B(4)-%E6%96%87%E7%AB%A0%E9%A1%B5%E6%B3%A2%E6%B5%AA%E7%BA%BF%E6%95%88%E6%9E%9C%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BF%AE%E6%94%B9/"/>
      <url>/2024/09/23/Solitude%E4%B8%BB%E9%A2%98%E9%AD%94%E6%94%B9%E6%95%99%E7%A8%8B(4)-%E6%96%87%E7%AB%A0%E9%A1%B5%E6%B3%A2%E6%B5%AA%E7%BA%BF%E6%95%88%E6%9E%9C%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BF%AE%E6%94%B9/</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>在使用Solitude主题时，文章页面的post-info下方默认使用简单的圆角矩形分隔线。这种静态效果虽然简洁，但缺乏动感和视觉吸引力。本教程将详细介绍如何将默认的分隔线替换为动态的波浪线效果，让文章页面更加生动美观。</p><h2 id="问题描述">问题描述</h2><h3 id="现象">现象</h3><ul><li>文章页面post-info下方显示简单的圆角矩形分隔线</li><li>视觉效果较为单调，缺乏动感</li><li>希望实现类似旧版本的动态波浪线效果</li></ul><h3 id="当前版本显示效果">当前版本显示效果</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">┌─────────────────────────────────────┐</span><br><span class="line">│          文章标题                    │</span><br><span class="line">│          文章信息                    │</span><br><span class="line">└─────────────────────────────────────┘</span><br><span class="line">    ████████████████████████████████</span><br><span class="line">    ████████████████████████████████</span><br></pre></td></tr></table></figure><h3 id="期望效果">期望效果</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">┌─────────────────────────────────────┐</span><br><span class="line">│          文章标题                    │</span><br><span class="line">│          文章信息                    │</span><br><span class="line">└─────────────────────────────────────┘</span><br><span class="line">    ~~~~~~~~~~~~~  ~~~~~~~~~~~~~</span><br><span class="line">   ~~~~~~~~~~~~~~  ~~~~~~~~~~~~~~</span><br><span class="line">  ~~~~~~~~~~~~~~~  ~~~~~~~~~~~~~~~</span><br><span class="line"> ~~~~~~~~~~~~~~~~~  ~~~~~~~~~~~~~~~~~</span><br></pre></td></tr></table></figure><h2 id="问题分析">问题分析</h2><h3 id="根本原因">根本原因</h3><p>通过对比新版本和旧版本的代码实现，发现了关键差异：</p><h4 id="新版本（当前实现）：">新版本（当前实现）：</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-pseudo">&amp;::after</span></span><br><span class="line">  <span class="attribute">position</span> absolute</span><br><span class="line">  <span class="attribute">content</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="attribute">width</span> <span class="number">100%</span></span><br><span class="line">  <span class="attribute">height</span> <span class="number">32px</span></span><br><span class="line">  <span class="attribute">background</span> <span class="built_in">var</span>(--efu-background)</span><br><span class="line">  <span class="attribute">bottom</span> <span class="number">0</span></span><br><span class="line">  <span class="attribute">border-radius</span> <span class="number">16px</span> <span class="number">16px</span> <span class="number">0</span> <span class="number">0</span></span><br></pre></td></tr></table></figure><h4 id="旧版本（期望的实现）：">旧版本（期望的实现）：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">section.main-hero-waves-area.waves-area</span><br><span class="line">    svg.waves-svg(xmlns=&quot;http://www.w3.org/2000/svg&quot;, xlink=&quot;http://www.w3.org/1999/xlink&quot;, viewBox=&quot;0 24 150 28&quot;, preserveAspectRatio=&quot;none&quot;, shape-rendering=&quot;auto&quot;)</span><br><span class="line">        defs</span><br><span class="line">            path#gentle-wave(d=&quot;M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z&quot;)</span><br><span class="line">        g.parallax</span><br><span class="line">            use(href=&quot;#gentle-wave&quot;, x=&quot;48&quot;, y=&quot;0&quot;)</span><br><span class="line">            use(href=&quot;#gentle-wave&quot;, x=&quot;48&quot;, y=&quot;3&quot;)</span><br><span class="line">            use(href=&quot;#gentle-wave&quot;, x=&quot;48&quot;, y=&quot;5&quot;)</span><br><span class="line">            use(href=&quot;#gentle-wave&quot;, x=&quot;48&quot;, y=&quot;7&quot;)</span><br></pre></td></tr></table></figure><h3 id="关键差异">关键差异</h3><ol><li><p><strong>实现方式不同</strong>：</p><ul><li>新版本：使用CSS <code>::after</code> 伪元素创建圆角矩形</li><li>旧版本：使用SVG创建动态波浪线</li></ul></li><li><p><strong>动画效果不同</strong>：</p><ul><li>新版本：静态效果，无动画</li><li>旧版本：多层波浪，不同延迟和持续时间</li></ul></li><li><p><strong>视觉效果不同</strong>：</p><ul><li>新版本：简单的圆角矩形分隔线</li><li>旧版本：动态的波浪线效果</li></ul></li></ol><h2 id="解决方案">解决方案</h2><h3 id="修改文件清单">修改文件清单</h3><ul><li><code>node_modules/hexo-theme-solitude/layout/includes/widgets/post/wave.pug</code> - 波浪线模板文件</li><li><code>node_modules/hexo-theme-solitude/layout/includes/widgets/post/postMeta.pug</code> - 文章元信息模板</li><li><code>node_modules/hexo-theme-solitude/source/css/_post/meta.styl</code> - 文章元信息样式</li><li><code>node_modules/hexo-theme-solitude/source/css/_global/animation.styl</code> - 动画定义文件</li><li><code>node_modules/hexo-theme-solitude/source/css/_layout/article-container.styl</code> - 文章容器样式</li><li><code>node_modules/hexo-theme-solitude/source/css/_layout/aside.styl</code> - 侧边栏样式</li><li><code>node_modules/hexo-theme-solitude/source/css/_global/index.styl</code> - 全局样式</li></ul><h3 id="详细修改步骤">详细修改步骤</h3><h4 id="1-创建波浪线模板文件">1. 创建波浪线模板文件</h4><p><strong>文件路径：</strong> <code>node_modules/hexo-theme-solitude/layout/includes/widgets/post/wave.pug</code></p><p><strong>文件内容：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">section.main-hero-waves-area.waves-area</span><br><span class="line">    svg.waves-svg(xmlns=&quot;http://www.w3.org/2000/svg&quot;, xlink=&quot;http://www.w3.org/1999/xlink&quot;, viewBox=&quot;0 24 150 28&quot;, preserveAspectRatio=&quot;none&quot;, shape-rendering=&quot;auto&quot;)</span><br><span class="line">        defs</span><br><span class="line">            path#gentle-wave(d=&quot;M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z&quot;)</span><br><span class="line">        g.parallax</span><br><span class="line">            use(href=&quot;#gentle-wave&quot;, x=&quot;48&quot;, y=&quot;0&quot;)</span><br><span class="line">            use(href=&quot;#gentle-wave&quot;, x=&quot;48&quot;, y=&quot;3&quot;)</span><br><span class="line">            use(href=&quot;#gentle-wave&quot;, x=&quot;48&quot;, y=&quot;5&quot;)</span><br><span class="line">            use(href=&quot;#gentle-wave&quot;, x=&quot;48&quot;, y=&quot;7&quot;)</span><br></pre></td></tr></table></figure><p><strong>文件作用：</strong> 定义波浪线的SVG结构和路径</p><h4 id="2-修改文章元信息模板">2. 修改文章元信息模板</h4><p><strong>文件路径：</strong> <code>node_modules/hexo-theme-solitude/layout/includes/widgets/post/postMeta.pug</code></p><p><strong>修改前：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.coverdiv#coverdiv</span><br><span class="line">    img#post-cover.nolazyload(src=url_for(page.cover), alt=page.title)</span><br><span class="line">include ./postInfo</span><br></pre></td></tr></table></figure><p><strong>修改后：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.coverdiv#coverdiv</span><br><span class="line">    img#post-cover.nolazyload(src=url_for(page.cover), alt=page.title)</span><br><span class="line">include ./postInfo</span><br><span class="line">include ./wave</span><br></pre></td></tr></table></figure><p><strong>修改说明：</strong> 在文章元信息模板中引入波浪线组件</p><h4 id="3-修改文章元信息样式">3. 修改文章元信息样式</h4><p><strong>文件路径：</strong> <code>node_modules/hexo-theme-solitude/source/css/_post/meta.styl</code></p><p><strong>找到以下代码段：</strong></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.main-hero-waves-area</span></span><br><span class="line">  <span class="attribute">width</span> <span class="number">100%</span></span><br><span class="line">  <span class="attribute">position</span> absolute</span><br><span class="line">  <span class="attribute">left</span> <span class="number">0</span></span><br><span class="line">  <span class="attribute">bottom</span> -<span class="number">11px</span></span><br></pre></td></tr></table></figure><p><strong>替换为：</strong></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.main-hero-waves-area</span></span><br><span class="line">  <span class="attribute">width</span> <span class="number">100%</span></span><br><span class="line">  <span class="attribute">position</span> absolute</span><br><span class="line">  <span class="attribute">left</span> <span class="number">0</span></span><br><span class="line">  <span class="attribute">bottom</span> -<span class="number">11px</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.waves-area</span> <span class="selector-class">.waves-svg</span></span><br><span class="line">  <span class="attribute">width</span> <span class="number">100%</span></span><br><span class="line">  <span class="attribute">height</span> <span class="number">60px</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.parallax</span> &gt; <span class="selector-tag">use</span></span><br><span class="line">  <span class="attribute">animation</span> move-forever <span class="number">30s</span> <span class="built_in">cubic-bezier</span>(.<span class="number">55</span>, .<span class="number">5</span>, .<span class="number">45</span>, .<span class="number">5</span>) infinite</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.parallax</span> &gt; <span class="selector-tag">use</span><span class="selector-pseudo">:nth-child</span>(<span class="number">1</span>)</span><br><span class="line">  <span class="attribute">animation-delay</span> -<span class="number">2s</span></span><br><span class="line">  <span class="attribute">animation-duration</span> <span class="number">7s</span></span><br><span class="line">  <span class="attribute">fill</span> <span class="built_in">var</span>(--efu-background)</span><br><span class="line">  <span class="attribute">opacity</span> .<span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.parallax</span> &gt; <span class="selector-tag">use</span><span class="selector-pseudo">:nth-child</span>(<span class="number">2</span>)</span><br><span class="line">  <span class="attribute">animation-delay</span> -<span class="number">3s</span></span><br><span class="line">  <span class="attribute">animation-duration</span> <span class="number">10s</span></span><br><span class="line">  <span class="attribute">fill</span> <span class="built_in">var</span>(--efu-background)</span><br><span class="line">  <span class="attribute">opacity</span> .<span class="number">6</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.parallax</span> &gt; <span class="selector-tag">use</span><span class="selector-pseudo">:nth-child</span>(<span class="number">3</span>)</span><br><span class="line">  <span class="attribute">animation-delay</span> -<span class="number">4s</span></span><br><span class="line">  <span class="attribute">animation-duration</span> <span class="number">13s</span></span><br><span class="line">  <span class="attribute">fill</span> <span class="built_in">var</span>(--efu-background)</span><br><span class="line">  <span class="attribute">opacity</span> .<span class="number">7</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.parallax</span> &gt; <span class="selector-tag">use</span><span class="selector-pseudo">:nth-child</span>(<span class="number">4</span>)</span><br><span class="line">  <span class="attribute">animation-delay</span> -<span class="number">5s</span></span><br><span class="line">  <span class="attribute">animation-duration</span> <span class="number">20s</span></span><br><span class="line">  <span class="attribute">fill</span> <span class="built_in">var</span>(--efu-background)</span><br><span class="line">  <span class="attribute">opacity</span> .<span class="number">8</span></span><br></pre></td></tr></table></figure><p><strong>修改说明：</strong> 定义波浪线的样式和动画效果</p><h4 id="4-添加波浪动画定义">4. 添加波浪动画定义</h4><p><strong>文件路径：</strong> <code>node_modules/hexo-theme-solitude/source/css/_global/animation.styl</code></p><p><strong>在文件末尾添加：</strong></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@keyframes</span> move-forever</span><br><span class="line">  <span class="number">0%</span></span><br><span class="line">    <span class="attribute">transform</span> <span class="built_in">translate3d</span>(-<span class="number">90px</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">  <span class="number">100%</span></span><br><span class="line">    <span class="attribute">transform</span> <span class="built_in">translate3d</span>(<span class="number">85px</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br></pre></td></tr></table></figure><p><strong>修改说明：</strong> 定义波浪线的移动动画</p><h4 id="5-调整文章内容区域间距">5. 调整文章内容区域间距</h4><p>为了让文章内容与波浪线保持适当距离，需要调整间距：</p><p><strong>文件路径：</strong> <code>node_modules/hexo-theme-solitude/source/css/_layout/article-container.styl</code></p><p><strong>修改文章内容区域的padding：</strong></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.post</span> &amp;</span><br><span class="line">  <span class="attribute">padding</span> <span class="number">2rem</span> <span class="number">2rem</span> <span class="number">1rem</span> <span class="number">2rem</span></span><br><span class="line">  +<span class="built_in">maxWidth768</span>()</span><br><span class="line">    <span class="attribute">padding</span> <span class="number">1.5rem</span> .<span class="number">5rem</span> <span class="number">1rem</span> .<span class="number">5rem</span></span><br></pre></td></tr></table></figure><p><strong>修改说明：</strong> 增加文章内容区域的顶部间距</p><h4 id="6-调整侧边栏间距">6. 调整侧边栏间距</h4><p><strong>文件路径：</strong> <code>node_modules/hexo-theme-solitude/source/css/_layout/aside.styl</code></p><p><strong>修改侧边栏的margin-top：</strong></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#aside-content</span></span><br><span class="line">  <span class="attribute">display</span> flex</span><br><span class="line">  <span class="attribute">flex-direction</span> column</span><br><span class="line">  <span class="attribute">gap</span> <span class="built_in">var</span>(--gap)</span><br><span class="line">  <span class="attribute">animation</span> slide-in .<span class="number">6s</span> .<span class="number">3s</span> backwards</span><br><span class="line">  <span class="attribute">z-index</span> <span class="number">10</span></span><br><span class="line">  <span class="attribute">margin-top</span> <span class="number">1rem</span></span><br></pre></td></tr></table></figure><p><strong>修改说明：</strong> 为侧边栏添加顶部间距，与文章内容保持一致</p><h4 id="7-调整文章容器间距">7. 调整文章容器间距</h4><p><strong>文件路径：</strong> <code>node_modules/hexo-theme-solitude/source/css/_global/index.styl</code></p><p><strong>修改文章容器的padding：</strong></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="selector-id">#post</span></span><br><span class="line">  <span class="attribute">padding</span> <span class="number">1rem</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span></span><br></pre></td></tr></table></figure><p><strong>修改说明：</strong> 为文章容器添加顶部间距</p><h2 id="代码详解">代码详解</h2><h3 id="SVG波浪线结构">SVG波浪线结构</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">section.main-hero-waves-area.waves-area</span><br><span class="line">    svg.waves-svg(xmlns=&quot;http://www.w3.org/2000/svg&quot;, xlink=&quot;http://www.w3.org/1999/xlink&quot;, viewBox=&quot;0 24 150 28&quot;, preserveAspectRatio=&quot;none&quot;, shape-rendering=&quot;auto&quot;)</span><br><span class="line">        defs</span><br><span class="line">            path#gentle-wave(d=&quot;M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z&quot;)</span><br><span class="line">        g.parallax</span><br><span class="line">            use(href=&quot;#gentle-wave&quot;, x=&quot;48&quot;, y=&quot;0&quot;)</span><br><span class="line">            use(href=&quot;#gentle-wave&quot;, x=&quot;48&quot;, y=&quot;3&quot;)</span><br><span class="line">            use(href=&quot;#gentle-wave&quot;, x=&quot;48&quot;, y=&quot;5&quot;)</span><br><span class="line">            use(href=&quot;#gentle-wave&quot;, x=&quot;48&quot;, y=&quot;7&quot;)</span><br></pre></td></tr></table></figure><p><strong>关键参数说明：</strong></p><ul><li><code>viewBox=&quot;0 24 150 28&quot;</code>：定义SVG的视口大小</li><li><code>preserveAspectRatio=&quot;none&quot;</code>：不保持宽高比，允许拉伸</li><li><code>shape-rendering=&quot;auto&quot;</code>：自动优化形状渲染</li><li><code>d=&quot;M -160 44 c 30 0 58 -18 88 -18...&quot;</code>：定义波浪路径</li></ul><h3 id="CSS动画样式">CSS动画样式</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.parallax</span> &gt; <span class="selector-tag">use</span></span><br><span class="line">  <span class="attribute">animation</span> move-forever <span class="number">30s</span> <span class="built_in">cubic-bezier</span>(.<span class="number">55</span>, .<span class="number">5</span>, .<span class="number">45</span>, .<span class="number">5</span>) infinite</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.parallax</span> &gt; <span class="selector-tag">use</span><span class="selector-pseudo">:nth-child</span>(<span class="number">1</span>)</span><br><span class="line">  <span class="attribute">animation-delay</span> -<span class="number">2s</span></span><br><span class="line">  <span class="attribute">animation-duration</span> <span class="number">7s</span></span><br><span class="line">  <span class="attribute">fill</span> <span class="built_in">var</span>(--efu-background)</span><br><span class="line">  <span class="attribute">opacity</span> .<span class="number">5</span></span><br></pre></td></tr></table></figure><p><strong>关键参数说明：</strong></p><ul><li><code>animation move-forever 30s</code>：使用move-forever动画，持续30秒</li><li><code>cubic-bezier(.55, .5, .45, .5)</code>：缓动函数，创建平滑的动画效果</li><li><code>animation-delay -2s</code>：动画延迟2秒开始</li><li><code>animation-duration 7s</code>：动画持续7秒</li><li><code>fill var(--efu-background)</code>：填充颜色使用主题背景色</li></ul><h3 id="动画定义">动画定义</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@keyframes</span> move-forever</span><br><span class="line">  <span class="number">0%</span></span><br><span class="line">    <span class="attribute">transform</span> <span class="built_in">translate3d</span>(-<span class="number">90px</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">  <span class="number">100%</span></span><br><span class="line">    <span class="attribute">transform</span> <span class="built_in">translate3d</span>(<span class="number">85px</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br></pre></td></tr></table></figure><p><strong>关键参数说明：</strong></p><ul><li><code>translate3d(-90px, 0, 0)</code>：初始位置，向左偏移90px</li><li><code>translate3d(85px, 0, 0)</code>：结束位置，向右偏移85px</li><li>使用3D变换提高性能</li></ul><h2 id="自定义扩展">自定义扩展</h2><h3 id="1-调整波浪线颜色">1. 调整波浪线颜色</h3><p>如果想要自定义波浪线颜色，可以修改fill属性：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.parallax</span> &gt; <span class="selector-tag">use</span><span class="selector-pseudo">:nth-child</span>(<span class="number">1</span>)</span><br><span class="line">  <span class="attribute">animation-delay</span> -<span class="number">2s</span></span><br><span class="line">  <span class="attribute">animation-duration</span> <span class="number">7s</span></span><br><span class="line">  <span class="attribute">fill</span> <span class="number">#4a90e2</span>  // 自定义颜色</span><br><span class="line">  <span class="attribute">opacity</span> .<span class="number">5</span></span><br></pre></td></tr></table></figure><h3 id="2-调整波浪线高度">2. 调整波浪线高度</h3><p>如果想要调整波浪线的高度，可以修改SVG的viewBox：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">svg.waves-svg(xmlns=&quot;http://www.w3.org/2000/svg&quot;, xlink=&quot;http://www.w3.org/1999/xlink&quot;, viewBox=&quot;0 24 150 40&quot;, preserveAspectRatio=&quot;none&quot;, shape-rendering=&quot;auto&quot;)</span><br></pre></td></tr></table></figure><h3 id="3-调整动画速度">3. 调整动画速度</h3><p>如果想要调整动画速度，可以修改动画持续时间：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.parallax</span> &gt; <span class="selector-tag">use</span></span><br><span class="line">  <span class="attribute">animation</span> move-forever <span class="number">20s</span> <span class="built_in">cubic-bezier</span>(.<span class="number">55</span>, .<span class="number">5</span>, .<span class="number">45</span>, .<span class="number">5</span>) infinite  // 从<span class="number">30s</span>改为<span class="number">20s</span></span><br></pre></td></tr></table></figure><h3 id="4-添加更多波浪层">4. 添加更多波浪层</h3><p>如果想要添加更多波浪层，可以在SVG中添加更多use元素：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">g.parallax</span><br><span class="line">    use(href=&quot;#gentle-wave&quot;, x=&quot;48&quot;, y=&quot;0&quot;)</span><br><span class="line">    use(href=&quot;#gentle-wave&quot;, x=&quot;48&quot;, y=&quot;3&quot;)</span><br><span class="line">    use(href=&quot;#gentle-wave&quot;, x=&quot;48&quot;, y=&quot;5&quot;)</span><br><span class="line">    use(href=&quot;#gentle-wave&quot;, x=&quot;48&quot;, y=&quot;7&quot;)</span><br><span class="line">    use(href=&quot;#gentle-wave&quot;, x=&quot;48&quot;, y=&quot;9&quot;)  // 添加第五层</span><br></pre></td></tr></table></figure><p>然后在CSS中添加对应的样式：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.parallax</span> &gt; <span class="selector-tag">use</span><span class="selector-pseudo">:nth-child</span>(<span class="number">5</span>)</span><br><span class="line">  <span class="attribute">animation-delay</span> -<span class="number">6s</span></span><br><span class="line">  <span class="attribute">animation-duration</span> <span class="number">25s</span></span><br><span class="line">  <span class="attribute">fill</span> <span class="built_in">var</span>(--efu-background)</span><br><span class="line">  <span class="attribute">opacity</span> .<span class="number">9</span></span><br></pre></td></tr></table></figure><h2 id="效果对比">效果对比</h2><h3 id="修改前">修改前</h3><ul><li>❌ 使用简单的圆角矩形分隔线</li><li>❌ 静态效果，无动画</li><li>❌ 视觉效果较为单调</li></ul><h3 id="修改后">修改后</h3><ul><li>✅ 使用动态的SVG波浪线</li><li>✅ 多层波浪，不同延迟和持续时间</li><li>✅ 视觉效果更加生动美观</li><li>✅ 与主题背景色自动适配</li></ul><h2 id="技术要点">技术要点</h2><h3 id="SVG路径定义">SVG路径定义</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">path#gentle-wave(d=&quot;M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z&quot;)</span><br></pre></td></tr></table></figure><p><strong>路径命令说明：</strong></p><ul><li><code>M -160 44</code>：移动到起始点</li><li><code>c 30 0 58 -18 88 -18</code>：三次贝塞尔曲线</li><li><code>s 58 18 88 18</code>：平滑三次贝塞尔曲线</li><li><code>v 44</code>：垂直向下移动44单位</li><li><code>h -352</code>：水平向左移动352单位</li><li><code>Z</code>：闭合路径</li></ul><h3 id="CSS动画优化">CSS动画优化</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">animation</span> move-forever <span class="number">30s</span> <span class="built_in">cubic-bezier</span>(.<span class="number">55</span>, .<span class="number">5</span>, .<span class="number">45</span>, .<span class="number">5</span>) infinite</span><br></pre></td></tr></table></figure><p><strong>优化要点：</strong></p><ul><li>使用<code>cubic-bezier</code>缓动函数创建平滑动画</li><li>使用<code>translate3d</code>启用硬件加速</li><li>设置<code>infinite</code>实现无限循环</li></ul><h3 id="响应式设计">响应式设计</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">+<span class="built_in">maxWidth768</span>()</span><br><span class="line">  <span class="attribute">display</span> none</span><br></pre></td></tr></table></figure><p><strong>响应式处理：</strong></p><ul><li>在移动端隐藏波浪线效果</li><li>避免在小屏幕上影响性能</li><li>保持移动端的简洁性</li></ul><h2 id="注意事项">注意事项</h2><ol><li><p><strong>文件位置</strong>：</p><ul><li>修改的是 <code>node_modules</code> 中的文件</li><li>重新安装依赖时会丢失修改</li><li>建议备份修改后的文件</li></ul></li><li><p><strong>性能考虑</strong>：</p><ul><li>SVG动画在低端设备上可能影响性能</li><li>建议在移动端禁用波浪线效果</li><li>可以根据设备性能动态调整</li></ul></li><li><p><strong>兼容性</strong>：</p><ul><li>SVG动画需要现代浏览器支持</li><li>某些老旧浏览器可能显示异常</li><li>建议添加降级方案</li></ul></li><li><p><strong>主题适配</strong>：</p><ul><li>波浪线颜色使用主题变量</li><li>自动适配明暗主题切换</li><li>保持与整体设计风格一致</li></ul></li></ol><h2 id="故障排除">故障排除</h2><h3 id="常见问题">常见问题</h3><ol><li><p><strong>波浪线不显示</strong></p><ul><li>检查SVG文件是否正确创建</li><li>确认postMeta.pug中已引入wave.pug</li><li>检查CSS样式是否正确加载</li></ul></li><li><p><strong>动画不流畅</strong></p><ul><li>检查动画定义是否正确</li><li>确认浏览器支持CSS动画</li><li>考虑降低动画复杂度</li></ul></li><li><p><strong>颜色不匹配</strong></p><ul><li>确认使用主题变量<code>var(--efu-background)</code></li><li>检查主题色值是否正确</li><li>测试明暗主题切换效果</li></ul></li><li><p><strong>间距不合适</strong></p><ul><li>调整文章容器的padding值</li><li>修改侧边栏的margin值</li><li>平衡视觉效果和内容可读性</li></ul></li></ol><h3 id="调试方法">调试方法</h3><ol><li><p><strong>浏览器开发者工具</strong>：</p><ul><li>检查元素是否正确渲染</li><li>查看CSS样式是否生效</li><li>监控动画性能</li></ul></li><li><p><strong>控制台日志</strong>：</p><ul><li>检查是否有JavaScript错误</li><li>确认文件路径是否正确</li><li>验证依赖是否正确加载</li></ul></li></ol><h2 id="总结">总结</h2><p>通过这次修改，我们成功将Solitude主题文章页面的静态分隔线升级为动态的波浪线效果。这个修改不仅提升了视觉效果，还增加了页面的生动性和交互感。</p><p>关键是要理解SVG路径的定义、CSS动画的原理和响应式设计的考虑。同时要注意保持代码的简洁性和功能的完整性，确保在不同设备和浏览器上都能正常显示。</p><p>希望这个教程能帮助用户更好地个性化自己的Hexo博客主题，创造出更加美观和独特的文章页面效果。</p><h2 id="相关链接">相关链接</h2><ul><li><a href="https://solitude.js.org/">Solitude主题官方文档</a></li><li><a href="https://hexo.io/">Hexo官方文档</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Paths">SVG路径教程</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Animations">CSS动画指南</a></li><li><a href="https://pugjs.org/api/getting-started.html">Pug模板语法</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 魔改教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 魔改教程 </tag>
            
            <tag> Solitude </tag>
            
            <tag> Hexo </tag>
            
            <tag> 动画效果 </tag>
            
            <tag> CSS </tag>
            
            <tag> SVG </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Solitude主题魔改教程(3)-ASCII码自定义修改</title>
      <link href="/2024/09/16/Solitude%E4%B8%BB%E9%A2%98%E9%AD%94%E6%94%B9%E6%95%99%E7%A8%8B(3)-ASCII%E7%A0%81%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BF%AE%E6%94%B9/"/>
      <url>/2024/09/16/Solitude%E4%B8%BB%E9%A2%98%E9%AD%94%E6%94%B9%E6%95%99%E7%A8%8B(3)-ASCII%E7%A0%81%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BF%AE%E6%94%B9/</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>在使用Solitude主题时，每次运行Hexo命令都会在终端显示主题的ASCII码Logo。新版本使用的是简单的圆点符号，而老版本使用的是更美观的Unicode字符。本教程将详细介绍如何自定义ASCII码显示，让终端启动界面更加个性化。</p><h2 id="问题描述">问题描述</h2><h3 id="现象">现象</h3><ul><li>运行 <code>hexo clean</code>、<code>hexo generate</code>、<code>hexo server</code> 等命令时</li><li>终端会显示Solitude主题的ASCII码Logo</li><li>新版本显示的是简单的圆点符号样式</li><li>老版本显示的是更美观的Unicode字符样式</li></ul><h3 id="当前版本显示效果">当前版本显示效果</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">=====================[ Hexo Theme - Solitude ]=====================</span><br><span class="line">       ●●●●●  ●●●●  ●     ●●●●●  ●●●●●● ●     ● ●●●●●●   ●●●●●●</span><br><span class="line">      ●      ●    ● ●       ●      ●    ●     ● ●      ● ●</span><br><span class="line">       ●●●●● ●    ● ●       ●      ●    ●     ● ●      ● ●●●●●●</span><br><span class="line">           ● ●    ● ●       ●      ●    ●     ● ●      ● ●</span><br><span class="line">      ●●●●●●  ●●●●  ●●●●● ●●●●●    ●      ●●●   ●●●●●●   ●●●●●●</span><br><span class="line">                         version: 3.0.19</span><br><span class="line">===================================================================</span><br><span class="line">         GitHub: https://github.com/everfu/hexo-theme-solitude</span><br></pre></td></tr></table></figure><h3 id="期望效果">期望效果</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">===================================================================</span><br><span class="line">        ███████╗██╗   ██╗███╗   ███╗███╗   ███╗███████╗██████╗ </span><br><span class="line">        ██╔════╝██║   ██║████╗ ████║████╗ ████║██╔════╝██╔══██╗</span><br><span class="line">        ███████╗██║   ██║██╔████╔██║██╔████╔██║█████╗  ██████╔╝</span><br><span class="line">        ╚════██║██║   ██║██║╚██╔╝██║██║╚██╔╝██║██╔══╝  ██╔══██╗</span><br><span class="line">        ███████║╚██████╔╝██║ ╚═╝ ██║██║ ╚═╝ ██║███████╗██║  ██║</span><br><span class="line">        ╚══════╝ ╚═════╝ ╚═╝     ╚═╝╚═╝     ╚═╝╚══════╝╚═╝  ╚═╝</span><br><span class="line">                            version: 3.0.19</span><br><span class="line">===================================================================</span><br><span class="line">GitHub: https://github.com/everfu/hexo-theme-solitude</span><br></pre></td></tr></table></figure><h2 id="问题分析">问题分析</h2><h3 id="根本原因">根本原因</h3><p>通过对比新版本和老版本的代码实现，发现了关键差异：</p><h4 id="新版本（当前实现）：">新版本（当前实现）：</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">hexo.<span class="title function_">on</span>(<span class="string">&#x27;ready&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; version &#125; = <span class="built_in">require</span>(<span class="string">&#x27;../../package.json&#x27;</span>)</span><br><span class="line">    <span class="keyword">const</span> logo = <span class="string">`</span></span><br><span class="line"><span class="string">       #####  ####  #     #####  ###### #     # ######   ######</span></span><br><span class="line"><span class="string">      #      #    # #       #      #    #     # #      # #</span></span><br><span class="line"><span class="string">       ##### #    # #       #      #    #     # #      # ######</span></span><br><span class="line"><span class="string">           # #    # #       #      #    #     # #      # #</span></span><br><span class="line"><span class="string">      ######  ####  ##### #####    #      ###   ######   ######</span></span><br><span class="line"><span class="string">    `</span>.<span class="title function_">replace</span>(<span class="regexp">/#/g</span>, <span class="string">&#x27;●&#x27;</span>)</span><br><span class="line">    <span class="keyword">const</span> message = <span class="string">`</span></span><br><span class="line"><span class="string">  \x1b[38;5;45m=====================[ Hexo Theme - Solitude ]=====================\x1b[0m</span></span><br><span class="line"><span class="string">  \x1b[38;5;45m<span class="subst">$&#123;logo&#125;</span>\x1b[0m</span></span><br><span class="line"><span class="string">                         \x1b[38;5;45m version: <span class="subst">$&#123;version&#125;</span>\x1b[0m</span></span><br><span class="line"><span class="string">  \x1b[38;5;45m===================================================================\x1b[0m</span></span><br><span class="line"><span class="string">         \x1b[38;5;45mGitHub: https://github.com/everfu/hexo-theme-solitude\x1b[0m</span></span><br><span class="line"><span class="string">  `</span></span><br><span class="line">    hexo.<span class="property">log</span>.<span class="title function_">info</span>(message)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="老版本（期望的实现）：">老版本（期望的实现）：</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">hexo.<span class="title function_">on</span>(<span class="string">&#x27;ready&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; version &#125; = <span class="built_in">require</span>(<span class="string">&#x27;../../package.json&#x27;</span>)</span><br><span class="line">    hexo.<span class="property">log</span>.<span class="title function_">info</span>(<span class="string">`</span></span><br><span class="line"><span class="string">  =====================[ Hexo Theme - Solitude ]=====================</span></span><br><span class="line"><span class="string">        ███████╗██╗   ██╗███╗   ███╗███╗   ███╗███████╗██████╗ </span></span><br><span class="line"><span class="string">        ██╔════╝██║   ██║████╗ ████║████╗ ████║██╔════╝██╔══██╗</span></span><br><span class="line"><span class="string">        ███████╗██║   ██║██╔████╔██║██╔████╔██║█████╗  ██████╔╝</span></span><br><span class="line"><span class="string">        ╚════██║██║   ██║██║╚██╔╝██║██║╚██╔╝██║██╔══╝  ██╔══██╗</span></span><br><span class="line"><span class="string">        ███████║╚██████╔╝██║ ╚═╝ ██║██║ ╚═╝ ██║███████╗██║  ██║</span></span><br><span class="line"><span class="string">        ╚══════╝ ╚═════╝ ╚═╝     ╚═╝╚═╝     ╚═╝╚══════╝╚═╝  ╚═╝</span></span><br><span class="line"><span class="string">                            <span class="subst">$&#123;version&#125;</span></span></span><br><span class="line"><span class="string">  ===================================================================</span></span><br><span class="line"><span class="string">  GitHub: https://github.com/everfu/hexo-theme-solitude</span></span><br><span class="line"><span class="string">  `</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="关键差异">关键差异</h3><ol><li><p><strong>字符样式不同</strong>：</p><ul><li>新版本：使用 <code>#</code> 字符 + <code>.replace(/#/g, '●')</code> 替换为圆点</li><li>老版本：直接使用Unicode字符 <code>█</code>、<code>╗</code>、<code>║</code> 等</li></ul></li><li><p><strong>颜色处理不同</strong>：</p><ul><li>新版本：使用ANSI颜色代码 <code>\x1b[38;5;45m</code> 和 <code>\x1b[0m</code></li><li>老版本：不使用颜色代码，保持默认颜色</li></ul></li><li><p><strong>布局结构不同</strong>：</p><ul><li>新版本：使用模板字符串拼接</li><li>老版本：使用多行字符串直接定义</li></ul></li></ol><h2 id="解决方案">解决方案</h2><h3 id="修改文件清单">修改文件清单</h3><ul><li><code>node_modules/hexo-theme-solitude/scripts/event/welcome.js</code> - 主题欢迎脚本文件</li></ul><h3 id="详细修改步骤">详细修改步骤</h3><h4 id="1-定位文件">1. 定位文件</h4><p><strong>文件路径：</strong> <code>node_modules/hexo-theme-solitude/scripts/event/welcome.js</code></p><p><strong>文件作用：</strong> 控制Hexo启动时终端显示的ASCII码Logo</p><h4 id="2-备份原文件">2. 备份原文件</h4><p>在修改前，建议备份原文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> node_modules/hexo-theme-solitude/scripts/event/welcome.js node_modules/hexo-theme-solitude/scripts/event/welcome.js.backup</span><br></pre></td></tr></table></figure><h4 id="3-修改文件内容">3. 修改文件内容</h4><p><strong>修改前：</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">hexo.<span class="title function_">on</span>(<span class="string">&#x27;ready&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; version &#125; = <span class="built_in">require</span>(<span class="string">&#x27;../../package.json&#x27;</span>)</span><br><span class="line">    <span class="keyword">const</span> logo = <span class="string">`</span></span><br><span class="line"><span class="string">       #####  ####  #     #####  ###### #     # ######   ######</span></span><br><span class="line"><span class="string">      #      #    # #       #      #    #     # #      # #</span></span><br><span class="line"><span class="string">       ##### #    # #       #      #    #     # #      # ######</span></span><br><span class="line"><span class="string">           # #    # #       #      #    #     # #      # #</span></span><br><span class="line"><span class="string">      ######  ####  ##### #####    #      ###   ######   ######</span></span><br><span class="line"><span class="string">    `</span>.<span class="title function_">replace</span>(<span class="regexp">/#/g</span>, <span class="string">&#x27;●&#x27;</span>)</span><br><span class="line">    <span class="keyword">const</span> message = <span class="string">`</span></span><br><span class="line"><span class="string">  \x1b[38;5;45m=====================[ Hexo Theme - Solitude ]=====================\x1b[0m</span></span><br><span class="line"><span class="string">  \x1b[38;5;45m<span class="subst">$&#123;logo&#125;</span>\x1b[0m</span></span><br><span class="line"><span class="string">                         \x1b[38;5;45m version: <span class="subst">$&#123;version&#125;</span>\x1b[0m</span></span><br><span class="line"><span class="string">  \x1b[38;5;45m===================================================================\x1b[0m</span></span><br><span class="line"><span class="string">         \x1b[38;5;45mGitHub: https://github.com/everfu/hexo-theme-solitude\x1b[0m</span></span><br><span class="line"><span class="string">  `</span></span><br><span class="line">    hexo.<span class="property">log</span>.<span class="title function_">info</span>(message)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><strong>修改后：</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">hexo.<span class="title function_">on</span>(<span class="string">&#x27;ready&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; version &#125; = <span class="built_in">require</span>(<span class="string">&#x27;../../package.json&#x27;</span>)</span><br><span class="line">    hexo.<span class="property">log</span>.<span class="title function_">info</span>(<span class="string">`</span></span><br><span class="line"><span class="string">  ===================================================================</span></span><br><span class="line"><span class="string">        ███████╗██╗   ██╗███╗   ███╗███╗   ███╗███████╗██████╗ </span></span><br><span class="line"><span class="string">        ██╔════╝██║   ██║████╗ ████║████╗ ████║██╔════╝██╔══██╗</span></span><br><span class="line"><span class="string">        ███████╗██║   ██║██╔████╔██║██╔████╔██║█████╗  ██████╔╝</span></span><br><span class="line"><span class="string">        ╚════██║██║   ██║██║╚██╔╝██║██║╚██╔╝██║██╔══╝  ██╔══██╗</span></span><br><span class="line"><span class="string">        ███████║╚██████╔╝██║ ╚═╝ ██║██║ ╚═╝ ██║███████╗██║  ██║</span></span><br><span class="line"><span class="string">        ╚══════╝ ╚═════╝ ╚═╝     ╚═╝╚═╝     ╚═╝╚══════╝╚═╝  ╚═╝</span></span><br><span class="line"><span class="string">                            <span class="subst">$&#123;version&#125;</span></span></span><br><span class="line"><span class="string">  ===================================================================</span></span><br><span class="line"><span class="string">  GitHub: https://github.com/everfu/hexo-theme-solitude</span></span><br><span class="line"><span class="string">  `</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="修改说明">修改说明</h3><ol><li><p><strong>移除颜色代码</strong>：</p><ul><li>删除 <code>\x1b[38;5;45m</code> 和 <code>\x1b[0m</code> 颜色控制代码</li><li>使用默认终端颜色，提高兼容性</li></ul></li><li><p><strong>替换字符样式</strong>：</p><ul><li>将圆点符号 <code>●</code> 替换为Unicode字符</li><li>使用 <code>█</code>、<code>╗</code>、<code>║</code>、<code>╝</code>、<code>╚</code> 等字符创建更美观的Logo</li></ul></li><li><p><strong>简化代码结构</strong>：</p><ul><li>移除 <code>logo</code> 变量和 <code>message</code> 变量</li><li>直接使用 <code>hexo.log.info()</code> 输出多行字符串</li></ul></li><li><p><strong>保持功能完整</strong>：</p><ul><li>保留版本号显示 <code>$&#123;version&#125;</code></li><li>保留GitHub链接信息</li></ul></li></ol><h2 id="自定义扩展">自定义扩展</h2><h3 id="1-使用在线ASCII生成器">1. 使用在线ASCII生成器</h3><p>如果想要使用其他样式的ASCII码，可以使用在线工具：</p><p><strong>推荐网站：</strong></p><ul><li><a href="https://patorjk.com/software/taag/">ASCII Art Generator</a></li><li><a href="https://www.ascii-art-generator.org/">Text to ASCII Art Generator</a></li></ul><p><strong>使用步骤：</strong></p><ol><li>访问ASCII生成器网站</li><li>输入 “SOLITUDE” 或其他文字</li><li>选择合适的字体样式</li><li>复制生成的ASCII码</li><li>替换到welcome.js文件中</li></ol><h3 id="2-添加颜色支持">2. 添加颜色支持</h3><p>如果想要保持颜色效果，可以这样修改：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">hexo.<span class="title function_">on</span>(<span class="string">&#x27;ready&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; version &#125; = <span class="built_in">require</span>(<span class="string">&#x27;../../package.json&#x27;</span>)</span><br><span class="line">    hexo.<span class="property">log</span>.<span class="title function_">info</span>(<span class="string">`</span></span><br><span class="line"><span class="string">  \x1b[38;5;45m===================================================================\x1b[0m</span></span><br><span class="line"><span class="string">        \x1b[38;5;45m███████╗██╗   ██╗███╗   ███╗███╗   ███╗███████╗██████╗ \x1b[0m</span></span><br><span class="line"><span class="string">        \x1b[38;5;45m██╔════╝██║   ██║████╗ ████║████╗ ████║██╔════╝██╔══██╗\x1b[0m</span></span><br><span class="line"><span class="string">        \x1b[38;5;45m███████╗██║   ██║██╔████╔██║██╔████╔██║█████╗  ██████╔╝\x1b[0m</span></span><br><span class="line"><span class="string">        \x1b[38;5;45m╚════██║██║   ██║██║╚██╔╝██║██║╚██╔╝██║██╔══╝  ██╔══██╗\x1b[0m</span></span><br><span class="line"><span class="string">        \x1b[38;5;45m███████║╚██████╔╝██║ ╚═╝ ██║██║ ╚═╝ ██║███████╗██║  ██║\x1b[0m</span></span><br><span class="line"><span class="string">        \x1b[38;5;45m╚══════╝ ╚═════╝ ╚═╝     ╚═╝╚═╝     ╚═╝╚══════╝╚═╝  ╚═╝\x1b[0m</span></span><br><span class="line"><span class="string">                            \x1b[38;5;45m<span class="subst">$&#123;version&#125;</span>\x1b[0m</span></span><br><span class="line"><span class="string">  \x1b[38;5;45m===================================================================\x1b[0m</span></span><br><span class="line"><span class="string">         \x1b[38;5;45mGitHub: https://github.com/everfu/hexo-theme-solitude\x1b[0m</span></span><br><span class="line"><span class="string">  `</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="3-添加动画效果">3. 添加动画效果</h3><p>如果想要添加简单的动画效果，可以使用：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">hexo.<span class="title function_">on</span>(<span class="string">&#x27;ready&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; version &#125; = <span class="built_in">require</span>(<span class="string">&#x27;../../package.json&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 简单的加载动画</span></span><br><span class="line">    <span class="keyword">const</span> frames = [<span class="string">&#x27;⠋&#x27;</span>, <span class="string">&#x27;⠙&#x27;</span>, <span class="string">&#x27;⠹&#x27;</span>, <span class="string">&#x27;⠸&#x27;</span>, <span class="string">&#x27;⠼&#x27;</span>, <span class="string">&#x27;⠴&#x27;</span>, <span class="string">&#x27;⠦&#x27;</span>, <span class="string">&#x27;⠧&#x27;</span>, <span class="string">&#x27;⠇&#x27;</span>, <span class="string">&#x27;⠏&#x27;</span>]</span><br><span class="line">    <span class="keyword">let</span> i = <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">const</span> interval = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        process.<span class="property">stdout</span>.<span class="title function_">write</span>(<span class="string">`\r<span class="subst">$&#123;frames[i]&#125;</span> Loading Solitude Theme...`</span>)</span><br><span class="line">        i = (i + <span class="number">1</span>) % frames.<span class="property">length</span></span><br><span class="line">    &#125;, <span class="number">80</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">clearInterval</span>(interval)</span><br><span class="line">        process.<span class="property">stdout</span>.<span class="title function_">write</span>(<span class="string">&#x27;\r&#x27;</span>)</span><br><span class="line">        hexo.<span class="property">log</span>.<span class="title function_">info</span>(<span class="string">`</span></span><br><span class="line"><span class="string">  ===================================================================</span></span><br><span class="line"><span class="string">        ███████╗██╗   ██╗███╗   ███╗███╗   ███╗███████╗██████╗ </span></span><br><span class="line"><span class="string">        ██╔════╝██║   ██║████╗ ████║████╗ ████║██╔════╝██╔══██╗</span></span><br><span class="line"><span class="string">        ███████╗██║   ██║██╔████╔██║██╔████╔██║█████╗  ██████╔╝</span></span><br><span class="line"><span class="string">        ╚════██║██║   ██║██║╚██╔╝██║██║╚██╔╝██║██╔══╝  ██╔══██╗</span></span><br><span class="line"><span class="string">        ███████║╚██████╔╝██║ ╚═╝ ██║██║ ╚═╝ ██║███████╗██║  ██║</span></span><br><span class="line"><span class="string">        ╚══════╝ ╚═════╝ ╚═╝     ╚═╝╚═╝     ╚═╝╚══════╝╚═╝  ╚═╝</span></span><br><span class="line"><span class="string">                            <span class="subst">$&#123;version&#125;</span></span></span><br><span class="line"><span class="string">  ===================================================================</span></span><br><span class="line"><span class="string">  GitHub: https://github.com/everfu/hexo-theme-solitude</span></span><br><span class="line"><span class="string">  `</span>)</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="效果对比">效果对比</h2><h3 id="修改前">修改前</h3><ul><li>❌ 使用简单的圆点符号</li><li>❌ 颜色代码可能在某些终端不兼容</li><li>❌ 视觉效果较为单调</li></ul><h3 id="修改后">修改后</h3><ul><li>✅ 使用美观的Unicode字符</li><li>✅ 兼容性更好，不依赖颜色代码</li><li>✅ 视觉效果更加专业</li><li>✅ 保持功能完整性</li></ul><h2 id="技术要点">技术要点</h2><h3 id="Unicode字符的使用">Unicode字符的使用</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 常用的Unicode字符</span></span><br><span class="line"><span class="string">&#x27;█&#x27;</span>  <span class="comment">// 实心方块</span></span><br><span class="line"><span class="string">&#x27;╗&#x27;</span>  <span class="comment">// 右上角</span></span><br><span class="line"><span class="string">&#x27;║&#x27;</span>  <span class="comment">// 竖线</span></span><br><span class="line"><span class="string">&#x27;╝&#x27;</span>  <span class="comment">// 右下角</span></span><br><span class="line"><span class="string">&#x27;╚&#x27;</span>  <span class="comment">// 左下角</span></span><br><span class="line"><span class="string">&#x27;═&#x27;</span>  <span class="comment">// 双横线</span></span><br></pre></td></tr></table></figure><h3 id="多行字符串的格式化">多行字符串的格式化</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">hexo.<span class="property">log</span>.<span class="title function_">info</span>(<span class="string">`</span></span><br><span class="line"><span class="string">  第一行内容</span></span><br><span class="line"><span class="string">  第二行内容</span></span><br><span class="line"><span class="string">  第三行内容</span></span><br><span class="line"><span class="string">`</span>)</span><br></pre></td></tr></table></figure><h3 id="版本号动态获取">版本号动态获取</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; version &#125; = <span class="built_in">require</span>(<span class="string">&#x27;../../package.json&#x27;</span>)</span><br><span class="line"><span class="comment">// 自动获取主题版本号</span></span><br></pre></td></tr></table></figure><h2 id="注意事项">注意事项</h2><ol><li><p><strong>文件位置</strong>：</p><ul><li>修改的是 <code>node_modules</code> 中的文件</li><li>重新安装依赖时会丢失修改</li><li>建议备份修改后的文件</li></ul></li><li><p><strong>字符编码</strong>：</p><ul><li>确保终端支持Unicode字符显示</li><li>某些老旧终端可能显示异常</li></ul></li><li><p><strong>兼容性</strong>：</p><ul><li>移除颜色代码提高兼容性</li><li>在不同操作系统下测试效果</li></ul></li><li><p><strong>备份建议</strong>：</p><ul><li>修改前备份原文件</li><li>记录修改内容便于恢复</li></ul></li></ol><h2 id="总结">总结</h2><p>通过这次修改，我们成功将Solitude主题的ASCII码Logo从简单的圆点符号升级为美观的Unicode字符样式。这个修改不仅提升了视觉效果，还提高了终端显示的兼容性。</p><p>关键是要理解ASCII码的生成原理和Unicode字符的使用方法，同时要注意保持代码的简洁性和功能的完整性。希望这个教程能帮助用户更好地个性化自己的Hexo博客主题。</p><h2 id="相关链接">相关链接</h2><ul><li><a href="https://solitude.js.org/">Solitude主题官方文档</a></li><li><a href="https://hexo.io/">Hexo官方文档</a></li><li><a href="https://patorjk.com/software/taag/">ASCII Art Generator</a></li><li><a href="https://unicode-table.com/">Unicode字符表</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 魔改教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 魔改教程 </tag>
            
            <tag> Solitude </tag>
            
            <tag> Hexo </tag>
            
            <tag> ASCII </tag>
            
            <tag> 终端美化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Solitude主题魔改教程(2)-背景图片透明度问题修复</title>
      <link href="/2024/09/09/Solitude%E4%B8%BB%E9%A2%98%E9%AD%94%E6%94%B9%E6%95%99%E7%A8%8B(2)-%E8%83%8C%E6%99%AF%E5%9B%BE%E7%89%87%E9%80%8F%E6%98%8E%E5%BA%A6%E9%97%AE%E9%A2%98%E4%BF%AE%E5%A4%8D/"/>
      <url>/2024/09/09/Solitude%E4%B8%BB%E9%A2%98%E9%AD%94%E6%94%B9%E6%95%99%E7%A8%8B(2)-%E8%83%8C%E6%99%AF%E5%9B%BE%E7%89%87%E9%80%8F%E6%98%8E%E5%BA%A6%E9%97%AE%E9%A2%98%E4%BF%AE%E5%A4%8D/</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>在使用Solitude主题的新版本时，发现背景图片功能存在透明度问题：当开启背景功能并设置透明度时，不仅背景图片变透明，整个页面的内容也跟着变透明了。本教程将详细分析这个问题的原因，并提供正确的解决方案。</p><h2 id="问题描述">问题描述</h2><h3 id="现象">现象</h3><ul><li>开启背景功能后，设置透明度（如 <code>opacity: 0.5</code>）</li><li>背景图片正确显示，但页面内容（文字、卡片等）也变透明了</li><li>老版本中只有背景图片变透明，页面内容保持不透明</li></ul><h3 id="影响">影响</h3><ol><li><strong>可读性降低</strong>：页面内容变透明导致文字难以阅读</li><li><strong>用户体验差</strong>：视觉效果不符合预期</li><li><strong>功能异常</strong>：背景功能无法正常使用</li></ol><h2 id="问题分析">问题分析</h2><h3 id="根本原因">根本原因</h3><p>通过对比老版本和新版本的CSS实现，发现了关键差异：</p><h4 id="老版本（正确的实现）：">老版本（正确的实现）：</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="built_in">hexo-config</span>(<span class="string">&#x27;background.enable&#x27;</span>)</span><br><span class="line">  <span class="selector-id">#global_bg</span></span><br><span class="line">    <span class="attribute">position</span> fixed</span><br><span class="line">    <span class="attribute">z-index</span> -<span class="number">1</span> // 将背景放到所有内容之下</span><br><span class="line">    <span class="attribute">width</span> <span class="number">100%</span></span><br><span class="line">    <span class="attribute">height</span> <span class="number">100%</span></span><br><span class="line">    <span class="attribute">pointer-events</span> none</span><br><span class="line">    <span class="selector-pseudo">&amp;::before</span></span><br><span class="line">      <span class="attribute">content</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">      <span class="attribute">position</span> absolute</span><br><span class="line">      <span class="attribute">top</span> <span class="number">0</span></span><br><span class="line">      <span class="attribute">left</span> <span class="number">0</span></span><br><span class="line">      <span class="attribute">width</span> <span class="number">100%</span></span><br><span class="line">      <span class="attribute">height</span> <span class="number">100%</span></span><br><span class="line">      <span class="attribute">background-image</span> <span class="built_in">url</span>(<span class="built_in">hexo-config</span>(<span class="string">&#x27;background.light&#x27;</span>))</span><br><span class="line">      <span class="attribute">background-size</span> cover</span><br><span class="line">      <span class="attribute">background-position</span> center</span><br><span class="line">      <span class="attribute">background-repeat</span> no-repeat</span><br><span class="line">      <span class="attribute">opacity</span> <span class="built_in">hexo-config</span>(<span class="string">&#x27;background.opacity&#x27;</span>) // 背景透明度独立</span><br><span class="line">      <span class="attribute">transition</span> opacity <span class="number">0.3s</span> ease</span><br></pre></td></tr></table></figure><h4 id="新版本（有问题的实现）：">新版本（有问题的实现）：</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="built_in">hexo-config</span>(<span class="string">&#x27;background.enable&#x27;</span>)</span><br><span class="line">  <span class="selector-id">#global_bg</span></span><br><span class="line">    <span class="attribute">position</span> fixed</span><br><span class="line">    <span class="attribute">z-index</span> <span class="number">999</span> // 背景层级太高</span><br><span class="line">    <span class="attribute">opacity</span> <span class="built_in">hexo-config</span>(<span class="string">&#x27;background.opacity&#x27;</span>) // 整个元素都透明了</span><br><span class="line">    <span class="attribute">width</span> <span class="number">100%</span></span><br><span class="line">    <span class="attribute">height</span> <span class="number">100%</span></span><br><span class="line">    <span class="attribute">background-image</span> <span class="built_in">url</span>(<span class="built_in">hexo-config</span>(<span class="string">&#x27;background.light&#x27;</span>))</span><br><span class="line">    <span class="attribute">background-size</span> cover</span><br><span class="line">    <span class="attribute">background-position</span> center</span><br><span class="line">    <span class="attribute">pointer-events</span> none</span><br><span class="line">    <span class="attribute">background-repeat</span> no-repeat</span><br></pre></td></tr></table></figure><h3 id="关键差异">关键差异</h3><ol><li><p><strong>z-index层级错误</strong>：</p><ul><li>老版本：<code>z-index: -1</code>（背景在内容下方）</li><li>新版本：<code>z-index: 999</code>（背景在内容上方）</li></ul></li><li><p><strong>透明度应用位置错误</strong>：</p><ul><li>老版本：只对 <code>::before</code> 伪元素应用透明度</li><li>新版本：对整个背景元素应用透明度</li></ul></li><li><p><strong>实现方式不同</strong>：</p><ul><li>老版本：使用 <code>::before</code> 伪元素设置背景</li><li>新版本：直接设置背景</li></ul></li></ol><h2 id="解决方案">解决方案</h2><h3 id="修改文件清单">修改文件清单</h3><ul><li><code>node_modules/hexo-theme-solitude/source/css/_global/index.styl</code> - 主题CSS文件</li><li><code>_config.solitude.yml</code> - 主题配置文件</li></ul><h3 id="详细修改步骤">详细修改步骤</h3><h4 id="1-修改CSS文件">1. 修改CSS文件</h4><p><strong>文件路径：</strong> <code>node_modules/hexo-theme-solitude/source/css/_global/index.styl</code></p><p><strong>修改位置：</strong> 背景相关的CSS代码（约第446行）</p><p><strong>修改前：</strong></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="built_in">hexo-config</span>(<span class="string">&#x27;background.enable&#x27;</span>)</span><br><span class="line">  <span class="selector-id">#global_bg</span></span><br><span class="line">    <span class="attribute">position</span> fixed</span><br><span class="line">    <span class="attribute">z-index</span> <span class="number">999</span></span><br><span class="line">    <span class="attribute">opacity</span> <span class="built_in">hexo-config</span>(<span class="string">&#x27;background.opacity&#x27;</span>)</span><br><span class="line">    <span class="attribute">width</span> <span class="number">100%</span></span><br><span class="line">    <span class="attribute">height</span> <span class="number">100%</span></span><br><span class="line">    <span class="attribute">background-image</span> <span class="built_in">url</span>(<span class="built_in">hexo-config</span>(<span class="string">&#x27;background.light&#x27;</span>))</span><br><span class="line">    <span class="attribute">background-size</span> cover</span><br><span class="line">    <span class="attribute">background-position</span> center</span><br><span class="line">    <span class="attribute">pointer-events</span> none</span><br><span class="line">    <span class="attribute">background-repeat</span> no-repeat</span><br><span class="line"></span><br><span class="line">    <span class="selector-attr">[data-theme=dark]</span> &amp;</span><br><span class="line">      <span class="attribute">background-image</span> <span class="built_in">url</span>(<span class="built_in">hexo-config</span>(<span class="string">&#x27;background.dark&#x27;</span>))</span><br></pre></td></tr></table></figure><p><strong>修改后：</strong></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="built_in">hexo-config</span>(<span class="string">&#x27;background.enable&#x27;</span>)</span><br><span class="line">  <span class="selector-id">#global_bg</span></span><br><span class="line">    <span class="attribute">position</span> fixed</span><br><span class="line">    <span class="attribute">z-index</span> -<span class="number">1</span> // 将背景放到所有内容之下</span><br><span class="line">    <span class="attribute">width</span> <span class="number">100%</span></span><br><span class="line">    <span class="attribute">height</span> <span class="number">100%</span></span><br><span class="line">    <span class="attribute">pointer-events</span> none</span><br><span class="line">    <span class="selector-pseudo">&amp;::before</span></span><br><span class="line">      <span class="attribute">content</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">      <span class="attribute">position</span> absolute</span><br><span class="line">      <span class="attribute">top</span> <span class="number">0</span></span><br><span class="line">      <span class="attribute">left</span> <span class="number">0</span></span><br><span class="line">      <span class="attribute">width</span> <span class="number">100%</span></span><br><span class="line">      <span class="attribute">height</span> <span class="number">100%</span></span><br><span class="line">      <span class="attribute">background-image</span> <span class="built_in">url</span>(<span class="built_in">hexo-config</span>(<span class="string">&#x27;background.light&#x27;</span>)) // 默认背景图片</span><br><span class="line">      <span class="attribute">background-size</span> cover</span><br><span class="line">      <span class="attribute">background-position</span> center</span><br><span class="line">      <span class="attribute">background-repeat</span> no-repeat</span><br><span class="line">      <span class="attribute">opacity</span> <span class="built_in">hexo-config</span>(<span class="string">&#x27;background.opacity&#x27;</span>) // 背景透明度独立</span><br><span class="line">      <span class="attribute">transition</span> opacity <span class="number">0.3s</span> ease // 添加平滑过渡效果</span><br><span class="line"></span><br><span class="line">    <span class="selector-attr">[data-theme=dark]</span> <span class="selector-pseudo">&amp;::before</span></span><br><span class="line">      <span class="attribute">background-image</span> <span class="built_in">url</span>(<span class="built_in">hexo-config</span>(<span class="string">&#x27;background.dark&#x27;</span>)) // 暗色模式背景图片</span><br></pre></td></tr></table></figure><h4 id="2-修改配置文件">2. 修改配置文件</h4><p><strong>文件路径：</strong> <code>_config.solitude.yml</code></p><p><strong>修改位置：</strong> <code>background</code> 部分</p><p><strong>修改前：</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">background:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">opacity:</span> <span class="number">.5</span></span><br><span class="line">  <span class="attr">dark:</span> <span class="string">https://i.imgur.com/aX0Isw8.png</span></span><br><span class="line">  <span class="attr">light:</span> <span class="string">https://i.imgur.com/P6NLpMD.jpeg</span></span><br></pre></td></tr></table></figure><p><strong>修改后：</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">background:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">opacity:</span> <span class="number">0.5</span></span><br><span class="line">  <span class="attr">dark:</span> <span class="string">https://i.imgur.com/aX0Isw8.png</span></span><br><span class="line">  <span class="attr">light:</span> <span class="string">https://i.imgur.com/P6NLpMD.jpeg</span></span><br></pre></td></tr></table></figure><h3 id="修改说明">修改说明</h3><ol><li><p><strong>z-index调整</strong>：</p><ul><li>从 <code>999</code> 改为 <code>-1</code>，确保背景在页面内容下方</li></ul></li><li><p><strong>使用伪元素</strong>：</p><ul><li>改用 <code>::before</code> 伪元素来设置背景</li><li>只对背景图片应用透明度，不影响页面内容</li></ul></li><li><p><strong>添加过渡效果</strong>：</p><ul><li>增加 <code>transition opacity 0.3s ease</code> 实现平滑的透明度变化</li></ul></li><li><p><strong>开启背景功能</strong>：</p><ul><li>将 <code>enable</code> 设置为 <code>true</code></li></ul></li></ol><h2 id="效果对比">效果对比</h2><h3 id="修改前">修改前</h3><ul><li>❌ 页面内容变透明</li><li>❌ 文字难以阅读</li><li>❌ 背景层级错误</li></ul><h3 id="修改后">修改后</h3><ul><li>✅ 只有背景图片变透明</li><li>✅ 页面内容保持不透明</li><li>✅ 文字清晰可读</li><li>✅ 背景正确显示在内容下方</li></ul><h2 id="技术要点">技术要点</h2><h3 id="CSS伪元素的使用">CSS伪元素的使用</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-pseudo">&amp;::before</span></span><br><span class="line">  <span class="attribute">content</span> <span class="string">&#x27;&#x27;</span>           // 创建伪元素</span><br><span class="line">  <span class="attribute">position</span> absolute    // 绝对定位</span><br><span class="line">  <span class="attribute">opacity</span> <span class="number">0.5</span>         // 只对背景应用透明度</span><br></pre></td></tr></table></figure><h3 id="z-index层级管理">z-index层级管理</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">z-index</span> -<span class="number">1</span>            // 确保背景在最底层</span><br></pre></td></tr></table></figure><h3 id="透明度独立控制">透明度独立控制</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">opacity</span> <span class="built_in">hexo-config</span>(<span class="string">&#x27;background.opacity&#x27;</span>)  // 只影响背景图片</span><br></pre></td></tr></table></figure><h2 id="总结">总结</h2><p>通过这次修改，我们成功解决了Solitude主题新版本中背景图片透明度的问题。关键是要理解CSS中层级和透明度的应用方式，确保背景图片的透明度只影响背景本身，而不影响页面内容。</p><p>这种修改方式保持了与老版本的兼容性，同时提供了更好的用户体验。希望这个教程能帮助遇到类似问题的用户快速解决问题。</p><h2 id="相关链接">相关链接</h2><ul><li><a href="https://solitude.js.org/">Solitude主题官方文档</a></li><li><a href="https://hexo.io/">Hexo官方文档</a></li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/Pseudo-elements">CSS伪元素教程</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 魔改教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 魔改教程 </tag>
            
            <tag> Solitude </tag>
            
            <tag> Hexo </tag>
            
            <tag> 前端开发 </tag>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Solitude主题魔改教程(1)-首页右侧推荐卡片支持视频显示</title>
      <link href="/2024/09/02/Solitude%E4%B8%BB%E9%A2%98%E9%AD%94%E6%94%B9%E6%95%99%E7%A8%8B(1)-%E9%A6%96%E9%A1%B5%E5%8F%B3%E4%BE%A7%E6%8E%A8%E8%8D%90%E5%8D%A1%E7%89%87%E6%94%AF%E6%8C%81%E8%A7%86%E9%A2%91%E6%98%BE%E7%A4%BA/"/>
      <url>/2024/09/02/Solitude%E4%B8%BB%E9%A2%98%E9%AD%94%E6%94%B9%E6%95%99%E7%A8%8B(1)-%E9%A6%96%E9%A1%B5%E5%8F%B3%E4%BE%A7%E6%8E%A8%E8%8D%90%E5%8D%A1%E7%89%87%E6%94%AF%E6%8C%81%E8%A7%86%E9%A2%91%E6%98%BE%E7%A4%BA/</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>在Solitude主题中，首页的推荐卡片（recommendList）默认只支持图片背景。本教程将介绍如何扩展这个功能，使其支持视频背景，让推荐卡片更加生动有趣。</p><h2 id="修改理由">修改理由</h2><ol><li><strong>增强视觉效果</strong>：视频比静态图片更能吸引用户注意力</li><li><strong>提升用户体验</strong>：动态内容让网站更加现代化</li><li><strong>保持兼容性</strong>：保留原有的图片功能，同时添加视频支持</li><li><strong>灵活配置</strong>：通过配置文件轻松切换图片/视频模式</li></ol><h2 id="修改文件清单">修改文件清单</h2><ul><li><code>_config.solitude.yml</code> - 主题配置文件</li><li><code>node_modules/hexo-theme-solitude/layout/includes/widgets/home/topGroup.pug</code> - 推荐卡片模板文件</li></ul><h2 id="详细修改步骤">详细修改步骤</h2><h3 id="1-修改配置文件">1. 修改配置文件</h3><p><strong>文件路径：</strong> <code>_config.solitude.yml</code></p><p><strong>修改位置：</strong> <code>hometop.recommendList</code> 部分</p><h4 id="修改前：">修改前：</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">recommendList:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">sup:</span> <span class="string">置顶</span></span><br><span class="line">  <span class="attr">title:</span> <span class="string">Solitude</span> <span class="string">官方文档</span></span><br><span class="line">  <span class="attr">url:</span> <span class="string">https://solitude.js.org/</span></span><br><span class="line">  <span class="attr">img:</span> <span class="string">/img/default.avif</span></span><br><span class="line">  <span class="attr">color:</span> <span class="string">&quot;none&quot;</span></span><br></pre></td></tr></table></figure><h4 id="修改后：">修改后：</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例配置：</span></span><br><span class="line"><span class="comment"># 图片模式：</span></span><br><span class="line"><span class="comment">#   type: image</span></span><br><span class="line"><span class="comment">#   img: /img/default.avif</span></span><br><span class="line"><span class="comment">#   media: (留空)</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 视频模式：</span></span><br><span class="line"><span class="comment">#   type: video</span></span><br><span class="line"><span class="comment">#   img: (可选，作为视频加载失败时的备用图片)</span></span><br><span class="line"><span class="comment">#   media: /mp4/recommend-banner/recommend-banner7.mp4</span></span><br><span class="line"><span class="attr">recommendList:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">sup:</span> <span class="string">置顶</span></span><br><span class="line">  <span class="attr">title:</span> <span class="string">Solitude</span> <span class="string">官方文档</span></span><br><span class="line">  <span class="attr">url:</span> <span class="string">https://solitude.js.org/</span></span><br><span class="line">  <span class="attr">img:</span> <span class="string">/img/default.avif</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">video</span> <span class="comment"># image / video</span></span><br><span class="line">  <span class="attr">media:</span> <span class="string">/mp4/recommend-banner/recommend-banner7.mp4</span> <span class="comment"># 视频文件路径，当type为video时使用，例如：/mp4/recommend-banner/recommend-banner7.mp4</span></span><br><span class="line">  <span class="attr">color:</span> <span class="string">&quot;none&quot;</span></span><br></pre></td></tr></table></figure><h4 id="配置说明：">配置说明：</h4><ul><li><code>type</code>: 设置显示类型，支持 <code>image</code>（图片）和 <code>video</code>（视频）</li><li><code>media</code>: 当 <code>type</code> 为 <code>video</code> 时，指定视频文件路径</li><li><code>img</code>: 图片路径，在图片模式下使用，视频模式下可作为备用图片</li></ul><h3 id="2-修改模板文件">2. 修改模板文件</h3><p><strong>文件路径：</strong> <code>node_modules/hexo-theme-solitude/layout/includes/widgets/home/topGroup.pug</code></p><p><strong>修改位置：</strong> <code>todayCardContent</code> mixin 中的封面显示部分</p><h4 id="修改前：-2">修改前：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mixin todayCardContent</span><br><span class="line">    .todayCard-info</span><br><span class="line">        .todayCard-tips= theme.hometop.recommendList.sup</span><br><span class="line">        .todayCard-title= theme.hometop.recommendList.title</span><br><span class="line">    .todayCard-cover.nolazyload(style=`background: url(&#x27;$&#123;theme.hometop.recommendList.img&#125;&#x27;) no-repeat center /cover`)</span><br><span class="line">    if filteredPosts.length &gt; 0</span><br><span class="line">        .banner-button-group</span><br><span class="line">            a.banner-button(onclick=&quot;window.event.cancelBubble=true;sco.hideTodayCard();&quot;)</span><br><span class="line">                i.solitude.fas.fa-circle-plus</span><br><span class="line">                span.banner-button-text= _p(&#x27;home.recommendmore&#x27;)</span><br></pre></td></tr></table></figure><h4 id="修改后：-2">修改后：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">mixin todayCardContent</span><br><span class="line">    .todayCard-info</span><br><span class="line">        .todayCard-tips= theme.hometop.recommendList.sup</span><br><span class="line">        .todayCard-title= theme.hometop.recommendList.title</span><br><span class="line"></span><br><span class="line">    if theme.hometop.recommendList.type === &#x27;video&#x27;</span><br><span class="line">        .todayCard-cover.nolazyload</span><br><span class="line">            video.todayCard-video(</span><br><span class="line">                src=theme.hometop.recommendList.media, </span><br><span class="line">                autoplay=true, </span><br><span class="line">                loop=true, </span><br><span class="line">                muted=true, </span><br><span class="line">                playsinline=true, </span><br><span class="line">                style=&quot;width: 100%; height: 100%; object-fit: cover;&quot;)</span><br><span class="line">    else</span><br><span class="line">        .todayCard-cover.nolazyload(style=`background: url(&#x27;$&#123;theme.hometop.recommendList.img&#125;&#x27;) no-repeat center /cover`)</span><br><span class="line"></span><br><span class="line">    if filteredPosts.length &gt; 0</span><br><span class="line">        .banner-button-group</span><br><span class="line">            a.banner-button(onclick=&quot;window.event.cancelBubble=true;sco.hideTodayCard();&quot;)</span><br><span class="line">                i.solitude.fas.fa-circle-plus</span><br><span class="line">                span.banner-button-text= _p(&#x27;home.recommendmore&#x27;)</span><br></pre></td></tr></table></figure><h4 id="代码说明：">代码说明：</h4><ol><li><strong>条件判断</strong>：使用 <code>if theme.hometop.recommendList.type === 'video'</code> 判断显示类型</li><li><strong>视频播放器</strong>：当类型为视频时，使用 <code>&lt;video&gt;</code> 标签显示视频</li><li><strong>视频属性</strong>：<ul><li><code>autoplay=true</code>：自动播放</li><li><code>loop=true</code>：循环播放</li><li><code>muted=true</code>：静音播放（浏览器要求自动播放必须静音）</li><li><code>playsinline=true</code>：内联播放，适配移动端</li><li><code>object-fit: cover</code>：保持视频比例并填充容器</li></ul></li></ol><h2 id="使用方法">使用方法</h2><h3 id="图片模式配置">图片模式配置</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">recommendList:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">sup:</span> <span class="string">置顶</span></span><br><span class="line">  <span class="attr">title:</span> <span class="string">我的博客</span></span><br><span class="line">  <span class="attr">url:</span> <span class="string">https://example.com</span></span><br><span class="line">  <span class="attr">img:</span> <span class="string">/img/banner.jpg</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">image</span></span><br><span class="line">  <span class="attr">media:</span> <span class="comment"># 留空</span></span><br><span class="line">  <span class="attr">color:</span> <span class="string">&quot;none&quot;</span></span><br></pre></td></tr></table></figure><h3 id="视频模式配置">视频模式配置</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">recommendList:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">sup:</span> <span class="string">置顶</span></span><br><span class="line">  <span class="attr">title:</span> <span class="string">我的博客</span></span><br><span class="line">  <span class="attr">url:</span> <span class="string">https://example.com</span></span><br><span class="line">  <span class="attr">img:</span> <span class="string">/img/banner.jpg</span> <span class="comment"># 可选，作为备用图片</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">video</span></span><br><span class="line">  <span class="attr">media:</span> <span class="string">/mp4/banner-video.mp4</span></span><br><span class="line">  <span class="attr">color:</span> <span class="string">&quot;none&quot;</span></span><br></pre></td></tr></table></figure><h2 id="注意事项">注意事项</h2><ol><li><strong>视频格式</strong>：建议使用 MP4 格式，兼容性最好</li><li><strong>文件大小</strong>：视频文件不宜过大，建议压缩到合理大小</li><li><strong>自动播放限制</strong>：现代浏览器要求自动播放的视频必须静音</li><li><strong>移动端适配</strong>：使用 <code>playsinline</code> 属性确保在移动端正常播放</li><li><strong>备用方案</strong>：建议在视频模式下也设置 <code>img</code> 作为加载失败时的备用图片</li></ol><h2 id="效果预览">效果预览</h2><p>修改完成后，推荐卡片将根据配置显示不同的内容：</p><ul><li><strong>图片模式</strong>：显示静态背景图片</li><li><strong>视频模式</strong>：显示自动播放的循环视频</li></ul><h2 id="总结">总结</h2><p>通过这次魔改，我们成功为Solitude主题的推荐卡片功能添加了视频支持，使其更加灵活和现代化。修改过程保持了向后兼容性，原有的图片功能完全不受影响。</p><p>这个功能可以用于：</p><ul><li>展示产品演示视频</li><li>播放宣传片或介绍视频</li><li>展示动态内容或动画效果</li><li>提升网站的视觉吸引力</li></ul><p>希望这个教程对你有帮助！如果有任何问题，欢迎在评论区讨论。</p>]]></content>
      
      
      <categories>
          
          <category> 魔改教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 魔改教程 </tag>
            
            <tag> Solitude </tag>
            
            <tag> Hexo </tag>
            
            <tag> 前端开发 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
